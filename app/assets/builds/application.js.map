{
  "version": 3,
  "sources": ["../../../node_modules/@rails/actioncable/src/adapters.js", "../../../node_modules/@rails/actioncable/src/logger.js", "../../../node_modules/@rails/actioncable/src/connection_monitor.js", "../../../node_modules/@rails/actioncable/src/internal.js", "../../../node_modules/@rails/actioncable/src/connection.js", "../../../node_modules/@rails/actioncable/src/subscription.js", "../../../node_modules/@rails/actioncable/src/subscription_guarantor.js", "../../../node_modules/@rails/actioncable/src/subscriptions.js", "../../../node_modules/@rails/actioncable/src/consumer.js", "../../../node_modules/@rails/actioncable/src/index.js", "../../../node_modules/flatpickr/dist/l10n/zh-tw.js", "../../../node_modules/@hotwired/turbo/dist/turbo.es2017-esm.js", "../../../node_modules/@hotwired/turbo-rails/app/javascript/turbo/cable.js", "../../../node_modules/@hotwired/turbo-rails/app/javascript/turbo/snakeize.js", "../../../node_modules/@hotwired/turbo-rails/app/javascript/turbo/cable_stream_source_element.js", "../../../node_modules/@hotwired/turbo-rails/app/javascript/turbo/fetch_requests.js", "../../../node_modules/@hotwired/turbo-rails/app/javascript/turbo/index.js", "../../../node_modules/@hotwired/stimulus/dist/stimulus.js", "../../javascript/controllers/application.js", "../../../node_modules/flatpickr/dist/esm/types/options.js", "../../../node_modules/flatpickr/dist/esm/l10n/default.js", "../../../node_modules/flatpickr/dist/esm/utils/index.js", "../../../node_modules/flatpickr/dist/esm/utils/dom.js", "../../../node_modules/flatpickr/dist/esm/utils/formatting.js", "../../../node_modules/flatpickr/dist/esm/utils/dates.js", "../../../node_modules/flatpickr/dist/esm/utils/polyfills.js", "../../../node_modules/flatpickr/dist/esm/index.js", "../../javascript/controllers/admin_reservation_controller.js", "../../javascript/controllers/calendar_controller.js", "../../javascript/controllers/closure_dates_controller.js", "../../javascript/controllers/confirmation_controller.js", "../../javascript/controllers/daily_reservation_periods_controller.js", "../../javascript/controllers/dining_settings_controller.js", "../../javascript/controllers/dropdown_controller.js", "../../javascript/controllers/flash_controller.js", "../../javascript/controllers/form_validation_controller.js", "../../javascript/controllers/hello_controller.js", "../../javascript/controllers/modal_controller.js", "../../javascript/controllers/period_editor_controller.js", "../../javascript/controllers/reservation_calendar_controller.js", "../../javascript/controllers/reservation_controller.js", "../../javascript/controllers/reservation_form_controller.js", "../../javascript/controllers/reservation_policy_controller.js", "../../javascript/controllers/restaurant_info_controller.js", "../../javascript/controllers/restaurant_management_controller.js", "../../javascript/controllers/sidebar_controller.js", "../../../node_modules/sortablejs/modular/sortable.esm.js", "../../javascript/controllers/sortable_controller.js", "../../javascript/controllers/special_date_form_controller.js", "../../javascript/controllers/special_dates_controller.js", "../../javascript/controllers/turbo_modal_controller.js", "../../javascript/controllers/weekly_reservation_periods_controller.js", "../../javascript/controllers/operating_hours_controller.js", "../../javascript/controllers/operating_hour_row_controller.js", "../../javascript/controllers/admin_operating_hours_controller.js", "../../javascript/controllers/admin_operating_hour_row_controller.js", "../../javascript/controllers/index.js"],
  "sourcesContent": ["export default {\n  logger: typeof console !== \"undefined\" ? console : undefined,\n  WebSocket: typeof WebSocket !== \"undefined\" ? WebSocket : undefined,\n}\n", "import adapters from \"./adapters\"\n\n// The logger is disabled by default. You can enable it with:\n//\n//   ActionCable.logger.enabled = true\n//\n//   Example:\n//\n//   import * as ActionCable from '@rails/actioncable'\n//\n//   ActionCable.logger.enabled = true\n//   ActionCable.logger.log('Connection Established.')\n//\n\nexport default {\n  log(...messages) {\n    if (this.enabled) {\n      messages.push(Date.now())\n      adapters.logger.log(\"[ActionCable]\", ...messages)\n    }\n  },\n}\n", "import logger from \"./logger\"\n\n// Responsible for ensuring the cable connection is in good health by validating the heartbeat pings sent from the server, and attempting\n// revival reconnections if things go astray. Internal class, not intended for direct user manipulation.\n\nconst now = () => new Date().getTime()\n\nconst secondsSince = time => (now() - time) / 1000\n\nclass ConnectionMonitor {\n  constructor(connection) {\n    this.visibilityDidChange = this.visibilityDidChange.bind(this)\n    this.connection = connection\n    this.reconnectAttempts = 0\n  }\n\n  start() {\n    if (!this.isRunning()) {\n      this.startedAt = now()\n      delete this.stoppedAt\n      this.startPolling()\n      addEventListener(\"visibilitychange\", this.visibilityDidChange)\n      logger.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`)\n    }\n  }\n\n  stop() {\n    if (this.isRunning()) {\n      this.stoppedAt = now()\n      this.stopPolling()\n      removeEventListener(\"visibilitychange\", this.visibilityDidChange)\n      logger.log(\"ConnectionMonitor stopped\")\n    }\n  }\n\n  isRunning() {\n    return this.startedAt && !this.stoppedAt\n  }\n\n  recordMessage() {\n    this.pingedAt = now()\n  }\n\n  recordConnect() {\n    this.reconnectAttempts = 0\n    delete this.disconnectedAt\n    logger.log(\"ConnectionMonitor recorded connect\")\n  }\n\n  recordDisconnect() {\n    this.disconnectedAt = now()\n    logger.log(\"ConnectionMonitor recorded disconnect\")\n  }\n\n  // Private\n\n  startPolling() {\n    this.stopPolling()\n    this.poll()\n  }\n\n  stopPolling() {\n    clearTimeout(this.pollTimeout)\n  }\n\n  poll() {\n    this.pollTimeout = setTimeout(() => {\n      this.reconnectIfStale()\n      this.poll()\n    }\n    , this.getPollInterval())\n  }\n\n  getPollInterval() {\n    const { staleThreshold, reconnectionBackoffRate } = this.constructor\n    const backoff = Math.pow(1 + reconnectionBackoffRate, Math.min(this.reconnectAttempts, 10))\n    const jitterMax = this.reconnectAttempts === 0 ? 1.0 : reconnectionBackoffRate\n    const jitter = jitterMax * Math.random()\n    return staleThreshold * 1000 * backoff * (1 + jitter)\n  }\n\n  reconnectIfStale() {\n    if (this.connectionIsStale()) {\n      logger.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${secondsSince(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`)\n      this.reconnectAttempts++\n      if (this.disconnectedRecently()) {\n        logger.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${secondsSince(this.disconnectedAt)} s`)\n      } else {\n        logger.log(\"ConnectionMonitor reopening\")\n        this.connection.reopen()\n      }\n    }\n  }\n\n  get refreshedAt() {\n    return this.pingedAt ? this.pingedAt : this.startedAt\n  }\n\n  connectionIsStale() {\n    return secondsSince(this.refreshedAt) > this.constructor.staleThreshold\n  }\n\n  disconnectedRecently() {\n    return this.disconnectedAt && (secondsSince(this.disconnectedAt) < this.constructor.staleThreshold)\n  }\n\n  visibilityDidChange() {\n    if (document.visibilityState === \"visible\") {\n      setTimeout(() => {\n        if (this.connectionIsStale() || !this.connection.isOpen()) {\n          logger.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`)\n          this.connection.reopen()\n        }\n      }\n      , 200)\n    }\n  }\n\n}\n\nConnectionMonitor.staleThreshold = 6 // Server::Connections::BEAT_INTERVAL * 2 (missed two pings)\nConnectionMonitor.reconnectionBackoffRate = 0.15\n\nexport default ConnectionMonitor\n", "export default {\n  \"message_types\": {\n    \"welcome\": \"welcome\",\n    \"disconnect\": \"disconnect\",\n    \"ping\": \"ping\",\n    \"confirmation\": \"confirm_subscription\",\n    \"rejection\": \"reject_subscription\"\n  },\n  \"disconnect_reasons\": {\n    \"unauthorized\": \"unauthorized\",\n    \"invalid_request\": \"invalid_request\",\n    \"server_restart\": \"server_restart\",\n    \"remote\": \"remote\"\n  },\n  \"default_mount_path\": \"/cable\",\n  \"protocols\": [\n    \"actioncable-v1-json\",\n    \"actioncable-unsupported\"\n  ]\n}\n", "import adapters from \"./adapters\"\nimport ConnectionMonitor from \"./connection_monitor\"\nimport INTERNAL from \"./internal\"\nimport logger from \"./logger\"\n\n// Encapsulate the cable connection held by the consumer. This is an internal class not intended for direct user manipulation.\n\nconst {message_types, protocols} = INTERNAL\nconst supportedProtocols = protocols.slice(0, protocols.length - 1)\n\nconst indexOf = [].indexOf\n\nclass Connection {\n  constructor(consumer) {\n    this.open = this.open.bind(this)\n    this.consumer = consumer\n    this.subscriptions = this.consumer.subscriptions\n    this.monitor = new ConnectionMonitor(this)\n    this.disconnected = true\n  }\n\n  send(data) {\n    if (this.isOpen()) {\n      this.webSocket.send(JSON.stringify(data))\n      return true\n    } else {\n      return false\n    }\n  }\n\n  open() {\n    if (this.isActive()) {\n      logger.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`)\n      return false\n    } else {\n      const socketProtocols = [...protocols, ...this.consumer.subprotocols || []]\n      logger.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${socketProtocols}`)\n      if (this.webSocket) { this.uninstallEventHandlers() }\n      this.webSocket = new adapters.WebSocket(this.consumer.url, socketProtocols)\n      this.installEventHandlers()\n      this.monitor.start()\n      return true\n    }\n  }\n\n  close({allowReconnect} = {allowReconnect: true}) {\n    if (!allowReconnect) { this.monitor.stop() }\n    // Avoid closing websockets in a \"connecting\" state due to Safari 15.1+ bug. See: https://github.com/rails/rails/issues/43835#issuecomment-1002288478\n    if (this.isOpen()) {\n      return this.webSocket.close()\n    }\n  }\n\n  reopen() {\n    logger.log(`Reopening WebSocket, current state is ${this.getState()}`)\n    if (this.isActive()) {\n      try {\n        return this.close()\n      } catch (error) {\n        logger.log(\"Failed to reopen WebSocket\", error)\n      }\n      finally {\n        logger.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`)\n        setTimeout(this.open, this.constructor.reopenDelay)\n      }\n    } else {\n      return this.open()\n    }\n  }\n\n  getProtocol() {\n    if (this.webSocket) {\n      return this.webSocket.protocol\n    }\n  }\n\n  isOpen() {\n    return this.isState(\"open\")\n  }\n\n  isActive() {\n    return this.isState(\"open\", \"connecting\")\n  }\n\n  triedToReconnect() {\n    return this.monitor.reconnectAttempts > 0\n  }\n\n  // Private\n\n  isProtocolSupported() {\n    return indexOf.call(supportedProtocols, this.getProtocol()) >= 0\n  }\n\n  isState(...states) {\n    return indexOf.call(states, this.getState()) >= 0\n  }\n\n  getState() {\n    if (this.webSocket) {\n      for (let state in adapters.WebSocket) {\n        if (adapters.WebSocket[state] === this.webSocket.readyState) {\n          return state.toLowerCase()\n        }\n      }\n    }\n    return null\n  }\n\n  installEventHandlers() {\n    for (let eventName in this.events) {\n      const handler = this.events[eventName].bind(this)\n      this.webSocket[`on${eventName}`] = handler\n    }\n  }\n\n  uninstallEventHandlers() {\n    for (let eventName in this.events) {\n      this.webSocket[`on${eventName}`] = function() {}\n    }\n  }\n\n}\n\nConnection.reopenDelay = 500\n\nConnection.prototype.events = {\n  message(event) {\n    if (!this.isProtocolSupported()) { return }\n    const {identifier, message, reason, reconnect, type} = JSON.parse(event.data)\n    this.monitor.recordMessage()\n    switch (type) {\n      case message_types.welcome:\n        if (this.triedToReconnect()) {\n          this.reconnectAttempted = true\n        }\n        this.monitor.recordConnect()\n        return this.subscriptions.reload()\n      case message_types.disconnect:\n        logger.log(`Disconnecting. Reason: ${reason}`)\n        return this.close({allowReconnect: reconnect})\n      case message_types.ping:\n        return null\n      case message_types.confirmation:\n        this.subscriptions.confirmSubscription(identifier)\n        if (this.reconnectAttempted) {\n          this.reconnectAttempted = false\n          return this.subscriptions.notify(identifier, \"connected\", {reconnected: true})\n        } else {\n          return this.subscriptions.notify(identifier, \"connected\", {reconnected: false})\n        }\n      case message_types.rejection:\n        return this.subscriptions.reject(identifier)\n      default:\n        return this.subscriptions.notify(identifier, \"received\", message)\n    }\n  },\n\n  open() {\n    logger.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`)\n    this.disconnected = false\n    if (!this.isProtocolSupported()) {\n      logger.log(\"Protocol is unsupported. Stopping monitor and disconnecting.\")\n      return this.close({allowReconnect: false})\n    }\n  },\n\n  close(event) {\n    logger.log(\"WebSocket onclose event\")\n    if (this.disconnected) { return }\n    this.disconnected = true\n    this.monitor.recordDisconnect()\n    return this.subscriptions.notifyAll(\"disconnected\", {willAttemptReconnect: this.monitor.isRunning()})\n  },\n\n  error() {\n    logger.log(\"WebSocket onerror event\")\n  }\n}\n\nexport default Connection\n", "// A new subscription is created through the ActionCable.Subscriptions instance available on the consumer.\n// It provides a number of callbacks and a method for calling remote procedure calls on the corresponding\n// Channel instance on the server side.\n//\n// An example demonstrates the basic functionality:\n//\n//   App.appearance = App.cable.subscriptions.create(\"AppearanceChannel\", {\n//     connected() {\n//       // Called once the subscription has been successfully completed\n//     },\n//\n//     disconnected({ willAttemptReconnect: boolean }) {\n//       // Called when the client has disconnected with the server.\n//       // The object will have an `willAttemptReconnect` property which\n//       // says whether the client has the intention of attempting\n//       // to reconnect.\n//     },\n//\n//     appear() {\n//       this.perform('appear', {appearing_on: this.appearingOn()})\n//     },\n//\n//     away() {\n//       this.perform('away')\n//     },\n//\n//     appearingOn() {\n//       $('main').data('appearing-on')\n//     }\n//   })\n//\n// The methods #appear and #away forward their intent to the remote AppearanceChannel instance on the server\n// by calling the `perform` method with the first parameter being the action (which maps to AppearanceChannel#appear/away).\n// The second parameter is a hash that'll get JSON encoded and made available on the server in the data parameter.\n//\n// This is how the server component would look:\n//\n//   class AppearanceChannel < ApplicationActionCable::Channel\n//     def subscribed\n//       current_user.appear\n//     end\n//\n//     def unsubscribed\n//       current_user.disappear\n//     end\n//\n//     def appear(data)\n//       current_user.appear on: data['appearing_on']\n//     end\n//\n//     def away\n//       current_user.away\n//     end\n//   end\n//\n// The \"AppearanceChannel\" name is automatically mapped between the client-side subscription creation and the server-side Ruby class name.\n// The AppearanceChannel#appear/away public methods are exposed automatically to client-side invocation through the perform method.\n\nconst extend = function(object, properties) {\n  if (properties != null) {\n    for (let key in properties) {\n      const value = properties[key]\n      object[key] = value\n    }\n  }\n  return object\n}\n\nexport default class Subscription {\n  constructor(consumer, params = {}, mixin) {\n    this.consumer = consumer\n    this.identifier = JSON.stringify(params)\n    extend(this, mixin)\n  }\n\n  // Perform a channel action with the optional data passed as an attribute\n  perform(action, data = {}) {\n    data.action = action\n    return this.send(data)\n  }\n\n  send(data) {\n    return this.consumer.send({command: \"message\", identifier: this.identifier, data: JSON.stringify(data)})\n  }\n\n  unsubscribe() {\n    return this.consumer.subscriptions.remove(this)\n  }\n}\n", "import logger from \"./logger\"\n\n// Responsible for ensuring channel subscribe command is confirmed, retrying until confirmation is received.\n// Internal class, not intended for direct user manipulation.\n\nclass SubscriptionGuarantor {\n  constructor(subscriptions) {\n    this.subscriptions = subscriptions\n    this.pendingSubscriptions = []\n  }\n\n  guarantee(subscription) {\n    if(this.pendingSubscriptions.indexOf(subscription) == -1){ \n      logger.log(`SubscriptionGuarantor guaranteeing ${subscription.identifier}`)\n      this.pendingSubscriptions.push(subscription) \n    }\n    else {\n      logger.log(`SubscriptionGuarantor already guaranteeing ${subscription.identifier}`)\n    }\n    this.startGuaranteeing()\n  }\n\n  forget(subscription) {\n    logger.log(`SubscriptionGuarantor forgetting ${subscription.identifier}`)\n    this.pendingSubscriptions = (this.pendingSubscriptions.filter((s) => s !== subscription))\n  }\n\n  startGuaranteeing() {\n    this.stopGuaranteeing()\n    this.retrySubscribing()\n  }\n  \n  stopGuaranteeing() {\n    clearTimeout(this.retryTimeout)\n  }\n\n  retrySubscribing() {\n    this.retryTimeout = setTimeout(() => {\n      if (this.subscriptions && typeof(this.subscriptions.subscribe) === \"function\") {\n        this.pendingSubscriptions.map((subscription) => {\n          logger.log(`SubscriptionGuarantor resubscribing ${subscription.identifier}`)\n          this.subscriptions.subscribe(subscription)\n        })\n      }\n    }\n    , 500)\n  }\n}\n\nexport default SubscriptionGuarantor", "import Subscription from \"./subscription\"\nimport SubscriptionGuarantor from \"./subscription_guarantor\"\nimport logger from \"./logger\"\n\n// Collection class for creating (and internally managing) channel subscriptions.\n// The only method intended to be triggered by the user is ActionCable.Subscriptions#create,\n// and it should be called through the consumer like so:\n//\n//   App = {}\n//   App.cable = ActionCable.createConsumer(\"ws://example.com/accounts/1\")\n//   App.appearance = App.cable.subscriptions.create(\"AppearanceChannel\")\n//\n// For more details on how you'd configure an actual channel subscription, see ActionCable.Subscription.\n\nexport default class Subscriptions {\n  constructor(consumer) {\n    this.consumer = consumer\n    this.guarantor = new SubscriptionGuarantor(this)\n    this.subscriptions = []\n  }\n\n  create(channelName, mixin) {\n    const channel = channelName\n    const params = typeof channel === \"object\" ? channel : {channel}\n    const subscription = new Subscription(this.consumer, params, mixin)\n    return this.add(subscription)\n  }\n\n  // Private\n\n  add(subscription) {\n    this.subscriptions.push(subscription)\n    this.consumer.ensureActiveConnection()\n    this.notify(subscription, \"initialized\")\n    this.subscribe(subscription)\n    return subscription\n  }\n\n  remove(subscription) {\n    this.forget(subscription)\n    if (!this.findAll(subscription.identifier).length) {\n      this.sendCommand(subscription, \"unsubscribe\")\n    }\n    return subscription\n  }\n\n  reject(identifier) {\n    return this.findAll(identifier).map((subscription) => {\n      this.forget(subscription)\n      this.notify(subscription, \"rejected\")\n      return subscription\n    })\n  }\n\n  forget(subscription) {\n    this.guarantor.forget(subscription)\n    this.subscriptions = (this.subscriptions.filter((s) => s !== subscription))\n    return subscription\n  }\n\n  findAll(identifier) {\n    return this.subscriptions.filter((s) => s.identifier === identifier)\n  }\n\n  reload() {\n    return this.subscriptions.map((subscription) =>\n      this.subscribe(subscription))\n  }\n\n  notifyAll(callbackName, ...args) {\n    return this.subscriptions.map((subscription) =>\n      this.notify(subscription, callbackName, ...args))\n  }\n\n  notify(subscription, callbackName, ...args) {\n    let subscriptions\n    if (typeof subscription === \"string\") {\n      subscriptions = this.findAll(subscription)\n    } else {\n      subscriptions = [subscription]\n    }\n\n    return subscriptions.map((subscription) =>\n      (typeof subscription[callbackName] === \"function\" ? subscription[callbackName](...args) : undefined))\n  }\n\n  subscribe(subscription) {\n    if (this.sendCommand(subscription, \"subscribe\")) {\n      this.guarantor.guarantee(subscription)\n    }\n  }\n\n  confirmSubscription(identifier) {\n    logger.log(`Subscription confirmed ${identifier}`)\n    this.findAll(identifier).map((subscription) =>\n      this.guarantor.forget(subscription))\n  }\n\n  sendCommand(subscription, command) {\n    const {identifier} = subscription\n    return this.consumer.send({command, identifier})\n  }\n}\n", "import Connection from \"./connection\"\nimport Subscriptions from \"./subscriptions\"\n\n// The ActionCable.Consumer establishes the connection to a server-side Ruby Connection object. Once established,\n// the ActionCable.ConnectionMonitor will ensure that its properly maintained through heartbeats and checking for stale updates.\n// The Consumer instance is also the gateway to establishing subscriptions to desired channels through the #createSubscription\n// method.\n//\n// The following example shows how this can be set up:\n//\n//   App = {}\n//   App.cable = ActionCable.createConsumer(\"ws://example.com/accounts/1\")\n//   App.appearance = App.cable.subscriptions.create(\"AppearanceChannel\")\n//\n// For more details on how you'd configure an actual channel subscription, see ActionCable.Subscription.\n//\n// When a consumer is created, it automatically connects with the server.\n//\n// To disconnect from the server, call\n//\n//   App.cable.disconnect()\n//\n// and to restart the connection:\n//\n//   App.cable.connect()\n//\n// Any channel subscriptions which existed prior to disconnecting will\n// automatically resubscribe.\n\nexport default class Consumer {\n  constructor(url) {\n    this._url = url\n    this.subscriptions = new Subscriptions(this)\n    this.connection = new Connection(this)\n    this.subprotocols = []\n  }\n\n  get url() {\n    return createWebSocketURL(this._url)\n  }\n\n  send(data) {\n    return this.connection.send(data)\n  }\n\n  connect() {\n    return this.connection.open()\n  }\n\n  disconnect() {\n    return this.connection.close({allowReconnect: false})\n  }\n\n  ensureActiveConnection() {\n    if (!this.connection.isActive()) {\n      return this.connection.open()\n    }\n  }\n\n  addSubProtocol(subprotocol) {\n    this.subprotocols = [...this.subprotocols, subprotocol]\n  }\n}\n\nexport function createWebSocketURL(url) {\n  if (typeof url === \"function\") {\n    url = url()\n  }\n\n  if (url && !/^wss?:/i.test(url)) {\n    const a = document.createElement(\"a\")\n    a.href = url\n    // Fix populating Location properties in IE. Otherwise, protocol will be blank.\n    a.href = a.href\n    a.protocol = a.protocol.replace(\"http\", \"ws\")\n    return a.href\n  } else {\n    return url\n  }\n}\n", "import Connection from \"./connection\"\nimport ConnectionMonitor from \"./connection_monitor\"\nimport Consumer, { createWebSocketURL } from \"./consumer\"\nimport INTERNAL from \"./internal\"\nimport Subscription from \"./subscription\"\nimport Subscriptions from \"./subscriptions\"\nimport SubscriptionGuarantor from \"./subscription_guarantor\"\nimport adapters from \"./adapters\"\nimport logger from \"./logger\"\n\nexport {\n  Connection,\n  ConnectionMonitor,\n  Consumer,\n  INTERNAL,\n  Subscription,\n  Subscriptions,\n  SubscriptionGuarantor,\n  adapters,\n  createWebSocketURL,\n  logger,\n}\n\nexport function createConsumer(url = getConfig(\"url\") || INTERNAL.default_mount_path) {\n  return new Consumer(url)\n}\n\nexport function getConfig(name) {\n  const element = document.head.querySelector(`meta[name='action-cable-${name}']`)\n  if (element) {\n    return element.getAttribute(\"content\")\n  }\n}\n", "(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global['zh-tw'] = {}));\n}(this, (function (exports) { 'use strict';\n\n  var fp = typeof window !== \"undefined\" && window.flatpickr !== undefined\n      ? window.flatpickr\n      : {\n          l10ns: {},\n      };\n  var MandarinTraditional = {\n      weekdays: {\n          shorthand: [\"\u9031\u65E5\", \"\u9031\u4E00\", \"\u9031\u4E8C\", \"\u9031\u4E09\", \"\u9031\u56DB\", \"\u9031\u4E94\", \"\u9031\u516D\"],\n          longhand: [\n              \"\u661F\u671F\u65E5\",\n              \"\u661F\u671F\u4E00\",\n              \"\u661F\u671F\u4E8C\",\n              \"\u661F\u671F\u4E09\",\n              \"\u661F\u671F\u56DB\",\n              \"\u661F\u671F\u4E94\",\n              \"\u661F\u671F\u516D\",\n          ],\n      },\n      months: {\n          shorthand: [\n              \"\u4E00\u6708\",\n              \"\u4E8C\u6708\",\n              \"\u4E09\u6708\",\n              \"\u56DB\u6708\",\n              \"\u4E94\u6708\",\n              \"\u516D\u6708\",\n              \"\u4E03\u6708\",\n              \"\u516B\u6708\",\n              \"\u4E5D\u6708\",\n              \"\u5341\u6708\",\n              \"\u5341\u4E00\u6708\",\n              \"\u5341\u4E8C\u6708\",\n          ],\n          longhand: [\n              \"\u4E00\u6708\",\n              \"\u4E8C\u6708\",\n              \"\u4E09\u6708\",\n              \"\u56DB\u6708\",\n              \"\u4E94\u6708\",\n              \"\u516D\u6708\",\n              \"\u4E03\u6708\",\n              \"\u516B\u6708\",\n              \"\u4E5D\u6708\",\n              \"\u5341\u6708\",\n              \"\u5341\u4E00\u6708\",\n              \"\u5341\u4E8C\u6708\",\n          ],\n      },\n      rangeSeparator: \" \u81F3 \",\n      weekAbbreviation: \"\u9031\",\n      scrollTitle: \"\u6EFE\u52D5\u5207\u63DB\",\n      toggleTitle: \"\u9EDE\u64CA\u5207\u63DB 12/24 \u5C0F\u6642\u6642\u5236\",\n  };\n  fp.l10ns.zh_tw = MandarinTraditional;\n  var zhTw = fp.l10ns;\n\n  exports.MandarinTraditional = MandarinTraditional;\n  exports.default = zhTw;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n", "/*!\nTurbo 8.0.13\nCopyright \u00A9 2025 37signals LLC\n */\n/**\n * The MIT License (MIT)\n *\n * Copyright (c) 2019 Javan Makhmali\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n(function (prototype) {\n  if (typeof prototype.requestSubmit == \"function\") return\n\n  prototype.requestSubmit = function (submitter) {\n    if (submitter) {\n      validateSubmitter(submitter, this);\n      submitter.click();\n    } else {\n      submitter = document.createElement(\"input\");\n      submitter.type = \"submit\";\n      submitter.hidden = true;\n      this.appendChild(submitter);\n      submitter.click();\n      this.removeChild(submitter);\n    }\n  };\n\n  function validateSubmitter(submitter, form) {\n    submitter instanceof HTMLElement || raise(TypeError, \"parameter 1 is not of type 'HTMLElement'\");\n    submitter.type == \"submit\" || raise(TypeError, \"The specified element is not a submit button\");\n    submitter.form == form ||\n      raise(DOMException, \"The specified element is not owned by this form element\", \"NotFoundError\");\n  }\n\n  function raise(errorConstructor, message, name) {\n    throw new errorConstructor(\"Failed to execute 'requestSubmit' on 'HTMLFormElement': \" + message + \".\", name)\n  }\n})(HTMLFormElement.prototype);\n\nconst submittersByForm = new WeakMap();\n\nfunction findSubmitterFromClickTarget(target) {\n  const element = target instanceof Element ? target : target instanceof Node ? target.parentElement : null;\n  const candidate = element ? element.closest(\"input, button\") : null;\n  return candidate?.type == \"submit\" ? candidate : null\n}\n\nfunction clickCaptured(event) {\n  const submitter = findSubmitterFromClickTarget(event.target);\n\n  if (submitter && submitter.form) {\n    submittersByForm.set(submitter.form, submitter);\n  }\n}\n\n(function () {\n  if (\"submitter\" in Event.prototype) return\n\n  let prototype = window.Event.prototype;\n  // Certain versions of Safari 15 have a bug where they won't\n  // populate the submitter. This hurts TurboDrive's enable/disable detection.\n  // See https://bugs.webkit.org/show_bug.cgi?id=229660\n  if (\"SubmitEvent\" in window) {\n    const prototypeOfSubmitEvent = window.SubmitEvent.prototype;\n\n    if (/Apple Computer/.test(navigator.vendor) && !(\"submitter\" in prototypeOfSubmitEvent)) {\n      prototype = prototypeOfSubmitEvent;\n    } else {\n      return // polyfill not needed\n    }\n  }\n\n  addEventListener(\"click\", clickCaptured, true);\n\n  Object.defineProperty(prototype, \"submitter\", {\n    get() {\n      if (this.type == \"submit\" && this.target instanceof HTMLFormElement) {\n        return submittersByForm.get(this.target)\n      }\n    }\n  });\n})();\n\nconst FrameLoadingStyle = {\n  eager: \"eager\",\n  lazy: \"lazy\"\n};\n\n/**\n * Contains a fragment of HTML which is updated based on navigation within\n * it (e.g. via links or form submissions).\n *\n * @customElement turbo-frame\n * @example\n *   <turbo-frame id=\"messages\">\n *     <a href=\"/messages/expanded\">\n *       Show all expanded messages in this frame.\n *     </a>\n *\n *     <form action=\"/messages\">\n *       Show response from this form within this frame.\n *     </form>\n *   </turbo-frame>\n */\nclass FrameElement extends HTMLElement {\n  static delegateConstructor = undefined\n\n  loaded = Promise.resolve()\n\n  static get observedAttributes() {\n    return [\"disabled\", \"loading\", \"src\"]\n  }\n\n  constructor() {\n    super();\n    this.delegate = new FrameElement.delegateConstructor(this);\n  }\n\n  connectedCallback() {\n    this.delegate.connect();\n  }\n\n  disconnectedCallback() {\n    this.delegate.disconnect();\n  }\n\n  reload() {\n    return this.delegate.sourceURLReloaded()\n  }\n\n  attributeChangedCallback(name) {\n    if (name == \"loading\") {\n      this.delegate.loadingStyleChanged();\n    } else if (name == \"src\") {\n      this.delegate.sourceURLChanged();\n    } else if (name == \"disabled\") {\n      this.delegate.disabledChanged();\n    }\n  }\n\n  /**\n   * Gets the URL to lazily load source HTML from\n   */\n  get src() {\n    return this.getAttribute(\"src\")\n  }\n\n  /**\n   * Sets the URL to lazily load source HTML from\n   */\n  set src(value) {\n    if (value) {\n      this.setAttribute(\"src\", value);\n    } else {\n      this.removeAttribute(\"src\");\n    }\n  }\n\n  /**\n   * Gets the refresh mode for the frame.\n   */\n  get refresh() {\n    return this.getAttribute(\"refresh\")\n  }\n\n  /**\n   * Sets the refresh mode for the frame.\n   */\n  set refresh(value) {\n    if (value) {\n      this.setAttribute(\"refresh\", value);\n    } else {\n      this.removeAttribute(\"refresh\");\n    }\n  }\n\n  get shouldReloadWithMorph() {\n    return this.src && this.refresh === \"morph\"\n  }\n\n  /**\n   * Determines if the element is loading\n   */\n  get loading() {\n    return frameLoadingStyleFromString(this.getAttribute(\"loading\") || \"\")\n  }\n\n  /**\n   * Sets the value of if the element is loading\n   */\n  set loading(value) {\n    if (value) {\n      this.setAttribute(\"loading\", value);\n    } else {\n      this.removeAttribute(\"loading\");\n    }\n  }\n\n  /**\n   * Gets the disabled state of the frame.\n   *\n   * If disabled, no requests will be intercepted by the frame.\n   */\n  get disabled() {\n    return this.hasAttribute(\"disabled\")\n  }\n\n  /**\n   * Sets the disabled state of the frame.\n   *\n   * If disabled, no requests will be intercepted by the frame.\n   */\n  set disabled(value) {\n    if (value) {\n      this.setAttribute(\"disabled\", \"\");\n    } else {\n      this.removeAttribute(\"disabled\");\n    }\n  }\n\n  /**\n   * Gets the autoscroll state of the frame.\n   *\n   * If true, the frame will be scrolled into view automatically on update.\n   */\n  get autoscroll() {\n    return this.hasAttribute(\"autoscroll\")\n  }\n\n  /**\n   * Sets the autoscroll state of the frame.\n   *\n   * If true, the frame will be scrolled into view automatically on update.\n   */\n  set autoscroll(value) {\n    if (value) {\n      this.setAttribute(\"autoscroll\", \"\");\n    } else {\n      this.removeAttribute(\"autoscroll\");\n    }\n  }\n\n  /**\n   * Determines if the element has finished loading\n   */\n  get complete() {\n    return !this.delegate.isLoading\n  }\n\n  /**\n   * Gets the active state of the frame.\n   *\n   * If inactive, source changes will not be observed.\n   */\n  get isActive() {\n    return this.ownerDocument === document && !this.isPreview\n  }\n\n  /**\n   * Sets the active state of the frame.\n   *\n   * If inactive, source changes will not be observed.\n   */\n  get isPreview() {\n    return this.ownerDocument?.documentElement?.hasAttribute(\"data-turbo-preview\")\n  }\n}\n\nfunction frameLoadingStyleFromString(style) {\n  switch (style.toLowerCase()) {\n    case \"lazy\":\n      return FrameLoadingStyle.lazy\n    default:\n      return FrameLoadingStyle.eager\n  }\n}\n\nconst drive = {\n  enabled: true,\n  progressBarDelay: 500,\n  unvisitableExtensions: new Set(\n    [\n      \".7z\", \".aac\", \".apk\", \".avi\", \".bmp\", \".bz2\", \".css\", \".csv\", \".deb\", \".dmg\", \".doc\",\n      \".docx\", \".exe\", \".gif\", \".gz\", \".heic\", \".heif\", \".ico\", \".iso\", \".jpeg\", \".jpg\",\n      \".js\", \".json\", \".m4a\", \".mkv\", \".mov\", \".mp3\", \".mp4\", \".mpeg\", \".mpg\", \".msi\",\n      \".ogg\", \".ogv\", \".pdf\", \".pkg\", \".png\", \".ppt\", \".pptx\", \".rar\", \".rtf\",\n      \".svg\", \".tar\", \".tif\", \".tiff\", \".txt\", \".wav\", \".webm\", \".webp\", \".wma\", \".wmv\",\n      \".xls\", \".xlsx\", \".xml\", \".zip\"\n    ]\n  )\n};\n\nfunction activateScriptElement(element) {\n  if (element.getAttribute(\"data-turbo-eval\") == \"false\") {\n    return element\n  } else {\n    const createdScriptElement = document.createElement(\"script\");\n    const cspNonce = getCspNonce();\n    if (cspNonce) {\n      createdScriptElement.nonce = cspNonce;\n    }\n    createdScriptElement.textContent = element.textContent;\n    createdScriptElement.async = false;\n    copyElementAttributes(createdScriptElement, element);\n    return createdScriptElement\n  }\n}\n\nfunction copyElementAttributes(destinationElement, sourceElement) {\n  for (const { name, value } of sourceElement.attributes) {\n    destinationElement.setAttribute(name, value);\n  }\n}\n\nfunction createDocumentFragment(html) {\n  const template = document.createElement(\"template\");\n  template.innerHTML = html;\n  return template.content\n}\n\nfunction dispatch(eventName, { target, cancelable, detail } = {}) {\n  const event = new CustomEvent(eventName, {\n    cancelable,\n    bubbles: true,\n    composed: true,\n    detail\n  });\n\n  if (target && target.isConnected) {\n    target.dispatchEvent(event);\n  } else {\n    document.documentElement.dispatchEvent(event);\n  }\n\n  return event\n}\n\nfunction cancelEvent(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n\nfunction nextRepaint() {\n  if (document.visibilityState === \"hidden\") {\n    return nextEventLoopTick()\n  } else {\n    return nextAnimationFrame()\n  }\n}\n\nfunction nextAnimationFrame() {\n  return new Promise((resolve) => requestAnimationFrame(() => resolve()))\n}\n\nfunction nextEventLoopTick() {\n  return new Promise((resolve) => setTimeout(() => resolve(), 0))\n}\n\nfunction nextMicrotask() {\n  return Promise.resolve()\n}\n\nfunction parseHTMLDocument(html = \"\") {\n  return new DOMParser().parseFromString(html, \"text/html\")\n}\n\nfunction unindent(strings, ...values) {\n  const lines = interpolate(strings, values).replace(/^\\n/, \"\").split(\"\\n\");\n  const match = lines[0].match(/^\\s+/);\n  const indent = match ? match[0].length : 0;\n  return lines.map((line) => line.slice(indent)).join(\"\\n\")\n}\n\nfunction interpolate(strings, values) {\n  return strings.reduce((result, string, i) => {\n    const value = values[i] == undefined ? \"\" : values[i];\n    return result + string + value\n  }, \"\")\n}\n\nfunction uuid() {\n  return Array.from({ length: 36 })\n    .map((_, i) => {\n      if (i == 8 || i == 13 || i == 18 || i == 23) {\n        return \"-\"\n      } else if (i == 14) {\n        return \"4\"\n      } else if (i == 19) {\n        return (Math.floor(Math.random() * 4) + 8).toString(16)\n      } else {\n        return Math.floor(Math.random() * 15).toString(16)\n      }\n    })\n    .join(\"\")\n}\n\nfunction getAttribute(attributeName, ...elements) {\n  for (const value of elements.map((element) => element?.getAttribute(attributeName))) {\n    if (typeof value == \"string\") return value\n  }\n\n  return null\n}\n\nfunction hasAttribute(attributeName, ...elements) {\n  return elements.some((element) => element && element.hasAttribute(attributeName))\n}\n\nfunction markAsBusy(...elements) {\n  for (const element of elements) {\n    if (element.localName == \"turbo-frame\") {\n      element.setAttribute(\"busy\", \"\");\n    }\n    element.setAttribute(\"aria-busy\", \"true\");\n  }\n}\n\nfunction clearBusyState(...elements) {\n  for (const element of elements) {\n    if (element.localName == \"turbo-frame\") {\n      element.removeAttribute(\"busy\");\n    }\n\n    element.removeAttribute(\"aria-busy\");\n  }\n}\n\nfunction waitForLoad(element, timeoutInMilliseconds = 2000) {\n  return new Promise((resolve) => {\n    const onComplete = () => {\n      element.removeEventListener(\"error\", onComplete);\n      element.removeEventListener(\"load\", onComplete);\n      resolve();\n    };\n\n    element.addEventListener(\"load\", onComplete, { once: true });\n    element.addEventListener(\"error\", onComplete, { once: true });\n    setTimeout(resolve, timeoutInMilliseconds);\n  })\n}\n\nfunction getHistoryMethodForAction(action) {\n  switch (action) {\n    case \"replace\":\n      return history.replaceState\n    case \"advance\":\n    case \"restore\":\n      return history.pushState\n  }\n}\n\nfunction isAction(action) {\n  return action == \"advance\" || action == \"replace\" || action == \"restore\"\n}\n\nfunction getVisitAction(...elements) {\n  const action = getAttribute(\"data-turbo-action\", ...elements);\n\n  return isAction(action) ? action : null\n}\n\nfunction getMetaElement(name) {\n  return document.querySelector(`meta[name=\"${name}\"]`)\n}\n\nfunction getMetaContent(name) {\n  const element = getMetaElement(name);\n  return element && element.content\n}\n\nfunction getCspNonce() {\n  const element = getMetaElement(\"csp-nonce\");\n\n  if (element) {\n    const { nonce, content } = element;\n    return nonce == \"\" ? content : nonce\n  }\n}\n\nfunction setMetaContent(name, content) {\n  let element = getMetaElement(name);\n\n  if (!element) {\n    element = document.createElement(\"meta\");\n    element.setAttribute(\"name\", name);\n\n    document.head.appendChild(element);\n  }\n\n  element.setAttribute(\"content\", content);\n\n  return element\n}\n\nfunction findClosestRecursively(element, selector) {\n  if (element instanceof Element) {\n    return (\n      element.closest(selector) || findClosestRecursively(element.assignedSlot || element.getRootNode()?.host, selector)\n    )\n  }\n}\n\nfunction elementIsFocusable(element) {\n  const inertDisabledOrHidden = \"[inert], :disabled, [hidden], details:not([open]), dialog:not([open])\";\n\n  return !!element && element.closest(inertDisabledOrHidden) == null && typeof element.focus == \"function\"\n}\n\nfunction queryAutofocusableElement(elementOrDocumentFragment) {\n  return Array.from(elementOrDocumentFragment.querySelectorAll(\"[autofocus]\")).find(elementIsFocusable)\n}\n\nasync function around(callback, reader) {\n  const before = reader();\n\n  callback();\n\n  await nextAnimationFrame();\n\n  const after = reader();\n\n  return [before, after]\n}\n\nfunction doesNotTargetIFrame(name) {\n  if (name === \"_blank\") {\n    return false\n  } else if (name) {\n    for (const element of document.getElementsByName(name)) {\n      if (element instanceof HTMLIFrameElement) return false\n    }\n\n    return true\n  } else {\n    return true\n  }\n}\n\nfunction findLinkFromClickTarget(target) {\n  return findClosestRecursively(target, \"a[href]:not([target^=_]):not([download])\")\n}\n\nfunction getLocationForLink(link) {\n  return expandURL(link.getAttribute(\"href\") || \"\")\n}\n\nfunction debounce(fn, delay) {\n  let timeoutId = null;\n\n  return (...args) => {\n    const callback = () => fn.apply(this, args);\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(callback, delay);\n  }\n}\n\nconst submitter = {\n  \"aria-disabled\": {\n    beforeSubmit: submitter => {\n      submitter.setAttribute(\"aria-disabled\", \"true\");\n      submitter.addEventListener(\"click\", cancelEvent);\n    },\n\n    afterSubmit: submitter => {\n      submitter.removeAttribute(\"aria-disabled\");\n      submitter.removeEventListener(\"click\", cancelEvent);\n    }\n  },\n\n  \"disabled\": {\n    beforeSubmit: submitter => submitter.disabled = true,\n    afterSubmit: submitter => submitter.disabled = false\n  }\n};\n\nclass Config {\n  #submitter = null\n\n  constructor(config) {\n    Object.assign(this, config);\n  }\n\n  get submitter() {\n    return this.#submitter\n  }\n\n  set submitter(value) {\n    this.#submitter = submitter[value] || value;\n  }\n}\n\nconst forms = new Config({\n  mode: \"on\",\n  submitter: \"disabled\"\n});\n\nconst config = {\n  drive,\n  forms\n};\n\nfunction expandURL(locatable) {\n  return new URL(locatable.toString(), document.baseURI)\n}\n\nfunction getAnchor(url) {\n  let anchorMatch;\n  if (url.hash) {\n    return url.hash.slice(1)\n    // eslint-disable-next-line no-cond-assign\n  } else if ((anchorMatch = url.href.match(/#(.*)$/))) {\n    return anchorMatch[1]\n  }\n}\n\nfunction getAction$1(form, submitter) {\n  const action = submitter?.getAttribute(\"formaction\") || form.getAttribute(\"action\") || form.action;\n\n  return expandURL(action)\n}\n\nfunction getExtension(url) {\n  return (getLastPathComponent(url).match(/\\.[^.]*$/) || [])[0] || \"\"\n}\n\nfunction isPrefixedBy(baseURL, url) {\n  const prefix = getPrefix(url);\n  return baseURL.href === expandURL(prefix).href || baseURL.href.startsWith(prefix)\n}\n\nfunction locationIsVisitable(location, rootLocation) {\n  return isPrefixedBy(location, rootLocation) && !config.drive.unvisitableExtensions.has(getExtension(location))\n}\n\nfunction getRequestURL(url) {\n  const anchor = getAnchor(url);\n  return anchor != null ? url.href.slice(0, -(anchor.length + 1)) : url.href\n}\n\nfunction toCacheKey(url) {\n  return getRequestURL(url)\n}\n\nfunction urlsAreEqual(left, right) {\n  return expandURL(left).href == expandURL(right).href\n}\n\nfunction getPathComponents(url) {\n  return url.pathname.split(\"/\").slice(1)\n}\n\nfunction getLastPathComponent(url) {\n  return getPathComponents(url).slice(-1)[0]\n}\n\nfunction getPrefix(url) {\n  return addTrailingSlash(url.origin + url.pathname)\n}\n\nfunction addTrailingSlash(value) {\n  return value.endsWith(\"/\") ? value : value + \"/\"\n}\n\nclass FetchResponse {\n  constructor(response) {\n    this.response = response;\n  }\n\n  get succeeded() {\n    return this.response.ok\n  }\n\n  get failed() {\n    return !this.succeeded\n  }\n\n  get clientError() {\n    return this.statusCode >= 400 && this.statusCode <= 499\n  }\n\n  get serverError() {\n    return this.statusCode >= 500 && this.statusCode <= 599\n  }\n\n  get redirected() {\n    return this.response.redirected\n  }\n\n  get location() {\n    return expandURL(this.response.url)\n  }\n\n  get isHTML() {\n    return this.contentType && this.contentType.match(/^(?:text\\/([^\\s;,]+\\b)?html|application\\/xhtml\\+xml)\\b/)\n  }\n\n  get statusCode() {\n    return this.response.status\n  }\n\n  get contentType() {\n    return this.header(\"Content-Type\")\n  }\n\n  get responseText() {\n    return this.response.clone().text()\n  }\n\n  get responseHTML() {\n    if (this.isHTML) {\n      return this.response.clone().text()\n    } else {\n      return Promise.resolve(undefined)\n    }\n  }\n\n  header(name) {\n    return this.response.headers.get(name)\n  }\n}\n\nclass LimitedSet extends Set {\n  constructor(maxSize) {\n    super();\n    this.maxSize = maxSize;\n  }\n\n  add(value) {\n    if (this.size >= this.maxSize) {\n      const iterator = this.values();\n      const oldestValue = iterator.next().value;\n      this.delete(oldestValue);\n    }\n    super.add(value);\n  }\n}\n\nconst recentRequests = new LimitedSet(20);\n\nconst nativeFetch = window.fetch;\n\nfunction fetchWithTurboHeaders(url, options = {}) {\n  const modifiedHeaders = new Headers(options.headers || {});\n  const requestUID = uuid();\n  recentRequests.add(requestUID);\n  modifiedHeaders.append(\"X-Turbo-Request-Id\", requestUID);\n\n  return nativeFetch(url, {\n    ...options,\n    headers: modifiedHeaders\n  })\n}\n\nfunction fetchMethodFromString(method) {\n  switch (method.toLowerCase()) {\n    case \"get\":\n      return FetchMethod.get\n    case \"post\":\n      return FetchMethod.post\n    case \"put\":\n      return FetchMethod.put\n    case \"patch\":\n      return FetchMethod.patch\n    case \"delete\":\n      return FetchMethod.delete\n  }\n}\n\nconst FetchMethod = {\n  get: \"get\",\n  post: \"post\",\n  put: \"put\",\n  patch: \"patch\",\n  delete: \"delete\"\n};\n\nfunction fetchEnctypeFromString(encoding) {\n  switch (encoding.toLowerCase()) {\n    case FetchEnctype.multipart:\n      return FetchEnctype.multipart\n    case FetchEnctype.plain:\n      return FetchEnctype.plain\n    default:\n      return FetchEnctype.urlEncoded\n  }\n}\n\nconst FetchEnctype = {\n  urlEncoded: \"application/x-www-form-urlencoded\",\n  multipart: \"multipart/form-data\",\n  plain: \"text/plain\"\n};\n\nclass FetchRequest {\n  abortController = new AbortController()\n  #resolveRequestPromise = (_value) => {}\n\n  constructor(delegate, method, location, requestBody = new URLSearchParams(), target = null, enctype = FetchEnctype.urlEncoded) {\n    const [url, body] = buildResourceAndBody(expandURL(location), method, requestBody, enctype);\n\n    this.delegate = delegate;\n    this.url = url;\n    this.target = target;\n    this.fetchOptions = {\n      credentials: \"same-origin\",\n      redirect: \"follow\",\n      method: method.toUpperCase(),\n      headers: { ...this.defaultHeaders },\n      body: body,\n      signal: this.abortSignal,\n      referrer: this.delegate.referrer?.href\n    };\n    this.enctype = enctype;\n  }\n\n  get method() {\n    return this.fetchOptions.method\n  }\n\n  set method(value) {\n    const fetchBody = this.isSafe ? this.url.searchParams : this.fetchOptions.body || new FormData();\n    const fetchMethod = fetchMethodFromString(value) || FetchMethod.get;\n\n    this.url.search = \"\";\n\n    const [url, body] = buildResourceAndBody(this.url, fetchMethod, fetchBody, this.enctype);\n\n    this.url = url;\n    this.fetchOptions.body = body;\n    this.fetchOptions.method = fetchMethod.toUpperCase();\n  }\n\n  get headers() {\n    return this.fetchOptions.headers\n  }\n\n  set headers(value) {\n    this.fetchOptions.headers = value;\n  }\n\n  get body() {\n    if (this.isSafe) {\n      return this.url.searchParams\n    } else {\n      return this.fetchOptions.body\n    }\n  }\n\n  set body(value) {\n    this.fetchOptions.body = value;\n  }\n\n  get location() {\n    return this.url\n  }\n\n  get params() {\n    return this.url.searchParams\n  }\n\n  get entries() {\n    return this.body ? Array.from(this.body.entries()) : []\n  }\n\n  cancel() {\n    this.abortController.abort();\n  }\n\n  async perform() {\n    const { fetchOptions } = this;\n    this.delegate.prepareRequest(this);\n    const event = await this.#allowRequestToBeIntercepted(fetchOptions);\n    try {\n      this.delegate.requestStarted(this);\n\n      if (event.detail.fetchRequest) {\n        this.response = event.detail.fetchRequest.response;\n      } else {\n        this.response = fetchWithTurboHeaders(this.url.href, fetchOptions);\n      }\n\n      const response = await this.response;\n      return await this.receive(response)\n    } catch (error) {\n      if (error.name !== \"AbortError\") {\n        if (this.#willDelegateErrorHandling(error)) {\n          this.delegate.requestErrored(this, error);\n        }\n        throw error\n      }\n    } finally {\n      this.delegate.requestFinished(this);\n    }\n  }\n\n  async receive(response) {\n    const fetchResponse = new FetchResponse(response);\n    const event = dispatch(\"turbo:before-fetch-response\", {\n      cancelable: true,\n      detail: { fetchResponse },\n      target: this.target\n    });\n    if (event.defaultPrevented) {\n      this.delegate.requestPreventedHandlingResponse(this, fetchResponse);\n    } else if (fetchResponse.succeeded) {\n      this.delegate.requestSucceededWithResponse(this, fetchResponse);\n    } else {\n      this.delegate.requestFailedWithResponse(this, fetchResponse);\n    }\n    return fetchResponse\n  }\n\n  get defaultHeaders() {\n    return {\n      Accept: \"text/html, application/xhtml+xml\"\n    }\n  }\n\n  get isSafe() {\n    return isSafe(this.method)\n  }\n\n  get abortSignal() {\n    return this.abortController.signal\n  }\n\n  acceptResponseType(mimeType) {\n    this.headers[\"Accept\"] = [mimeType, this.headers[\"Accept\"]].join(\", \");\n  }\n\n  async #allowRequestToBeIntercepted(fetchOptions) {\n    const requestInterception = new Promise((resolve) => (this.#resolveRequestPromise = resolve));\n    const event = dispatch(\"turbo:before-fetch-request\", {\n      cancelable: true,\n      detail: {\n        fetchOptions,\n        url: this.url,\n        resume: this.#resolveRequestPromise\n      },\n      target: this.target\n    });\n    this.url = event.detail.url;\n    if (event.defaultPrevented) await requestInterception;\n\n    return event\n  }\n\n  #willDelegateErrorHandling(error) {\n    const event = dispatch(\"turbo:fetch-request-error\", {\n      target: this.target,\n      cancelable: true,\n      detail: { request: this, error: error }\n    });\n\n    return !event.defaultPrevented\n  }\n}\n\nfunction isSafe(fetchMethod) {\n  return fetchMethodFromString(fetchMethod) == FetchMethod.get\n}\n\nfunction buildResourceAndBody(resource, method, requestBody, enctype) {\n  const searchParams =\n    Array.from(requestBody).length > 0 ? new URLSearchParams(entriesExcludingFiles(requestBody)) : resource.searchParams;\n\n  if (isSafe(method)) {\n    return [mergeIntoURLSearchParams(resource, searchParams), null]\n  } else if (enctype == FetchEnctype.urlEncoded) {\n    return [resource, searchParams]\n  } else {\n    return [resource, requestBody]\n  }\n}\n\nfunction entriesExcludingFiles(requestBody) {\n  const entries = [];\n\n  for (const [name, value] of requestBody) {\n    if (value instanceof File) continue\n    else entries.push([name, value]);\n  }\n\n  return entries\n}\n\nfunction mergeIntoURLSearchParams(url, requestBody) {\n  const searchParams = new URLSearchParams(entriesExcludingFiles(requestBody));\n\n  url.search = searchParams.toString();\n\n  return url\n}\n\nclass AppearanceObserver {\n  started = false\n\n  constructor(delegate, element) {\n    this.delegate = delegate;\n    this.element = element;\n    this.intersectionObserver = new IntersectionObserver(this.intersect);\n  }\n\n  start() {\n    if (!this.started) {\n      this.started = true;\n      this.intersectionObserver.observe(this.element);\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.started = false;\n      this.intersectionObserver.unobserve(this.element);\n    }\n  }\n\n  intersect = (entries) => {\n    const lastEntry = entries.slice(-1)[0];\n    if (lastEntry?.isIntersecting) {\n      this.delegate.elementAppearedInViewport(this.element);\n    }\n  }\n}\n\nclass StreamMessage {\n  static contentType = \"text/vnd.turbo-stream.html\"\n\n  static wrap(message) {\n    if (typeof message == \"string\") {\n      return new this(createDocumentFragment(message))\n    } else {\n      return message\n    }\n  }\n\n  constructor(fragment) {\n    this.fragment = importStreamElements(fragment);\n  }\n}\n\nfunction importStreamElements(fragment) {\n  for (const element of fragment.querySelectorAll(\"turbo-stream\")) {\n    const streamElement = document.importNode(element, true);\n\n    for (const inertScriptElement of streamElement.templateElement.content.querySelectorAll(\"script\")) {\n      inertScriptElement.replaceWith(activateScriptElement(inertScriptElement));\n    }\n\n    element.replaceWith(streamElement);\n  }\n\n  return fragment\n}\n\nconst PREFETCH_DELAY = 100;\n\nclass PrefetchCache {\n  #prefetchTimeout = null\n  #prefetched = null\n\n  get(url) {\n    if (this.#prefetched && this.#prefetched.url === url && this.#prefetched.expire > Date.now()) {\n      return this.#prefetched.request\n    }\n  }\n\n  setLater(url, request, ttl) {\n    this.clear();\n\n    this.#prefetchTimeout = setTimeout(() => {\n      request.perform();\n      this.set(url, request, ttl);\n      this.#prefetchTimeout = null;\n    }, PREFETCH_DELAY);\n  }\n\n  set(url, request, ttl) {\n    this.#prefetched = { url, request, expire: new Date(new Date().getTime() + ttl) };\n  }\n\n  clear() {\n    if (this.#prefetchTimeout) clearTimeout(this.#prefetchTimeout);\n    this.#prefetched = null;\n  }\n}\n\nconst cacheTtl = 10 * 1000;\nconst prefetchCache = new PrefetchCache();\n\nconst FormSubmissionState = {\n  initialized: \"initialized\",\n  requesting: \"requesting\",\n  waiting: \"waiting\",\n  receiving: \"receiving\",\n  stopping: \"stopping\",\n  stopped: \"stopped\"\n};\n\nclass FormSubmission {\n  state = FormSubmissionState.initialized\n\n  static confirmMethod(message) {\n    return Promise.resolve(confirm(message))\n  }\n\n  constructor(delegate, formElement, submitter, mustRedirect = false) {\n    const method = getMethod(formElement, submitter);\n    const action = getAction(getFormAction(formElement, submitter), method);\n    const body = buildFormData(formElement, submitter);\n    const enctype = getEnctype(formElement, submitter);\n\n    this.delegate = delegate;\n    this.formElement = formElement;\n    this.submitter = submitter;\n    this.fetchRequest = new FetchRequest(this, method, action, body, formElement, enctype);\n    this.mustRedirect = mustRedirect;\n  }\n\n  get method() {\n    return this.fetchRequest.method\n  }\n\n  set method(value) {\n    this.fetchRequest.method = value;\n  }\n\n  get action() {\n    return this.fetchRequest.url.toString()\n  }\n\n  set action(value) {\n    this.fetchRequest.url = expandURL(value);\n  }\n\n  get body() {\n    return this.fetchRequest.body\n  }\n\n  get enctype() {\n    return this.fetchRequest.enctype\n  }\n\n  get isSafe() {\n    return this.fetchRequest.isSafe\n  }\n\n  get location() {\n    return this.fetchRequest.url\n  }\n\n  // The submission process\n\n  async start() {\n    const { initialized, requesting } = FormSubmissionState;\n    const confirmationMessage = getAttribute(\"data-turbo-confirm\", this.submitter, this.formElement);\n\n    if (typeof confirmationMessage === \"string\") {\n      const confirmMethod = typeof config.forms.confirm === \"function\" ?\n        config.forms.confirm :\n        FormSubmission.confirmMethod;\n\n      const answer = await confirmMethod(confirmationMessage, this.formElement, this.submitter);\n      if (!answer) {\n        return\n      }\n    }\n\n    if (this.state == initialized) {\n      this.state = requesting;\n      return this.fetchRequest.perform()\n    }\n  }\n\n  stop() {\n    const { stopping, stopped } = FormSubmissionState;\n    if (this.state != stopping && this.state != stopped) {\n      this.state = stopping;\n      this.fetchRequest.cancel();\n      return true\n    }\n  }\n\n  // Fetch request delegate\n\n  prepareRequest(request) {\n    if (!request.isSafe) {\n      const token = getCookieValue(getMetaContent(\"csrf-param\")) || getMetaContent(\"csrf-token\");\n      if (token) {\n        request.headers[\"X-CSRF-Token\"] = token;\n      }\n    }\n\n    if (this.requestAcceptsTurboStreamResponse(request)) {\n      request.acceptResponseType(StreamMessage.contentType);\n    }\n  }\n\n  requestStarted(_request) {\n    this.state = FormSubmissionState.waiting;\n    if (this.submitter) config.forms.submitter.beforeSubmit(this.submitter);\n    this.setSubmitsWith();\n    markAsBusy(this.formElement);\n    dispatch(\"turbo:submit-start\", {\n      target: this.formElement,\n      detail: { formSubmission: this }\n    });\n    this.delegate.formSubmissionStarted(this);\n  }\n\n  requestPreventedHandlingResponse(request, response) {\n    prefetchCache.clear();\n\n    this.result = { success: response.succeeded, fetchResponse: response };\n  }\n\n  requestSucceededWithResponse(request, response) {\n    if (response.clientError || response.serverError) {\n      this.delegate.formSubmissionFailedWithResponse(this, response);\n      return\n    }\n\n    prefetchCache.clear();\n\n    if (this.requestMustRedirect(request) && responseSucceededWithoutRedirect(response)) {\n      const error = new Error(\"Form responses must redirect to another location\");\n      this.delegate.formSubmissionErrored(this, error);\n    } else {\n      this.state = FormSubmissionState.receiving;\n      this.result = { success: true, fetchResponse: response };\n      this.delegate.formSubmissionSucceededWithResponse(this, response);\n    }\n  }\n\n  requestFailedWithResponse(request, response) {\n    this.result = { success: false, fetchResponse: response };\n    this.delegate.formSubmissionFailedWithResponse(this, response);\n  }\n\n  requestErrored(request, error) {\n    this.result = { success: false, error };\n    this.delegate.formSubmissionErrored(this, error);\n  }\n\n  requestFinished(_request) {\n    this.state = FormSubmissionState.stopped;\n    if (this.submitter) config.forms.submitter.afterSubmit(this.submitter);\n    this.resetSubmitterText();\n    clearBusyState(this.formElement);\n    dispatch(\"turbo:submit-end\", {\n      target: this.formElement,\n      detail: { formSubmission: this, ...this.result }\n    });\n    this.delegate.formSubmissionFinished(this);\n  }\n\n  // Private\n\n  setSubmitsWith() {\n    if (!this.submitter || !this.submitsWith) return\n\n    if (this.submitter.matches(\"button\")) {\n      this.originalSubmitText = this.submitter.innerHTML;\n      this.submitter.innerHTML = this.submitsWith;\n    } else if (this.submitter.matches(\"input\")) {\n      const input = this.submitter;\n      this.originalSubmitText = input.value;\n      input.value = this.submitsWith;\n    }\n  }\n\n  resetSubmitterText() {\n    if (!this.submitter || !this.originalSubmitText) return\n\n    if (this.submitter.matches(\"button\")) {\n      this.submitter.innerHTML = this.originalSubmitText;\n    } else if (this.submitter.matches(\"input\")) {\n      const input = this.submitter;\n      input.value = this.originalSubmitText;\n    }\n  }\n\n  requestMustRedirect(request) {\n    return !request.isSafe && this.mustRedirect\n  }\n\n  requestAcceptsTurboStreamResponse(request) {\n    return !request.isSafe || hasAttribute(\"data-turbo-stream\", this.submitter, this.formElement)\n  }\n\n  get submitsWith() {\n    return this.submitter?.getAttribute(\"data-turbo-submits-with\")\n  }\n}\n\nfunction buildFormData(formElement, submitter) {\n  const formData = new FormData(formElement);\n  const name = submitter?.getAttribute(\"name\");\n  const value = submitter?.getAttribute(\"value\");\n\n  if (name) {\n    formData.append(name, value || \"\");\n  }\n\n  return formData\n}\n\nfunction getCookieValue(cookieName) {\n  if (cookieName != null) {\n    const cookies = document.cookie ? document.cookie.split(\"; \") : [];\n    const cookie = cookies.find((cookie) => cookie.startsWith(cookieName));\n    if (cookie) {\n      const value = cookie.split(\"=\").slice(1).join(\"=\");\n      return value ? decodeURIComponent(value) : undefined\n    }\n  }\n}\n\nfunction responseSucceededWithoutRedirect(response) {\n  return response.statusCode == 200 && !response.redirected\n}\n\nfunction getFormAction(formElement, submitter) {\n  const formElementAction = typeof formElement.action === \"string\" ? formElement.action : null;\n\n  if (submitter?.hasAttribute(\"formaction\")) {\n    return submitter.getAttribute(\"formaction\") || \"\"\n  } else {\n    return formElement.getAttribute(\"action\") || formElementAction || \"\"\n  }\n}\n\nfunction getAction(formAction, fetchMethod) {\n  const action = expandURL(formAction);\n\n  if (isSafe(fetchMethod)) {\n    action.search = \"\";\n  }\n\n  return action\n}\n\nfunction getMethod(formElement, submitter) {\n  const method = submitter?.getAttribute(\"formmethod\") || formElement.getAttribute(\"method\") || \"\";\n  return fetchMethodFromString(method.toLowerCase()) || FetchMethod.get\n}\n\nfunction getEnctype(formElement, submitter) {\n  return fetchEnctypeFromString(submitter?.getAttribute(\"formenctype\") || formElement.enctype)\n}\n\nclass Snapshot {\n  constructor(element) {\n    this.element = element;\n  }\n\n  get activeElement() {\n    return this.element.ownerDocument.activeElement\n  }\n\n  get children() {\n    return [...this.element.children]\n  }\n\n  hasAnchor(anchor) {\n    return this.getElementForAnchor(anchor) != null\n  }\n\n  getElementForAnchor(anchor) {\n    return anchor ? this.element.querySelector(`[id='${anchor}'], a[name='${anchor}']`) : null\n  }\n\n  get isConnected() {\n    return this.element.isConnected\n  }\n\n  get firstAutofocusableElement() {\n    return queryAutofocusableElement(this.element)\n  }\n\n  get permanentElements() {\n    return queryPermanentElementsAll(this.element)\n  }\n\n  getPermanentElementById(id) {\n    return getPermanentElementById(this.element, id)\n  }\n\n  getPermanentElementMapForSnapshot(snapshot) {\n    const permanentElementMap = {};\n\n    for (const currentPermanentElement of this.permanentElements) {\n      const { id } = currentPermanentElement;\n      const newPermanentElement = snapshot.getPermanentElementById(id);\n      if (newPermanentElement) {\n        permanentElementMap[id] = [currentPermanentElement, newPermanentElement];\n      }\n    }\n\n    return permanentElementMap\n  }\n}\n\nfunction getPermanentElementById(node, id) {\n  return node.querySelector(`#${id}[data-turbo-permanent]`)\n}\n\nfunction queryPermanentElementsAll(node) {\n  return node.querySelectorAll(\"[id][data-turbo-permanent]\")\n}\n\nclass FormSubmitObserver {\n  started = false\n\n  constructor(delegate, eventTarget) {\n    this.delegate = delegate;\n    this.eventTarget = eventTarget;\n  }\n\n  start() {\n    if (!this.started) {\n      this.eventTarget.addEventListener(\"submit\", this.submitCaptured, true);\n      this.started = true;\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.eventTarget.removeEventListener(\"submit\", this.submitCaptured, true);\n      this.started = false;\n    }\n  }\n\n  submitCaptured = () => {\n    this.eventTarget.removeEventListener(\"submit\", this.submitBubbled, false);\n    this.eventTarget.addEventListener(\"submit\", this.submitBubbled, false);\n  }\n\n  submitBubbled = (event) => {\n    if (!event.defaultPrevented) {\n      const form = event.target instanceof HTMLFormElement ? event.target : undefined;\n      const submitter = event.submitter || undefined;\n\n      if (\n        form &&\n        submissionDoesNotDismissDialog(form, submitter) &&\n        submissionDoesNotTargetIFrame(form, submitter) &&\n        this.delegate.willSubmitForm(form, submitter)\n      ) {\n        event.preventDefault();\n        event.stopImmediatePropagation();\n        this.delegate.formSubmitted(form, submitter);\n      }\n    }\n  }\n}\n\nfunction submissionDoesNotDismissDialog(form, submitter) {\n  const method = submitter?.getAttribute(\"formmethod\") || form.getAttribute(\"method\");\n\n  return method != \"dialog\"\n}\n\nfunction submissionDoesNotTargetIFrame(form, submitter) {\n  const target = submitter?.getAttribute(\"formtarget\") || form.getAttribute(\"target\");\n\n  return doesNotTargetIFrame(target)\n}\n\nclass View {\n  #resolveRenderPromise = (_value) => {}\n  #resolveInterceptionPromise = (_value) => {}\n\n  constructor(delegate, element) {\n    this.delegate = delegate;\n    this.element = element;\n  }\n\n  // Scrolling\n\n  scrollToAnchor(anchor) {\n    const element = this.snapshot.getElementForAnchor(anchor);\n    if (element) {\n      this.scrollToElement(element);\n      this.focusElement(element);\n    } else {\n      this.scrollToPosition({ x: 0, y: 0 });\n    }\n  }\n\n  scrollToAnchorFromLocation(location) {\n    this.scrollToAnchor(getAnchor(location));\n  }\n\n  scrollToElement(element) {\n    element.scrollIntoView();\n  }\n\n  focusElement(element) {\n    if (element instanceof HTMLElement) {\n      if (element.hasAttribute(\"tabindex\")) {\n        element.focus();\n      } else {\n        element.setAttribute(\"tabindex\", \"-1\");\n        element.focus();\n        element.removeAttribute(\"tabindex\");\n      }\n    }\n  }\n\n  scrollToPosition({ x, y }) {\n    this.scrollRoot.scrollTo(x, y);\n  }\n\n  scrollToTop() {\n    this.scrollToPosition({ x: 0, y: 0 });\n  }\n\n  get scrollRoot() {\n    return window\n  }\n\n  // Rendering\n\n  async render(renderer) {\n    const { isPreview, shouldRender, willRender, newSnapshot: snapshot } = renderer;\n\n    // A workaround to ignore tracked element mismatch reloads when performing\n    // a promoted Visit from a frame navigation\n    const shouldInvalidate = willRender;\n\n    if (shouldRender) {\n      try {\n        this.renderPromise = new Promise((resolve) => (this.#resolveRenderPromise = resolve));\n        this.renderer = renderer;\n        await this.prepareToRenderSnapshot(renderer);\n\n        const renderInterception = new Promise((resolve) => (this.#resolveInterceptionPromise = resolve));\n        const options = { resume: this.#resolveInterceptionPromise, render: this.renderer.renderElement, renderMethod: this.renderer.renderMethod };\n        const immediateRender = this.delegate.allowsImmediateRender(snapshot, options);\n        if (!immediateRender) await renderInterception;\n\n        await this.renderSnapshot(renderer);\n        this.delegate.viewRenderedSnapshot(snapshot, isPreview, this.renderer.renderMethod);\n        this.delegate.preloadOnLoadLinksForView(this.element);\n        this.finishRenderingSnapshot(renderer);\n      } finally {\n        delete this.renderer;\n        this.#resolveRenderPromise(undefined);\n        delete this.renderPromise;\n      }\n    } else if (shouldInvalidate) {\n      this.invalidate(renderer.reloadReason);\n    }\n  }\n\n  invalidate(reason) {\n    this.delegate.viewInvalidated(reason);\n  }\n\n  async prepareToRenderSnapshot(renderer) {\n    this.markAsPreview(renderer.isPreview);\n    await renderer.prepareToRender();\n  }\n\n  markAsPreview(isPreview) {\n    if (isPreview) {\n      this.element.setAttribute(\"data-turbo-preview\", \"\");\n    } else {\n      this.element.removeAttribute(\"data-turbo-preview\");\n    }\n  }\n\n  markVisitDirection(direction) {\n    this.element.setAttribute(\"data-turbo-visit-direction\", direction);\n  }\n\n  unmarkVisitDirection() {\n    this.element.removeAttribute(\"data-turbo-visit-direction\");\n  }\n\n  async renderSnapshot(renderer) {\n    await renderer.render();\n  }\n\n  finishRenderingSnapshot(renderer) {\n    renderer.finishRendering();\n  }\n}\n\nclass FrameView extends View {\n  missing() {\n    this.element.innerHTML = `<strong class=\"turbo-frame-error\">Content missing</strong>`;\n  }\n\n  get snapshot() {\n    return new Snapshot(this.element)\n  }\n}\n\nclass LinkInterceptor {\n  constructor(delegate, element) {\n    this.delegate = delegate;\n    this.element = element;\n  }\n\n  start() {\n    this.element.addEventListener(\"click\", this.clickBubbled);\n    document.addEventListener(\"turbo:click\", this.linkClicked);\n    document.addEventListener(\"turbo:before-visit\", this.willVisit);\n  }\n\n  stop() {\n    this.element.removeEventListener(\"click\", this.clickBubbled);\n    document.removeEventListener(\"turbo:click\", this.linkClicked);\n    document.removeEventListener(\"turbo:before-visit\", this.willVisit);\n  }\n\n  clickBubbled = (event) => {\n    if (this.clickEventIsSignificant(event)) {\n      this.clickEvent = event;\n    } else {\n      delete this.clickEvent;\n    }\n  }\n\n  linkClicked = (event) => {\n    if (this.clickEvent && this.clickEventIsSignificant(event)) {\n      if (this.delegate.shouldInterceptLinkClick(event.target, event.detail.url, event.detail.originalEvent)) {\n        this.clickEvent.preventDefault();\n        event.preventDefault();\n        this.delegate.linkClickIntercepted(event.target, event.detail.url, event.detail.originalEvent);\n      }\n    }\n    delete this.clickEvent;\n  }\n\n  willVisit = (_event) => {\n    delete this.clickEvent;\n  }\n\n  clickEventIsSignificant(event) {\n    const target = event.composed ? event.target?.parentElement : event.target;\n    const element = findLinkFromClickTarget(target) || target;\n\n    return element instanceof Element && element.closest(\"turbo-frame, html\") == this.element\n  }\n}\n\nclass LinkClickObserver {\n  started = false\n\n  constructor(delegate, eventTarget) {\n    this.delegate = delegate;\n    this.eventTarget = eventTarget;\n  }\n\n  start() {\n    if (!this.started) {\n      this.eventTarget.addEventListener(\"click\", this.clickCaptured, true);\n      this.started = true;\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.eventTarget.removeEventListener(\"click\", this.clickCaptured, true);\n      this.started = false;\n    }\n  }\n\n  clickCaptured = () => {\n    this.eventTarget.removeEventListener(\"click\", this.clickBubbled, false);\n    this.eventTarget.addEventListener(\"click\", this.clickBubbled, false);\n  }\n\n  clickBubbled = (event) => {\n    if (event instanceof MouseEvent && this.clickEventIsSignificant(event)) {\n      const target = (event.composedPath && event.composedPath()[0]) || event.target;\n      const link = findLinkFromClickTarget(target);\n      if (link && doesNotTargetIFrame(link.target)) {\n        const location = getLocationForLink(link);\n        if (this.delegate.willFollowLinkToLocation(link, location, event)) {\n          event.preventDefault();\n          this.delegate.followedLinkToLocation(link, location);\n        }\n      }\n    }\n  }\n\n  clickEventIsSignificant(event) {\n    return !(\n      (event.target && event.target.isContentEditable) ||\n      event.defaultPrevented ||\n      event.which > 1 ||\n      event.altKey ||\n      event.ctrlKey ||\n      event.metaKey ||\n      event.shiftKey\n    )\n  }\n}\n\nclass FormLinkClickObserver {\n  constructor(delegate, element) {\n    this.delegate = delegate;\n    this.linkInterceptor = new LinkClickObserver(this, element);\n  }\n\n  start() {\n    this.linkInterceptor.start();\n  }\n\n  stop() {\n    this.linkInterceptor.stop();\n  }\n\n  // Link hover observer delegate\n\n  canPrefetchRequestToLocation(link, location) {\n    return false\n  }\n\n  prefetchAndCacheRequestToLocation(link, location) {\n    return\n  }\n\n  // Link click observer delegate\n\n  willFollowLinkToLocation(link, location, originalEvent) {\n    return (\n      this.delegate.willSubmitFormLinkToLocation(link, location, originalEvent) &&\n      (link.hasAttribute(\"data-turbo-method\") || link.hasAttribute(\"data-turbo-stream\"))\n    )\n  }\n\n  followedLinkToLocation(link, location) {\n    const form = document.createElement(\"form\");\n\n    const type = \"hidden\";\n    for (const [name, value] of location.searchParams) {\n      form.append(Object.assign(document.createElement(\"input\"), { type, name, value }));\n    }\n\n    const action = Object.assign(location, { search: \"\" });\n    form.setAttribute(\"data-turbo\", \"true\");\n    form.setAttribute(\"action\", action.href);\n    form.setAttribute(\"hidden\", \"\");\n\n    const method = link.getAttribute(\"data-turbo-method\");\n    if (method) form.setAttribute(\"method\", method);\n\n    const turboFrame = link.getAttribute(\"data-turbo-frame\");\n    if (turboFrame) form.setAttribute(\"data-turbo-frame\", turboFrame);\n\n    const turboAction = getVisitAction(link);\n    if (turboAction) form.setAttribute(\"data-turbo-action\", turboAction);\n\n    const turboConfirm = link.getAttribute(\"data-turbo-confirm\");\n    if (turboConfirm) form.setAttribute(\"data-turbo-confirm\", turboConfirm);\n\n    const turboStream = link.hasAttribute(\"data-turbo-stream\");\n    if (turboStream) form.setAttribute(\"data-turbo-stream\", \"\");\n\n    this.delegate.submittedFormLinkToLocation(link, location, form);\n\n    document.body.appendChild(form);\n    form.addEventListener(\"turbo:submit-end\", () => form.remove(), { once: true });\n    requestAnimationFrame(() => form.requestSubmit());\n  }\n}\n\nclass Bardo {\n  static async preservingPermanentElements(delegate, permanentElementMap, callback) {\n    const bardo = new this(delegate, permanentElementMap);\n    bardo.enter();\n    await callback();\n    bardo.leave();\n  }\n\n  constructor(delegate, permanentElementMap) {\n    this.delegate = delegate;\n    this.permanentElementMap = permanentElementMap;\n  }\n\n  enter() {\n    for (const id in this.permanentElementMap) {\n      const [currentPermanentElement, newPermanentElement] = this.permanentElementMap[id];\n      this.delegate.enteringBardo(currentPermanentElement, newPermanentElement);\n      this.replaceNewPermanentElementWithPlaceholder(newPermanentElement);\n    }\n  }\n\n  leave() {\n    for (const id in this.permanentElementMap) {\n      const [currentPermanentElement] = this.permanentElementMap[id];\n      this.replaceCurrentPermanentElementWithClone(currentPermanentElement);\n      this.replacePlaceholderWithPermanentElement(currentPermanentElement);\n      this.delegate.leavingBardo(currentPermanentElement);\n    }\n  }\n\n  replaceNewPermanentElementWithPlaceholder(permanentElement) {\n    const placeholder = createPlaceholderForPermanentElement(permanentElement);\n    permanentElement.replaceWith(placeholder);\n  }\n\n  replaceCurrentPermanentElementWithClone(permanentElement) {\n    const clone = permanentElement.cloneNode(true);\n    permanentElement.replaceWith(clone);\n  }\n\n  replacePlaceholderWithPermanentElement(permanentElement) {\n    const placeholder = this.getPlaceholderById(permanentElement.id);\n    placeholder?.replaceWith(permanentElement);\n  }\n\n  getPlaceholderById(id) {\n    return this.placeholders.find((element) => element.content == id)\n  }\n\n  get placeholders() {\n    return [...document.querySelectorAll(\"meta[name=turbo-permanent-placeholder][content]\")]\n  }\n}\n\nfunction createPlaceholderForPermanentElement(permanentElement) {\n  const element = document.createElement(\"meta\");\n  element.setAttribute(\"name\", \"turbo-permanent-placeholder\");\n  element.setAttribute(\"content\", permanentElement.id);\n  return element\n}\n\nclass Renderer {\n  #activeElement = null\n\n  static renderElement(currentElement, newElement) {\n    // Abstract method\n  }\n\n  constructor(currentSnapshot, newSnapshot, isPreview, willRender = true) {\n    this.currentSnapshot = currentSnapshot;\n    this.newSnapshot = newSnapshot;\n    this.isPreview = isPreview;\n    this.willRender = willRender;\n    this.renderElement = this.constructor.renderElement;\n    this.promise = new Promise((resolve, reject) => (this.resolvingFunctions = { resolve, reject }));\n  }\n\n  get shouldRender() {\n    return true\n  }\n\n  get shouldAutofocus() {\n    return true\n  }\n\n  get reloadReason() {\n    return\n  }\n\n  prepareToRender() {\n    return\n  }\n\n  render() {\n    // Abstract method\n  }\n\n  finishRendering() {\n    if (this.resolvingFunctions) {\n      this.resolvingFunctions.resolve();\n      delete this.resolvingFunctions;\n    }\n  }\n\n  async preservingPermanentElements(callback) {\n    await Bardo.preservingPermanentElements(this, this.permanentElementMap, callback);\n  }\n\n  focusFirstAutofocusableElement() {\n    if (this.shouldAutofocus) {\n      const element = this.connectedSnapshot.firstAutofocusableElement;\n      if (element) {\n        element.focus();\n      }\n    }\n  }\n\n  // Bardo delegate\n\n  enteringBardo(currentPermanentElement) {\n    if (this.#activeElement) return\n\n    if (currentPermanentElement.contains(this.currentSnapshot.activeElement)) {\n      this.#activeElement = this.currentSnapshot.activeElement;\n    }\n  }\n\n  leavingBardo(currentPermanentElement) {\n    if (currentPermanentElement.contains(this.#activeElement) && this.#activeElement instanceof HTMLElement) {\n      this.#activeElement.focus();\n\n      this.#activeElement = null;\n    }\n  }\n\n  get connectedSnapshot() {\n    return this.newSnapshot.isConnected ? this.newSnapshot : this.currentSnapshot\n  }\n\n  get currentElement() {\n    return this.currentSnapshot.element\n  }\n\n  get newElement() {\n    return this.newSnapshot.element\n  }\n\n  get permanentElementMap() {\n    return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)\n  }\n\n  get renderMethod() {\n    return \"replace\"\n  }\n}\n\nclass FrameRenderer extends Renderer {\n  static renderElement(currentElement, newElement) {\n    const destinationRange = document.createRange();\n    destinationRange.selectNodeContents(currentElement);\n    destinationRange.deleteContents();\n\n    const frameElement = newElement;\n    const sourceRange = frameElement.ownerDocument?.createRange();\n    if (sourceRange) {\n      sourceRange.selectNodeContents(frameElement);\n      currentElement.appendChild(sourceRange.extractContents());\n    }\n  }\n\n  constructor(delegate, currentSnapshot, newSnapshot, renderElement, isPreview, willRender = true) {\n    super(currentSnapshot, newSnapshot, renderElement, isPreview, willRender);\n    this.delegate = delegate;\n  }\n\n  get shouldRender() {\n    return true\n  }\n\n  async render() {\n    await nextRepaint();\n    this.preservingPermanentElements(() => {\n      this.loadFrameElement();\n    });\n    this.scrollFrameIntoView();\n    await nextRepaint();\n    this.focusFirstAutofocusableElement();\n    await nextRepaint();\n    this.activateScriptElements();\n  }\n\n  loadFrameElement() {\n    this.delegate.willRenderFrame(this.currentElement, this.newElement);\n    this.renderElement(this.currentElement, this.newElement);\n  }\n\n  scrollFrameIntoView() {\n    if (this.currentElement.autoscroll || this.newElement.autoscroll) {\n      const element = this.currentElement.firstElementChild;\n      const block = readScrollLogicalPosition(this.currentElement.getAttribute(\"data-autoscroll-block\"), \"end\");\n      const behavior = readScrollBehavior(this.currentElement.getAttribute(\"data-autoscroll-behavior\"), \"auto\");\n\n      if (element) {\n        element.scrollIntoView({ block, behavior });\n        return true\n      }\n    }\n    return false\n  }\n\n  activateScriptElements() {\n    for (const inertScriptElement of this.newScriptElements) {\n      const activatedScriptElement = activateScriptElement(inertScriptElement);\n      inertScriptElement.replaceWith(activatedScriptElement);\n    }\n  }\n\n  get newScriptElements() {\n    return this.currentElement.querySelectorAll(\"script\")\n  }\n}\n\nfunction readScrollLogicalPosition(value, defaultValue) {\n  if (value == \"end\" || value == \"start\" || value == \"center\" || value == \"nearest\") {\n    return value\n  } else {\n    return defaultValue\n  }\n}\n\nfunction readScrollBehavior(value, defaultValue) {\n  if (value == \"auto\" || value == \"smooth\") {\n    return value\n  } else {\n    return defaultValue\n  }\n}\n\n/**\n * @typedef {object} ConfigHead\n *\n * @property {'merge' | 'append' | 'morph' | 'none'} [style]\n * @property {boolean} [block]\n * @property {boolean} [ignore]\n * @property {function(Element): boolean} [shouldPreserve]\n * @property {function(Element): boolean} [shouldReAppend]\n * @property {function(Element): boolean} [shouldRemove]\n * @property {function(Element, {added: Node[], kept: Element[], removed: Element[]}): void} [afterHeadMorphed]\n */\n\n/**\n * @typedef {object} ConfigCallbacks\n *\n * @property {function(Node): boolean} [beforeNodeAdded]\n * @property {function(Node): void} [afterNodeAdded]\n * @property {function(Element, Node): boolean} [beforeNodeMorphed]\n * @property {function(Element, Node): void} [afterNodeMorphed]\n * @property {function(Element): boolean} [beforeNodeRemoved]\n * @property {function(Element): void} [afterNodeRemoved]\n * @property {function(string, Element, \"update\" | \"remove\"): boolean} [beforeAttributeUpdated]\n */\n\n/**\n * @typedef {object} Config\n *\n * @property {'outerHTML' | 'innerHTML'} [morphStyle]\n * @property {boolean} [ignoreActive]\n * @property {boolean} [ignoreActiveValue]\n * @property {boolean} [restoreFocus]\n * @property {ConfigCallbacks} [callbacks]\n * @property {ConfigHead} [head]\n */\n\n/**\n * @typedef {function} NoOp\n *\n * @returns {void}\n */\n\n/**\n * @typedef {object} ConfigHeadInternal\n *\n * @property {'merge' | 'append' | 'morph' | 'none'} style\n * @property {boolean} [block]\n * @property {boolean} [ignore]\n * @property {(function(Element): boolean) | NoOp} shouldPreserve\n * @property {(function(Element): boolean) | NoOp} shouldReAppend\n * @property {(function(Element): boolean) | NoOp} shouldRemove\n * @property {(function(Element, {added: Node[], kept: Element[], removed: Element[]}): void) | NoOp} afterHeadMorphed\n */\n\n/**\n * @typedef {object} ConfigCallbacksInternal\n *\n * @property {(function(Node): boolean) | NoOp} beforeNodeAdded\n * @property {(function(Node): void) | NoOp} afterNodeAdded\n * @property {(function(Node, Node): boolean) | NoOp} beforeNodeMorphed\n * @property {(function(Node, Node): void) | NoOp} afterNodeMorphed\n * @property {(function(Node): boolean) | NoOp} beforeNodeRemoved\n * @property {(function(Node): void) | NoOp} afterNodeRemoved\n * @property {(function(string, Element, \"update\" | \"remove\"): boolean) | NoOp} beforeAttributeUpdated\n */\n\n/**\n * @typedef {object} ConfigInternal\n *\n * @property {'outerHTML' | 'innerHTML'} morphStyle\n * @property {boolean} [ignoreActive]\n * @property {boolean} [ignoreActiveValue]\n * @property {boolean} [restoreFocus]\n * @property {ConfigCallbacksInternal} callbacks\n * @property {ConfigHeadInternal} head\n */\n\n/**\n * @typedef {Object} IdSets\n * @property {Set<string>} persistentIds\n * @property {Map<Node, Set<string>>} idMap\n */\n\n/**\n * @typedef {Function} Morph\n *\n * @param {Element | Document} oldNode\n * @param {Element | Node | HTMLCollection | Node[] | string | null} newContent\n * @param {Config} [config]\n * @returns {undefined | Node[]}\n */\n\n// base IIFE to define idiomorph\n/**\n *\n * @type {{defaults: ConfigInternal, morph: Morph}}\n */\nvar Idiomorph = (function () {\n\n  /**\n   * @typedef {object} MorphContext\n   *\n   * @property {Element} target\n   * @property {Element} newContent\n   * @property {ConfigInternal} config\n   * @property {ConfigInternal['morphStyle']} morphStyle\n   * @property {ConfigInternal['ignoreActive']} ignoreActive\n   * @property {ConfigInternal['ignoreActiveValue']} ignoreActiveValue\n   * @property {ConfigInternal['restoreFocus']} restoreFocus\n   * @property {Map<Node, Set<string>>} idMap\n   * @property {Set<string>} persistentIds\n   * @property {ConfigInternal['callbacks']} callbacks\n   * @property {ConfigInternal['head']} head\n   * @property {HTMLDivElement} pantry\n   */\n\n  //=============================================================================\n  // AND NOW IT BEGINS...\n  //=============================================================================\n\n  const noOp = () => {};\n  /**\n   * Default configuration values, updatable by users now\n   * @type {ConfigInternal}\n   */\n  const defaults = {\n    morphStyle: \"outerHTML\",\n    callbacks: {\n      beforeNodeAdded: noOp,\n      afterNodeAdded: noOp,\n      beforeNodeMorphed: noOp,\n      afterNodeMorphed: noOp,\n      beforeNodeRemoved: noOp,\n      afterNodeRemoved: noOp,\n      beforeAttributeUpdated: noOp,\n    },\n    head: {\n      style: \"merge\",\n      shouldPreserve: (elt) => elt.getAttribute(\"im-preserve\") === \"true\",\n      shouldReAppend: (elt) => elt.getAttribute(\"im-re-append\") === \"true\",\n      shouldRemove: noOp,\n      afterHeadMorphed: noOp,\n    },\n    restoreFocus: true,\n  };\n\n  /**\n   * Core idiomorph function for morphing one DOM tree to another\n   *\n   * @param {Element | Document} oldNode\n   * @param {Element | Node | HTMLCollection | Node[] | string | null} newContent\n   * @param {Config} [config]\n   * @returns {Promise<Node[]> | Node[]}\n   */\n  function morph(oldNode, newContent, config = {}) {\n    oldNode = normalizeElement(oldNode);\n    const newNode = normalizeParent(newContent);\n    const ctx = createMorphContext(oldNode, newNode, config);\n\n    const morphedNodes = saveAndRestoreFocus(ctx, () => {\n      return withHeadBlocking(\n        ctx,\n        oldNode,\n        newNode,\n        /** @param {MorphContext} ctx */ (ctx) => {\n          if (ctx.morphStyle === \"innerHTML\") {\n            morphChildren(ctx, oldNode, newNode);\n            return Array.from(oldNode.childNodes);\n          } else {\n            return morphOuterHTML(ctx, oldNode, newNode);\n          }\n        },\n      );\n    });\n\n    ctx.pantry.remove();\n    return morphedNodes;\n  }\n\n  /**\n   * Morph just the outerHTML of the oldNode to the newContent\n   * We have to be careful because the oldNode could have siblings which need to be untouched\n   * @param {MorphContext} ctx\n   * @param {Element} oldNode\n   * @param {Element} newNode\n   * @returns {Node[]}\n   */\n  function morphOuterHTML(ctx, oldNode, newNode) {\n    const oldParent = normalizeParent(oldNode);\n\n    // basis for calulating which nodes were morphed\n    // since there may be unmorphed sibling nodes\n    let childNodes = Array.from(oldParent.childNodes);\n    const index = childNodes.indexOf(oldNode);\n    // how many elements are to the right of the oldNode\n    const rightMargin = childNodes.length - (index + 1);\n\n    morphChildren(\n      ctx,\n      oldParent,\n      newNode,\n      // these two optional params are the secret sauce\n      oldNode, // start point for iteration\n      oldNode.nextSibling, // end point for iteration\n    );\n\n    // return just the morphed nodes\n    childNodes = Array.from(oldParent.childNodes);\n    return childNodes.slice(index, childNodes.length - rightMargin);\n  }\n\n  /**\n   * @param {MorphContext} ctx\n   * @param {Function} fn\n   * @returns {Promise<Node[]> | Node[]}\n   */\n  function saveAndRestoreFocus(ctx, fn) {\n    if (!ctx.config.restoreFocus) return fn();\n    let activeElement =\n      /** @type {HTMLInputElement|HTMLTextAreaElement|null} */ (\n        document.activeElement\n      );\n\n    // don't bother if the active element is not an input or textarea\n    if (\n      !(\n        activeElement instanceof HTMLInputElement ||\n        activeElement instanceof HTMLTextAreaElement\n      )\n    ) {\n      return fn();\n    }\n\n    const { id: activeElementId, selectionStart, selectionEnd } = activeElement;\n\n    const results = fn();\n\n    if (activeElementId && activeElementId !== document.activeElement?.id) {\n      activeElement = ctx.target.querySelector(`#${activeElementId}`);\n      activeElement?.focus();\n    }\n    if (activeElement && !activeElement.selectionEnd && selectionEnd) {\n      activeElement.setSelectionRange(selectionStart, selectionEnd);\n    }\n\n    return results;\n  }\n\n  const morphChildren = (function () {\n    /**\n     * This is the core algorithm for matching up children.  The idea is to use id sets to try to match up\n     * nodes as faithfully as possible.  We greedily match, which allows us to keep the algorithm fast, but\n     * by using id sets, we are able to better match up with content deeper in the DOM.\n     *\n     * Basic algorithm:\n     * - for each node in the new content:\n     *   - search self and siblings for an id set match, falling back to a soft match\n     *   - if match found\n     *     - remove any nodes up to the match:\n     *       - pantry persistent nodes\n     *       - delete the rest\n     *     - morph the match\n     *   - elsif no match found, and node is persistent\n     *     - find its match by querying the old root (future) and pantry (past)\n     *     - move it and its children here\n     *     - morph it\n     *   - else\n     *     - create a new node from scratch as a last result\n     *\n     * @param {MorphContext} ctx the merge context\n     * @param {Element} oldParent the old content that we are merging the new content into\n     * @param {Element} newParent the parent element of the new content\n     * @param {Node|null} [insertionPoint] the point in the DOM we start morphing at (defaults to first child)\n     * @param {Node|null} [endPoint] the point in the DOM we stop morphing at (defaults to after last child)\n     */\n    function morphChildren(\n      ctx,\n      oldParent,\n      newParent,\n      insertionPoint = null,\n      endPoint = null,\n    ) {\n      // normalize\n      if (\n        oldParent instanceof HTMLTemplateElement &&\n        newParent instanceof HTMLTemplateElement\n      ) {\n        // @ts-ignore we can pretend the DocumentFragment is an Element\n        oldParent = oldParent.content;\n        // @ts-ignore ditto\n        newParent = newParent.content;\n      }\n      insertionPoint ||= oldParent.firstChild;\n\n      // run through all the new content\n      for (const newChild of newParent.childNodes) {\n        // once we reach the end of the old parent content skip to the end and insert the rest\n        if (insertionPoint && insertionPoint != endPoint) {\n          const bestMatch = findBestMatch(\n            ctx,\n            newChild,\n            insertionPoint,\n            endPoint,\n          );\n          if (bestMatch) {\n            // if the node to morph is not at the insertion point then remove/move up to it\n            if (bestMatch !== insertionPoint) {\n              removeNodesBetween(ctx, insertionPoint, bestMatch);\n            }\n            morphNode(bestMatch, newChild, ctx);\n            insertionPoint = bestMatch.nextSibling;\n            continue;\n          }\n        }\n\n        // if the matching node is elsewhere in the original content\n        if (newChild instanceof Element && ctx.persistentIds.has(newChild.id)) {\n          // move it and all its children here and morph\n          const movedChild = moveBeforeById(\n            oldParent,\n            newChild.id,\n            insertionPoint,\n            ctx,\n          );\n          morphNode(movedChild, newChild, ctx);\n          insertionPoint = movedChild.nextSibling;\n          continue;\n        }\n\n        // last resort: insert the new node from scratch\n        const insertedNode = createNode(\n          oldParent,\n          newChild,\n          insertionPoint,\n          ctx,\n        );\n        // could be null if beforeNodeAdded prevented insertion\n        if (insertedNode) {\n          insertionPoint = insertedNode.nextSibling;\n        }\n      }\n\n      // remove any remaining old nodes that didn't match up with new content\n      while (insertionPoint && insertionPoint != endPoint) {\n        const tempNode = insertionPoint;\n        insertionPoint = insertionPoint.nextSibling;\n        removeNode(ctx, tempNode);\n      }\n    }\n\n    /**\n     * This performs the action of inserting a new node while handling situations where the node contains\n     * elements with persistent ids and possible state info we can still preserve by moving in and then morphing\n     *\n     * @param {Element} oldParent\n     * @param {Node} newChild\n     * @param {Node|null} insertionPoint\n     * @param {MorphContext} ctx\n     * @returns {Node|null}\n     */\n    function createNode(oldParent, newChild, insertionPoint, ctx) {\n      if (ctx.callbacks.beforeNodeAdded(newChild) === false) return null;\n      if (ctx.idMap.has(newChild)) {\n        // node has children with ids with possible state so create a dummy elt of same type and apply full morph algorithm\n        const newEmptyChild = document.createElement(\n          /** @type {Element} */ (newChild).tagName,\n        );\n        oldParent.insertBefore(newEmptyChild, insertionPoint);\n        morphNode(newEmptyChild, newChild, ctx);\n        ctx.callbacks.afterNodeAdded(newEmptyChild);\n        return newEmptyChild;\n      } else {\n        // optimisation: no id state to preserve so we can just insert a clone of the newChild and its descendants\n        const newClonedChild = document.importNode(newChild, true); // importNode to not mutate newParent\n        oldParent.insertBefore(newClonedChild, insertionPoint);\n        ctx.callbacks.afterNodeAdded(newClonedChild);\n        return newClonedChild;\n      }\n    }\n\n    //=============================================================================\n    // Matching Functions\n    //=============================================================================\n    const findBestMatch = (function () {\n      /**\n       * Scans forward from the startPoint to the endPoint looking for a match\n       * for the node. It looks for an id set match first, then a soft match.\n       * We abort softmatching if we find two future soft matches, to reduce churn.\n       * @param {Node} node\n       * @param {MorphContext} ctx\n       * @param {Node | null} startPoint\n       * @param {Node | null} endPoint\n       * @returns {Node | null}\n       */\n      function findBestMatch(ctx, node, startPoint, endPoint) {\n        let softMatch = null;\n        let nextSibling = node.nextSibling;\n        let siblingSoftMatchCount = 0;\n\n        let cursor = startPoint;\n        while (cursor && cursor != endPoint) {\n          // soft matching is a prerequisite for id set matching\n          if (isSoftMatch(cursor, node)) {\n            if (isIdSetMatch(ctx, cursor, node)) {\n              return cursor; // found an id set match, we're done!\n            }\n\n            // we haven't yet saved a soft match fallback\n            if (softMatch === null) {\n              // the current soft match will hard match something else in the future, leave it\n              if (!ctx.idMap.has(cursor)) {\n                // save this as the fallback if we get through the loop without finding a hard match\n                softMatch = cursor;\n              }\n            }\n          }\n          if (\n            softMatch === null &&\n            nextSibling &&\n            isSoftMatch(cursor, nextSibling)\n          ) {\n            // The next new node has a soft match with this node, so\n            // increment the count of future soft matches\n            siblingSoftMatchCount++;\n            nextSibling = nextSibling.nextSibling;\n\n            // If there are two future soft matches, block soft matching for this node to allow\n            // future siblings to soft match. This is to reduce churn in the DOM when an element\n            // is prepended.\n            if (siblingSoftMatchCount >= 2) {\n              softMatch = undefined;\n            }\n          }\n\n          // if the current node contains active element, stop looking for better future matches,\n          // because if one is found, this node will be moved to the pantry, reparenting it and thus losing focus\n          if (cursor.contains(document.activeElement)) break;\n\n          cursor = cursor.nextSibling;\n        }\n\n        return softMatch || null;\n      }\n\n      /**\n       *\n       * @param {MorphContext} ctx\n       * @param {Node} oldNode\n       * @param {Node} newNode\n       * @returns {boolean}\n       */\n      function isIdSetMatch(ctx, oldNode, newNode) {\n        let oldSet = ctx.idMap.get(oldNode);\n        let newSet = ctx.idMap.get(newNode);\n\n        if (!newSet || !oldSet) return false;\n\n        for (const id of oldSet) {\n          // a potential match is an id in the new and old nodes that\n          // has not already been merged into the DOM\n          // But the newNode content we call this on has not been\n          // merged yet and we don't allow duplicate IDs so it is simple\n          if (newSet.has(id)) {\n            return true;\n          }\n        }\n        return false;\n      }\n\n      /**\n       *\n       * @param {Node} oldNode\n       * @param {Node} newNode\n       * @returns {boolean}\n       */\n      function isSoftMatch(oldNode, newNode) {\n        // ok to cast: if one is not element, `id` and `tagName` will be undefined and we'll just compare that.\n        const oldElt = /** @type {Element} */ (oldNode);\n        const newElt = /** @type {Element} */ (newNode);\n\n        return (\n          oldElt.nodeType === newElt.nodeType &&\n          oldElt.tagName === newElt.tagName &&\n          // If oldElt has an `id` with possible state and it doesn't match newElt.id then avoid morphing.\n          // We'll still match an anonymous node with an IDed newElt, though, because if it got this far,\n          // its not persistent, and new nodes can't have any hidden state.\n          (!oldElt.id || oldElt.id === newElt.id)\n        );\n      }\n\n      return findBestMatch;\n    })();\n\n    //=============================================================================\n    // DOM Manipulation Functions\n    //=============================================================================\n\n    /**\n     * Gets rid of an unwanted DOM node; strategy depends on nature of its reuse:\n     * - Persistent nodes will be moved to the pantry for later reuse\n     * - Other nodes will have their hooks called, and then are removed\n     * @param {MorphContext} ctx\n     * @param {Node} node\n     */\n    function removeNode(ctx, node) {\n      // are we going to id set match this later?\n      if (ctx.idMap.has(node)) {\n        // skip callbacks and move to pantry\n        moveBefore(ctx.pantry, node, null);\n      } else {\n        // remove for realsies\n        if (ctx.callbacks.beforeNodeRemoved(node) === false) return;\n        node.parentNode?.removeChild(node);\n        ctx.callbacks.afterNodeRemoved(node);\n      }\n    }\n\n    /**\n     * Remove nodes between the start and end nodes\n     * @param {MorphContext} ctx\n     * @param {Node} startInclusive\n     * @param {Node} endExclusive\n     * @returns {Node|null}\n     */\n    function removeNodesBetween(ctx, startInclusive, endExclusive) {\n      /** @type {Node | null} */\n      let cursor = startInclusive;\n      // remove nodes until the endExclusive node\n      while (cursor && cursor !== endExclusive) {\n        let tempNode = /** @type {Node} */ (cursor);\n        cursor = cursor.nextSibling;\n        removeNode(ctx, tempNode);\n      }\n      return cursor;\n    }\n\n    /**\n     * Search for an element by id within the document and pantry, and move it using moveBefore.\n     *\n     * @param {Element} parentNode - The parent node to which the element will be moved.\n     * @param {string} id - The ID of the element to be moved.\n     * @param {Node | null} after - The reference node to insert the element before.\n     *                              If `null`, the element is appended as the last child.\n     * @param {MorphContext} ctx\n     * @returns {Element} The found element\n     */\n    function moveBeforeById(parentNode, id, after, ctx) {\n      const target =\n        /** @type {Element} - will always be found */\n        (\n          ctx.target.querySelector(`#${id}`) ||\n            ctx.pantry.querySelector(`#${id}`)\n        );\n      removeElementFromAncestorsIdMaps(target, ctx);\n      moveBefore(parentNode, target, after);\n      return target;\n    }\n\n    /**\n     * Removes an element from its ancestors' id maps. This is needed when an element is moved from the\n     * \"future\" via `moveBeforeId`. Otherwise, its erstwhile ancestors could be mistakenly moved to the\n     * pantry rather than being deleted, preventing their removal hooks from being called.\n     *\n     * @param {Element} element - element to remove from its ancestors' id maps\n     * @param {MorphContext} ctx\n     */\n    function removeElementFromAncestorsIdMaps(element, ctx) {\n      const id = element.id;\n      /** @ts-ignore - safe to loop in this way **/\n      while ((element = element.parentNode)) {\n        let idSet = ctx.idMap.get(element);\n        if (idSet) {\n          idSet.delete(id);\n          if (!idSet.size) {\n            ctx.idMap.delete(element);\n          }\n        }\n      }\n    }\n\n    /**\n     * Moves an element before another element within the same parent.\n     * Uses the proposed `moveBefore` API if available (and working), otherwise falls back to `insertBefore`.\n     * This is essentialy a forward-compat wrapper.\n     *\n     * @param {Element} parentNode - The parent node containing the after element.\n     * @param {Node} element - The element to be moved.\n     * @param {Node | null} after - The reference node to insert `element` before.\n     *                              If `null`, `element` is appended as the last child.\n     */\n    function moveBefore(parentNode, element, after) {\n      // @ts-ignore - use proposed moveBefore feature\n      if (parentNode.moveBefore) {\n        try {\n          // @ts-ignore - use proposed moveBefore feature\n          parentNode.moveBefore(element, after);\n        } catch (e) {\n          // fall back to insertBefore as some browsers may fail on moveBefore when trying to move Dom disconnected nodes to pantry\n          parentNode.insertBefore(element, after);\n        }\n      } else {\n        parentNode.insertBefore(element, after);\n      }\n    }\n\n    return morphChildren;\n  })();\n\n  //=============================================================================\n  // Single Node Morphing Code\n  //=============================================================================\n  const morphNode = (function () {\n    /**\n     * @param {Node} oldNode root node to merge content into\n     * @param {Node} newContent new content to merge\n     * @param {MorphContext} ctx the merge context\n     * @returns {Node | null} the element that ended up in the DOM\n     */\n    function morphNode(oldNode, newContent, ctx) {\n      if (ctx.ignoreActive && oldNode === document.activeElement) {\n        // don't morph focused element\n        return null;\n      }\n\n      if (ctx.callbacks.beforeNodeMorphed(oldNode, newContent) === false) {\n        return oldNode;\n      }\n\n      if (oldNode instanceof HTMLHeadElement && ctx.head.ignore) ; else if (\n        oldNode instanceof HTMLHeadElement &&\n        ctx.head.style !== \"morph\"\n      ) {\n        // ok to cast: if newContent wasn't also a <head>, it would've got caught in the `!isSoftMatch` branch above\n        handleHeadElement(\n          oldNode,\n          /** @type {HTMLHeadElement} */ (newContent),\n          ctx,\n        );\n      } else {\n        morphAttributes(oldNode, newContent, ctx);\n        if (!ignoreValueOfActiveElement(oldNode, ctx)) {\n          // @ts-ignore newContent can be a node here because .firstChild will be null\n          morphChildren(ctx, oldNode, newContent);\n        }\n      }\n      ctx.callbacks.afterNodeMorphed(oldNode, newContent);\n      return oldNode;\n    }\n\n    /**\n     * syncs the oldNode to the newNode, copying over all attributes and\n     * inner element state from the newNode to the oldNode\n     *\n     * @param {Node} oldNode the node to copy attributes & state to\n     * @param {Node} newNode the node to copy attributes & state from\n     * @param {MorphContext} ctx the merge context\n     */\n    function morphAttributes(oldNode, newNode, ctx) {\n      let type = newNode.nodeType;\n\n      // if is an element type, sync the attributes from the\n      // new node into the new node\n      if (type === 1 /* element type */) {\n        const oldElt = /** @type {Element} */ (oldNode);\n        const newElt = /** @type {Element} */ (newNode);\n\n        const oldAttributes = oldElt.attributes;\n        const newAttributes = newElt.attributes;\n        for (const newAttribute of newAttributes) {\n          if (ignoreAttribute(newAttribute.name, oldElt, \"update\", ctx)) {\n            continue;\n          }\n          if (oldElt.getAttribute(newAttribute.name) !== newAttribute.value) {\n            oldElt.setAttribute(newAttribute.name, newAttribute.value);\n          }\n        }\n        // iterate backwards to avoid skipping over items when a delete occurs\n        for (let i = oldAttributes.length - 1; 0 <= i; i--) {\n          const oldAttribute = oldAttributes[i];\n\n          // toAttributes is a live NamedNodeMap, so iteration+mutation is unsafe\n          // e.g. custom element attribute callbacks can remove other attributes\n          if (!oldAttribute) continue;\n\n          if (!newElt.hasAttribute(oldAttribute.name)) {\n            if (ignoreAttribute(oldAttribute.name, oldElt, \"remove\", ctx)) {\n              continue;\n            }\n            oldElt.removeAttribute(oldAttribute.name);\n          }\n        }\n\n        if (!ignoreValueOfActiveElement(oldElt, ctx)) {\n          syncInputValue(oldElt, newElt, ctx);\n        }\n      }\n\n      // sync text nodes\n      if (type === 8 /* comment */ || type === 3 /* text */) {\n        if (oldNode.nodeValue !== newNode.nodeValue) {\n          oldNode.nodeValue = newNode.nodeValue;\n        }\n      }\n    }\n\n    /**\n     * NB: many bothans died to bring us information:\n     *\n     *  https://github.com/patrick-steele-idem/morphdom/blob/master/src/specialElHandlers.js\n     *  https://github.com/choojs/nanomorph/blob/master/lib/morph.jsL113\n     *\n     * @param {Element} oldElement the element to sync the input value to\n     * @param {Element} newElement the element to sync the input value from\n     * @param {MorphContext} ctx the merge context\n     */\n    function syncInputValue(oldElement, newElement, ctx) {\n      if (\n        oldElement instanceof HTMLInputElement &&\n        newElement instanceof HTMLInputElement &&\n        newElement.type !== \"file\"\n      ) {\n        let newValue = newElement.value;\n        let oldValue = oldElement.value;\n\n        // sync boolean attributes\n        syncBooleanAttribute(oldElement, newElement, \"checked\", ctx);\n        syncBooleanAttribute(oldElement, newElement, \"disabled\", ctx);\n\n        if (!newElement.hasAttribute(\"value\")) {\n          if (!ignoreAttribute(\"value\", oldElement, \"remove\", ctx)) {\n            oldElement.value = \"\";\n            oldElement.removeAttribute(\"value\");\n          }\n        } else if (oldValue !== newValue) {\n          if (!ignoreAttribute(\"value\", oldElement, \"update\", ctx)) {\n            oldElement.setAttribute(\"value\", newValue);\n            oldElement.value = newValue;\n          }\n        }\n        // TODO: QUESTION(1cg): this used to only check `newElement` unlike the other branches -- why?\n        // did I break something?\n      } else if (\n        oldElement instanceof HTMLOptionElement &&\n        newElement instanceof HTMLOptionElement\n      ) {\n        syncBooleanAttribute(oldElement, newElement, \"selected\", ctx);\n      } else if (\n        oldElement instanceof HTMLTextAreaElement &&\n        newElement instanceof HTMLTextAreaElement\n      ) {\n        let newValue = newElement.value;\n        let oldValue = oldElement.value;\n        if (ignoreAttribute(\"value\", oldElement, \"update\", ctx)) {\n          return;\n        }\n        if (newValue !== oldValue) {\n          oldElement.value = newValue;\n        }\n        if (\n          oldElement.firstChild &&\n          oldElement.firstChild.nodeValue !== newValue\n        ) {\n          oldElement.firstChild.nodeValue = newValue;\n        }\n      }\n    }\n\n    /**\n     * @param {Element} oldElement element to write the value to\n     * @param {Element} newElement element to read the value from\n     * @param {string} attributeName the attribute name\n     * @param {MorphContext} ctx the merge context\n     */\n    function syncBooleanAttribute(oldElement, newElement, attributeName, ctx) {\n      // @ts-ignore this function is only used on boolean attrs that are reflected as dom properties\n      const newLiveValue = newElement[attributeName],\n        // @ts-ignore ditto\n        oldLiveValue = oldElement[attributeName];\n      if (newLiveValue !== oldLiveValue) {\n        const ignoreUpdate = ignoreAttribute(\n          attributeName,\n          oldElement,\n          \"update\",\n          ctx,\n        );\n        if (!ignoreUpdate) {\n          // update attribute's associated DOM property\n          // @ts-ignore this function is only used on boolean attrs that are reflected as dom properties\n          oldElement[attributeName] = newElement[attributeName];\n        }\n        if (newLiveValue) {\n          if (!ignoreUpdate) {\n            // https://developer.mozilla.org/en-US/docs/Glossary/Boolean/HTML\n            // this is the correct way to set a boolean attribute to \"true\"\n            oldElement.setAttribute(attributeName, \"\");\n          }\n        } else {\n          if (!ignoreAttribute(attributeName, oldElement, \"remove\", ctx)) {\n            oldElement.removeAttribute(attributeName);\n          }\n        }\n      }\n    }\n\n    /**\n     * @param {string} attr the attribute to be mutated\n     * @param {Element} element the element that is going to be updated\n     * @param {\"update\" | \"remove\"} updateType\n     * @param {MorphContext} ctx the merge context\n     * @returns {boolean} true if the attribute should be ignored, false otherwise\n     */\n    function ignoreAttribute(attr, element, updateType, ctx) {\n      if (\n        attr === \"value\" &&\n        ctx.ignoreActiveValue &&\n        element === document.activeElement\n      ) {\n        return true;\n      }\n      return (\n        ctx.callbacks.beforeAttributeUpdated(attr, element, updateType) ===\n        false\n      );\n    }\n\n    /**\n     * @param {Node} possibleActiveElement\n     * @param {MorphContext} ctx\n     * @returns {boolean}\n     */\n    function ignoreValueOfActiveElement(possibleActiveElement, ctx) {\n      return (\n        !!ctx.ignoreActiveValue &&\n        possibleActiveElement === document.activeElement &&\n        possibleActiveElement !== document.body\n      );\n    }\n\n    return morphNode;\n  })();\n\n  //=============================================================================\n  // Head Management Functions\n  //=============================================================================\n  /**\n   * @param {MorphContext} ctx\n   * @param {Element} oldNode\n   * @param {Element} newNode\n   * @param {function} callback\n   * @returns {Node[] | Promise<Node[]>}\n   */\n  function withHeadBlocking(ctx, oldNode, newNode, callback) {\n    if (ctx.head.block) {\n      const oldHead = oldNode.querySelector(\"head\");\n      const newHead = newNode.querySelector(\"head\");\n      if (oldHead && newHead) {\n        const promises = handleHeadElement(oldHead, newHead, ctx);\n        // when head promises resolve, proceed ignoring the head tag\n        return Promise.all(promises).then(() => {\n          const newCtx = Object.assign(ctx, {\n            head: {\n              block: false,\n              ignore: true,\n            },\n          });\n          return callback(newCtx);\n        });\n      }\n    }\n    // just proceed if we not head blocking\n    return callback(ctx);\n  }\n\n  /**\n   *  The HEAD tag can be handled specially, either w/ a 'merge' or 'append' style\n   *\n   * @param {Element} oldHead\n   * @param {Element} newHead\n   * @param {MorphContext} ctx\n   * @returns {Promise<void>[]}\n   */\n  function handleHeadElement(oldHead, newHead, ctx) {\n    let added = [];\n    let removed = [];\n    let preserved = [];\n    let nodesToAppend = [];\n\n    // put all new head elements into a Map, by their outerHTML\n    let srcToNewHeadNodes = new Map();\n    for (const newHeadChild of newHead.children) {\n      srcToNewHeadNodes.set(newHeadChild.outerHTML, newHeadChild);\n    }\n\n    // for each elt in the current head\n    for (const currentHeadElt of oldHead.children) {\n      // If the current head element is in the map\n      let inNewContent = srcToNewHeadNodes.has(currentHeadElt.outerHTML);\n      let isReAppended = ctx.head.shouldReAppend(currentHeadElt);\n      let isPreserved = ctx.head.shouldPreserve(currentHeadElt);\n      if (inNewContent || isPreserved) {\n        if (isReAppended) {\n          // remove the current version and let the new version replace it and re-execute\n          removed.push(currentHeadElt);\n        } else {\n          // this element already exists and should not be re-appended, so remove it from\n          // the new content map, preserving it in the DOM\n          srcToNewHeadNodes.delete(currentHeadElt.outerHTML);\n          preserved.push(currentHeadElt);\n        }\n      } else {\n        if (ctx.head.style === \"append\") {\n          // we are appending and this existing element is not new content\n          // so if and only if it is marked for re-append do we do anything\n          if (isReAppended) {\n            removed.push(currentHeadElt);\n            nodesToAppend.push(currentHeadElt);\n          }\n        } else {\n          // if this is a merge, we remove this content since it is not in the new head\n          if (ctx.head.shouldRemove(currentHeadElt) !== false) {\n            removed.push(currentHeadElt);\n          }\n        }\n      }\n    }\n\n    // Push the remaining new head elements in the Map into the\n    // nodes to append to the head tag\n    nodesToAppend.push(...srcToNewHeadNodes.values());\n\n    let promises = [];\n    for (const newNode of nodesToAppend) {\n      // TODO: This could theoretically be null, based on type\n      let newElt = /** @type {ChildNode} */ (\n        document.createRange().createContextualFragment(newNode.outerHTML)\n          .firstChild\n      );\n      if (ctx.callbacks.beforeNodeAdded(newElt) !== false) {\n        if (\n          (\"href\" in newElt && newElt.href) ||\n          (\"src\" in newElt && newElt.src)\n        ) {\n          /** @type {(result?: any) => void} */ let resolve;\n          let promise = new Promise(function (_resolve) {\n            resolve = _resolve;\n          });\n          newElt.addEventListener(\"load\", function () {\n            resolve();\n          });\n          promises.push(promise);\n        }\n        oldHead.appendChild(newElt);\n        ctx.callbacks.afterNodeAdded(newElt);\n        added.push(newElt);\n      }\n    }\n\n    // remove all removed elements, after we have appended the new elements to avoid\n    // additional network requests for things like style sheets\n    for (const removedElement of removed) {\n      if (ctx.callbacks.beforeNodeRemoved(removedElement) !== false) {\n        oldHead.removeChild(removedElement);\n        ctx.callbacks.afterNodeRemoved(removedElement);\n      }\n    }\n\n    ctx.head.afterHeadMorphed(oldHead, {\n      added: added,\n      kept: preserved,\n      removed: removed,\n    });\n    return promises;\n  }\n\n  //=============================================================================\n  // Create Morph Context Functions\n  //=============================================================================\n  const createMorphContext = (function () {\n    /**\n     *\n     * @param {Element} oldNode\n     * @param {Element} newContent\n     * @param {Config} config\n     * @returns {MorphContext}\n     */\n    function createMorphContext(oldNode, newContent, config) {\n      const { persistentIds, idMap } = createIdMaps(oldNode, newContent);\n\n      const mergedConfig = mergeDefaults(config);\n      const morphStyle = mergedConfig.morphStyle || \"outerHTML\";\n      if (![\"innerHTML\", \"outerHTML\"].includes(morphStyle)) {\n        throw `Do not understand how to morph style ${morphStyle}`;\n      }\n\n      return {\n        target: oldNode,\n        newContent: newContent,\n        config: mergedConfig,\n        morphStyle: morphStyle,\n        ignoreActive: mergedConfig.ignoreActive,\n        ignoreActiveValue: mergedConfig.ignoreActiveValue,\n        restoreFocus: mergedConfig.restoreFocus,\n        idMap: idMap,\n        persistentIds: persistentIds,\n        pantry: createPantry(),\n        callbacks: mergedConfig.callbacks,\n        head: mergedConfig.head,\n      };\n    }\n\n    /**\n     * Deep merges the config object and the Idiomorph.defaults object to\n     * produce a final configuration object\n     * @param {Config} config\n     * @returns {ConfigInternal}\n     */\n    function mergeDefaults(config) {\n      let finalConfig = Object.assign({}, defaults);\n\n      // copy top level stuff into final config\n      Object.assign(finalConfig, config);\n\n      // copy callbacks into final config (do this to deep merge the callbacks)\n      finalConfig.callbacks = Object.assign(\n        {},\n        defaults.callbacks,\n        config.callbacks,\n      );\n\n      // copy head config into final config  (do this to deep merge the head)\n      finalConfig.head = Object.assign({}, defaults.head, config.head);\n\n      return finalConfig;\n    }\n\n    /**\n     * @returns {HTMLDivElement}\n     */\n    function createPantry() {\n      const pantry = document.createElement(\"div\");\n      pantry.hidden = true;\n      document.body.insertAdjacentElement(\"afterend\", pantry);\n      return pantry;\n    }\n\n    /**\n     * Returns all elements with an ID contained within the root element and its descendants\n     *\n     * @param {Element} root\n     * @returns {Element[]}\n     */\n    function findIdElements(root) {\n      let elements = Array.from(root.querySelectorAll(\"[id]\"));\n      if (root.id) {\n        elements.push(root);\n      }\n      return elements;\n    }\n\n    /**\n     * A bottom-up algorithm that populates a map of Element -> IdSet.\n     * The idSet for a given element is the set of all IDs contained within its subtree.\n     * As an optimzation, we filter these IDs through the given list of persistent IDs,\n     * because we don't need to bother considering IDed elements that won't be in the new content.\n     *\n     * @param {Map<Node, Set<string>>} idMap\n     * @param {Set<string>} persistentIds\n     * @param {Element} root\n     * @param {Element[]} elements\n     */\n    function populateIdMapWithTree(idMap, persistentIds, root, elements) {\n      for (const elt of elements) {\n        if (persistentIds.has(elt.id)) {\n          /** @type {Element|null} */\n          let current = elt;\n          // walk up the parent hierarchy of that element, adding the id\n          // of element to the parent's id set\n          while (current) {\n            let idSet = idMap.get(current);\n            // if the id set doesn't exist, create it and insert it in the map\n            if (idSet == null) {\n              idSet = new Set();\n              idMap.set(current, idSet);\n            }\n            idSet.add(elt.id);\n\n            if (current === root) break;\n            current = current.parentElement;\n          }\n        }\n      }\n    }\n\n    /**\n     * This function computes a map of nodes to all ids contained within that node (inclusive of the\n     * node).  This map can be used to ask if two nodes have intersecting sets of ids, which allows\n     * for a looser definition of \"matching\" than tradition id matching, and allows child nodes\n     * to contribute to a parent nodes matching.\n     *\n     * @param {Element} oldContent  the old content that will be morphed\n     * @param {Element} newContent  the new content to morph to\n     * @returns {IdSets}\n     */\n    function createIdMaps(oldContent, newContent) {\n      const oldIdElements = findIdElements(oldContent);\n      const newIdElements = findIdElements(newContent);\n\n      const persistentIds = createPersistentIds(oldIdElements, newIdElements);\n\n      /** @type {Map<Node, Set<string>>} */\n      let idMap = new Map();\n      populateIdMapWithTree(idMap, persistentIds, oldContent, oldIdElements);\n\n      /** @ts-ignore - if newContent is a duck-typed parent, pass its single child node as the root to halt upwards iteration */\n      const newRoot = newContent.__idiomorphRoot || newContent;\n      populateIdMapWithTree(idMap, persistentIds, newRoot, newIdElements);\n\n      return { persistentIds, idMap };\n    }\n\n    /**\n     * This function computes the set of ids that persist between the two contents excluding duplicates\n     *\n     * @param {Element[]} oldIdElements\n     * @param {Element[]} newIdElements\n     * @returns {Set<string>}\n     */\n    function createPersistentIds(oldIdElements, newIdElements) {\n      let duplicateIds = new Set();\n\n      /** @type {Map<string, string>} */\n      let oldIdTagNameMap = new Map();\n      for (const { id, tagName } of oldIdElements) {\n        if (oldIdTagNameMap.has(id)) {\n          duplicateIds.add(id);\n        } else {\n          oldIdTagNameMap.set(id, tagName);\n        }\n      }\n\n      let persistentIds = new Set();\n      for (const { id, tagName } of newIdElements) {\n        if (persistentIds.has(id)) {\n          duplicateIds.add(id);\n        } else if (oldIdTagNameMap.get(id) === tagName) {\n          persistentIds.add(id);\n        }\n        // skip if tag types mismatch because its not possible to morph one tag into another\n      }\n\n      for (const id of duplicateIds) {\n        persistentIds.delete(id);\n      }\n      return persistentIds;\n    }\n\n    return createMorphContext;\n  })();\n\n  //=============================================================================\n  // HTML Normalization Functions\n  //=============================================================================\n  const { normalizeElement, normalizeParent } = (function () {\n    /** @type {WeakSet<Node>} */\n    const generatedByIdiomorph = new WeakSet();\n\n    /**\n     *\n     * @param {Element | Document} content\n     * @returns {Element}\n     */\n    function normalizeElement(content) {\n      if (content instanceof Document) {\n        return content.documentElement;\n      } else {\n        return content;\n      }\n    }\n\n    /**\n     *\n     * @param {null | string | Node | HTMLCollection | Node[] | Document & {generatedByIdiomorph:boolean}} newContent\n     * @returns {Element}\n     */\n    function normalizeParent(newContent) {\n      if (newContent == null) {\n        return document.createElement(\"div\"); // dummy parent element\n      } else if (typeof newContent === \"string\") {\n        return normalizeParent(parseContent(newContent));\n      } else if (\n        generatedByIdiomorph.has(/** @type {Element} */ (newContent))\n      ) {\n        // the template tag created by idiomorph parsing can serve as a dummy parent\n        return /** @type {Element} */ (newContent);\n      } else if (newContent instanceof Node) {\n        if (newContent.parentNode) {\n          // we can't use the parent directly because newContent may have siblings\n          // that we don't want in the morph, and reparenting might be expensive (TODO is it?),\n          // so we create a duck-typed parent node instead.\n          return createDuckTypedParent(newContent);\n        } else {\n          // a single node is added as a child to a dummy parent\n          const dummyParent = document.createElement(\"div\");\n          dummyParent.append(newContent);\n          return dummyParent;\n        }\n      } else {\n        // all nodes in the array or HTMLElement collection are consolidated under\n        // a single dummy parent element\n        const dummyParent = document.createElement(\"div\");\n        for (const elt of [...newContent]) {\n          dummyParent.append(elt);\n        }\n        return dummyParent;\n      }\n    }\n\n    /**\n     * Creates a fake duck-typed parent element to wrap a single node, without actually reparenting it.\n     * \"If it walks like a duck, and quacks like a duck, then it must be a duck!\" -- James Whitcomb Riley (1849\u20131916)\n     *\n     * @param {Node} newContent\n     * @returns {Element}\n     */\n    function createDuckTypedParent(newContent) {\n      return /** @type {Element} */ (\n        /** @type {unknown} */ ({\n          childNodes: [newContent],\n          /** @ts-ignore - cover your eyes for a minute, tsc */\n          querySelectorAll: (s) => {\n            /** @ts-ignore */\n            const elements = newContent.querySelectorAll(s);\n            /** @ts-ignore */\n            return newContent.matches(s) ? [newContent, ...elements] : elements;\n          },\n          /** @ts-ignore */\n          insertBefore: (n, r) => newContent.parentNode.insertBefore(n, r),\n          /** @ts-ignore */\n          moveBefore: (n, r) => newContent.parentNode.moveBefore(n, r),\n          // for later use with populateIdMapWithTree to halt upwards iteration\n          get __idiomorphRoot() {\n            return newContent;\n          },\n        })\n      );\n    }\n\n    /**\n     *\n     * @param {string} newContent\n     * @returns {Node | null | DocumentFragment}\n     */\n    function parseContent(newContent) {\n      let parser = new DOMParser();\n\n      // remove svgs to avoid false-positive matches on head, etc.\n      let contentWithSvgsRemoved = newContent.replace(\n        /<svg(\\s[^>]*>|>)([\\s\\S]*?)<\\/svg>/gim,\n        \"\",\n      );\n\n      // if the newContent contains a html, head or body tag, we can simply parse it w/o wrapping\n      if (\n        contentWithSvgsRemoved.match(/<\\/html>/) ||\n        contentWithSvgsRemoved.match(/<\\/head>/) ||\n        contentWithSvgsRemoved.match(/<\\/body>/)\n      ) {\n        let content = parser.parseFromString(newContent, \"text/html\");\n        // if it is a full HTML document, return the document itself as the parent container\n        if (contentWithSvgsRemoved.match(/<\\/html>/)) {\n          generatedByIdiomorph.add(content);\n          return content;\n        } else {\n          // otherwise return the html element as the parent container\n          let htmlElement = content.firstChild;\n          if (htmlElement) {\n            generatedByIdiomorph.add(htmlElement);\n          }\n          return htmlElement;\n        }\n      } else {\n        // if it is partial HTML, wrap it in a template tag to provide a parent element and also to help\n        // deal with touchy tags like tr, tbody, etc.\n        let responseDoc = parser.parseFromString(\n          \"<body><template>\" + newContent + \"</template></body>\",\n          \"text/html\",\n        );\n        let content = /** @type {HTMLTemplateElement} */ (\n          responseDoc.body.querySelector(\"template\")\n        ).content;\n        generatedByIdiomorph.add(content);\n        return content;\n      }\n    }\n\n    return { normalizeElement, normalizeParent };\n  })();\n\n  //=============================================================================\n  // This is what ends up becoming the Idiomorph global object\n  //=============================================================================\n  return {\n    morph,\n    defaults,\n  };\n})();\n\nfunction morphElements(currentElement, newElement, { callbacks, ...options } = {}) {\n  Idiomorph.morph(currentElement, newElement, {\n    ...options,\n    callbacks: new DefaultIdiomorphCallbacks(callbacks)\n  });\n}\n\nfunction morphChildren(currentElement, newElement) {\n  morphElements(currentElement, newElement.childNodes, {\n    morphStyle: \"innerHTML\"\n  });\n}\n\nclass DefaultIdiomorphCallbacks {\n  #beforeNodeMorphed\n\n  constructor({ beforeNodeMorphed } = {}) {\n    this.#beforeNodeMorphed = beforeNodeMorphed || (() => true);\n  }\n\n  beforeNodeAdded = (node) => {\n    return !(node.id && node.hasAttribute(\"data-turbo-permanent\") && document.getElementById(node.id))\n  }\n\n  beforeNodeMorphed = (currentElement, newElement) => {\n    if (currentElement instanceof Element) {\n      if (!currentElement.hasAttribute(\"data-turbo-permanent\") && this.#beforeNodeMorphed(currentElement, newElement)) {\n        const event = dispatch(\"turbo:before-morph-element\", {\n          cancelable: true,\n          target: currentElement,\n          detail: { currentElement, newElement }\n        });\n\n        return !event.defaultPrevented\n      } else {\n        return false\n      }\n    }\n  }\n\n  beforeAttributeUpdated = (attributeName, target, mutationType) => {\n    const event = dispatch(\"turbo:before-morph-attribute\", {\n      cancelable: true,\n      target,\n      detail: { attributeName, mutationType }\n    });\n\n    return !event.defaultPrevented\n  }\n\n  beforeNodeRemoved = (node) => {\n    return this.beforeNodeMorphed(node)\n  }\n\n  afterNodeMorphed = (currentElement, newElement) => {\n    if (currentElement instanceof Element) {\n      dispatch(\"turbo:morph-element\", {\n        target: currentElement,\n        detail: { currentElement, newElement }\n      });\n    }\n  }\n}\n\nclass MorphingFrameRenderer extends FrameRenderer {\n  static renderElement(currentElement, newElement) {\n    dispatch(\"turbo:before-frame-morph\", {\n      target: currentElement,\n      detail: { currentElement, newElement }\n    });\n\n    morphChildren(currentElement, newElement);\n  }\n\n  async preservingPermanentElements(callback) {\n    return await callback()\n  }\n}\n\nclass ProgressBar {\n  static animationDuration = 300 /*ms*/\n\n  static get defaultCSS() {\n    return unindent`\n      .turbo-progress-bar {\n        position: fixed;\n        display: block;\n        top: 0;\n        left: 0;\n        height: 3px;\n        background: #0076ff;\n        z-index: 2147483647;\n        transition:\n          width ${ProgressBar.animationDuration}ms ease-out,\n          opacity ${ProgressBar.animationDuration / 2}ms ${ProgressBar.animationDuration / 2}ms ease-in;\n        transform: translate3d(0, 0, 0);\n      }\n    `\n  }\n\n  hiding = false\n  value = 0\n  visible = false\n\n  constructor() {\n    this.stylesheetElement = this.createStylesheetElement();\n    this.progressElement = this.createProgressElement();\n    this.installStylesheetElement();\n    this.setValue(0);\n  }\n\n  show() {\n    if (!this.visible) {\n      this.visible = true;\n      this.installProgressElement();\n      this.startTrickling();\n    }\n  }\n\n  hide() {\n    if (this.visible && !this.hiding) {\n      this.hiding = true;\n      this.fadeProgressElement(() => {\n        this.uninstallProgressElement();\n        this.stopTrickling();\n        this.visible = false;\n        this.hiding = false;\n      });\n    }\n  }\n\n  setValue(value) {\n    this.value = value;\n    this.refresh();\n  }\n\n  // Private\n\n  installStylesheetElement() {\n    document.head.insertBefore(this.stylesheetElement, document.head.firstChild);\n  }\n\n  installProgressElement() {\n    this.progressElement.style.width = \"0\";\n    this.progressElement.style.opacity = \"1\";\n    document.documentElement.insertBefore(this.progressElement, document.body);\n    this.refresh();\n  }\n\n  fadeProgressElement(callback) {\n    this.progressElement.style.opacity = \"0\";\n    setTimeout(callback, ProgressBar.animationDuration * 1.5);\n  }\n\n  uninstallProgressElement() {\n    if (this.progressElement.parentNode) {\n      document.documentElement.removeChild(this.progressElement);\n    }\n  }\n\n  startTrickling() {\n    if (!this.trickleInterval) {\n      this.trickleInterval = window.setInterval(this.trickle, ProgressBar.animationDuration);\n    }\n  }\n\n  stopTrickling() {\n    window.clearInterval(this.trickleInterval);\n    delete this.trickleInterval;\n  }\n\n  trickle = () => {\n    this.setValue(this.value + Math.random() / 100);\n  }\n\n  refresh() {\n    requestAnimationFrame(() => {\n      this.progressElement.style.width = `${10 + this.value * 90}%`;\n    });\n  }\n\n  createStylesheetElement() {\n    const element = document.createElement(\"style\");\n    element.type = \"text/css\";\n    element.textContent = ProgressBar.defaultCSS;\n    const cspNonce = getCspNonce();\n    if (cspNonce) {\n      element.nonce = cspNonce;\n    }\n    return element\n  }\n\n  createProgressElement() {\n    const element = document.createElement(\"div\");\n    element.className = \"turbo-progress-bar\";\n    return element\n  }\n}\n\nclass HeadSnapshot extends Snapshot {\n  detailsByOuterHTML = this.children\n    .filter((element) => !elementIsNoscript(element))\n    .map((element) => elementWithoutNonce(element))\n    .reduce((result, element) => {\n      const { outerHTML } = element;\n      const details =\n        outerHTML in result\n          ? result[outerHTML]\n          : {\n              type: elementType(element),\n              tracked: elementIsTracked(element),\n              elements: []\n            };\n      return {\n        ...result,\n        [outerHTML]: {\n          ...details,\n          elements: [...details.elements, element]\n        }\n      }\n    }, {})\n\n  get trackedElementSignature() {\n    return Object.keys(this.detailsByOuterHTML)\n      .filter((outerHTML) => this.detailsByOuterHTML[outerHTML].tracked)\n      .join(\"\")\n  }\n\n  getScriptElementsNotInSnapshot(snapshot) {\n    return this.getElementsMatchingTypeNotInSnapshot(\"script\", snapshot)\n  }\n\n  getStylesheetElementsNotInSnapshot(snapshot) {\n    return this.getElementsMatchingTypeNotInSnapshot(\"stylesheet\", snapshot)\n  }\n\n  getElementsMatchingTypeNotInSnapshot(matchedType, snapshot) {\n    return Object.keys(this.detailsByOuterHTML)\n      .filter((outerHTML) => !(outerHTML in snapshot.detailsByOuterHTML))\n      .map((outerHTML) => this.detailsByOuterHTML[outerHTML])\n      .filter(({ type }) => type == matchedType)\n      .map(({ elements: [element] }) => element)\n  }\n\n  get provisionalElements() {\n    return Object.keys(this.detailsByOuterHTML).reduce((result, outerHTML) => {\n      const { type, tracked, elements } = this.detailsByOuterHTML[outerHTML];\n      if (type == null && !tracked) {\n        return [...result, ...elements]\n      } else if (elements.length > 1) {\n        return [...result, ...elements.slice(1)]\n      } else {\n        return result\n      }\n    }, [])\n  }\n\n  getMetaValue(name) {\n    const element = this.findMetaElementByName(name);\n    return element ? element.getAttribute(\"content\") : null\n  }\n\n  findMetaElementByName(name) {\n    return Object.keys(this.detailsByOuterHTML).reduce((result, outerHTML) => {\n      const {\n        elements: [element]\n      } = this.detailsByOuterHTML[outerHTML];\n      return elementIsMetaElementWithName(element, name) ? element : result\n    }, undefined | undefined)\n  }\n}\n\nfunction elementType(element) {\n  if (elementIsScript(element)) {\n    return \"script\"\n  } else if (elementIsStylesheet(element)) {\n    return \"stylesheet\"\n  }\n}\n\nfunction elementIsTracked(element) {\n  return element.getAttribute(\"data-turbo-track\") == \"reload\"\n}\n\nfunction elementIsScript(element) {\n  const tagName = element.localName;\n  return tagName == \"script\"\n}\n\nfunction elementIsNoscript(element) {\n  const tagName = element.localName;\n  return tagName == \"noscript\"\n}\n\nfunction elementIsStylesheet(element) {\n  const tagName = element.localName;\n  return tagName == \"style\" || (tagName == \"link\" && element.getAttribute(\"rel\") == \"stylesheet\")\n}\n\nfunction elementIsMetaElementWithName(element, name) {\n  const tagName = element.localName;\n  return tagName == \"meta\" && element.getAttribute(\"name\") == name\n}\n\nfunction elementWithoutNonce(element) {\n  if (element.hasAttribute(\"nonce\")) {\n    element.setAttribute(\"nonce\", \"\");\n  }\n\n  return element\n}\n\nclass PageSnapshot extends Snapshot {\n  static fromHTMLString(html = \"\") {\n    return this.fromDocument(parseHTMLDocument(html))\n  }\n\n  static fromElement(element) {\n    return this.fromDocument(element.ownerDocument)\n  }\n\n  static fromDocument({ documentElement, body, head }) {\n    return new this(documentElement, body, new HeadSnapshot(head))\n  }\n\n  constructor(documentElement, body, headSnapshot) {\n    super(body);\n    this.documentElement = documentElement;\n    this.headSnapshot = headSnapshot;\n  }\n\n  clone() {\n    const clonedElement = this.element.cloneNode(true);\n\n    const selectElements = this.element.querySelectorAll(\"select\");\n    const clonedSelectElements = clonedElement.querySelectorAll(\"select\");\n\n    for (const [index, source] of selectElements.entries()) {\n      const clone = clonedSelectElements[index];\n      for (const option of clone.selectedOptions) option.selected = false;\n      for (const option of source.selectedOptions) clone.options[option.index].selected = true;\n    }\n\n    for (const clonedPasswordInput of clonedElement.querySelectorAll('input[type=\"password\"]')) {\n      clonedPasswordInput.value = \"\";\n    }\n\n    return new PageSnapshot(this.documentElement, clonedElement, this.headSnapshot)\n  }\n\n  get lang() {\n    return this.documentElement.getAttribute(\"lang\")\n  }\n\n  get headElement() {\n    return this.headSnapshot.element\n  }\n\n  get rootLocation() {\n    const root = this.getSetting(\"root\") ?? \"/\";\n    return expandURL(root)\n  }\n\n  get cacheControlValue() {\n    return this.getSetting(\"cache-control\")\n  }\n\n  get isPreviewable() {\n    return this.cacheControlValue != \"no-preview\"\n  }\n\n  get isCacheable() {\n    return this.cacheControlValue != \"no-cache\"\n  }\n\n  get isVisitable() {\n    return this.getSetting(\"visit-control\") != \"reload\"\n  }\n\n  get prefersViewTransitions() {\n    return this.headSnapshot.getMetaValue(\"view-transition\") === \"same-origin\"\n  }\n\n  get shouldMorphPage() {\n    return this.getSetting(\"refresh-method\") === \"morph\"\n  }\n\n  get shouldPreserveScrollPosition() {\n    return this.getSetting(\"refresh-scroll\") === \"preserve\"\n  }\n\n  // Private\n\n  getSetting(name) {\n    return this.headSnapshot.getMetaValue(`turbo-${name}`)\n  }\n}\n\nclass ViewTransitioner {\n  #viewTransitionStarted = false\n  #lastOperation = Promise.resolve()\n\n  renderChange(useViewTransition, render) {\n    if (useViewTransition && this.viewTransitionsAvailable && !this.#viewTransitionStarted) {\n      this.#viewTransitionStarted = true;\n      this.#lastOperation = this.#lastOperation.then(async () => {\n        await document.startViewTransition(render).finished;\n      });\n    } else {\n      this.#lastOperation = this.#lastOperation.then(render);\n    }\n\n    return this.#lastOperation\n  }\n\n  get viewTransitionsAvailable() {\n    return document.startViewTransition\n  }\n}\n\nconst defaultOptions = {\n  action: \"advance\",\n  historyChanged: false,\n  visitCachedSnapshot: () => {},\n  willRender: true,\n  updateHistory: true,\n  shouldCacheSnapshot: true,\n  acceptsStreamResponse: false\n};\n\nconst TimingMetric = {\n  visitStart: \"visitStart\",\n  requestStart: \"requestStart\",\n  requestEnd: \"requestEnd\",\n  visitEnd: \"visitEnd\"\n};\n\nconst VisitState = {\n  initialized: \"initialized\",\n  started: \"started\",\n  canceled: \"canceled\",\n  failed: \"failed\",\n  completed: \"completed\"\n};\n\nconst SystemStatusCode = {\n  networkFailure: 0,\n  timeoutFailure: -1,\n  contentTypeMismatch: -2\n};\n\nconst Direction = {\n  advance: \"forward\",\n  restore: \"back\",\n  replace: \"none\"\n};\n\nclass Visit {\n  identifier = uuid() // Required by turbo-ios\n  timingMetrics = {}\n\n  followedRedirect = false\n  historyChanged = false\n  scrolled = false\n  shouldCacheSnapshot = true\n  acceptsStreamResponse = false\n  snapshotCached = false\n  state = VisitState.initialized\n  viewTransitioner = new ViewTransitioner()\n\n  constructor(delegate, location, restorationIdentifier, options = {}) {\n    this.delegate = delegate;\n    this.location = location;\n    this.restorationIdentifier = restorationIdentifier || uuid();\n\n    const {\n      action,\n      historyChanged,\n      referrer,\n      snapshot,\n      snapshotHTML,\n      response,\n      visitCachedSnapshot,\n      willRender,\n      updateHistory,\n      shouldCacheSnapshot,\n      acceptsStreamResponse,\n      direction\n    } = {\n      ...defaultOptions,\n      ...options\n    };\n    this.action = action;\n    this.historyChanged = historyChanged;\n    this.referrer = referrer;\n    this.snapshot = snapshot;\n    this.snapshotHTML = snapshotHTML;\n    this.response = response;\n    this.isSamePage = this.delegate.locationWithActionIsSamePage(this.location, this.action);\n    this.isPageRefresh = this.view.isPageRefresh(this);\n    this.visitCachedSnapshot = visitCachedSnapshot;\n    this.willRender = willRender;\n    this.updateHistory = updateHistory;\n    this.scrolled = !willRender;\n    this.shouldCacheSnapshot = shouldCacheSnapshot;\n    this.acceptsStreamResponse = acceptsStreamResponse;\n    this.direction = direction || Direction[action];\n  }\n\n  get adapter() {\n    return this.delegate.adapter\n  }\n\n  get view() {\n    return this.delegate.view\n  }\n\n  get history() {\n    return this.delegate.history\n  }\n\n  get restorationData() {\n    return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)\n  }\n\n  get silent() {\n    return this.isSamePage\n  }\n\n  start() {\n    if (this.state == VisitState.initialized) {\n      this.recordTimingMetric(TimingMetric.visitStart);\n      this.state = VisitState.started;\n      this.adapter.visitStarted(this);\n      this.delegate.visitStarted(this);\n    }\n  }\n\n  cancel() {\n    if (this.state == VisitState.started) {\n      if (this.request) {\n        this.request.cancel();\n      }\n      this.cancelRender();\n      this.state = VisitState.canceled;\n    }\n  }\n\n  complete() {\n    if (this.state == VisitState.started) {\n      this.recordTimingMetric(TimingMetric.visitEnd);\n      this.adapter.visitCompleted(this);\n      this.state = VisitState.completed;\n      this.followRedirect();\n\n      if (!this.followedRedirect) {\n        this.delegate.visitCompleted(this);\n      }\n    }\n  }\n\n  fail() {\n    if (this.state == VisitState.started) {\n      this.state = VisitState.failed;\n      this.adapter.visitFailed(this);\n      this.delegate.visitCompleted(this);\n    }\n  }\n\n  changeHistory() {\n    if (!this.historyChanged && this.updateHistory) {\n      const actionForHistory = this.location.href === this.referrer?.href ? \"replace\" : this.action;\n      const method = getHistoryMethodForAction(actionForHistory);\n      this.history.update(method, this.location, this.restorationIdentifier);\n      this.historyChanged = true;\n    }\n  }\n\n  issueRequest() {\n    if (this.hasPreloadedResponse()) {\n      this.simulateRequest();\n    } else if (this.shouldIssueRequest() && !this.request) {\n      this.request = new FetchRequest(this, FetchMethod.get, this.location);\n      this.request.perform();\n    }\n  }\n\n  simulateRequest() {\n    if (this.response) {\n      this.startRequest();\n      this.recordResponse();\n      this.finishRequest();\n    }\n  }\n\n  startRequest() {\n    this.recordTimingMetric(TimingMetric.requestStart);\n    this.adapter.visitRequestStarted(this);\n  }\n\n  recordResponse(response = this.response) {\n    this.response = response;\n    if (response) {\n      const { statusCode } = response;\n      if (isSuccessful(statusCode)) {\n        this.adapter.visitRequestCompleted(this);\n      } else {\n        this.adapter.visitRequestFailedWithStatusCode(this, statusCode);\n      }\n    }\n  }\n\n  finishRequest() {\n    this.recordTimingMetric(TimingMetric.requestEnd);\n    this.adapter.visitRequestFinished(this);\n  }\n\n  loadResponse() {\n    if (this.response) {\n      const { statusCode, responseHTML } = this.response;\n      this.render(async () => {\n        if (this.shouldCacheSnapshot) this.cacheSnapshot();\n        if (this.view.renderPromise) await this.view.renderPromise;\n\n        if (isSuccessful(statusCode) && responseHTML != null) {\n          const snapshot = PageSnapshot.fromHTMLString(responseHTML);\n          await this.renderPageSnapshot(snapshot, false);\n\n          this.adapter.visitRendered(this);\n          this.complete();\n        } else {\n          await this.view.renderError(PageSnapshot.fromHTMLString(responseHTML), this);\n          this.adapter.visitRendered(this);\n          this.fail();\n        }\n      });\n    }\n  }\n\n  getCachedSnapshot() {\n    const snapshot = this.view.getCachedSnapshotForLocation(this.location) || this.getPreloadedSnapshot();\n\n    if (snapshot && (!getAnchor(this.location) || snapshot.hasAnchor(getAnchor(this.location)))) {\n      if (this.action == \"restore\" || snapshot.isPreviewable) {\n        return snapshot\n      }\n    }\n  }\n\n  getPreloadedSnapshot() {\n    if (this.snapshotHTML) {\n      return PageSnapshot.fromHTMLString(this.snapshotHTML)\n    }\n  }\n\n  hasCachedSnapshot() {\n    return this.getCachedSnapshot() != null\n  }\n\n  loadCachedSnapshot() {\n    const snapshot = this.getCachedSnapshot();\n    if (snapshot) {\n      const isPreview = this.shouldIssueRequest();\n      this.render(async () => {\n        this.cacheSnapshot();\n        if (this.isSamePage || this.isPageRefresh) {\n          this.adapter.visitRendered(this);\n        } else {\n          if (this.view.renderPromise) await this.view.renderPromise;\n\n          await this.renderPageSnapshot(snapshot, isPreview);\n\n          this.adapter.visitRendered(this);\n          if (!isPreview) {\n            this.complete();\n          }\n        }\n      });\n    }\n  }\n\n  followRedirect() {\n    if (this.redirectedToLocation && !this.followedRedirect && this.response?.redirected) {\n      this.adapter.visitProposedToLocation(this.redirectedToLocation, {\n        action: \"replace\",\n        response: this.response,\n        shouldCacheSnapshot: false,\n        willRender: false\n      });\n      this.followedRedirect = true;\n    }\n  }\n\n  goToSamePageAnchor() {\n    if (this.isSamePage) {\n      this.render(async () => {\n        this.cacheSnapshot();\n        this.performScroll();\n        this.changeHistory();\n        this.adapter.visitRendered(this);\n      });\n    }\n  }\n\n  // Fetch request delegate\n\n  prepareRequest(request) {\n    if (this.acceptsStreamResponse) {\n      request.acceptResponseType(StreamMessage.contentType);\n    }\n  }\n\n  requestStarted() {\n    this.startRequest();\n  }\n\n  requestPreventedHandlingResponse(_request, _response) {}\n\n  async requestSucceededWithResponse(request, response) {\n    const responseHTML = await response.responseHTML;\n    const { redirected, statusCode } = response;\n    if (responseHTML == undefined) {\n      this.recordResponse({\n        statusCode: SystemStatusCode.contentTypeMismatch,\n        redirected\n      });\n    } else {\n      this.redirectedToLocation = response.redirected ? response.location : undefined;\n      this.recordResponse({ statusCode: statusCode, responseHTML, redirected });\n    }\n  }\n\n  async requestFailedWithResponse(request, response) {\n    const responseHTML = await response.responseHTML;\n    const { redirected, statusCode } = response;\n    if (responseHTML == undefined) {\n      this.recordResponse({\n        statusCode: SystemStatusCode.contentTypeMismatch,\n        redirected\n      });\n    } else {\n      this.recordResponse({ statusCode: statusCode, responseHTML, redirected });\n    }\n  }\n\n  requestErrored(_request, _error) {\n    this.recordResponse({\n      statusCode: SystemStatusCode.networkFailure,\n      redirected: false\n    });\n  }\n\n  requestFinished() {\n    this.finishRequest();\n  }\n\n  // Scrolling\n\n  performScroll() {\n    if (!this.scrolled && !this.view.forceReloaded && !this.view.shouldPreserveScrollPosition(this)) {\n      if (this.action == \"restore\") {\n        this.scrollToRestoredPosition() || this.scrollToAnchor() || this.view.scrollToTop();\n      } else {\n        this.scrollToAnchor() || this.view.scrollToTop();\n      }\n      if (this.isSamePage) {\n        this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation, this.location);\n      }\n\n      this.scrolled = true;\n    }\n  }\n\n  scrollToRestoredPosition() {\n    const { scrollPosition } = this.restorationData;\n    if (scrollPosition) {\n      this.view.scrollToPosition(scrollPosition);\n      return true\n    }\n  }\n\n  scrollToAnchor() {\n    const anchor = getAnchor(this.location);\n    if (anchor != null) {\n      this.view.scrollToAnchor(anchor);\n      return true\n    }\n  }\n\n  // Instrumentation\n\n  recordTimingMetric(metric) {\n    this.timingMetrics[metric] = new Date().getTime();\n  }\n\n  getTimingMetrics() {\n    return { ...this.timingMetrics }\n  }\n\n  // Private\n\n  hasPreloadedResponse() {\n    return typeof this.response == \"object\"\n  }\n\n  shouldIssueRequest() {\n    if (this.isSamePage) {\n      return false\n    } else if (this.action == \"restore\") {\n      return !this.hasCachedSnapshot()\n    } else {\n      return this.willRender\n    }\n  }\n\n  cacheSnapshot() {\n    if (!this.snapshotCached) {\n      this.view.cacheSnapshot(this.snapshot).then((snapshot) => snapshot && this.visitCachedSnapshot(snapshot));\n      this.snapshotCached = true;\n    }\n  }\n\n  async render(callback) {\n    this.cancelRender();\n    await new Promise((resolve) => {\n      this.frame =\n        document.visibilityState === \"hidden\" ? setTimeout(() => resolve(), 0) : requestAnimationFrame(() => resolve());\n    });\n    await callback();\n    delete this.frame;\n  }\n\n  async renderPageSnapshot(snapshot, isPreview) {\n    await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(snapshot), async () => {\n      await this.view.renderPage(snapshot, isPreview, this.willRender, this);\n      this.performScroll();\n    });\n  }\n\n  cancelRender() {\n    if (this.frame) {\n      cancelAnimationFrame(this.frame);\n      delete this.frame;\n    }\n  }\n}\n\nfunction isSuccessful(statusCode) {\n  return statusCode >= 200 && statusCode < 300\n}\n\nclass BrowserAdapter {\n  progressBar = new ProgressBar()\n\n  constructor(session) {\n    this.session = session;\n  }\n\n  visitProposedToLocation(location, options) {\n    if (locationIsVisitable(location, this.navigator.rootLocation)) {\n      this.navigator.startVisit(location, options?.restorationIdentifier || uuid(), options);\n    } else {\n      window.location.href = location.toString();\n    }\n  }\n\n  visitStarted(visit) {\n    this.location = visit.location;\n    visit.loadCachedSnapshot();\n    visit.issueRequest();\n    visit.goToSamePageAnchor();\n  }\n\n  visitRequestStarted(visit) {\n    this.progressBar.setValue(0);\n    if (visit.hasCachedSnapshot() || visit.action != \"restore\") {\n      this.showVisitProgressBarAfterDelay();\n    } else {\n      this.showProgressBar();\n    }\n  }\n\n  visitRequestCompleted(visit) {\n    visit.loadResponse();\n  }\n\n  visitRequestFailedWithStatusCode(visit, statusCode) {\n    switch (statusCode) {\n      case SystemStatusCode.networkFailure:\n      case SystemStatusCode.timeoutFailure:\n      case SystemStatusCode.contentTypeMismatch:\n        return this.reload({\n          reason: \"request_failed\",\n          context: {\n            statusCode\n          }\n        })\n      default:\n        return visit.loadResponse()\n    }\n  }\n\n  visitRequestFinished(_visit) {}\n\n  visitCompleted(_visit) {\n    this.progressBar.setValue(1);\n    this.hideVisitProgressBar();\n  }\n\n  pageInvalidated(reason) {\n    this.reload(reason);\n  }\n\n  visitFailed(_visit) {\n    this.progressBar.setValue(1);\n    this.hideVisitProgressBar();\n  }\n\n  visitRendered(_visit) {}\n\n  // Link prefetching\n\n  linkPrefetchingIsEnabledForLocation(location) {\n    return true\n  }\n\n  // Form Submission Delegate\n\n  formSubmissionStarted(_formSubmission) {\n    this.progressBar.setValue(0);\n    this.showFormProgressBarAfterDelay();\n  }\n\n  formSubmissionFinished(_formSubmission) {\n    this.progressBar.setValue(1);\n    this.hideFormProgressBar();\n  }\n\n  // Private\n\n  showVisitProgressBarAfterDelay() {\n    this.visitProgressBarTimeout = window.setTimeout(this.showProgressBar, this.session.progressBarDelay);\n  }\n\n  hideVisitProgressBar() {\n    this.progressBar.hide();\n    if (this.visitProgressBarTimeout != null) {\n      window.clearTimeout(this.visitProgressBarTimeout);\n      delete this.visitProgressBarTimeout;\n    }\n  }\n\n  showFormProgressBarAfterDelay() {\n    if (this.formProgressBarTimeout == null) {\n      this.formProgressBarTimeout = window.setTimeout(this.showProgressBar, this.session.progressBarDelay);\n    }\n  }\n\n  hideFormProgressBar() {\n    this.progressBar.hide();\n    if (this.formProgressBarTimeout != null) {\n      window.clearTimeout(this.formProgressBarTimeout);\n      delete this.formProgressBarTimeout;\n    }\n  }\n\n  showProgressBar = () => {\n    this.progressBar.show();\n  }\n\n  reload(reason) {\n    dispatch(\"turbo:reload\", { detail: reason });\n\n    window.location.href = this.location?.toString() || window.location.href;\n  }\n\n  get navigator() {\n    return this.session.navigator\n  }\n}\n\nclass CacheObserver {\n  selector = \"[data-turbo-temporary]\"\n  deprecatedSelector = \"[data-turbo-cache=false]\"\n\n  started = false\n\n  start() {\n    if (!this.started) {\n      this.started = true;\n      addEventListener(\"turbo:before-cache\", this.removeTemporaryElements, false);\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.started = false;\n      removeEventListener(\"turbo:before-cache\", this.removeTemporaryElements, false);\n    }\n  }\n\n  removeTemporaryElements = (_event) => {\n    for (const element of this.temporaryElements) {\n      element.remove();\n    }\n  }\n\n  get temporaryElements() {\n    return [...document.querySelectorAll(this.selector), ...this.temporaryElementsWithDeprecation]\n  }\n\n  get temporaryElementsWithDeprecation() {\n    const elements = document.querySelectorAll(this.deprecatedSelector);\n\n    if (elements.length) {\n      console.warn(\n        `The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`\n      );\n    }\n\n    return [...elements]\n  }\n}\n\nclass FrameRedirector {\n  constructor(session, element) {\n    this.session = session;\n    this.element = element;\n    this.linkInterceptor = new LinkInterceptor(this, element);\n    this.formSubmitObserver = new FormSubmitObserver(this, element);\n  }\n\n  start() {\n    this.linkInterceptor.start();\n    this.formSubmitObserver.start();\n  }\n\n  stop() {\n    this.linkInterceptor.stop();\n    this.formSubmitObserver.stop();\n  }\n\n  // Link interceptor delegate\n\n  shouldInterceptLinkClick(element, _location, _event) {\n    return this.#shouldRedirect(element)\n  }\n\n  linkClickIntercepted(element, url, event) {\n    const frame = this.#findFrameElement(element);\n    if (frame) {\n      frame.delegate.linkClickIntercepted(element, url, event);\n    }\n  }\n\n  // Form submit observer delegate\n\n  willSubmitForm(element, submitter) {\n    return (\n      element.closest(\"turbo-frame\") == null &&\n      this.#shouldSubmit(element, submitter) &&\n      this.#shouldRedirect(element, submitter)\n    )\n  }\n\n  formSubmitted(element, submitter) {\n    const frame = this.#findFrameElement(element, submitter);\n    if (frame) {\n      frame.delegate.formSubmitted(element, submitter);\n    }\n  }\n\n  #shouldSubmit(form, submitter) {\n    const action = getAction$1(form, submitter);\n    const meta = this.element.ownerDocument.querySelector(`meta[name=\"turbo-root\"]`);\n    const rootLocation = expandURL(meta?.content ?? \"/\");\n\n    return this.#shouldRedirect(form, submitter) && locationIsVisitable(action, rootLocation)\n  }\n\n  #shouldRedirect(element, submitter) {\n    const isNavigatable =\n      element instanceof HTMLFormElement\n        ? this.session.submissionIsNavigatable(element, submitter)\n        : this.session.elementIsNavigatable(element);\n\n    if (isNavigatable) {\n      const frame = this.#findFrameElement(element, submitter);\n      return frame ? frame != element.closest(\"turbo-frame\") : false\n    } else {\n      return false\n    }\n  }\n\n  #findFrameElement(element, submitter) {\n    const id = submitter?.getAttribute(\"data-turbo-frame\") || element.getAttribute(\"data-turbo-frame\");\n    if (id && id != \"_top\") {\n      const frame = this.element.querySelector(`#${id}:not([disabled])`);\n      if (frame instanceof FrameElement) {\n        return frame\n      }\n    }\n  }\n}\n\nclass History {\n  location\n  restorationIdentifier = uuid()\n  restorationData = {}\n  started = false\n  pageLoaded = false\n  currentIndex = 0\n\n  constructor(delegate) {\n    this.delegate = delegate;\n  }\n\n  start() {\n    if (!this.started) {\n      addEventListener(\"popstate\", this.onPopState, false);\n      addEventListener(\"load\", this.onPageLoad, false);\n      this.currentIndex = history.state?.turbo?.restorationIndex || 0;\n      this.started = true;\n      this.replace(new URL(window.location.href));\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      removeEventListener(\"popstate\", this.onPopState, false);\n      removeEventListener(\"load\", this.onPageLoad, false);\n      this.started = false;\n    }\n  }\n\n  push(location, restorationIdentifier) {\n    this.update(history.pushState, location, restorationIdentifier);\n  }\n\n  replace(location, restorationIdentifier) {\n    this.update(history.replaceState, location, restorationIdentifier);\n  }\n\n  update(method, location, restorationIdentifier = uuid()) {\n    if (method === history.pushState) ++this.currentIndex;\n\n    const state = { turbo: { restorationIdentifier, restorationIndex: this.currentIndex } };\n    method.call(history, state, \"\", location.href);\n    this.location = location;\n    this.restorationIdentifier = restorationIdentifier;\n  }\n\n  // Restoration data\n\n  getRestorationDataForIdentifier(restorationIdentifier) {\n    return this.restorationData[restorationIdentifier] || {}\n  }\n\n  updateRestorationData(additionalData) {\n    const { restorationIdentifier } = this;\n    const restorationData = this.restorationData[restorationIdentifier];\n    this.restorationData[restorationIdentifier] = {\n      ...restorationData,\n      ...additionalData\n    };\n  }\n\n  // Scroll restoration\n\n  assumeControlOfScrollRestoration() {\n    if (!this.previousScrollRestoration) {\n      this.previousScrollRestoration = history.scrollRestoration ?? \"auto\";\n      history.scrollRestoration = \"manual\";\n    }\n  }\n\n  relinquishControlOfScrollRestoration() {\n    if (this.previousScrollRestoration) {\n      history.scrollRestoration = this.previousScrollRestoration;\n      delete this.previousScrollRestoration;\n    }\n  }\n\n  // Event handlers\n\n  onPopState = (event) => {\n    if (this.shouldHandlePopState()) {\n      const { turbo } = event.state || {};\n      if (turbo) {\n        this.location = new URL(window.location.href);\n        const { restorationIdentifier, restorationIndex } = turbo;\n        this.restorationIdentifier = restorationIdentifier;\n        const direction = restorationIndex > this.currentIndex ? \"forward\" : \"back\";\n        this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location, restorationIdentifier, direction);\n        this.currentIndex = restorationIndex;\n      }\n    }\n  }\n\n  onPageLoad = async (_event) => {\n    await nextMicrotask();\n    this.pageLoaded = true;\n  }\n\n  // Private\n\n  shouldHandlePopState() {\n    // Safari dispatches a popstate event after window's load event, ignore it\n    return this.pageIsLoaded()\n  }\n\n  pageIsLoaded() {\n    return this.pageLoaded || document.readyState == \"complete\"\n  }\n}\n\nclass LinkPrefetchObserver {\n  started = false\n  #prefetchedLink = null\n\n  constructor(delegate, eventTarget) {\n    this.delegate = delegate;\n    this.eventTarget = eventTarget;\n  }\n\n  start() {\n    if (this.started) return\n\n    if (this.eventTarget.readyState === \"loading\") {\n      this.eventTarget.addEventListener(\"DOMContentLoaded\", this.#enable, { once: true });\n    } else {\n      this.#enable();\n    }\n  }\n\n  stop() {\n    if (!this.started) return\n\n    this.eventTarget.removeEventListener(\"mouseenter\", this.#tryToPrefetchRequest, {\n      capture: true,\n      passive: true\n    });\n    this.eventTarget.removeEventListener(\"mouseleave\", this.#cancelRequestIfObsolete, {\n      capture: true,\n      passive: true\n    });\n\n    this.eventTarget.removeEventListener(\"turbo:before-fetch-request\", this.#tryToUsePrefetchedRequest, true);\n    this.started = false;\n  }\n\n  #enable = () => {\n    this.eventTarget.addEventListener(\"mouseenter\", this.#tryToPrefetchRequest, {\n      capture: true,\n      passive: true\n    });\n    this.eventTarget.addEventListener(\"mouseleave\", this.#cancelRequestIfObsolete, {\n      capture: true,\n      passive: true\n    });\n\n    this.eventTarget.addEventListener(\"turbo:before-fetch-request\", this.#tryToUsePrefetchedRequest, true);\n    this.started = true;\n  }\n\n  #tryToPrefetchRequest = (event) => {\n    if (getMetaContent(\"turbo-prefetch\") === \"false\") return\n\n    const target = event.target;\n    const isLink = target.matches && target.matches(\"a[href]:not([target^=_]):not([download])\");\n\n    if (isLink && this.#isPrefetchable(target)) {\n      const link = target;\n      const location = getLocationForLink(link);\n\n      if (this.delegate.canPrefetchRequestToLocation(link, location)) {\n        this.#prefetchedLink = link;\n\n        const fetchRequest = new FetchRequest(\n          this,\n          FetchMethod.get,\n          location,\n          new URLSearchParams(),\n          target\n        );\n\n        prefetchCache.setLater(location.toString(), fetchRequest, this.#cacheTtl);\n      }\n    }\n  }\n\n  #cancelRequestIfObsolete = (event) => {\n    if (event.target === this.#prefetchedLink) this.#cancelPrefetchRequest();\n  }\n\n  #cancelPrefetchRequest = () => {\n    prefetchCache.clear();\n    this.#prefetchedLink = null;\n  }\n\n  #tryToUsePrefetchedRequest = (event) => {\n    if (event.target.tagName !== \"FORM\" && event.detail.fetchOptions.method === \"GET\") {\n      const cached = prefetchCache.get(event.detail.url.toString());\n\n      if (cached) {\n        // User clicked link, use cache response\n        event.detail.fetchRequest = cached;\n      }\n\n      prefetchCache.clear();\n    }\n  }\n\n  prepareRequest(request) {\n    const link = request.target;\n\n    request.headers[\"X-Sec-Purpose\"] = \"prefetch\";\n\n    const turboFrame = link.closest(\"turbo-frame\");\n    const turboFrameTarget = link.getAttribute(\"data-turbo-frame\") || turboFrame?.getAttribute(\"target\") || turboFrame?.id;\n\n    if (turboFrameTarget && turboFrameTarget !== \"_top\") {\n      request.headers[\"Turbo-Frame\"] = turboFrameTarget;\n    }\n  }\n\n  // Fetch request interface\n\n  requestSucceededWithResponse() {}\n\n  requestStarted(fetchRequest) {}\n\n  requestErrored(fetchRequest) {}\n\n  requestFinished(fetchRequest) {}\n\n  requestPreventedHandlingResponse(fetchRequest, fetchResponse) {}\n\n  requestFailedWithResponse(fetchRequest, fetchResponse) {}\n\n  get #cacheTtl() {\n    return Number(getMetaContent(\"turbo-prefetch-cache-time\")) || cacheTtl\n  }\n\n  #isPrefetchable(link) {\n    const href = link.getAttribute(\"href\");\n\n    if (!href) return false\n\n    if (unfetchableLink(link)) return false\n    if (linkToTheSamePage(link)) return false\n    if (linkOptsOut(link)) return false\n    if (nonSafeLink(link)) return false\n    if (eventPrevented(link)) return false\n\n    return true\n  }\n}\n\nconst unfetchableLink = (link) => {\n  return link.origin !== document.location.origin || ![\"http:\", \"https:\"].includes(link.protocol) || link.hasAttribute(\"target\")\n};\n\nconst linkToTheSamePage = (link) => {\n  return (link.pathname + link.search === document.location.pathname + document.location.search) || link.href.startsWith(\"#\")\n};\n\nconst linkOptsOut = (link) => {\n  if (link.getAttribute(\"data-turbo-prefetch\") === \"false\") return true\n  if (link.getAttribute(\"data-turbo\") === \"false\") return true\n\n  const turboPrefetchParent = findClosestRecursively(link, \"[data-turbo-prefetch]\");\n  if (turboPrefetchParent && turboPrefetchParent.getAttribute(\"data-turbo-prefetch\") === \"false\") return true\n\n  return false\n};\n\nconst nonSafeLink = (link) => {\n  const turboMethod = link.getAttribute(\"data-turbo-method\");\n  if (turboMethod && turboMethod.toLowerCase() !== \"get\") return true\n\n  if (isUJS(link)) return true\n  if (link.hasAttribute(\"data-turbo-confirm\")) return true\n  if (link.hasAttribute(\"data-turbo-stream\")) return true\n\n  return false\n};\n\nconst isUJS = (link) => {\n  return link.hasAttribute(\"data-remote\") || link.hasAttribute(\"data-behavior\") || link.hasAttribute(\"data-confirm\") || link.hasAttribute(\"data-method\")\n};\n\nconst eventPrevented = (link) => {\n  const event = dispatch(\"turbo:before-prefetch\", { target: link, cancelable: true });\n  return event.defaultPrevented\n};\n\nclass Navigator {\n  constructor(delegate) {\n    this.delegate = delegate;\n  }\n\n  proposeVisit(location, options = {}) {\n    if (this.delegate.allowsVisitingLocationWithAction(location, options.action)) {\n      this.delegate.visitProposedToLocation(location, options);\n    }\n  }\n\n  startVisit(locatable, restorationIdentifier, options = {}) {\n    this.stop();\n    this.currentVisit = new Visit(this, expandURL(locatable), restorationIdentifier, {\n      referrer: this.location,\n      ...options\n    });\n    this.currentVisit.start();\n  }\n\n  submitForm(form, submitter) {\n    this.stop();\n    this.formSubmission = new FormSubmission(this, form, submitter, true);\n\n    this.formSubmission.start();\n  }\n\n  stop() {\n    if (this.formSubmission) {\n      this.formSubmission.stop();\n      delete this.formSubmission;\n    }\n\n    if (this.currentVisit) {\n      this.currentVisit.cancel();\n      delete this.currentVisit;\n    }\n  }\n\n  get adapter() {\n    return this.delegate.adapter\n  }\n\n  get view() {\n    return this.delegate.view\n  }\n\n  get rootLocation() {\n    return this.view.snapshot.rootLocation\n  }\n\n  get history() {\n    return this.delegate.history\n  }\n\n  // Form submission delegate\n\n  formSubmissionStarted(formSubmission) {\n    // Not all adapters implement formSubmissionStarted\n    if (typeof this.adapter.formSubmissionStarted === \"function\") {\n      this.adapter.formSubmissionStarted(formSubmission);\n    }\n  }\n\n  async formSubmissionSucceededWithResponse(formSubmission, fetchResponse) {\n    if (formSubmission == this.formSubmission) {\n      const responseHTML = await fetchResponse.responseHTML;\n      if (responseHTML) {\n        const shouldCacheSnapshot = formSubmission.isSafe;\n        if (!shouldCacheSnapshot) {\n          this.view.clearSnapshotCache();\n        }\n\n        const { statusCode, redirected } = fetchResponse;\n        const action = this.#getActionForFormSubmission(formSubmission, fetchResponse);\n        const visitOptions = {\n          action,\n          shouldCacheSnapshot,\n          response: { statusCode, responseHTML, redirected }\n        };\n        this.proposeVisit(fetchResponse.location, visitOptions);\n      }\n    }\n  }\n\n  async formSubmissionFailedWithResponse(formSubmission, fetchResponse) {\n    const responseHTML = await fetchResponse.responseHTML;\n\n    if (responseHTML) {\n      const snapshot = PageSnapshot.fromHTMLString(responseHTML);\n      if (fetchResponse.serverError) {\n        await this.view.renderError(snapshot, this.currentVisit);\n      } else {\n        await this.view.renderPage(snapshot, false, true, this.currentVisit);\n      }\n      if(!snapshot.shouldPreserveScrollPosition) {\n        this.view.scrollToTop();\n      }\n      this.view.clearSnapshotCache();\n    }\n  }\n\n  formSubmissionErrored(formSubmission, error) {\n    console.error(error);\n  }\n\n  formSubmissionFinished(formSubmission) {\n    // Not all adapters implement formSubmissionFinished\n    if (typeof this.adapter.formSubmissionFinished === \"function\") {\n      this.adapter.formSubmissionFinished(formSubmission);\n    }\n  }\n\n  // Link prefetching\n\n  linkPrefetchingIsEnabledForLocation(location) {\n    // Not all adapters implement linkPrefetchingIsEnabledForLocation\n    if (typeof this.adapter.linkPrefetchingIsEnabledForLocation === \"function\") {\n      return this.adapter.linkPrefetchingIsEnabledForLocation(location)\n    }\n\n    return true\n  }\n\n  // Visit delegate\n\n  visitStarted(visit) {\n    this.delegate.visitStarted(visit);\n  }\n\n  visitCompleted(visit) {\n    this.delegate.visitCompleted(visit);\n    delete this.currentVisit;\n  }\n\n  locationWithActionIsSamePage(location, action) {\n    const anchor = getAnchor(location);\n    const currentAnchor = getAnchor(this.view.lastRenderedLocation);\n    const isRestorationToTop = action === \"restore\" && typeof anchor === \"undefined\";\n\n    return (\n      action !== \"replace\" &&\n      getRequestURL(location) === getRequestURL(this.view.lastRenderedLocation) &&\n      (isRestorationToTop || (anchor != null && anchor !== currentAnchor))\n    )\n  }\n\n  visitScrolledToSamePageLocation(oldURL, newURL) {\n    this.delegate.visitScrolledToSamePageLocation(oldURL, newURL);\n  }\n\n  // Visits\n\n  get location() {\n    return this.history.location\n  }\n\n  get restorationIdentifier() {\n    return this.history.restorationIdentifier\n  }\n\n  #getActionForFormSubmission(formSubmission, fetchResponse) {\n    const { submitter, formElement } = formSubmission;\n    return getVisitAction(submitter, formElement) || this.#getDefaultAction(fetchResponse)\n  }\n\n  #getDefaultAction(fetchResponse) {\n    const sameLocationRedirect = fetchResponse.redirected && fetchResponse.location.href === this.location?.href;\n    return sameLocationRedirect ? \"replace\" : \"advance\"\n  }\n}\n\nconst PageStage = {\n  initial: 0,\n  loading: 1,\n  interactive: 2,\n  complete: 3\n};\n\nclass PageObserver {\n  stage = PageStage.initial\n  started = false\n\n  constructor(delegate) {\n    this.delegate = delegate;\n  }\n\n  start() {\n    if (!this.started) {\n      if (this.stage == PageStage.initial) {\n        this.stage = PageStage.loading;\n      }\n      document.addEventListener(\"readystatechange\", this.interpretReadyState, false);\n      addEventListener(\"pagehide\", this.pageWillUnload, false);\n      this.started = true;\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      document.removeEventListener(\"readystatechange\", this.interpretReadyState, false);\n      removeEventListener(\"pagehide\", this.pageWillUnload, false);\n      this.started = false;\n    }\n  }\n\n  interpretReadyState = () => {\n    const { readyState } = this;\n    if (readyState == \"interactive\") {\n      this.pageIsInteractive();\n    } else if (readyState == \"complete\") {\n      this.pageIsComplete();\n    }\n  }\n\n  pageIsInteractive() {\n    if (this.stage == PageStage.loading) {\n      this.stage = PageStage.interactive;\n      this.delegate.pageBecameInteractive();\n    }\n  }\n\n  pageIsComplete() {\n    this.pageIsInteractive();\n    if (this.stage == PageStage.interactive) {\n      this.stage = PageStage.complete;\n      this.delegate.pageLoaded();\n    }\n  }\n\n  pageWillUnload = () => {\n    this.delegate.pageWillUnload();\n  }\n\n  get readyState() {\n    return document.readyState\n  }\n}\n\nclass ScrollObserver {\n  started = false\n\n  constructor(delegate) {\n    this.delegate = delegate;\n  }\n\n  start() {\n    if (!this.started) {\n      addEventListener(\"scroll\", this.onScroll, false);\n      this.onScroll();\n      this.started = true;\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      removeEventListener(\"scroll\", this.onScroll, false);\n      this.started = false;\n    }\n  }\n\n  onScroll = () => {\n    this.updatePosition({ x: window.pageXOffset, y: window.pageYOffset });\n  }\n\n  // Private\n\n  updatePosition(position) {\n    this.delegate.scrollPositionChanged(position);\n  }\n}\n\nclass StreamMessageRenderer {\n  render({ fragment }) {\n    Bardo.preservingPermanentElements(this, getPermanentElementMapForFragment(fragment), () => {\n      withAutofocusFromFragment(fragment, () => {\n        withPreservedFocus(() => {\n          document.documentElement.appendChild(fragment);\n        });\n      });\n    });\n  }\n\n  // Bardo delegate\n\n  enteringBardo(currentPermanentElement, newPermanentElement) {\n    newPermanentElement.replaceWith(currentPermanentElement.cloneNode(true));\n  }\n\n  leavingBardo() {}\n}\n\nfunction getPermanentElementMapForFragment(fragment) {\n  const permanentElementsInDocument = queryPermanentElementsAll(document.documentElement);\n  const permanentElementMap = {};\n  for (const permanentElementInDocument of permanentElementsInDocument) {\n    const { id } = permanentElementInDocument;\n\n    for (const streamElement of fragment.querySelectorAll(\"turbo-stream\")) {\n      const elementInStream = getPermanentElementById(streamElement.templateElement.content, id);\n\n      if (elementInStream) {\n        permanentElementMap[id] = [permanentElementInDocument, elementInStream];\n      }\n    }\n  }\n\n  return permanentElementMap\n}\n\nasync function withAutofocusFromFragment(fragment, callback) {\n  const generatedID = `turbo-stream-autofocus-${uuid()}`;\n  const turboStreams = fragment.querySelectorAll(\"turbo-stream\");\n  const elementWithAutofocus = firstAutofocusableElementInStreams(turboStreams);\n  let willAutofocusId = null;\n\n  if (elementWithAutofocus) {\n    if (elementWithAutofocus.id) {\n      willAutofocusId = elementWithAutofocus.id;\n    } else {\n      willAutofocusId = generatedID;\n    }\n\n    elementWithAutofocus.id = willAutofocusId;\n  }\n\n  callback();\n  await nextRepaint();\n\n  const hasNoActiveElement = document.activeElement == null || document.activeElement == document.body;\n\n  if (hasNoActiveElement && willAutofocusId) {\n    const elementToAutofocus = document.getElementById(willAutofocusId);\n\n    if (elementIsFocusable(elementToAutofocus)) {\n      elementToAutofocus.focus();\n    }\n    if (elementToAutofocus && elementToAutofocus.id == generatedID) {\n      elementToAutofocus.removeAttribute(\"id\");\n    }\n  }\n}\n\nasync function withPreservedFocus(callback) {\n  const [activeElementBeforeRender, activeElementAfterRender] = await around(callback, () => document.activeElement);\n\n  const restoreFocusTo = activeElementBeforeRender && activeElementBeforeRender.id;\n\n  if (restoreFocusTo) {\n    const elementToFocus = document.getElementById(restoreFocusTo);\n\n    if (elementIsFocusable(elementToFocus) && elementToFocus != activeElementAfterRender) {\n      elementToFocus.focus();\n    }\n  }\n}\n\nfunction firstAutofocusableElementInStreams(nodeListOfStreamElements) {\n  for (const streamElement of nodeListOfStreamElements) {\n    const elementWithAutofocus = queryAutofocusableElement(streamElement.templateElement.content);\n\n    if (elementWithAutofocus) return elementWithAutofocus\n  }\n\n  return null\n}\n\nclass StreamObserver {\n  sources = new Set()\n  #started = false\n\n  constructor(delegate) {\n    this.delegate = delegate;\n  }\n\n  start() {\n    if (!this.#started) {\n      this.#started = true;\n      addEventListener(\"turbo:before-fetch-response\", this.inspectFetchResponse, false);\n    }\n  }\n\n  stop() {\n    if (this.#started) {\n      this.#started = false;\n      removeEventListener(\"turbo:before-fetch-response\", this.inspectFetchResponse, false);\n    }\n  }\n\n  connectStreamSource(source) {\n    if (!this.streamSourceIsConnected(source)) {\n      this.sources.add(source);\n      source.addEventListener(\"message\", this.receiveMessageEvent, false);\n    }\n  }\n\n  disconnectStreamSource(source) {\n    if (this.streamSourceIsConnected(source)) {\n      this.sources.delete(source);\n      source.removeEventListener(\"message\", this.receiveMessageEvent, false);\n    }\n  }\n\n  streamSourceIsConnected(source) {\n    return this.sources.has(source)\n  }\n\n  inspectFetchResponse = (event) => {\n    const response = fetchResponseFromEvent(event);\n    if (response && fetchResponseIsStream(response)) {\n      event.preventDefault();\n      this.receiveMessageResponse(response);\n    }\n  }\n\n  receiveMessageEvent = (event) => {\n    if (this.#started && typeof event.data == \"string\") {\n      this.receiveMessageHTML(event.data);\n    }\n  }\n\n  async receiveMessageResponse(response) {\n    const html = await response.responseHTML;\n    if (html) {\n      this.receiveMessageHTML(html);\n    }\n  }\n\n  receiveMessageHTML(html) {\n    this.delegate.receivedMessageFromStream(StreamMessage.wrap(html));\n  }\n}\n\nfunction fetchResponseFromEvent(event) {\n  const fetchResponse = event.detail?.fetchResponse;\n  if (fetchResponse instanceof FetchResponse) {\n    return fetchResponse\n  }\n}\n\nfunction fetchResponseIsStream(response) {\n  const contentType = response.contentType ?? \"\";\n  return contentType.startsWith(StreamMessage.contentType)\n}\n\nclass ErrorRenderer extends Renderer {\n  static renderElement(currentElement, newElement) {\n    const { documentElement, body } = document;\n\n    documentElement.replaceChild(newElement, body);\n  }\n\n  async render() {\n    this.replaceHeadAndBody();\n    this.activateScriptElements();\n  }\n\n  replaceHeadAndBody() {\n    const { documentElement, head } = document;\n    documentElement.replaceChild(this.newHead, head);\n    this.renderElement(this.currentElement, this.newElement);\n  }\n\n  activateScriptElements() {\n    for (const replaceableElement of this.scriptElements) {\n      const parentNode = replaceableElement.parentNode;\n      if (parentNode) {\n        const element = activateScriptElement(replaceableElement);\n        parentNode.replaceChild(element, replaceableElement);\n      }\n    }\n  }\n\n  get newHead() {\n    return this.newSnapshot.headSnapshot.element\n  }\n\n  get scriptElements() {\n    return document.documentElement.querySelectorAll(\"script\")\n  }\n}\n\nclass PageRenderer extends Renderer {\n  static renderElement(currentElement, newElement) {\n    if (document.body && newElement instanceof HTMLBodyElement) {\n      document.body.replaceWith(newElement);\n    } else {\n      document.documentElement.appendChild(newElement);\n    }\n  }\n\n  get shouldRender() {\n    return this.newSnapshot.isVisitable && this.trackedElementsAreIdentical\n  }\n\n  get reloadReason() {\n    if (!this.newSnapshot.isVisitable) {\n      return {\n        reason: \"turbo_visit_control_is_reload\"\n      }\n    }\n\n    if (!this.trackedElementsAreIdentical) {\n      return {\n        reason: \"tracked_element_mismatch\"\n      }\n    }\n  }\n\n  async prepareToRender() {\n    this.#setLanguage();\n    await this.mergeHead();\n  }\n\n  async render() {\n    if (this.willRender) {\n      await this.replaceBody();\n    }\n  }\n\n  finishRendering() {\n    super.finishRendering();\n    if (!this.isPreview) {\n      this.focusFirstAutofocusableElement();\n    }\n  }\n\n  get currentHeadSnapshot() {\n    return this.currentSnapshot.headSnapshot\n  }\n\n  get newHeadSnapshot() {\n    return this.newSnapshot.headSnapshot\n  }\n\n  get newElement() {\n    return this.newSnapshot.element\n  }\n\n  #setLanguage() {\n    const { documentElement } = this.currentSnapshot;\n    const { lang } = this.newSnapshot;\n\n    if (lang) {\n      documentElement.setAttribute(\"lang\", lang);\n    } else {\n      documentElement.removeAttribute(\"lang\");\n    }\n  }\n\n  async mergeHead() {\n    const mergedHeadElements = this.mergeProvisionalElements();\n    const newStylesheetElements = this.copyNewHeadStylesheetElements();\n    this.copyNewHeadScriptElements();\n\n    await mergedHeadElements;\n    await newStylesheetElements;\n\n    if (this.willRender) {\n      this.removeUnusedDynamicStylesheetElements();\n    }\n  }\n\n  async replaceBody() {\n    await this.preservingPermanentElements(async () => {\n      this.activateNewBody();\n      await this.assignNewBody();\n    });\n  }\n\n  get trackedElementsAreIdentical() {\n    return this.currentHeadSnapshot.trackedElementSignature == this.newHeadSnapshot.trackedElementSignature\n  }\n\n  async copyNewHeadStylesheetElements() {\n    const loadingElements = [];\n\n    for (const element of this.newHeadStylesheetElements) {\n      loadingElements.push(waitForLoad(element));\n\n      document.head.appendChild(element);\n    }\n\n    await Promise.all(loadingElements);\n  }\n\n  copyNewHeadScriptElements() {\n    for (const element of this.newHeadScriptElements) {\n      document.head.appendChild(activateScriptElement(element));\n    }\n  }\n\n  removeUnusedDynamicStylesheetElements() {\n    for (const element of this.unusedDynamicStylesheetElements) {\n      document.head.removeChild(element);\n    }\n  }\n\n  async mergeProvisionalElements() {\n    const newHeadElements = [...this.newHeadProvisionalElements];\n\n    for (const element of this.currentHeadProvisionalElements) {\n      if (!this.isCurrentElementInElementList(element, newHeadElements)) {\n        document.head.removeChild(element);\n      }\n    }\n\n    for (const element of newHeadElements) {\n      document.head.appendChild(element);\n    }\n  }\n\n  isCurrentElementInElementList(element, elementList) {\n    for (const [index, newElement] of elementList.entries()) {\n      // if title element...\n      if (element.tagName == \"TITLE\") {\n        if (newElement.tagName != \"TITLE\") {\n          continue\n        }\n        if (element.innerHTML == newElement.innerHTML) {\n          elementList.splice(index, 1);\n          return true\n        }\n      }\n\n      // if any other element...\n      if (newElement.isEqualNode(element)) {\n        elementList.splice(index, 1);\n        return true\n      }\n    }\n\n    return false\n  }\n\n  removeCurrentHeadProvisionalElements() {\n    for (const element of this.currentHeadProvisionalElements) {\n      document.head.removeChild(element);\n    }\n  }\n\n  copyNewHeadProvisionalElements() {\n    for (const element of this.newHeadProvisionalElements) {\n      document.head.appendChild(element);\n    }\n  }\n\n  activateNewBody() {\n    document.adoptNode(this.newElement);\n    this.activateNewBodyScriptElements();\n  }\n\n  activateNewBodyScriptElements() {\n    for (const inertScriptElement of this.newBodyScriptElements) {\n      const activatedScriptElement = activateScriptElement(inertScriptElement);\n      inertScriptElement.replaceWith(activatedScriptElement);\n    }\n  }\n\n  async assignNewBody() {\n    await this.renderElement(this.currentElement, this.newElement);\n  }\n\n  get unusedDynamicStylesheetElements() {\n    return this.oldHeadStylesheetElements.filter((element) => {\n      return element.getAttribute(\"data-turbo-track\") === \"dynamic\"\n    })\n  }\n\n  get oldHeadStylesheetElements() {\n    return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)\n  }\n\n  get newHeadStylesheetElements() {\n    return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)\n  }\n\n  get newHeadScriptElements() {\n    return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)\n  }\n\n  get currentHeadProvisionalElements() {\n    return this.currentHeadSnapshot.provisionalElements\n  }\n\n  get newHeadProvisionalElements() {\n    return this.newHeadSnapshot.provisionalElements\n  }\n\n  get newBodyScriptElements() {\n    return this.newElement.querySelectorAll(\"script\")\n  }\n}\n\nclass MorphingPageRenderer extends PageRenderer {\n  static renderElement(currentElement, newElement) {\n    morphElements(currentElement, newElement, {\n      callbacks: {\n        beforeNodeMorphed: element => !canRefreshFrame(element)\n      }\n    });\n\n    for (const frame of currentElement.querySelectorAll(\"turbo-frame\")) {\n      if (canRefreshFrame(frame)) frame.reload();\n    }\n\n    dispatch(\"turbo:morph\", { detail: { currentElement, newElement } });\n  }\n\n  async preservingPermanentElements(callback) {\n    return await callback()\n  }\n\n  get renderMethod() {\n    return \"morph\"\n  }\n\n  get shouldAutofocus() {\n    return false\n  }\n}\n\nfunction canRefreshFrame(frame) {\n  return frame instanceof FrameElement &&\n    frame.src &&\n    frame.refresh === \"morph\" &&\n    !frame.closest(\"[data-turbo-permanent]\")\n}\n\nclass SnapshotCache {\n  keys = []\n  snapshots = {}\n\n  constructor(size) {\n    this.size = size;\n  }\n\n  has(location) {\n    return toCacheKey(location) in this.snapshots\n  }\n\n  get(location) {\n    if (this.has(location)) {\n      const snapshot = this.read(location);\n      this.touch(location);\n      return snapshot\n    }\n  }\n\n  put(location, snapshot) {\n    this.write(location, snapshot);\n    this.touch(location);\n    return snapshot\n  }\n\n  clear() {\n    this.snapshots = {};\n  }\n\n  // Private\n\n  read(location) {\n    return this.snapshots[toCacheKey(location)]\n  }\n\n  write(location, snapshot) {\n    this.snapshots[toCacheKey(location)] = snapshot;\n  }\n\n  touch(location) {\n    const key = toCacheKey(location);\n    const index = this.keys.indexOf(key);\n    if (index > -1) this.keys.splice(index, 1);\n    this.keys.unshift(key);\n    this.trim();\n  }\n\n  trim() {\n    for (const key of this.keys.splice(this.size)) {\n      delete this.snapshots[key];\n    }\n  }\n}\n\nclass PageView extends View {\n  snapshotCache = new SnapshotCache(10)\n  lastRenderedLocation = new URL(location.href)\n  forceReloaded = false\n\n  shouldTransitionTo(newSnapshot) {\n    return this.snapshot.prefersViewTransitions && newSnapshot.prefersViewTransitions\n  }\n\n  renderPage(snapshot, isPreview = false, willRender = true, visit) {\n    const shouldMorphPage = this.isPageRefresh(visit) && this.snapshot.shouldMorphPage;\n    const rendererClass = shouldMorphPage ? MorphingPageRenderer : PageRenderer;\n\n    const renderer = new rendererClass(this.snapshot, snapshot, isPreview, willRender);\n\n    if (!renderer.shouldRender) {\n      this.forceReloaded = true;\n    } else {\n      visit?.changeHistory();\n    }\n\n    return this.render(renderer)\n  }\n\n  renderError(snapshot, visit) {\n    visit?.changeHistory();\n    const renderer = new ErrorRenderer(this.snapshot, snapshot, false);\n    return this.render(renderer)\n  }\n\n  clearSnapshotCache() {\n    this.snapshotCache.clear();\n  }\n\n  async cacheSnapshot(snapshot = this.snapshot) {\n    if (snapshot.isCacheable) {\n      this.delegate.viewWillCacheSnapshot();\n      const { lastRenderedLocation: location } = this;\n      await nextEventLoopTick();\n      const cachedSnapshot = snapshot.clone();\n      this.snapshotCache.put(location, cachedSnapshot);\n      return cachedSnapshot\n    }\n  }\n\n  getCachedSnapshotForLocation(location) {\n    return this.snapshotCache.get(location)\n  }\n\n  isPageRefresh(visit) {\n    return !visit || (this.lastRenderedLocation.pathname === visit.location.pathname && visit.action === \"replace\")\n  }\n\n  shouldPreserveScrollPosition(visit) {\n    return this.isPageRefresh(visit) && this.snapshot.shouldPreserveScrollPosition\n  }\n\n  get snapshot() {\n    return PageSnapshot.fromElement(this.element)\n  }\n}\n\nclass Preloader {\n  selector = \"a[data-turbo-preload]\"\n\n  constructor(delegate, snapshotCache) {\n    this.delegate = delegate;\n    this.snapshotCache = snapshotCache;\n  }\n\n  start() {\n    if (document.readyState === \"loading\") {\n      document.addEventListener(\"DOMContentLoaded\", this.#preloadAll);\n    } else {\n      this.preloadOnLoadLinksForView(document.body);\n    }\n  }\n\n  stop() {\n    document.removeEventListener(\"DOMContentLoaded\", this.#preloadAll);\n  }\n\n  preloadOnLoadLinksForView(element) {\n    for (const link of element.querySelectorAll(this.selector)) {\n      if (this.delegate.shouldPreloadLink(link)) {\n        this.preloadURL(link);\n      }\n    }\n  }\n\n  async preloadURL(link) {\n    const location = new URL(link.href);\n\n    if (this.snapshotCache.has(location)) {\n      return\n    }\n\n    const fetchRequest = new FetchRequest(this, FetchMethod.get, location, new URLSearchParams(), link);\n    await fetchRequest.perform();\n  }\n\n  // Fetch request delegate\n\n  prepareRequest(fetchRequest) {\n    fetchRequest.headers[\"X-Sec-Purpose\"] = \"prefetch\";\n  }\n\n  async requestSucceededWithResponse(fetchRequest, fetchResponse) {\n    try {\n      const responseHTML = await fetchResponse.responseHTML;\n      const snapshot = PageSnapshot.fromHTMLString(responseHTML);\n\n      this.snapshotCache.put(fetchRequest.url, snapshot);\n    } catch (_) {\n      // If we cannot preload that is ok!\n    }\n  }\n\n  requestStarted(fetchRequest) {}\n\n  requestErrored(fetchRequest) {}\n\n  requestFinished(fetchRequest) {}\n\n  requestPreventedHandlingResponse(fetchRequest, fetchResponse) {}\n\n  requestFailedWithResponse(fetchRequest, fetchResponse) {}\n\n  #preloadAll = () => {\n    this.preloadOnLoadLinksForView(document.body);\n  }\n}\n\nclass Cache {\n  constructor(session) {\n    this.session = session;\n  }\n\n  clear() {\n    this.session.clearCache();\n  }\n\n  resetCacheControl() {\n    this.#setCacheControl(\"\");\n  }\n\n  exemptPageFromCache() {\n    this.#setCacheControl(\"no-cache\");\n  }\n\n  exemptPageFromPreview() {\n    this.#setCacheControl(\"no-preview\");\n  }\n\n  #setCacheControl(value) {\n    setMetaContent(\"turbo-cache-control\", value);\n  }\n}\n\nclass Session {\n  navigator = new Navigator(this)\n  history = new History(this)\n  view = new PageView(this, document.documentElement)\n  adapter = new BrowserAdapter(this)\n\n  pageObserver = new PageObserver(this)\n  cacheObserver = new CacheObserver()\n  linkPrefetchObserver = new LinkPrefetchObserver(this, document)\n  linkClickObserver = new LinkClickObserver(this, window)\n  formSubmitObserver = new FormSubmitObserver(this, document)\n  scrollObserver = new ScrollObserver(this)\n  streamObserver = new StreamObserver(this)\n  formLinkClickObserver = new FormLinkClickObserver(this, document.documentElement)\n  frameRedirector = new FrameRedirector(this, document.documentElement)\n  streamMessageRenderer = new StreamMessageRenderer()\n  cache = new Cache(this)\n\n  enabled = true\n  started = false\n  #pageRefreshDebouncePeriod = 150\n\n  constructor(recentRequests) {\n    this.recentRequests = recentRequests;\n    this.preloader = new Preloader(this, this.view.snapshotCache);\n    this.debouncedRefresh = this.refresh;\n    this.pageRefreshDebouncePeriod = this.pageRefreshDebouncePeriod;\n  }\n\n  start() {\n    if (!this.started) {\n      this.pageObserver.start();\n      this.cacheObserver.start();\n      this.linkPrefetchObserver.start();\n      this.formLinkClickObserver.start();\n      this.linkClickObserver.start();\n      this.formSubmitObserver.start();\n      this.scrollObserver.start();\n      this.streamObserver.start();\n      this.frameRedirector.start();\n      this.history.start();\n      this.preloader.start();\n      this.started = true;\n      this.enabled = true;\n    }\n  }\n\n  disable() {\n    this.enabled = false;\n  }\n\n  stop() {\n    if (this.started) {\n      this.pageObserver.stop();\n      this.cacheObserver.stop();\n      this.linkPrefetchObserver.stop();\n      this.formLinkClickObserver.stop();\n      this.linkClickObserver.stop();\n      this.formSubmitObserver.stop();\n      this.scrollObserver.stop();\n      this.streamObserver.stop();\n      this.frameRedirector.stop();\n      this.history.stop();\n      this.preloader.stop();\n      this.started = false;\n    }\n  }\n\n  registerAdapter(adapter) {\n    this.adapter = adapter;\n  }\n\n  visit(location, options = {}) {\n    const frameElement = options.frame ? document.getElementById(options.frame) : null;\n\n    if (frameElement instanceof FrameElement) {\n      const action = options.action || getVisitAction(frameElement);\n\n      frameElement.delegate.proposeVisitIfNavigatedWithAction(frameElement, action);\n      frameElement.src = location.toString();\n    } else {\n      this.navigator.proposeVisit(expandURL(location), options);\n    }\n  }\n\n  refresh(url, requestId) {\n    const isRecentRequest = requestId && this.recentRequests.has(requestId);\n    const isCurrentUrl = url === document.baseURI;\n    if (!isRecentRequest && !this.navigator.currentVisit && isCurrentUrl) {\n      this.visit(url, { action: \"replace\", shouldCacheSnapshot: false });\n    }\n  }\n\n  connectStreamSource(source) {\n    this.streamObserver.connectStreamSource(source);\n  }\n\n  disconnectStreamSource(source) {\n    this.streamObserver.disconnectStreamSource(source);\n  }\n\n  renderStreamMessage(message) {\n    this.streamMessageRenderer.render(StreamMessage.wrap(message));\n  }\n\n  clearCache() {\n    this.view.clearSnapshotCache();\n  }\n\n  setProgressBarDelay(delay) {\n    console.warn(\n      \"Please replace `session.setProgressBarDelay(delay)` with `session.progressBarDelay = delay`. The function is deprecated and will be removed in a future version of Turbo.`\"\n    );\n\n    this.progressBarDelay = delay;\n  }\n\n  set progressBarDelay(delay) {\n    config.drive.progressBarDelay = delay;\n  }\n\n  get progressBarDelay() {\n    return config.drive.progressBarDelay\n  }\n\n  set drive(value) {\n    config.drive.enabled = value;\n  }\n\n  get drive() {\n    return config.drive.enabled\n  }\n\n  set formMode(value) {\n    config.forms.mode = value;\n  }\n\n  get formMode() {\n    return config.forms.mode\n  }\n\n  get location() {\n    return this.history.location\n  }\n\n  get restorationIdentifier() {\n    return this.history.restorationIdentifier\n  }\n\n  get pageRefreshDebouncePeriod() {\n    return this.#pageRefreshDebouncePeriod\n  }\n\n  set pageRefreshDebouncePeriod(value) {\n    this.refresh = debounce(this.debouncedRefresh.bind(this), value);\n    this.#pageRefreshDebouncePeriod = value;\n  }\n\n  // Preloader delegate\n\n  shouldPreloadLink(element) {\n    const isUnsafe = element.hasAttribute(\"data-turbo-method\");\n    const isStream = element.hasAttribute(\"data-turbo-stream\");\n    const frameTarget = element.getAttribute(\"data-turbo-frame\");\n    const frame = frameTarget == \"_top\" ?\n      null :\n      document.getElementById(frameTarget) || findClosestRecursively(element, \"turbo-frame:not([disabled])\");\n\n    if (isUnsafe || isStream || frame instanceof FrameElement) {\n      return false\n    } else {\n      const location = new URL(element.href);\n\n      return this.elementIsNavigatable(element) && locationIsVisitable(location, this.snapshot.rootLocation)\n    }\n  }\n\n  // History delegate\n\n  historyPoppedToLocationWithRestorationIdentifierAndDirection(location, restorationIdentifier, direction) {\n    if (this.enabled) {\n      this.navigator.startVisit(location, restorationIdentifier, {\n        action: \"restore\",\n        historyChanged: true,\n        direction\n      });\n    } else {\n      this.adapter.pageInvalidated({\n        reason: \"turbo_disabled\"\n      });\n    }\n  }\n\n  // Scroll observer delegate\n\n  scrollPositionChanged(position) {\n    this.history.updateRestorationData({ scrollPosition: position });\n  }\n\n  // Form click observer delegate\n\n  willSubmitFormLinkToLocation(link, location) {\n    return this.elementIsNavigatable(link) && locationIsVisitable(location, this.snapshot.rootLocation)\n  }\n\n  submittedFormLinkToLocation() {}\n\n  // Link hover observer delegate\n\n  canPrefetchRequestToLocation(link, location) {\n    return (\n      this.elementIsNavigatable(link) &&\n      locationIsVisitable(location, this.snapshot.rootLocation) &&\n      this.navigator.linkPrefetchingIsEnabledForLocation(location)\n    )\n  }\n\n  // Link click observer delegate\n\n  willFollowLinkToLocation(link, location, event) {\n    return (\n      this.elementIsNavigatable(link) &&\n      locationIsVisitable(location, this.snapshot.rootLocation) &&\n      this.applicationAllowsFollowingLinkToLocation(link, location, event)\n    )\n  }\n\n  followedLinkToLocation(link, location) {\n    const action = this.getActionForLink(link);\n    const acceptsStreamResponse = link.hasAttribute(\"data-turbo-stream\");\n\n    this.visit(location.href, { action, acceptsStreamResponse });\n  }\n\n  // Navigator delegate\n\n  allowsVisitingLocationWithAction(location, action) {\n    return this.locationWithActionIsSamePage(location, action) || this.applicationAllowsVisitingLocation(location)\n  }\n\n  visitProposedToLocation(location, options) {\n    extendURLWithDeprecatedProperties(location);\n    this.adapter.visitProposedToLocation(location, options);\n  }\n\n  // Visit delegate\n\n  visitStarted(visit) {\n    if (!visit.acceptsStreamResponse) {\n      markAsBusy(document.documentElement);\n      this.view.markVisitDirection(visit.direction);\n    }\n    extendURLWithDeprecatedProperties(visit.location);\n    if (!visit.silent) {\n      this.notifyApplicationAfterVisitingLocation(visit.location, visit.action);\n    }\n  }\n\n  visitCompleted(visit) {\n    this.view.unmarkVisitDirection();\n    clearBusyState(document.documentElement);\n    this.notifyApplicationAfterPageLoad(visit.getTimingMetrics());\n  }\n\n  locationWithActionIsSamePage(location, action) {\n    return this.navigator.locationWithActionIsSamePage(location, action)\n  }\n\n  visitScrolledToSamePageLocation(oldURL, newURL) {\n    this.notifyApplicationAfterVisitingSamePageLocation(oldURL, newURL);\n  }\n\n  // Form submit observer delegate\n\n  willSubmitForm(form, submitter) {\n    const action = getAction$1(form, submitter);\n\n    return (\n      this.submissionIsNavigatable(form, submitter) &&\n      locationIsVisitable(expandURL(action), this.snapshot.rootLocation)\n    )\n  }\n\n  formSubmitted(form, submitter) {\n    this.navigator.submitForm(form, submitter);\n  }\n\n  // Page observer delegate\n\n  pageBecameInteractive() {\n    this.view.lastRenderedLocation = this.location;\n    this.notifyApplicationAfterPageLoad();\n  }\n\n  pageLoaded() {\n    this.history.assumeControlOfScrollRestoration();\n  }\n\n  pageWillUnload() {\n    this.history.relinquishControlOfScrollRestoration();\n  }\n\n  // Stream observer delegate\n\n  receivedMessageFromStream(message) {\n    this.renderStreamMessage(message);\n  }\n\n  // Page view delegate\n\n  viewWillCacheSnapshot() {\n    if (!this.navigator.currentVisit?.silent) {\n      this.notifyApplicationBeforeCachingSnapshot();\n    }\n  }\n\n  allowsImmediateRender({ element }, options) {\n    const event = this.notifyApplicationBeforeRender(element, options);\n    const {\n      defaultPrevented,\n      detail: { render }\n    } = event;\n\n    if (this.view.renderer && render) {\n      this.view.renderer.renderElement = render;\n    }\n\n    return !defaultPrevented\n  }\n\n  viewRenderedSnapshot(_snapshot, _isPreview, renderMethod) {\n    this.view.lastRenderedLocation = this.history.location;\n    this.notifyApplicationAfterRender(renderMethod);\n  }\n\n  preloadOnLoadLinksForView(element) {\n    this.preloader.preloadOnLoadLinksForView(element);\n  }\n\n  viewInvalidated(reason) {\n    this.adapter.pageInvalidated(reason);\n  }\n\n  // Frame element\n\n  frameLoaded(frame) {\n    this.notifyApplicationAfterFrameLoad(frame);\n  }\n\n  frameRendered(fetchResponse, frame) {\n    this.notifyApplicationAfterFrameRender(fetchResponse, frame);\n  }\n\n  // Application events\n\n  applicationAllowsFollowingLinkToLocation(link, location, ev) {\n    const event = this.notifyApplicationAfterClickingLinkToLocation(link, location, ev);\n    return !event.defaultPrevented\n  }\n\n  applicationAllowsVisitingLocation(location) {\n    const event = this.notifyApplicationBeforeVisitingLocation(location);\n    return !event.defaultPrevented\n  }\n\n  notifyApplicationAfterClickingLinkToLocation(link, location, event) {\n    return dispatch(\"turbo:click\", {\n      target: link,\n      detail: { url: location.href, originalEvent: event },\n      cancelable: true\n    })\n  }\n\n  notifyApplicationBeforeVisitingLocation(location) {\n    return dispatch(\"turbo:before-visit\", {\n      detail: { url: location.href },\n      cancelable: true\n    })\n  }\n\n  notifyApplicationAfterVisitingLocation(location, action) {\n    return dispatch(\"turbo:visit\", { detail: { url: location.href, action } })\n  }\n\n  notifyApplicationBeforeCachingSnapshot() {\n    return dispatch(\"turbo:before-cache\")\n  }\n\n  notifyApplicationBeforeRender(newBody, options) {\n    return dispatch(\"turbo:before-render\", {\n      detail: { newBody, ...options },\n      cancelable: true\n    })\n  }\n\n  notifyApplicationAfterRender(renderMethod) {\n    return dispatch(\"turbo:render\", { detail: { renderMethod } })\n  }\n\n  notifyApplicationAfterPageLoad(timing = {}) {\n    return dispatch(\"turbo:load\", {\n      detail: { url: this.location.href, timing }\n    })\n  }\n\n  notifyApplicationAfterVisitingSamePageLocation(oldURL, newURL) {\n    dispatchEvent(\n      new HashChangeEvent(\"hashchange\", {\n        oldURL: oldURL.toString(),\n        newURL: newURL.toString()\n      })\n    );\n  }\n\n  notifyApplicationAfterFrameLoad(frame) {\n    return dispatch(\"turbo:frame-load\", { target: frame })\n  }\n\n  notifyApplicationAfterFrameRender(fetchResponse, frame) {\n    return dispatch(\"turbo:frame-render\", {\n      detail: { fetchResponse },\n      target: frame,\n      cancelable: true\n    })\n  }\n\n  // Helpers\n\n  submissionIsNavigatable(form, submitter) {\n    if (config.forms.mode == \"off\") {\n      return false\n    } else {\n      const submitterIsNavigatable = submitter ? this.elementIsNavigatable(submitter) : true;\n\n      if (config.forms.mode == \"optin\") {\n        return submitterIsNavigatable && form.closest('[data-turbo=\"true\"]') != null\n      } else {\n        return submitterIsNavigatable && this.elementIsNavigatable(form)\n      }\n    }\n  }\n\n  elementIsNavigatable(element) {\n    const container = findClosestRecursively(element, \"[data-turbo]\");\n    const withinFrame = findClosestRecursively(element, \"turbo-frame\");\n\n    // Check if Drive is enabled on the session or we're within a Frame.\n    if (config.drive.enabled || withinFrame) {\n      // Element is navigatable by default, unless `data-turbo=\"false\"`.\n      if (container) {\n        return container.getAttribute(\"data-turbo\") != \"false\"\n      } else {\n        return true\n      }\n    } else {\n      // Element isn't navigatable by default, unless `data-turbo=\"true\"`.\n      if (container) {\n        return container.getAttribute(\"data-turbo\") == \"true\"\n      } else {\n        return false\n      }\n    }\n  }\n\n  // Private\n\n  getActionForLink(link) {\n    return getVisitAction(link) || \"advance\"\n  }\n\n  get snapshot() {\n    return this.view.snapshot\n  }\n}\n\n// Older versions of the Turbo Native adapters referenced the\n// `Location#absoluteURL` property in their implementations of\n// the `Adapter#visitProposedToLocation()` and `#visitStarted()`\n// methods. The Location class has since been removed in favor\n// of the DOM URL API, and accordingly all Adapter methods now\n// receive URL objects.\n//\n// We alias #absoluteURL to #toString() here to avoid crashing\n// older adapters which do not expect URL objects. We should\n// consider removing this support at some point in the future.\n\nfunction extendURLWithDeprecatedProperties(url) {\n  Object.defineProperties(url, deprecatedLocationPropertyDescriptors);\n}\n\nconst deprecatedLocationPropertyDescriptors = {\n  absoluteURL: {\n    get() {\n      return this.toString()\n    }\n  }\n};\n\nconst session = new Session(recentRequests);\nconst { cache, navigator: navigator$1 } = session;\n\n/**\n * Starts the main session.\n * This initialises any necessary observers such as those to monitor\n * link interactions.\n */\nfunction start() {\n  session.start();\n}\n\n/**\n * Registers an adapter for the main session.\n *\n * @param adapter Adapter to register\n */\nfunction registerAdapter(adapter) {\n  session.registerAdapter(adapter);\n}\n\n/**\n * Performs an application visit to the given location.\n *\n * @param location Location to visit (a URL or path)\n * @param options Options to apply\n * @param options.action Type of history navigation to apply (\"restore\",\n * \"replace\" or \"advance\")\n * @param options.historyChanged Specifies whether the browser history has\n * already been changed for this visit or not\n * @param options.referrer Specifies the referrer of this visit such that\n * navigations to the same page will not result in a new history entry.\n * @param options.snapshotHTML Cached snapshot to render\n * @param options.response Response of the specified location\n */\nfunction visit(location, options) {\n  session.visit(location, options);\n}\n\n/**\n * Connects a stream source to the main session.\n *\n * @param source Stream source to connect\n */\nfunction connectStreamSource(source) {\n  session.connectStreamSource(source);\n}\n\n/**\n * Disconnects a stream source from the main session.\n *\n * @param source Stream source to disconnect\n */\nfunction disconnectStreamSource(source) {\n  session.disconnectStreamSource(source);\n}\n\n/**\n * Renders a stream message to the main session by appending it to the\n * current document.\n *\n * @param message Message to render\n */\nfunction renderStreamMessage(message) {\n  session.renderStreamMessage(message);\n}\n\n/**\n * Removes all entries from the Turbo Drive page cache.\n * Call this when state has changed on the server that may affect cached pages.\n *\n * @deprecated since version 7.2.0 in favor of `Turbo.cache.clear()`\n */\nfunction clearCache() {\n  console.warn(\n    \"Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`\"\n  );\n  session.clearCache();\n}\n\n/**\n * Sets the delay after which the progress bar will appear during navigation.\n *\n * The progress bar appears after 500ms by default.\n *\n * Note that this method has no effect when used with the iOS or Android\n * adapters.\n *\n * @param delay Time to delay in milliseconds\n */\nfunction setProgressBarDelay(delay) {\n  console.warn(\n    \"Please replace `Turbo.setProgressBarDelay(delay)` with `Turbo.config.drive.progressBarDelay = delay`. The top-level function is deprecated and will be removed in a future version of Turbo.`\"\n  );\n  config.drive.progressBarDelay = delay;\n}\n\nfunction setConfirmMethod(confirmMethod) {\n  console.warn(\n    \"Please replace `Turbo.setConfirmMethod(confirmMethod)` with `Turbo.config.forms.confirm = confirmMethod`. The top-level function is deprecated and will be removed in a future version of Turbo.`\"\n  );\n  config.forms.confirm = confirmMethod;\n}\n\nfunction setFormMode(mode) {\n  console.warn(\n    \"Please replace `Turbo.setFormMode(mode)` with `Turbo.config.forms.mode = mode`. The top-level function is deprecated and will be removed in a future version of Turbo.`\"\n  );\n  config.forms.mode = mode;\n}\n\nvar Turbo = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  navigator: navigator$1,\n  session: session,\n  cache: cache,\n  PageRenderer: PageRenderer,\n  PageSnapshot: PageSnapshot,\n  FrameRenderer: FrameRenderer,\n  fetch: fetchWithTurboHeaders,\n  config: config,\n  start: start,\n  registerAdapter: registerAdapter,\n  visit: visit,\n  connectStreamSource: connectStreamSource,\n  disconnectStreamSource: disconnectStreamSource,\n  renderStreamMessage: renderStreamMessage,\n  clearCache: clearCache,\n  setProgressBarDelay: setProgressBarDelay,\n  setConfirmMethod: setConfirmMethod,\n  setFormMode: setFormMode\n});\n\nclass TurboFrameMissingError extends Error {}\n\nclass FrameController {\n  fetchResponseLoaded = (_fetchResponse) => Promise.resolve()\n  #currentFetchRequest = null\n  #resolveVisitPromise = () => {}\n  #connected = false\n  #hasBeenLoaded = false\n  #ignoredAttributes = new Set()\n  #shouldMorphFrame = false\n  action = null\n\n  constructor(element) {\n    this.element = element;\n    this.view = new FrameView(this, this.element);\n    this.appearanceObserver = new AppearanceObserver(this, this.element);\n    this.formLinkClickObserver = new FormLinkClickObserver(this, this.element);\n    this.linkInterceptor = new LinkInterceptor(this, this.element);\n    this.restorationIdentifier = uuid();\n    this.formSubmitObserver = new FormSubmitObserver(this, this.element);\n  }\n\n  // Frame delegate\n\n  connect() {\n    if (!this.#connected) {\n      this.#connected = true;\n      if (this.loadingStyle == FrameLoadingStyle.lazy) {\n        this.appearanceObserver.start();\n      } else {\n        this.#loadSourceURL();\n      }\n      this.formLinkClickObserver.start();\n      this.linkInterceptor.start();\n      this.formSubmitObserver.start();\n    }\n  }\n\n  disconnect() {\n    if (this.#connected) {\n      this.#connected = false;\n      this.appearanceObserver.stop();\n      this.formLinkClickObserver.stop();\n      this.linkInterceptor.stop();\n      this.formSubmitObserver.stop();\n    }\n  }\n\n  disabledChanged() {\n    if (this.loadingStyle == FrameLoadingStyle.eager) {\n      this.#loadSourceURL();\n    }\n  }\n\n  sourceURLChanged() {\n    if (this.#isIgnoringChangesTo(\"src\")) return\n\n    if (this.element.isConnected) {\n      this.complete = false;\n    }\n\n    if (this.loadingStyle == FrameLoadingStyle.eager || this.#hasBeenLoaded) {\n      this.#loadSourceURL();\n    }\n  }\n\n  sourceURLReloaded() {\n    const { refresh, src } = this.element;\n\n    this.#shouldMorphFrame = src && refresh === \"morph\";\n\n    this.element.removeAttribute(\"complete\");\n    this.element.src = null;\n    this.element.src = src;\n    return this.element.loaded\n  }\n\n  loadingStyleChanged() {\n    if (this.loadingStyle == FrameLoadingStyle.lazy) {\n      this.appearanceObserver.start();\n    } else {\n      this.appearanceObserver.stop();\n      this.#loadSourceURL();\n    }\n  }\n\n  async #loadSourceURL() {\n    if (this.enabled && this.isActive && !this.complete && this.sourceURL) {\n      this.element.loaded = this.#visit(expandURL(this.sourceURL));\n      this.appearanceObserver.stop();\n      await this.element.loaded;\n      this.#hasBeenLoaded = true;\n    }\n  }\n\n  async loadResponse(fetchResponse) {\n    if (fetchResponse.redirected || (fetchResponse.succeeded && fetchResponse.isHTML)) {\n      this.sourceURL = fetchResponse.response.url;\n    }\n\n    try {\n      const html = await fetchResponse.responseHTML;\n      if (html) {\n        const document = parseHTMLDocument(html);\n        const pageSnapshot = PageSnapshot.fromDocument(document);\n\n        if (pageSnapshot.isVisitable) {\n          await this.#loadFrameResponse(fetchResponse, document);\n        } else {\n          await this.#handleUnvisitableFrameResponse(fetchResponse);\n        }\n      }\n    } finally {\n      this.#shouldMorphFrame = false;\n      this.fetchResponseLoaded = () => Promise.resolve();\n    }\n  }\n\n  // Appearance observer delegate\n\n  elementAppearedInViewport(element) {\n    this.proposeVisitIfNavigatedWithAction(element, getVisitAction(element));\n    this.#loadSourceURL();\n  }\n\n  // Form link click observer delegate\n\n  willSubmitFormLinkToLocation(link) {\n    return this.#shouldInterceptNavigation(link)\n  }\n\n  submittedFormLinkToLocation(link, _location, form) {\n    const frame = this.#findFrameElement(link);\n    if (frame) form.setAttribute(\"data-turbo-frame\", frame.id);\n  }\n\n  // Link interceptor delegate\n\n  shouldInterceptLinkClick(element, _location, _event) {\n    return this.#shouldInterceptNavigation(element)\n  }\n\n  linkClickIntercepted(element, location) {\n    this.#navigateFrame(element, location);\n  }\n\n  // Form submit observer delegate\n\n  willSubmitForm(element, submitter) {\n    return element.closest(\"turbo-frame\") == this.element && this.#shouldInterceptNavigation(element, submitter)\n  }\n\n  formSubmitted(element, submitter) {\n    if (this.formSubmission) {\n      this.formSubmission.stop();\n    }\n\n    this.formSubmission = new FormSubmission(this, element, submitter);\n    const { fetchRequest } = this.formSubmission;\n    this.prepareRequest(fetchRequest);\n    this.formSubmission.start();\n  }\n\n  // Fetch request delegate\n\n  prepareRequest(request) {\n    request.headers[\"Turbo-Frame\"] = this.id;\n\n    if (this.currentNavigationElement?.hasAttribute(\"data-turbo-stream\")) {\n      request.acceptResponseType(StreamMessage.contentType);\n    }\n  }\n\n  requestStarted(_request) {\n    markAsBusy(this.element);\n  }\n\n  requestPreventedHandlingResponse(_request, _response) {\n    this.#resolveVisitPromise();\n  }\n\n  async requestSucceededWithResponse(request, response) {\n    await this.loadResponse(response);\n    this.#resolveVisitPromise();\n  }\n\n  async requestFailedWithResponse(request, response) {\n    await this.loadResponse(response);\n    this.#resolveVisitPromise();\n  }\n\n  requestErrored(request, error) {\n    console.error(error);\n    this.#resolveVisitPromise();\n  }\n\n  requestFinished(_request) {\n    clearBusyState(this.element);\n  }\n\n  // Form submission delegate\n\n  formSubmissionStarted({ formElement }) {\n    markAsBusy(formElement, this.#findFrameElement(formElement));\n  }\n\n  formSubmissionSucceededWithResponse(formSubmission, response) {\n    const frame = this.#findFrameElement(formSubmission.formElement, formSubmission.submitter);\n\n    frame.delegate.proposeVisitIfNavigatedWithAction(frame, getVisitAction(formSubmission.submitter, formSubmission.formElement, frame));\n    frame.delegate.loadResponse(response);\n\n    if (!formSubmission.isSafe) {\n      session.clearCache();\n    }\n  }\n\n  formSubmissionFailedWithResponse(formSubmission, fetchResponse) {\n    this.element.delegate.loadResponse(fetchResponse);\n    session.clearCache();\n  }\n\n  formSubmissionErrored(formSubmission, error) {\n    console.error(error);\n  }\n\n  formSubmissionFinished({ formElement }) {\n    clearBusyState(formElement, this.#findFrameElement(formElement));\n  }\n\n  // View delegate\n\n  allowsImmediateRender({ element: newFrame }, options) {\n    const event = dispatch(\"turbo:before-frame-render\", {\n      target: this.element,\n      detail: { newFrame, ...options },\n      cancelable: true\n    });\n\n    const {\n      defaultPrevented,\n      detail: { render }\n    } = event;\n\n    if (this.view.renderer && render) {\n      this.view.renderer.renderElement = render;\n    }\n\n    return !defaultPrevented\n  }\n\n  viewRenderedSnapshot(_snapshot, _isPreview, _renderMethod) {}\n\n  preloadOnLoadLinksForView(element) {\n    session.preloadOnLoadLinksForView(element);\n  }\n\n  viewInvalidated() {}\n\n  // Frame renderer delegate\n\n  willRenderFrame(currentElement, _newElement) {\n    this.previousFrameElement = currentElement.cloneNode(true);\n  }\n\n  visitCachedSnapshot = ({ element }) => {\n    const frame = element.querySelector(\"#\" + this.element.id);\n\n    if (frame && this.previousFrameElement) {\n      frame.replaceChildren(...this.previousFrameElement.children);\n    }\n\n    delete this.previousFrameElement;\n  }\n\n  // Private\n\n  async #loadFrameResponse(fetchResponse, document) {\n    const newFrameElement = await this.extractForeignFrameElement(document.body);\n    const rendererClass = this.#shouldMorphFrame ? MorphingFrameRenderer : FrameRenderer;\n\n    if (newFrameElement) {\n      const snapshot = new Snapshot(newFrameElement);\n      const renderer = new rendererClass(this, this.view.snapshot, snapshot, false, false);\n      if (this.view.renderPromise) await this.view.renderPromise;\n      this.changeHistory();\n\n      await this.view.render(renderer);\n      this.complete = true;\n      session.frameRendered(fetchResponse, this.element);\n      session.frameLoaded(this.element);\n      await this.fetchResponseLoaded(fetchResponse);\n    } else if (this.#willHandleFrameMissingFromResponse(fetchResponse)) {\n      this.#handleFrameMissingFromResponse(fetchResponse);\n    }\n  }\n\n  async #visit(url) {\n    const request = new FetchRequest(this, FetchMethod.get, url, new URLSearchParams(), this.element);\n\n    this.#currentFetchRequest?.cancel();\n    this.#currentFetchRequest = request;\n\n    return new Promise((resolve) => {\n      this.#resolveVisitPromise = () => {\n        this.#resolveVisitPromise = () => {};\n        this.#currentFetchRequest = null;\n        resolve();\n      };\n      request.perform();\n    })\n  }\n\n  #navigateFrame(element, url, submitter) {\n    const frame = this.#findFrameElement(element, submitter);\n\n    frame.delegate.proposeVisitIfNavigatedWithAction(frame, getVisitAction(submitter, element, frame));\n\n    this.#withCurrentNavigationElement(element, () => {\n      frame.src = url;\n    });\n  }\n\n  proposeVisitIfNavigatedWithAction(frame, action = null) {\n    this.action = action;\n\n    if (this.action) {\n      const pageSnapshot = PageSnapshot.fromElement(frame).clone();\n      const { visitCachedSnapshot } = frame.delegate;\n\n      frame.delegate.fetchResponseLoaded = async (fetchResponse) => {\n        if (frame.src) {\n          const { statusCode, redirected } = fetchResponse;\n          const responseHTML = await fetchResponse.responseHTML;\n          const response = { statusCode, redirected, responseHTML };\n          const options = {\n            response,\n            visitCachedSnapshot,\n            willRender: false,\n            updateHistory: false,\n            restorationIdentifier: this.restorationIdentifier,\n            snapshot: pageSnapshot\n          };\n\n          if (this.action) options.action = this.action;\n\n          session.visit(frame.src, options);\n        }\n      };\n    }\n  }\n\n  changeHistory() {\n    if (this.action) {\n      const method = getHistoryMethodForAction(this.action);\n      session.history.update(method, expandURL(this.element.src || \"\"), this.restorationIdentifier);\n    }\n  }\n\n  async #handleUnvisitableFrameResponse(fetchResponse) {\n    console.warn(\n      `The response (${fetchResponse.statusCode}) from <turbo-frame id=\"${this.element.id}\"> is performing a full page visit due to turbo-visit-control.`\n    );\n\n    await this.#visitResponse(fetchResponse.response);\n  }\n\n  #willHandleFrameMissingFromResponse(fetchResponse) {\n    this.element.setAttribute(\"complete\", \"\");\n\n    const response = fetchResponse.response;\n    const visit = async (url, options) => {\n      if (url instanceof Response) {\n        this.#visitResponse(url);\n      } else {\n        session.visit(url, options);\n      }\n    };\n\n    const event = dispatch(\"turbo:frame-missing\", {\n      target: this.element,\n      detail: { response, visit },\n      cancelable: true\n    });\n\n    return !event.defaultPrevented\n  }\n\n  #handleFrameMissingFromResponse(fetchResponse) {\n    this.view.missing();\n    this.#throwFrameMissingError(fetchResponse);\n  }\n\n  #throwFrameMissingError(fetchResponse) {\n    const message = `The response (${fetchResponse.statusCode}) did not contain the expected <turbo-frame id=\"${this.element.id}\"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;\n    throw new TurboFrameMissingError(message)\n  }\n\n  async #visitResponse(response) {\n    const wrapped = new FetchResponse(response);\n    const responseHTML = await wrapped.responseHTML;\n    const { location, redirected, statusCode } = wrapped;\n\n    return session.visit(location, { response: { redirected, statusCode, responseHTML } })\n  }\n\n  #findFrameElement(element, submitter) {\n    const id = getAttribute(\"data-turbo-frame\", submitter, element) || this.element.getAttribute(\"target\");\n    return getFrameElementById(id) ?? this.element\n  }\n\n  async extractForeignFrameElement(container) {\n    let element;\n    const id = CSS.escape(this.id);\n\n    try {\n      element = activateElement(container.querySelector(`turbo-frame#${id}`), this.sourceURL);\n      if (element) {\n        return element\n      }\n\n      element = activateElement(container.querySelector(`turbo-frame[src][recurse~=${id}]`), this.sourceURL);\n      if (element) {\n        await element.loaded;\n        return await this.extractForeignFrameElement(element)\n      }\n    } catch (error) {\n      console.error(error);\n      return new FrameElement()\n    }\n\n    return null\n  }\n\n  #formActionIsVisitable(form, submitter) {\n    const action = getAction$1(form, submitter);\n\n    return locationIsVisitable(expandURL(action), this.rootLocation)\n  }\n\n  #shouldInterceptNavigation(element, submitter) {\n    const id = getAttribute(\"data-turbo-frame\", submitter, element) || this.element.getAttribute(\"target\");\n\n    if (element instanceof HTMLFormElement && !this.#formActionIsVisitable(element, submitter)) {\n      return false\n    }\n\n    if (!this.enabled || id == \"_top\") {\n      return false\n    }\n\n    if (id) {\n      const frameElement = getFrameElementById(id);\n      if (frameElement) {\n        return !frameElement.disabled\n      }\n    }\n\n    if (!session.elementIsNavigatable(element)) {\n      return false\n    }\n\n    if (submitter && !session.elementIsNavigatable(submitter)) {\n      return false\n    }\n\n    return true\n  }\n\n  // Computed properties\n\n  get id() {\n    return this.element.id\n  }\n\n  get enabled() {\n    return !this.element.disabled\n  }\n\n  get sourceURL() {\n    if (this.element.src) {\n      return this.element.src\n    }\n  }\n\n  set sourceURL(sourceURL) {\n    this.#ignoringChangesToAttribute(\"src\", () => {\n      this.element.src = sourceURL ?? null;\n    });\n  }\n\n  get loadingStyle() {\n    return this.element.loading\n  }\n\n  get isLoading() {\n    return this.formSubmission !== undefined || this.#resolveVisitPromise() !== undefined\n  }\n\n  get complete() {\n    return this.element.hasAttribute(\"complete\")\n  }\n\n  set complete(value) {\n    if (value) {\n      this.element.setAttribute(\"complete\", \"\");\n    } else {\n      this.element.removeAttribute(\"complete\");\n    }\n  }\n\n  get isActive() {\n    return this.element.isActive && this.#connected\n  }\n\n  get rootLocation() {\n    const meta = this.element.ownerDocument.querySelector(`meta[name=\"turbo-root\"]`);\n    const root = meta?.content ?? \"/\";\n    return expandURL(root)\n  }\n\n  #isIgnoringChangesTo(attributeName) {\n    return this.#ignoredAttributes.has(attributeName)\n  }\n\n  #ignoringChangesToAttribute(attributeName, callback) {\n    this.#ignoredAttributes.add(attributeName);\n    callback();\n    this.#ignoredAttributes.delete(attributeName);\n  }\n\n  #withCurrentNavigationElement(element, callback) {\n    this.currentNavigationElement = element;\n    callback();\n    delete this.currentNavigationElement;\n  }\n}\n\nfunction getFrameElementById(id) {\n  if (id != null) {\n    const element = document.getElementById(id);\n    if (element instanceof FrameElement) {\n      return element\n    }\n  }\n}\n\nfunction activateElement(element, currentURL) {\n  if (element) {\n    const src = element.getAttribute(\"src\");\n    if (src != null && currentURL != null && urlsAreEqual(src, currentURL)) {\n      throw new Error(`Matching <turbo-frame id=\"${element.id}\"> element has a source URL which references itself`)\n    }\n    if (element.ownerDocument !== document) {\n      element = document.importNode(element, true);\n    }\n\n    if (element instanceof FrameElement) {\n      element.connectedCallback();\n      element.disconnectedCallback();\n      return element\n    }\n  }\n}\n\nconst StreamActions = {\n  after() {\n    this.targetElements.forEach((e) => e.parentElement?.insertBefore(this.templateContent, e.nextSibling));\n  },\n\n  append() {\n    this.removeDuplicateTargetChildren();\n    this.targetElements.forEach((e) => e.append(this.templateContent));\n  },\n\n  before() {\n    this.targetElements.forEach((e) => e.parentElement?.insertBefore(this.templateContent, e));\n  },\n\n  prepend() {\n    this.removeDuplicateTargetChildren();\n    this.targetElements.forEach((e) => e.prepend(this.templateContent));\n  },\n\n  remove() {\n    this.targetElements.forEach((e) => e.remove());\n  },\n\n  replace() {\n    const method = this.getAttribute(\"method\");\n\n    this.targetElements.forEach((targetElement) => {\n      if (method === \"morph\") {\n        morphElements(targetElement, this.templateContent);\n      } else {\n        targetElement.replaceWith(this.templateContent);\n      }\n    });\n  },\n\n  update() {\n    const method = this.getAttribute(\"method\");\n\n    this.targetElements.forEach((targetElement) => {\n      if (method === \"morph\") {\n        morphChildren(targetElement, this.templateContent);\n      } else {\n        targetElement.innerHTML = \"\";\n        targetElement.append(this.templateContent);\n      }\n    });\n  },\n\n  refresh() {\n    session.refresh(this.baseURI, this.requestId);\n  }\n};\n\n// <turbo-stream action=replace target=id><template>...\n\n/**\n * Renders updates to the page from a stream of messages.\n *\n * Using the `action` attribute, this can be configured one of eight ways:\n *\n * - `after` - inserts the result after the target\n * - `append` - appends the result to the target\n * - `before` - inserts the result before the target\n * - `prepend` - prepends the result to the target\n * - `refresh` - initiates a page refresh\n * - `remove` - removes the target\n * - `replace` - replaces the outer HTML of the target\n * - `update` - replaces the inner HTML of the target\n *\n * @customElement turbo-stream\n * @example\n *   <turbo-stream action=\"append\" target=\"dom_id\">\n *     <template>\n *       Content to append to target designated with the dom_id.\n *     </template>\n *   </turbo-stream>\n */\nclass StreamElement extends HTMLElement {\n  static async renderElement(newElement) {\n    await newElement.performAction();\n  }\n\n  async connectedCallback() {\n    try {\n      await this.render();\n    } catch (error) {\n      console.error(error);\n    } finally {\n      this.disconnect();\n    }\n  }\n\n  async render() {\n    return (this.renderPromise ??= (async () => {\n      const event = this.beforeRenderEvent;\n\n      if (this.dispatchEvent(event)) {\n        await nextRepaint();\n        await event.detail.render(this);\n      }\n    })())\n  }\n\n  disconnect() {\n    try {\n      this.remove();\n      // eslint-disable-next-line no-empty\n    } catch {}\n  }\n\n  /**\n   * Removes duplicate children (by ID)\n   */\n  removeDuplicateTargetChildren() {\n    this.duplicateChildren.forEach((c) => c.remove());\n  }\n\n  /**\n   * Gets the list of duplicate children (i.e. those with the same ID)\n   */\n  get duplicateChildren() {\n    const existingChildren = this.targetElements.flatMap((e) => [...e.children]).filter((c) => !!c.getAttribute(\"id\"));\n    const newChildrenIds = [...(this.templateContent?.children || [])].filter((c) => !!c.getAttribute(\"id\")).map((c) => c.getAttribute(\"id\"));\n\n    return existingChildren.filter((c) => newChildrenIds.includes(c.getAttribute(\"id\")))\n  }\n\n  /**\n   * Gets the action function to be performed.\n   */\n  get performAction() {\n    if (this.action) {\n      const actionFunction = StreamActions[this.action];\n      if (actionFunction) {\n        return actionFunction\n      }\n      this.#raise(\"unknown action\");\n    }\n    this.#raise(\"action attribute is missing\");\n  }\n\n  /**\n   * Gets the target elements which the template will be rendered to.\n   */\n  get targetElements() {\n    if (this.target) {\n      return this.targetElementsById\n    } else if (this.targets) {\n      return this.targetElementsByQuery\n    } else {\n      this.#raise(\"target or targets attribute is missing\");\n    }\n  }\n\n  /**\n   * Gets the contents of the main `<template>`.\n   */\n  get templateContent() {\n    return this.templateElement.content.cloneNode(true)\n  }\n\n  /**\n   * Gets the main `<template>` used for rendering\n   */\n  get templateElement() {\n    if (this.firstElementChild === null) {\n      const template = this.ownerDocument.createElement(\"template\");\n      this.appendChild(template);\n      return template\n    } else if (this.firstElementChild instanceof HTMLTemplateElement) {\n      return this.firstElementChild\n    }\n    this.#raise(\"first child element must be a <template> element\");\n  }\n\n  /**\n   * Gets the current action.\n   */\n  get action() {\n    return this.getAttribute(\"action\")\n  }\n\n  /**\n   * Gets the current target (an element ID) to which the result will\n   * be rendered.\n   */\n  get target() {\n    return this.getAttribute(\"target\")\n  }\n\n  /**\n   * Gets the current \"targets\" selector (a CSS selector)\n   */\n  get targets() {\n    return this.getAttribute(\"targets\")\n  }\n\n  /**\n   * Reads the request-id attribute\n   */\n  get requestId() {\n    return this.getAttribute(\"request-id\")\n  }\n\n  #raise(message) {\n    throw new Error(`${this.description}: ${message}`)\n  }\n\n  get description() {\n    return (this.outerHTML.match(/<[^>]+>/) ?? [])[0] ?? \"<turbo-stream>\"\n  }\n\n  get beforeRenderEvent() {\n    return new CustomEvent(\"turbo:before-stream-render\", {\n      bubbles: true,\n      cancelable: true,\n      detail: { newStream: this, render: StreamElement.renderElement }\n    })\n  }\n\n  get targetElementsById() {\n    const element = this.ownerDocument?.getElementById(this.target);\n\n    if (element !== null) {\n      return [element]\n    } else {\n      return []\n    }\n  }\n\n  get targetElementsByQuery() {\n    const elements = this.ownerDocument?.querySelectorAll(this.targets);\n\n    if (elements.length !== 0) {\n      return Array.prototype.slice.call(elements)\n    } else {\n      return []\n    }\n  }\n}\n\nclass StreamSourceElement extends HTMLElement {\n  streamSource = null\n\n  connectedCallback() {\n    this.streamSource = this.src.match(/^ws{1,2}:/) ? new WebSocket(this.src) : new EventSource(this.src);\n\n    connectStreamSource(this.streamSource);\n  }\n\n  disconnectedCallback() {\n    if (this.streamSource) {\n      this.streamSource.close();\n\n      disconnectStreamSource(this.streamSource);\n    }\n  }\n\n  get src() {\n    return this.getAttribute(\"src\") || \"\"\n  }\n}\n\nFrameElement.delegateConstructor = FrameController;\n\nif (customElements.get(\"turbo-frame\") === undefined) {\n  customElements.define(\"turbo-frame\", FrameElement);\n}\n\nif (customElements.get(\"turbo-stream\") === undefined) {\n  customElements.define(\"turbo-stream\", StreamElement);\n}\n\nif (customElements.get(\"turbo-stream-source\") === undefined) {\n  customElements.define(\"turbo-stream-source\", StreamSourceElement);\n}\n\n(() => {\n  let element = document.currentScript;\n  if (!element) return\n  if (element.hasAttribute(\"data-turbo-suppress-warning\")) return\n\n  element = element.parentElement;\n  while (element) {\n    if (element == document.body) {\n      return console.warn(\n        unindent`\n        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!\n\n        Load your application\u2019s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.\n\n        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements\n\n        \u2014\u2014\n        Suppress this warning by adding a \"data-turbo-suppress-warning\" attribute to: %s\n      `,\n        element.outerHTML\n      )\n    }\n\n    element = element.parentElement;\n  }\n})();\n\nwindow.Turbo = { ...Turbo, StreamActions };\nstart();\n\nexport { FetchEnctype, FetchMethod, FetchRequest, FetchResponse, FrameElement, FrameLoadingStyle, FrameRenderer, PageRenderer, PageSnapshot, StreamActions, StreamElement, StreamSourceElement, cache, clearCache, config, connectStreamSource, disconnectStreamSource, fetchWithTurboHeaders as fetch, fetchEnctypeFromString, fetchMethodFromString, isSafe, navigator$1 as navigator, registerAdapter, renderStreamMessage, session, setConfirmMethod, setFormMode, setProgressBarDelay, start, visit };\n", "let consumer\n\nexport async function getConsumer() {\n  return consumer || setConsumer(createConsumer().then(setConsumer))\n}\n\nexport function setConsumer(newConsumer) {\n  return consumer = newConsumer\n}\n\nexport async function createConsumer() {\n  const { createConsumer } = await import(/* webpackChunkName: \"actioncable\" */ \"@rails/actioncable/src\")\n  return createConsumer()\n}\n\nexport async function subscribeTo(channel, mixin) {\n  const { subscriptions } = await getConsumer()\n  return subscriptions.create(channel, mixin)\n}\n", "// Based on https://github.com/nathan7/snakeize\n//\n// This software is released under the MIT license:\n// Permission is hereby granted, free of charge, to any person obtaining a copy of\n// this software and associated documentation files (the \"Software\"), to deal in\n// the Software without restriction, including without limitation the rights to\n// use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n// the Software, and to permit persons to whom the Software is furnished to do so,\n// subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n// FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n// COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n// CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\nexport default function walk (obj) {\n    if (!obj || typeof obj !== 'object') return obj;\n    if (obj instanceof Date || obj instanceof RegExp) return obj;\n    if (Array.isArray(obj)) return obj.map(walk);\n    return Object.keys(obj).reduce(function (acc, key) {\n        var camel = key[0].toLowerCase() + key.slice(1).replace(/([A-Z]+)/g, function (m, x) {\n            return '_' + x.toLowerCase();\n        });\n        acc[camel] = walk(obj[key]);\n        return acc;\n    }, {});\n};", "import { connectStreamSource, disconnectStreamSource } from \"@hotwired/turbo\"\nimport { subscribeTo } from \"./cable\"\nimport snakeize from \"./snakeize\"\n\nclass TurboCableStreamSourceElement extends HTMLElement {\n  static observedAttributes = [\"channel\", \"signed-stream-name\"]\n\n  async connectedCallback() {\n    connectStreamSource(this)\n    this.subscription = await subscribeTo(this.channel, {\n      received: this.dispatchMessageEvent.bind(this),\n      connected: this.subscriptionConnected.bind(this),\n      disconnected: this.subscriptionDisconnected.bind(this)\n    })\n  }\n\n  disconnectedCallback() {\n    disconnectStreamSource(this)\n    if (this.subscription) this.subscription.unsubscribe()\n    this.subscriptionDisconnected()\n  }\n\n  attributeChangedCallback() {\n    if (this.subscription) {\n      this.disconnectedCallback()\n      this.connectedCallback()\n    }\n  }\n\n  dispatchMessageEvent(data) {\n    const event = new MessageEvent(\"message\", { data })\n    return this.dispatchEvent(event)\n  }\n\n  subscriptionConnected() {\n    this.setAttribute(\"connected\", \"\")\n  }\n\n  subscriptionDisconnected() {\n    this.removeAttribute(\"connected\")\n  }\n\n  get channel() {\n    const channel = this.getAttribute(\"channel\")\n    const signed_stream_name = this.getAttribute(\"signed-stream-name\")\n    return { channel, signed_stream_name, ...snakeize({ ...this.dataset }) }\n  }\n}\n\n\nif (customElements.get(\"turbo-cable-stream-source\") === undefined) {\n  customElements.define(\"turbo-cable-stream-source\", TurboCableStreamSourceElement)\n}\n", "export function encodeMethodIntoRequestBody(event) {\n  if (event.target instanceof HTMLFormElement) {\n    const { target: form, detail: { fetchOptions } } = event\n\n    form.addEventListener(\"turbo:submit-start\", ({ detail: { formSubmission: { submitter } } }) => {\n      const body = isBodyInit(fetchOptions.body) ? fetchOptions.body : new URLSearchParams()\n      const method = determineFetchMethod(submitter, body, form)\n\n      if (!/get/i.test(method)) {\n        if (/post/i.test(method)) {\n          body.delete(\"_method\")\n        } else {\n          body.set(\"_method\", method)\n        }\n\n        fetchOptions.method = \"post\"\n      }\n    }, { once: true })\n  }\n}\n\nfunction determineFetchMethod(submitter, body, form) {\n  const formMethod = determineFormMethod(submitter)\n  const overrideMethod = body.get(\"_method\")\n  const method = form.getAttribute(\"method\") || \"get\"\n\n  if (typeof formMethod == \"string\") {\n    return formMethod\n  } else if (typeof overrideMethod == \"string\") {\n    return overrideMethod\n  } else {\n    return method\n  }\n}\n\nfunction determineFormMethod(submitter) {\n  if (submitter instanceof HTMLButtonElement || submitter instanceof HTMLInputElement) {\n    // Rails 7 ActionView::Helpers::FormBuilder#button method has an override\n    // for formmethod if the button does not have name or value attributes\n    // set, which is the default. This means that if you use <%= f.button\n    // formmethod: :delete %>, it will generate a <button name=\"_method\"\n    // value=\"delete\" formmethod=\"post\">. Therefore, if the submitter's name\n    // is already _method, it's value attribute already contains the desired\n    // method.\n    if (submitter.name === '_method') {\n      return submitter.value\n    } else if (submitter.hasAttribute(\"formmethod\")) {\n      return submitter.formMethod\n    } else {\n      return null\n    }\n  } else {\n    return null\n  }\n}\n\nfunction isBodyInit(body) {\n  return body instanceof FormData || body instanceof URLSearchParams\n}\n", "import \"./cable_stream_source_element\"\n\nimport * as Turbo from \"@hotwired/turbo\"\nexport { Turbo }\n\nimport * as cable from \"./cable\"\nexport { cable }\n\nimport { encodeMethodIntoRequestBody } from \"./fetch_requests\"\n\nwindow.Turbo = Turbo\n\naddEventListener(\"turbo:before-fetch-request\", encodeMethodIntoRequestBody)\n", "/*\nStimulus 3.2.1\nCopyright \u00A9 2023 Basecamp, LLC\n */\nclass EventListener {\n    constructor(eventTarget, eventName, eventOptions) {\n        this.eventTarget = eventTarget;\n        this.eventName = eventName;\n        this.eventOptions = eventOptions;\n        this.unorderedBindings = new Set();\n    }\n    connect() {\n        this.eventTarget.addEventListener(this.eventName, this, this.eventOptions);\n    }\n    disconnect() {\n        this.eventTarget.removeEventListener(this.eventName, this, this.eventOptions);\n    }\n    bindingConnected(binding) {\n        this.unorderedBindings.add(binding);\n    }\n    bindingDisconnected(binding) {\n        this.unorderedBindings.delete(binding);\n    }\n    handleEvent(event) {\n        const extendedEvent = extendEvent(event);\n        for (const binding of this.bindings) {\n            if (extendedEvent.immediatePropagationStopped) {\n                break;\n            }\n            else {\n                binding.handleEvent(extendedEvent);\n            }\n        }\n    }\n    hasBindings() {\n        return this.unorderedBindings.size > 0;\n    }\n    get bindings() {\n        return Array.from(this.unorderedBindings).sort((left, right) => {\n            const leftIndex = left.index, rightIndex = right.index;\n            return leftIndex < rightIndex ? -1 : leftIndex > rightIndex ? 1 : 0;\n        });\n    }\n}\nfunction extendEvent(event) {\n    if (\"immediatePropagationStopped\" in event) {\n        return event;\n    }\n    else {\n        const { stopImmediatePropagation } = event;\n        return Object.assign(event, {\n            immediatePropagationStopped: false,\n            stopImmediatePropagation() {\n                this.immediatePropagationStopped = true;\n                stopImmediatePropagation.call(this);\n            },\n        });\n    }\n}\n\nclass Dispatcher {\n    constructor(application) {\n        this.application = application;\n        this.eventListenerMaps = new Map();\n        this.started = false;\n    }\n    start() {\n        if (!this.started) {\n            this.started = true;\n            this.eventListeners.forEach((eventListener) => eventListener.connect());\n        }\n    }\n    stop() {\n        if (this.started) {\n            this.started = false;\n            this.eventListeners.forEach((eventListener) => eventListener.disconnect());\n        }\n    }\n    get eventListeners() {\n        return Array.from(this.eventListenerMaps.values()).reduce((listeners, map) => listeners.concat(Array.from(map.values())), []);\n    }\n    bindingConnected(binding) {\n        this.fetchEventListenerForBinding(binding).bindingConnected(binding);\n    }\n    bindingDisconnected(binding, clearEventListeners = false) {\n        this.fetchEventListenerForBinding(binding).bindingDisconnected(binding);\n        if (clearEventListeners)\n            this.clearEventListenersForBinding(binding);\n    }\n    handleError(error, message, detail = {}) {\n        this.application.handleError(error, `Error ${message}`, detail);\n    }\n    clearEventListenersForBinding(binding) {\n        const eventListener = this.fetchEventListenerForBinding(binding);\n        if (!eventListener.hasBindings()) {\n            eventListener.disconnect();\n            this.removeMappedEventListenerFor(binding);\n        }\n    }\n    removeMappedEventListenerFor(binding) {\n        const { eventTarget, eventName, eventOptions } = binding;\n        const eventListenerMap = this.fetchEventListenerMapForEventTarget(eventTarget);\n        const cacheKey = this.cacheKey(eventName, eventOptions);\n        eventListenerMap.delete(cacheKey);\n        if (eventListenerMap.size == 0)\n            this.eventListenerMaps.delete(eventTarget);\n    }\n    fetchEventListenerForBinding(binding) {\n        const { eventTarget, eventName, eventOptions } = binding;\n        return this.fetchEventListener(eventTarget, eventName, eventOptions);\n    }\n    fetchEventListener(eventTarget, eventName, eventOptions) {\n        const eventListenerMap = this.fetchEventListenerMapForEventTarget(eventTarget);\n        const cacheKey = this.cacheKey(eventName, eventOptions);\n        let eventListener = eventListenerMap.get(cacheKey);\n        if (!eventListener) {\n            eventListener = this.createEventListener(eventTarget, eventName, eventOptions);\n            eventListenerMap.set(cacheKey, eventListener);\n        }\n        return eventListener;\n    }\n    createEventListener(eventTarget, eventName, eventOptions) {\n        const eventListener = new EventListener(eventTarget, eventName, eventOptions);\n        if (this.started) {\n            eventListener.connect();\n        }\n        return eventListener;\n    }\n    fetchEventListenerMapForEventTarget(eventTarget) {\n        let eventListenerMap = this.eventListenerMaps.get(eventTarget);\n        if (!eventListenerMap) {\n            eventListenerMap = new Map();\n            this.eventListenerMaps.set(eventTarget, eventListenerMap);\n        }\n        return eventListenerMap;\n    }\n    cacheKey(eventName, eventOptions) {\n        const parts = [eventName];\n        Object.keys(eventOptions)\n            .sort()\n            .forEach((key) => {\n            parts.push(`${eventOptions[key] ? \"\" : \"!\"}${key}`);\n        });\n        return parts.join(\":\");\n    }\n}\n\nconst defaultActionDescriptorFilters = {\n    stop({ event, value }) {\n        if (value)\n            event.stopPropagation();\n        return true;\n    },\n    prevent({ event, value }) {\n        if (value)\n            event.preventDefault();\n        return true;\n    },\n    self({ event, value, element }) {\n        if (value) {\n            return element === event.target;\n        }\n        else {\n            return true;\n        }\n    },\n};\nconst descriptorPattern = /^(?:(?:([^.]+?)\\+)?(.+?)(?:\\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;\nfunction parseActionDescriptorString(descriptorString) {\n    const source = descriptorString.trim();\n    const matches = source.match(descriptorPattern) || [];\n    let eventName = matches[2];\n    let keyFilter = matches[3];\n    if (keyFilter && ![\"keydown\", \"keyup\", \"keypress\"].includes(eventName)) {\n        eventName += `.${keyFilter}`;\n        keyFilter = \"\";\n    }\n    return {\n        eventTarget: parseEventTarget(matches[4]),\n        eventName,\n        eventOptions: matches[7] ? parseEventOptions(matches[7]) : {},\n        identifier: matches[5],\n        methodName: matches[6],\n        keyFilter: matches[1] || keyFilter,\n    };\n}\nfunction parseEventTarget(eventTargetName) {\n    if (eventTargetName == \"window\") {\n        return window;\n    }\n    else if (eventTargetName == \"document\") {\n        return document;\n    }\n}\nfunction parseEventOptions(eventOptions) {\n    return eventOptions\n        .split(\":\")\n        .reduce((options, token) => Object.assign(options, { [token.replace(/^!/, \"\")]: !/^!/.test(token) }), {});\n}\nfunction stringifyEventTarget(eventTarget) {\n    if (eventTarget == window) {\n        return \"window\";\n    }\n    else if (eventTarget == document) {\n        return \"document\";\n    }\n}\n\nfunction camelize(value) {\n    return value.replace(/(?:[_-])([a-z0-9])/g, (_, char) => char.toUpperCase());\n}\nfunction namespaceCamelize(value) {\n    return camelize(value.replace(/--/g, \"-\").replace(/__/g, \"_\"));\n}\nfunction capitalize(value) {\n    return value.charAt(0).toUpperCase() + value.slice(1);\n}\nfunction dasherize(value) {\n    return value.replace(/([A-Z])/g, (_, char) => `-${char.toLowerCase()}`);\n}\nfunction tokenize(value) {\n    return value.match(/[^\\s]+/g) || [];\n}\n\nfunction isSomething(object) {\n    return object !== null && object !== undefined;\n}\nfunction hasProperty(object, property) {\n    return Object.prototype.hasOwnProperty.call(object, property);\n}\n\nconst allModifiers = [\"meta\", \"ctrl\", \"alt\", \"shift\"];\nclass Action {\n    constructor(element, index, descriptor, schema) {\n        this.element = element;\n        this.index = index;\n        this.eventTarget = descriptor.eventTarget || element;\n        this.eventName = descriptor.eventName || getDefaultEventNameForElement(element) || error(\"missing event name\");\n        this.eventOptions = descriptor.eventOptions || {};\n        this.identifier = descriptor.identifier || error(\"missing identifier\");\n        this.methodName = descriptor.methodName || error(\"missing method name\");\n        this.keyFilter = descriptor.keyFilter || \"\";\n        this.schema = schema;\n    }\n    static forToken(token, schema) {\n        return new this(token.element, token.index, parseActionDescriptorString(token.content), schema);\n    }\n    toString() {\n        const eventFilter = this.keyFilter ? `.${this.keyFilter}` : \"\";\n        const eventTarget = this.eventTargetName ? `@${this.eventTargetName}` : \"\";\n        return `${this.eventName}${eventFilter}${eventTarget}->${this.identifier}#${this.methodName}`;\n    }\n    shouldIgnoreKeyboardEvent(event) {\n        if (!this.keyFilter) {\n            return false;\n        }\n        const filters = this.keyFilter.split(\"+\");\n        if (this.keyFilterDissatisfied(event, filters)) {\n            return true;\n        }\n        const standardFilter = filters.filter((key) => !allModifiers.includes(key))[0];\n        if (!standardFilter) {\n            return false;\n        }\n        if (!hasProperty(this.keyMappings, standardFilter)) {\n            error(`contains unknown key filter: ${this.keyFilter}`);\n        }\n        return this.keyMappings[standardFilter].toLowerCase() !== event.key.toLowerCase();\n    }\n    shouldIgnoreMouseEvent(event) {\n        if (!this.keyFilter) {\n            return false;\n        }\n        const filters = [this.keyFilter];\n        if (this.keyFilterDissatisfied(event, filters)) {\n            return true;\n        }\n        return false;\n    }\n    get params() {\n        const params = {};\n        const pattern = new RegExp(`^data-${this.identifier}-(.+)-param$`, \"i\");\n        for (const { name, value } of Array.from(this.element.attributes)) {\n            const match = name.match(pattern);\n            const key = match && match[1];\n            if (key) {\n                params[camelize(key)] = typecast(value);\n            }\n        }\n        return params;\n    }\n    get eventTargetName() {\n        return stringifyEventTarget(this.eventTarget);\n    }\n    get keyMappings() {\n        return this.schema.keyMappings;\n    }\n    keyFilterDissatisfied(event, filters) {\n        const [meta, ctrl, alt, shift] = allModifiers.map((modifier) => filters.includes(modifier));\n        return event.metaKey !== meta || event.ctrlKey !== ctrl || event.altKey !== alt || event.shiftKey !== shift;\n    }\n}\nconst defaultEventNames = {\n    a: () => \"click\",\n    button: () => \"click\",\n    form: () => \"submit\",\n    details: () => \"toggle\",\n    input: (e) => (e.getAttribute(\"type\") == \"submit\" ? \"click\" : \"input\"),\n    select: () => \"change\",\n    textarea: () => \"input\",\n};\nfunction getDefaultEventNameForElement(element) {\n    const tagName = element.tagName.toLowerCase();\n    if (tagName in defaultEventNames) {\n        return defaultEventNames[tagName](element);\n    }\n}\nfunction error(message) {\n    throw new Error(message);\n}\nfunction typecast(value) {\n    try {\n        return JSON.parse(value);\n    }\n    catch (o_O) {\n        return value;\n    }\n}\n\nclass Binding {\n    constructor(context, action) {\n        this.context = context;\n        this.action = action;\n    }\n    get index() {\n        return this.action.index;\n    }\n    get eventTarget() {\n        return this.action.eventTarget;\n    }\n    get eventOptions() {\n        return this.action.eventOptions;\n    }\n    get identifier() {\n        return this.context.identifier;\n    }\n    handleEvent(event) {\n        const actionEvent = this.prepareActionEvent(event);\n        if (this.willBeInvokedByEvent(event) && this.applyEventModifiers(actionEvent)) {\n            this.invokeWithEvent(actionEvent);\n        }\n    }\n    get eventName() {\n        return this.action.eventName;\n    }\n    get method() {\n        const method = this.controller[this.methodName];\n        if (typeof method == \"function\") {\n            return method;\n        }\n        throw new Error(`Action \"${this.action}\" references undefined method \"${this.methodName}\"`);\n    }\n    applyEventModifiers(event) {\n        const { element } = this.action;\n        const { actionDescriptorFilters } = this.context.application;\n        const { controller } = this.context;\n        let passes = true;\n        for (const [name, value] of Object.entries(this.eventOptions)) {\n            if (name in actionDescriptorFilters) {\n                const filter = actionDescriptorFilters[name];\n                passes = passes && filter({ name, value, event, element, controller });\n            }\n            else {\n                continue;\n            }\n        }\n        return passes;\n    }\n    prepareActionEvent(event) {\n        return Object.assign(event, { params: this.action.params });\n    }\n    invokeWithEvent(event) {\n        const { target, currentTarget } = event;\n        try {\n            this.method.call(this.controller, event);\n            this.context.logDebugActivity(this.methodName, { event, target, currentTarget, action: this.methodName });\n        }\n        catch (error) {\n            const { identifier, controller, element, index } = this;\n            const detail = { identifier, controller, element, index, event };\n            this.context.handleError(error, `invoking action \"${this.action}\"`, detail);\n        }\n    }\n    willBeInvokedByEvent(event) {\n        const eventTarget = event.target;\n        if (event instanceof KeyboardEvent && this.action.shouldIgnoreKeyboardEvent(event)) {\n            return false;\n        }\n        if (event instanceof MouseEvent && this.action.shouldIgnoreMouseEvent(event)) {\n            return false;\n        }\n        if (this.element === eventTarget) {\n            return true;\n        }\n        else if (eventTarget instanceof Element && this.element.contains(eventTarget)) {\n            return this.scope.containsElement(eventTarget);\n        }\n        else {\n            return this.scope.containsElement(this.action.element);\n        }\n    }\n    get controller() {\n        return this.context.controller;\n    }\n    get methodName() {\n        return this.action.methodName;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get scope() {\n        return this.context.scope;\n    }\n}\n\nclass ElementObserver {\n    constructor(element, delegate) {\n        this.mutationObserverInit = { attributes: true, childList: true, subtree: true };\n        this.element = element;\n        this.started = false;\n        this.delegate = delegate;\n        this.elements = new Set();\n        this.mutationObserver = new MutationObserver((mutations) => this.processMutations(mutations));\n    }\n    start() {\n        if (!this.started) {\n            this.started = true;\n            this.mutationObserver.observe(this.element, this.mutationObserverInit);\n            this.refresh();\n        }\n    }\n    pause(callback) {\n        if (this.started) {\n            this.mutationObserver.disconnect();\n            this.started = false;\n        }\n        callback();\n        if (!this.started) {\n            this.mutationObserver.observe(this.element, this.mutationObserverInit);\n            this.started = true;\n        }\n    }\n    stop() {\n        if (this.started) {\n            this.mutationObserver.takeRecords();\n            this.mutationObserver.disconnect();\n            this.started = false;\n        }\n    }\n    refresh() {\n        if (this.started) {\n            const matches = new Set(this.matchElementsInTree());\n            for (const element of Array.from(this.elements)) {\n                if (!matches.has(element)) {\n                    this.removeElement(element);\n                }\n            }\n            for (const element of Array.from(matches)) {\n                this.addElement(element);\n            }\n        }\n    }\n    processMutations(mutations) {\n        if (this.started) {\n            for (const mutation of mutations) {\n                this.processMutation(mutation);\n            }\n        }\n    }\n    processMutation(mutation) {\n        if (mutation.type == \"attributes\") {\n            this.processAttributeChange(mutation.target, mutation.attributeName);\n        }\n        else if (mutation.type == \"childList\") {\n            this.processRemovedNodes(mutation.removedNodes);\n            this.processAddedNodes(mutation.addedNodes);\n        }\n    }\n    processAttributeChange(element, attributeName) {\n        if (this.elements.has(element)) {\n            if (this.delegate.elementAttributeChanged && this.matchElement(element)) {\n                this.delegate.elementAttributeChanged(element, attributeName);\n            }\n            else {\n                this.removeElement(element);\n            }\n        }\n        else if (this.matchElement(element)) {\n            this.addElement(element);\n        }\n    }\n    processRemovedNodes(nodes) {\n        for (const node of Array.from(nodes)) {\n            const element = this.elementFromNode(node);\n            if (element) {\n                this.processTree(element, this.removeElement);\n            }\n        }\n    }\n    processAddedNodes(nodes) {\n        for (const node of Array.from(nodes)) {\n            const element = this.elementFromNode(node);\n            if (element && this.elementIsActive(element)) {\n                this.processTree(element, this.addElement);\n            }\n        }\n    }\n    matchElement(element) {\n        return this.delegate.matchElement(element);\n    }\n    matchElementsInTree(tree = this.element) {\n        return this.delegate.matchElementsInTree(tree);\n    }\n    processTree(tree, processor) {\n        for (const element of this.matchElementsInTree(tree)) {\n            processor.call(this, element);\n        }\n    }\n    elementFromNode(node) {\n        if (node.nodeType == Node.ELEMENT_NODE) {\n            return node;\n        }\n    }\n    elementIsActive(element) {\n        if (element.isConnected != this.element.isConnected) {\n            return false;\n        }\n        else {\n            return this.element.contains(element);\n        }\n    }\n    addElement(element) {\n        if (!this.elements.has(element)) {\n            if (this.elementIsActive(element)) {\n                this.elements.add(element);\n                if (this.delegate.elementMatched) {\n                    this.delegate.elementMatched(element);\n                }\n            }\n        }\n    }\n    removeElement(element) {\n        if (this.elements.has(element)) {\n            this.elements.delete(element);\n            if (this.delegate.elementUnmatched) {\n                this.delegate.elementUnmatched(element);\n            }\n        }\n    }\n}\n\nclass AttributeObserver {\n    constructor(element, attributeName, delegate) {\n        this.attributeName = attributeName;\n        this.delegate = delegate;\n        this.elementObserver = new ElementObserver(element, this);\n    }\n    get element() {\n        return this.elementObserver.element;\n    }\n    get selector() {\n        return `[${this.attributeName}]`;\n    }\n    start() {\n        this.elementObserver.start();\n    }\n    pause(callback) {\n        this.elementObserver.pause(callback);\n    }\n    stop() {\n        this.elementObserver.stop();\n    }\n    refresh() {\n        this.elementObserver.refresh();\n    }\n    get started() {\n        return this.elementObserver.started;\n    }\n    matchElement(element) {\n        return element.hasAttribute(this.attributeName);\n    }\n    matchElementsInTree(tree) {\n        const match = this.matchElement(tree) ? [tree] : [];\n        const matches = Array.from(tree.querySelectorAll(this.selector));\n        return match.concat(matches);\n    }\n    elementMatched(element) {\n        if (this.delegate.elementMatchedAttribute) {\n            this.delegate.elementMatchedAttribute(element, this.attributeName);\n        }\n    }\n    elementUnmatched(element) {\n        if (this.delegate.elementUnmatchedAttribute) {\n            this.delegate.elementUnmatchedAttribute(element, this.attributeName);\n        }\n    }\n    elementAttributeChanged(element, attributeName) {\n        if (this.delegate.elementAttributeValueChanged && this.attributeName == attributeName) {\n            this.delegate.elementAttributeValueChanged(element, attributeName);\n        }\n    }\n}\n\nfunction add(map, key, value) {\n    fetch(map, key).add(value);\n}\nfunction del(map, key, value) {\n    fetch(map, key).delete(value);\n    prune(map, key);\n}\nfunction fetch(map, key) {\n    let values = map.get(key);\n    if (!values) {\n        values = new Set();\n        map.set(key, values);\n    }\n    return values;\n}\nfunction prune(map, key) {\n    const values = map.get(key);\n    if (values != null && values.size == 0) {\n        map.delete(key);\n    }\n}\n\nclass Multimap {\n    constructor() {\n        this.valuesByKey = new Map();\n    }\n    get keys() {\n        return Array.from(this.valuesByKey.keys());\n    }\n    get values() {\n        const sets = Array.from(this.valuesByKey.values());\n        return sets.reduce((values, set) => values.concat(Array.from(set)), []);\n    }\n    get size() {\n        const sets = Array.from(this.valuesByKey.values());\n        return sets.reduce((size, set) => size + set.size, 0);\n    }\n    add(key, value) {\n        add(this.valuesByKey, key, value);\n    }\n    delete(key, value) {\n        del(this.valuesByKey, key, value);\n    }\n    has(key, value) {\n        const values = this.valuesByKey.get(key);\n        return values != null && values.has(value);\n    }\n    hasKey(key) {\n        return this.valuesByKey.has(key);\n    }\n    hasValue(value) {\n        const sets = Array.from(this.valuesByKey.values());\n        return sets.some((set) => set.has(value));\n    }\n    getValuesForKey(key) {\n        const values = this.valuesByKey.get(key);\n        return values ? Array.from(values) : [];\n    }\n    getKeysForValue(value) {\n        return Array.from(this.valuesByKey)\n            .filter(([_key, values]) => values.has(value))\n            .map(([key, _values]) => key);\n    }\n}\n\nclass IndexedMultimap extends Multimap {\n    constructor() {\n        super();\n        this.keysByValue = new Map();\n    }\n    get values() {\n        return Array.from(this.keysByValue.keys());\n    }\n    add(key, value) {\n        super.add(key, value);\n        add(this.keysByValue, value, key);\n    }\n    delete(key, value) {\n        super.delete(key, value);\n        del(this.keysByValue, value, key);\n    }\n    hasValue(value) {\n        return this.keysByValue.has(value);\n    }\n    getKeysForValue(value) {\n        const set = this.keysByValue.get(value);\n        return set ? Array.from(set) : [];\n    }\n}\n\nclass SelectorObserver {\n    constructor(element, selector, delegate, details) {\n        this._selector = selector;\n        this.details = details;\n        this.elementObserver = new ElementObserver(element, this);\n        this.delegate = delegate;\n        this.matchesByElement = new Multimap();\n    }\n    get started() {\n        return this.elementObserver.started;\n    }\n    get selector() {\n        return this._selector;\n    }\n    set selector(selector) {\n        this._selector = selector;\n        this.refresh();\n    }\n    start() {\n        this.elementObserver.start();\n    }\n    pause(callback) {\n        this.elementObserver.pause(callback);\n    }\n    stop() {\n        this.elementObserver.stop();\n    }\n    refresh() {\n        this.elementObserver.refresh();\n    }\n    get element() {\n        return this.elementObserver.element;\n    }\n    matchElement(element) {\n        const { selector } = this;\n        if (selector) {\n            const matches = element.matches(selector);\n            if (this.delegate.selectorMatchElement) {\n                return matches && this.delegate.selectorMatchElement(element, this.details);\n            }\n            return matches;\n        }\n        else {\n            return false;\n        }\n    }\n    matchElementsInTree(tree) {\n        const { selector } = this;\n        if (selector) {\n            const match = this.matchElement(tree) ? [tree] : [];\n            const matches = Array.from(tree.querySelectorAll(selector)).filter((match) => this.matchElement(match));\n            return match.concat(matches);\n        }\n        else {\n            return [];\n        }\n    }\n    elementMatched(element) {\n        const { selector } = this;\n        if (selector) {\n            this.selectorMatched(element, selector);\n        }\n    }\n    elementUnmatched(element) {\n        const selectors = this.matchesByElement.getKeysForValue(element);\n        for (const selector of selectors) {\n            this.selectorUnmatched(element, selector);\n        }\n    }\n    elementAttributeChanged(element, _attributeName) {\n        const { selector } = this;\n        if (selector) {\n            const matches = this.matchElement(element);\n            const matchedBefore = this.matchesByElement.has(selector, element);\n            if (matches && !matchedBefore) {\n                this.selectorMatched(element, selector);\n            }\n            else if (!matches && matchedBefore) {\n                this.selectorUnmatched(element, selector);\n            }\n        }\n    }\n    selectorMatched(element, selector) {\n        this.delegate.selectorMatched(element, selector, this.details);\n        this.matchesByElement.add(selector, element);\n    }\n    selectorUnmatched(element, selector) {\n        this.delegate.selectorUnmatched(element, selector, this.details);\n        this.matchesByElement.delete(selector, element);\n    }\n}\n\nclass StringMapObserver {\n    constructor(element, delegate) {\n        this.element = element;\n        this.delegate = delegate;\n        this.started = false;\n        this.stringMap = new Map();\n        this.mutationObserver = new MutationObserver((mutations) => this.processMutations(mutations));\n    }\n    start() {\n        if (!this.started) {\n            this.started = true;\n            this.mutationObserver.observe(this.element, { attributes: true, attributeOldValue: true });\n            this.refresh();\n        }\n    }\n    stop() {\n        if (this.started) {\n            this.mutationObserver.takeRecords();\n            this.mutationObserver.disconnect();\n            this.started = false;\n        }\n    }\n    refresh() {\n        if (this.started) {\n            for (const attributeName of this.knownAttributeNames) {\n                this.refreshAttribute(attributeName, null);\n            }\n        }\n    }\n    processMutations(mutations) {\n        if (this.started) {\n            for (const mutation of mutations) {\n                this.processMutation(mutation);\n            }\n        }\n    }\n    processMutation(mutation) {\n        const attributeName = mutation.attributeName;\n        if (attributeName) {\n            this.refreshAttribute(attributeName, mutation.oldValue);\n        }\n    }\n    refreshAttribute(attributeName, oldValue) {\n        const key = this.delegate.getStringMapKeyForAttribute(attributeName);\n        if (key != null) {\n            if (!this.stringMap.has(attributeName)) {\n                this.stringMapKeyAdded(key, attributeName);\n            }\n            const value = this.element.getAttribute(attributeName);\n            if (this.stringMap.get(attributeName) != value) {\n                this.stringMapValueChanged(value, key, oldValue);\n            }\n            if (value == null) {\n                const oldValue = this.stringMap.get(attributeName);\n                this.stringMap.delete(attributeName);\n                if (oldValue)\n                    this.stringMapKeyRemoved(key, attributeName, oldValue);\n            }\n            else {\n                this.stringMap.set(attributeName, value);\n            }\n        }\n    }\n    stringMapKeyAdded(key, attributeName) {\n        if (this.delegate.stringMapKeyAdded) {\n            this.delegate.stringMapKeyAdded(key, attributeName);\n        }\n    }\n    stringMapValueChanged(value, key, oldValue) {\n        if (this.delegate.stringMapValueChanged) {\n            this.delegate.stringMapValueChanged(value, key, oldValue);\n        }\n    }\n    stringMapKeyRemoved(key, attributeName, oldValue) {\n        if (this.delegate.stringMapKeyRemoved) {\n            this.delegate.stringMapKeyRemoved(key, attributeName, oldValue);\n        }\n    }\n    get knownAttributeNames() {\n        return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)));\n    }\n    get currentAttributeNames() {\n        return Array.from(this.element.attributes).map((attribute) => attribute.name);\n    }\n    get recordedAttributeNames() {\n        return Array.from(this.stringMap.keys());\n    }\n}\n\nclass TokenListObserver {\n    constructor(element, attributeName, delegate) {\n        this.attributeObserver = new AttributeObserver(element, attributeName, this);\n        this.delegate = delegate;\n        this.tokensByElement = new Multimap();\n    }\n    get started() {\n        return this.attributeObserver.started;\n    }\n    start() {\n        this.attributeObserver.start();\n    }\n    pause(callback) {\n        this.attributeObserver.pause(callback);\n    }\n    stop() {\n        this.attributeObserver.stop();\n    }\n    refresh() {\n        this.attributeObserver.refresh();\n    }\n    get element() {\n        return this.attributeObserver.element;\n    }\n    get attributeName() {\n        return this.attributeObserver.attributeName;\n    }\n    elementMatchedAttribute(element) {\n        this.tokensMatched(this.readTokensForElement(element));\n    }\n    elementAttributeValueChanged(element) {\n        const [unmatchedTokens, matchedTokens] = this.refreshTokensForElement(element);\n        this.tokensUnmatched(unmatchedTokens);\n        this.tokensMatched(matchedTokens);\n    }\n    elementUnmatchedAttribute(element) {\n        this.tokensUnmatched(this.tokensByElement.getValuesForKey(element));\n    }\n    tokensMatched(tokens) {\n        tokens.forEach((token) => this.tokenMatched(token));\n    }\n    tokensUnmatched(tokens) {\n        tokens.forEach((token) => this.tokenUnmatched(token));\n    }\n    tokenMatched(token) {\n        this.delegate.tokenMatched(token);\n        this.tokensByElement.add(token.element, token);\n    }\n    tokenUnmatched(token) {\n        this.delegate.tokenUnmatched(token);\n        this.tokensByElement.delete(token.element, token);\n    }\n    refreshTokensForElement(element) {\n        const previousTokens = this.tokensByElement.getValuesForKey(element);\n        const currentTokens = this.readTokensForElement(element);\n        const firstDifferingIndex = zip(previousTokens, currentTokens).findIndex(([previousToken, currentToken]) => !tokensAreEqual(previousToken, currentToken));\n        if (firstDifferingIndex == -1) {\n            return [[], []];\n        }\n        else {\n            return [previousTokens.slice(firstDifferingIndex), currentTokens.slice(firstDifferingIndex)];\n        }\n    }\n    readTokensForElement(element) {\n        const attributeName = this.attributeName;\n        const tokenString = element.getAttribute(attributeName) || \"\";\n        return parseTokenString(tokenString, element, attributeName);\n    }\n}\nfunction parseTokenString(tokenString, element, attributeName) {\n    return tokenString\n        .trim()\n        .split(/\\s+/)\n        .filter((content) => content.length)\n        .map((content, index) => ({ element, attributeName, content, index }));\n}\nfunction zip(left, right) {\n    const length = Math.max(left.length, right.length);\n    return Array.from({ length }, (_, index) => [left[index], right[index]]);\n}\nfunction tokensAreEqual(left, right) {\n    return left && right && left.index == right.index && left.content == right.content;\n}\n\nclass ValueListObserver {\n    constructor(element, attributeName, delegate) {\n        this.tokenListObserver = new TokenListObserver(element, attributeName, this);\n        this.delegate = delegate;\n        this.parseResultsByToken = new WeakMap();\n        this.valuesByTokenByElement = new WeakMap();\n    }\n    get started() {\n        return this.tokenListObserver.started;\n    }\n    start() {\n        this.tokenListObserver.start();\n    }\n    stop() {\n        this.tokenListObserver.stop();\n    }\n    refresh() {\n        this.tokenListObserver.refresh();\n    }\n    get element() {\n        return this.tokenListObserver.element;\n    }\n    get attributeName() {\n        return this.tokenListObserver.attributeName;\n    }\n    tokenMatched(token) {\n        const { element } = token;\n        const { value } = this.fetchParseResultForToken(token);\n        if (value) {\n            this.fetchValuesByTokenForElement(element).set(token, value);\n            this.delegate.elementMatchedValue(element, value);\n        }\n    }\n    tokenUnmatched(token) {\n        const { element } = token;\n        const { value } = this.fetchParseResultForToken(token);\n        if (value) {\n            this.fetchValuesByTokenForElement(element).delete(token);\n            this.delegate.elementUnmatchedValue(element, value);\n        }\n    }\n    fetchParseResultForToken(token) {\n        let parseResult = this.parseResultsByToken.get(token);\n        if (!parseResult) {\n            parseResult = this.parseToken(token);\n            this.parseResultsByToken.set(token, parseResult);\n        }\n        return parseResult;\n    }\n    fetchValuesByTokenForElement(element) {\n        let valuesByToken = this.valuesByTokenByElement.get(element);\n        if (!valuesByToken) {\n            valuesByToken = new Map();\n            this.valuesByTokenByElement.set(element, valuesByToken);\n        }\n        return valuesByToken;\n    }\n    parseToken(token) {\n        try {\n            const value = this.delegate.parseValueForToken(token);\n            return { value };\n        }\n        catch (error) {\n            return { error };\n        }\n    }\n}\n\nclass BindingObserver {\n    constructor(context, delegate) {\n        this.context = context;\n        this.delegate = delegate;\n        this.bindingsByAction = new Map();\n    }\n    start() {\n        if (!this.valueListObserver) {\n            this.valueListObserver = new ValueListObserver(this.element, this.actionAttribute, this);\n            this.valueListObserver.start();\n        }\n    }\n    stop() {\n        if (this.valueListObserver) {\n            this.valueListObserver.stop();\n            delete this.valueListObserver;\n            this.disconnectAllActions();\n        }\n    }\n    get element() {\n        return this.context.element;\n    }\n    get identifier() {\n        return this.context.identifier;\n    }\n    get actionAttribute() {\n        return this.schema.actionAttribute;\n    }\n    get schema() {\n        return this.context.schema;\n    }\n    get bindings() {\n        return Array.from(this.bindingsByAction.values());\n    }\n    connectAction(action) {\n        const binding = new Binding(this.context, action);\n        this.bindingsByAction.set(action, binding);\n        this.delegate.bindingConnected(binding);\n    }\n    disconnectAction(action) {\n        const binding = this.bindingsByAction.get(action);\n        if (binding) {\n            this.bindingsByAction.delete(action);\n            this.delegate.bindingDisconnected(binding);\n        }\n    }\n    disconnectAllActions() {\n        this.bindings.forEach((binding) => this.delegate.bindingDisconnected(binding, true));\n        this.bindingsByAction.clear();\n    }\n    parseValueForToken(token) {\n        const action = Action.forToken(token, this.schema);\n        if (action.identifier == this.identifier) {\n            return action;\n        }\n    }\n    elementMatchedValue(element, action) {\n        this.connectAction(action);\n    }\n    elementUnmatchedValue(element, action) {\n        this.disconnectAction(action);\n    }\n}\n\nclass ValueObserver {\n    constructor(context, receiver) {\n        this.context = context;\n        this.receiver = receiver;\n        this.stringMapObserver = new StringMapObserver(this.element, this);\n        this.valueDescriptorMap = this.controller.valueDescriptorMap;\n    }\n    start() {\n        this.stringMapObserver.start();\n        this.invokeChangedCallbacksForDefaultValues();\n    }\n    stop() {\n        this.stringMapObserver.stop();\n    }\n    get element() {\n        return this.context.element;\n    }\n    get controller() {\n        return this.context.controller;\n    }\n    getStringMapKeyForAttribute(attributeName) {\n        if (attributeName in this.valueDescriptorMap) {\n            return this.valueDescriptorMap[attributeName].name;\n        }\n    }\n    stringMapKeyAdded(key, attributeName) {\n        const descriptor = this.valueDescriptorMap[attributeName];\n        if (!this.hasValue(key)) {\n            this.invokeChangedCallback(key, descriptor.writer(this.receiver[key]), descriptor.writer(descriptor.defaultValue));\n        }\n    }\n    stringMapValueChanged(value, name, oldValue) {\n        const descriptor = this.valueDescriptorNameMap[name];\n        if (value === null)\n            return;\n        if (oldValue === null) {\n            oldValue = descriptor.writer(descriptor.defaultValue);\n        }\n        this.invokeChangedCallback(name, value, oldValue);\n    }\n    stringMapKeyRemoved(key, attributeName, oldValue) {\n        const descriptor = this.valueDescriptorNameMap[key];\n        if (this.hasValue(key)) {\n            this.invokeChangedCallback(key, descriptor.writer(this.receiver[key]), oldValue);\n        }\n        else {\n            this.invokeChangedCallback(key, descriptor.writer(descriptor.defaultValue), oldValue);\n        }\n    }\n    invokeChangedCallbacksForDefaultValues() {\n        for (const { key, name, defaultValue, writer } of this.valueDescriptors) {\n            if (defaultValue != undefined && !this.controller.data.has(key)) {\n                this.invokeChangedCallback(name, writer(defaultValue), undefined);\n            }\n        }\n    }\n    invokeChangedCallback(name, rawValue, rawOldValue) {\n        const changedMethodName = `${name}Changed`;\n        const changedMethod = this.receiver[changedMethodName];\n        if (typeof changedMethod == \"function\") {\n            const descriptor = this.valueDescriptorNameMap[name];\n            try {\n                const value = descriptor.reader(rawValue);\n                let oldValue = rawOldValue;\n                if (rawOldValue) {\n                    oldValue = descriptor.reader(rawOldValue);\n                }\n                changedMethod.call(this.receiver, value, oldValue);\n            }\n            catch (error) {\n                if (error instanceof TypeError) {\n                    error.message = `Stimulus Value \"${this.context.identifier}.${descriptor.name}\" - ${error.message}`;\n                }\n                throw error;\n            }\n        }\n    }\n    get valueDescriptors() {\n        const { valueDescriptorMap } = this;\n        return Object.keys(valueDescriptorMap).map((key) => valueDescriptorMap[key]);\n    }\n    get valueDescriptorNameMap() {\n        const descriptors = {};\n        Object.keys(this.valueDescriptorMap).forEach((key) => {\n            const descriptor = this.valueDescriptorMap[key];\n            descriptors[descriptor.name] = descriptor;\n        });\n        return descriptors;\n    }\n    hasValue(attributeName) {\n        const descriptor = this.valueDescriptorNameMap[attributeName];\n        const hasMethodName = `has${capitalize(descriptor.name)}`;\n        return this.receiver[hasMethodName];\n    }\n}\n\nclass TargetObserver {\n    constructor(context, delegate) {\n        this.context = context;\n        this.delegate = delegate;\n        this.targetsByName = new Multimap();\n    }\n    start() {\n        if (!this.tokenListObserver) {\n            this.tokenListObserver = new TokenListObserver(this.element, this.attributeName, this);\n            this.tokenListObserver.start();\n        }\n    }\n    stop() {\n        if (this.tokenListObserver) {\n            this.disconnectAllTargets();\n            this.tokenListObserver.stop();\n            delete this.tokenListObserver;\n        }\n    }\n    tokenMatched({ element, content: name }) {\n        if (this.scope.containsElement(element)) {\n            this.connectTarget(element, name);\n        }\n    }\n    tokenUnmatched({ element, content: name }) {\n        this.disconnectTarget(element, name);\n    }\n    connectTarget(element, name) {\n        var _a;\n        if (!this.targetsByName.has(name, element)) {\n            this.targetsByName.add(name, element);\n            (_a = this.tokenListObserver) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.targetConnected(element, name));\n        }\n    }\n    disconnectTarget(element, name) {\n        var _a;\n        if (this.targetsByName.has(name, element)) {\n            this.targetsByName.delete(name, element);\n            (_a = this.tokenListObserver) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.targetDisconnected(element, name));\n        }\n    }\n    disconnectAllTargets() {\n        for (const name of this.targetsByName.keys) {\n            for (const element of this.targetsByName.getValuesForKey(name)) {\n                this.disconnectTarget(element, name);\n            }\n        }\n    }\n    get attributeName() {\n        return `data-${this.context.identifier}-target`;\n    }\n    get element() {\n        return this.context.element;\n    }\n    get scope() {\n        return this.context.scope;\n    }\n}\n\nfunction readInheritableStaticArrayValues(constructor, propertyName) {\n    const ancestors = getAncestorsForConstructor(constructor);\n    return Array.from(ancestors.reduce((values, constructor) => {\n        getOwnStaticArrayValues(constructor, propertyName).forEach((name) => values.add(name));\n        return values;\n    }, new Set()));\n}\nfunction readInheritableStaticObjectPairs(constructor, propertyName) {\n    const ancestors = getAncestorsForConstructor(constructor);\n    return ancestors.reduce((pairs, constructor) => {\n        pairs.push(...getOwnStaticObjectPairs(constructor, propertyName));\n        return pairs;\n    }, []);\n}\nfunction getAncestorsForConstructor(constructor) {\n    const ancestors = [];\n    while (constructor) {\n        ancestors.push(constructor);\n        constructor = Object.getPrototypeOf(constructor);\n    }\n    return ancestors.reverse();\n}\nfunction getOwnStaticArrayValues(constructor, propertyName) {\n    const definition = constructor[propertyName];\n    return Array.isArray(definition) ? definition : [];\n}\nfunction getOwnStaticObjectPairs(constructor, propertyName) {\n    const definition = constructor[propertyName];\n    return definition ? Object.keys(definition).map((key) => [key, definition[key]]) : [];\n}\n\nclass OutletObserver {\n    constructor(context, delegate) {\n        this.started = false;\n        this.context = context;\n        this.delegate = delegate;\n        this.outletsByName = new Multimap();\n        this.outletElementsByName = new Multimap();\n        this.selectorObserverMap = new Map();\n        this.attributeObserverMap = new Map();\n    }\n    start() {\n        if (!this.started) {\n            this.outletDefinitions.forEach((outletName) => {\n                this.setupSelectorObserverForOutlet(outletName);\n                this.setupAttributeObserverForOutlet(outletName);\n            });\n            this.started = true;\n            this.dependentContexts.forEach((context) => context.refresh());\n        }\n    }\n    refresh() {\n        this.selectorObserverMap.forEach((observer) => observer.refresh());\n        this.attributeObserverMap.forEach((observer) => observer.refresh());\n    }\n    stop() {\n        if (this.started) {\n            this.started = false;\n            this.disconnectAllOutlets();\n            this.stopSelectorObservers();\n            this.stopAttributeObservers();\n        }\n    }\n    stopSelectorObservers() {\n        if (this.selectorObserverMap.size > 0) {\n            this.selectorObserverMap.forEach((observer) => observer.stop());\n            this.selectorObserverMap.clear();\n        }\n    }\n    stopAttributeObservers() {\n        if (this.attributeObserverMap.size > 0) {\n            this.attributeObserverMap.forEach((observer) => observer.stop());\n            this.attributeObserverMap.clear();\n        }\n    }\n    selectorMatched(element, _selector, { outletName }) {\n        const outlet = this.getOutlet(element, outletName);\n        if (outlet) {\n            this.connectOutlet(outlet, element, outletName);\n        }\n    }\n    selectorUnmatched(element, _selector, { outletName }) {\n        const outlet = this.getOutletFromMap(element, outletName);\n        if (outlet) {\n            this.disconnectOutlet(outlet, element, outletName);\n        }\n    }\n    selectorMatchElement(element, { outletName }) {\n        const selector = this.selector(outletName);\n        const hasOutlet = this.hasOutlet(element, outletName);\n        const hasOutletController = element.matches(`[${this.schema.controllerAttribute}~=${outletName}]`);\n        if (selector) {\n            return hasOutlet && hasOutletController && element.matches(selector);\n        }\n        else {\n            return false;\n        }\n    }\n    elementMatchedAttribute(_element, attributeName) {\n        const outletName = this.getOutletNameFromOutletAttributeName(attributeName);\n        if (outletName) {\n            this.updateSelectorObserverForOutlet(outletName);\n        }\n    }\n    elementAttributeValueChanged(_element, attributeName) {\n        const outletName = this.getOutletNameFromOutletAttributeName(attributeName);\n        if (outletName) {\n            this.updateSelectorObserverForOutlet(outletName);\n        }\n    }\n    elementUnmatchedAttribute(_element, attributeName) {\n        const outletName = this.getOutletNameFromOutletAttributeName(attributeName);\n        if (outletName) {\n            this.updateSelectorObserverForOutlet(outletName);\n        }\n    }\n    connectOutlet(outlet, element, outletName) {\n        var _a;\n        if (!this.outletElementsByName.has(outletName, element)) {\n            this.outletsByName.add(outletName, outlet);\n            this.outletElementsByName.add(outletName, element);\n            (_a = this.selectorObserverMap.get(outletName)) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.outletConnected(outlet, element, outletName));\n        }\n    }\n    disconnectOutlet(outlet, element, outletName) {\n        var _a;\n        if (this.outletElementsByName.has(outletName, element)) {\n            this.outletsByName.delete(outletName, outlet);\n            this.outletElementsByName.delete(outletName, element);\n            (_a = this.selectorObserverMap\n                .get(outletName)) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.outletDisconnected(outlet, element, outletName));\n        }\n    }\n    disconnectAllOutlets() {\n        for (const outletName of this.outletElementsByName.keys) {\n            for (const element of this.outletElementsByName.getValuesForKey(outletName)) {\n                for (const outlet of this.outletsByName.getValuesForKey(outletName)) {\n                    this.disconnectOutlet(outlet, element, outletName);\n                }\n            }\n        }\n    }\n    updateSelectorObserverForOutlet(outletName) {\n        const observer = this.selectorObserverMap.get(outletName);\n        if (observer) {\n            observer.selector = this.selector(outletName);\n        }\n    }\n    setupSelectorObserverForOutlet(outletName) {\n        const selector = this.selector(outletName);\n        const selectorObserver = new SelectorObserver(document.body, selector, this, { outletName });\n        this.selectorObserverMap.set(outletName, selectorObserver);\n        selectorObserver.start();\n    }\n    setupAttributeObserverForOutlet(outletName) {\n        const attributeName = this.attributeNameForOutletName(outletName);\n        const attributeObserver = new AttributeObserver(this.scope.element, attributeName, this);\n        this.attributeObserverMap.set(outletName, attributeObserver);\n        attributeObserver.start();\n    }\n    selector(outletName) {\n        return this.scope.outlets.getSelectorForOutletName(outletName);\n    }\n    attributeNameForOutletName(outletName) {\n        return this.scope.schema.outletAttributeForScope(this.identifier, outletName);\n    }\n    getOutletNameFromOutletAttributeName(attributeName) {\n        return this.outletDefinitions.find((outletName) => this.attributeNameForOutletName(outletName) === attributeName);\n    }\n    get outletDependencies() {\n        const dependencies = new Multimap();\n        this.router.modules.forEach((module) => {\n            const constructor = module.definition.controllerConstructor;\n            const outlets = readInheritableStaticArrayValues(constructor, \"outlets\");\n            outlets.forEach((outlet) => dependencies.add(outlet, module.identifier));\n        });\n        return dependencies;\n    }\n    get outletDefinitions() {\n        return this.outletDependencies.getKeysForValue(this.identifier);\n    }\n    get dependentControllerIdentifiers() {\n        return this.outletDependencies.getValuesForKey(this.identifier);\n    }\n    get dependentContexts() {\n        const identifiers = this.dependentControllerIdentifiers;\n        return this.router.contexts.filter((context) => identifiers.includes(context.identifier));\n    }\n    hasOutlet(element, outletName) {\n        return !!this.getOutlet(element, outletName) || !!this.getOutletFromMap(element, outletName);\n    }\n    getOutlet(element, outletName) {\n        return this.application.getControllerForElementAndIdentifier(element, outletName);\n    }\n    getOutletFromMap(element, outletName) {\n        return this.outletsByName.getValuesForKey(outletName).find((outlet) => outlet.element === element);\n    }\n    get scope() {\n        return this.context.scope;\n    }\n    get schema() {\n        return this.context.schema;\n    }\n    get identifier() {\n        return this.context.identifier;\n    }\n    get application() {\n        return this.context.application;\n    }\n    get router() {\n        return this.application.router;\n    }\n}\n\nclass Context {\n    constructor(module, scope) {\n        this.logDebugActivity = (functionName, detail = {}) => {\n            const { identifier, controller, element } = this;\n            detail = Object.assign({ identifier, controller, element }, detail);\n            this.application.logDebugActivity(this.identifier, functionName, detail);\n        };\n        this.module = module;\n        this.scope = scope;\n        this.controller = new module.controllerConstructor(this);\n        this.bindingObserver = new BindingObserver(this, this.dispatcher);\n        this.valueObserver = new ValueObserver(this, this.controller);\n        this.targetObserver = new TargetObserver(this, this);\n        this.outletObserver = new OutletObserver(this, this);\n        try {\n            this.controller.initialize();\n            this.logDebugActivity(\"initialize\");\n        }\n        catch (error) {\n            this.handleError(error, \"initializing controller\");\n        }\n    }\n    connect() {\n        this.bindingObserver.start();\n        this.valueObserver.start();\n        this.targetObserver.start();\n        this.outletObserver.start();\n        try {\n            this.controller.connect();\n            this.logDebugActivity(\"connect\");\n        }\n        catch (error) {\n            this.handleError(error, \"connecting controller\");\n        }\n    }\n    refresh() {\n        this.outletObserver.refresh();\n    }\n    disconnect() {\n        try {\n            this.controller.disconnect();\n            this.logDebugActivity(\"disconnect\");\n        }\n        catch (error) {\n            this.handleError(error, \"disconnecting controller\");\n        }\n        this.outletObserver.stop();\n        this.targetObserver.stop();\n        this.valueObserver.stop();\n        this.bindingObserver.stop();\n    }\n    get application() {\n        return this.module.application;\n    }\n    get identifier() {\n        return this.module.identifier;\n    }\n    get schema() {\n        return this.application.schema;\n    }\n    get dispatcher() {\n        return this.application.dispatcher;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get parentElement() {\n        return this.element.parentElement;\n    }\n    handleError(error, message, detail = {}) {\n        const { identifier, controller, element } = this;\n        detail = Object.assign({ identifier, controller, element }, detail);\n        this.application.handleError(error, `Error ${message}`, detail);\n    }\n    targetConnected(element, name) {\n        this.invokeControllerMethod(`${name}TargetConnected`, element);\n    }\n    targetDisconnected(element, name) {\n        this.invokeControllerMethod(`${name}TargetDisconnected`, element);\n    }\n    outletConnected(outlet, element, name) {\n        this.invokeControllerMethod(`${namespaceCamelize(name)}OutletConnected`, outlet, element);\n    }\n    outletDisconnected(outlet, element, name) {\n        this.invokeControllerMethod(`${namespaceCamelize(name)}OutletDisconnected`, outlet, element);\n    }\n    invokeControllerMethod(methodName, ...args) {\n        const controller = this.controller;\n        if (typeof controller[methodName] == \"function\") {\n            controller[methodName](...args);\n        }\n    }\n}\n\nfunction bless(constructor) {\n    return shadow(constructor, getBlessedProperties(constructor));\n}\nfunction shadow(constructor, properties) {\n    const shadowConstructor = extend(constructor);\n    const shadowProperties = getShadowProperties(constructor.prototype, properties);\n    Object.defineProperties(shadowConstructor.prototype, shadowProperties);\n    return shadowConstructor;\n}\nfunction getBlessedProperties(constructor) {\n    const blessings = readInheritableStaticArrayValues(constructor, \"blessings\");\n    return blessings.reduce((blessedProperties, blessing) => {\n        const properties = blessing(constructor);\n        for (const key in properties) {\n            const descriptor = blessedProperties[key] || {};\n            blessedProperties[key] = Object.assign(descriptor, properties[key]);\n        }\n        return blessedProperties;\n    }, {});\n}\nfunction getShadowProperties(prototype, properties) {\n    return getOwnKeys(properties).reduce((shadowProperties, key) => {\n        const descriptor = getShadowedDescriptor(prototype, properties, key);\n        if (descriptor) {\n            Object.assign(shadowProperties, { [key]: descriptor });\n        }\n        return shadowProperties;\n    }, {});\n}\nfunction getShadowedDescriptor(prototype, properties, key) {\n    const shadowingDescriptor = Object.getOwnPropertyDescriptor(prototype, key);\n    const shadowedByValue = shadowingDescriptor && \"value\" in shadowingDescriptor;\n    if (!shadowedByValue) {\n        const descriptor = Object.getOwnPropertyDescriptor(properties, key).value;\n        if (shadowingDescriptor) {\n            descriptor.get = shadowingDescriptor.get || descriptor.get;\n            descriptor.set = shadowingDescriptor.set || descriptor.set;\n        }\n        return descriptor;\n    }\n}\nconst getOwnKeys = (() => {\n    if (typeof Object.getOwnPropertySymbols == \"function\") {\n        return (object) => [...Object.getOwnPropertyNames(object), ...Object.getOwnPropertySymbols(object)];\n    }\n    else {\n        return Object.getOwnPropertyNames;\n    }\n})();\nconst extend = (() => {\n    function extendWithReflect(constructor) {\n        function extended() {\n            return Reflect.construct(constructor, arguments, new.target);\n        }\n        extended.prototype = Object.create(constructor.prototype, {\n            constructor: { value: extended },\n        });\n        Reflect.setPrototypeOf(extended, constructor);\n        return extended;\n    }\n    function testReflectExtension() {\n        const a = function () {\n            this.a.call(this);\n        };\n        const b = extendWithReflect(a);\n        b.prototype.a = function () { };\n        return new b();\n    }\n    try {\n        testReflectExtension();\n        return extendWithReflect;\n    }\n    catch (error) {\n        return (constructor) => class extended extends constructor {\n        };\n    }\n})();\n\nfunction blessDefinition(definition) {\n    return {\n        identifier: definition.identifier,\n        controllerConstructor: bless(definition.controllerConstructor),\n    };\n}\n\nclass Module {\n    constructor(application, definition) {\n        this.application = application;\n        this.definition = blessDefinition(definition);\n        this.contextsByScope = new WeakMap();\n        this.connectedContexts = new Set();\n    }\n    get identifier() {\n        return this.definition.identifier;\n    }\n    get controllerConstructor() {\n        return this.definition.controllerConstructor;\n    }\n    get contexts() {\n        return Array.from(this.connectedContexts);\n    }\n    connectContextForScope(scope) {\n        const context = this.fetchContextForScope(scope);\n        this.connectedContexts.add(context);\n        context.connect();\n    }\n    disconnectContextForScope(scope) {\n        const context = this.contextsByScope.get(scope);\n        if (context) {\n            this.connectedContexts.delete(context);\n            context.disconnect();\n        }\n    }\n    fetchContextForScope(scope) {\n        let context = this.contextsByScope.get(scope);\n        if (!context) {\n            context = new Context(this, scope);\n            this.contextsByScope.set(scope, context);\n        }\n        return context;\n    }\n}\n\nclass ClassMap {\n    constructor(scope) {\n        this.scope = scope;\n    }\n    has(name) {\n        return this.data.has(this.getDataKey(name));\n    }\n    get(name) {\n        return this.getAll(name)[0];\n    }\n    getAll(name) {\n        const tokenString = this.data.get(this.getDataKey(name)) || \"\";\n        return tokenize(tokenString);\n    }\n    getAttributeName(name) {\n        return this.data.getAttributeNameForKey(this.getDataKey(name));\n    }\n    getDataKey(name) {\n        return `${name}-class`;\n    }\n    get data() {\n        return this.scope.data;\n    }\n}\n\nclass DataMap {\n    constructor(scope) {\n        this.scope = scope;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get identifier() {\n        return this.scope.identifier;\n    }\n    get(key) {\n        const name = this.getAttributeNameForKey(key);\n        return this.element.getAttribute(name);\n    }\n    set(key, value) {\n        const name = this.getAttributeNameForKey(key);\n        this.element.setAttribute(name, value);\n        return this.get(key);\n    }\n    has(key) {\n        const name = this.getAttributeNameForKey(key);\n        return this.element.hasAttribute(name);\n    }\n    delete(key) {\n        if (this.has(key)) {\n            const name = this.getAttributeNameForKey(key);\n            this.element.removeAttribute(name);\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    getAttributeNameForKey(key) {\n        return `data-${this.identifier}-${dasherize(key)}`;\n    }\n}\n\nclass Guide {\n    constructor(logger) {\n        this.warnedKeysByObject = new WeakMap();\n        this.logger = logger;\n    }\n    warn(object, key, message) {\n        let warnedKeys = this.warnedKeysByObject.get(object);\n        if (!warnedKeys) {\n            warnedKeys = new Set();\n            this.warnedKeysByObject.set(object, warnedKeys);\n        }\n        if (!warnedKeys.has(key)) {\n            warnedKeys.add(key);\n            this.logger.warn(message, object);\n        }\n    }\n}\n\nfunction attributeValueContainsToken(attributeName, token) {\n    return `[${attributeName}~=\"${token}\"]`;\n}\n\nclass TargetSet {\n    constructor(scope) {\n        this.scope = scope;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get identifier() {\n        return this.scope.identifier;\n    }\n    get schema() {\n        return this.scope.schema;\n    }\n    has(targetName) {\n        return this.find(targetName) != null;\n    }\n    find(...targetNames) {\n        return targetNames.reduce((target, targetName) => target || this.findTarget(targetName) || this.findLegacyTarget(targetName), undefined);\n    }\n    findAll(...targetNames) {\n        return targetNames.reduce((targets, targetName) => [\n            ...targets,\n            ...this.findAllTargets(targetName),\n            ...this.findAllLegacyTargets(targetName),\n        ], []);\n    }\n    findTarget(targetName) {\n        const selector = this.getSelectorForTargetName(targetName);\n        return this.scope.findElement(selector);\n    }\n    findAllTargets(targetName) {\n        const selector = this.getSelectorForTargetName(targetName);\n        return this.scope.findAllElements(selector);\n    }\n    getSelectorForTargetName(targetName) {\n        const attributeName = this.schema.targetAttributeForScope(this.identifier);\n        return attributeValueContainsToken(attributeName, targetName);\n    }\n    findLegacyTarget(targetName) {\n        const selector = this.getLegacySelectorForTargetName(targetName);\n        return this.deprecate(this.scope.findElement(selector), targetName);\n    }\n    findAllLegacyTargets(targetName) {\n        const selector = this.getLegacySelectorForTargetName(targetName);\n        return this.scope.findAllElements(selector).map((element) => this.deprecate(element, targetName));\n    }\n    getLegacySelectorForTargetName(targetName) {\n        const targetDescriptor = `${this.identifier}.${targetName}`;\n        return attributeValueContainsToken(this.schema.targetAttribute, targetDescriptor);\n    }\n    deprecate(element, targetName) {\n        if (element) {\n            const { identifier } = this;\n            const attributeName = this.schema.targetAttribute;\n            const revisedAttributeName = this.schema.targetAttributeForScope(identifier);\n            this.guide.warn(element, `target:${targetName}`, `Please replace ${attributeName}=\"${identifier}.${targetName}\" with ${revisedAttributeName}=\"${targetName}\". ` +\n                `The ${attributeName} attribute is deprecated and will be removed in a future version of Stimulus.`);\n        }\n        return element;\n    }\n    get guide() {\n        return this.scope.guide;\n    }\n}\n\nclass OutletSet {\n    constructor(scope, controllerElement) {\n        this.scope = scope;\n        this.controllerElement = controllerElement;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get identifier() {\n        return this.scope.identifier;\n    }\n    get schema() {\n        return this.scope.schema;\n    }\n    has(outletName) {\n        return this.find(outletName) != null;\n    }\n    find(...outletNames) {\n        return outletNames.reduce((outlet, outletName) => outlet || this.findOutlet(outletName), undefined);\n    }\n    findAll(...outletNames) {\n        return outletNames.reduce((outlets, outletName) => [...outlets, ...this.findAllOutlets(outletName)], []);\n    }\n    getSelectorForOutletName(outletName) {\n        const attributeName = this.schema.outletAttributeForScope(this.identifier, outletName);\n        return this.controllerElement.getAttribute(attributeName);\n    }\n    findOutlet(outletName) {\n        const selector = this.getSelectorForOutletName(outletName);\n        if (selector)\n            return this.findElement(selector, outletName);\n    }\n    findAllOutlets(outletName) {\n        const selector = this.getSelectorForOutletName(outletName);\n        return selector ? this.findAllElements(selector, outletName) : [];\n    }\n    findElement(selector, outletName) {\n        const elements = this.scope.queryElements(selector);\n        return elements.filter((element) => this.matchesElement(element, selector, outletName))[0];\n    }\n    findAllElements(selector, outletName) {\n        const elements = this.scope.queryElements(selector);\n        return elements.filter((element) => this.matchesElement(element, selector, outletName));\n    }\n    matchesElement(element, selector, outletName) {\n        const controllerAttribute = element.getAttribute(this.scope.schema.controllerAttribute) || \"\";\n        return element.matches(selector) && controllerAttribute.split(\" \").includes(outletName);\n    }\n}\n\nclass Scope {\n    constructor(schema, element, identifier, logger) {\n        this.targets = new TargetSet(this);\n        this.classes = new ClassMap(this);\n        this.data = new DataMap(this);\n        this.containsElement = (element) => {\n            return element.closest(this.controllerSelector) === this.element;\n        };\n        this.schema = schema;\n        this.element = element;\n        this.identifier = identifier;\n        this.guide = new Guide(logger);\n        this.outlets = new OutletSet(this.documentScope, element);\n    }\n    findElement(selector) {\n        return this.element.matches(selector) ? this.element : this.queryElements(selector).find(this.containsElement);\n    }\n    findAllElements(selector) {\n        return [\n            ...(this.element.matches(selector) ? [this.element] : []),\n            ...this.queryElements(selector).filter(this.containsElement),\n        ];\n    }\n    queryElements(selector) {\n        return Array.from(this.element.querySelectorAll(selector));\n    }\n    get controllerSelector() {\n        return attributeValueContainsToken(this.schema.controllerAttribute, this.identifier);\n    }\n    get isDocumentScope() {\n        return this.element === document.documentElement;\n    }\n    get documentScope() {\n        return this.isDocumentScope\n            ? this\n            : new Scope(this.schema, document.documentElement, this.identifier, this.guide.logger);\n    }\n}\n\nclass ScopeObserver {\n    constructor(element, schema, delegate) {\n        this.element = element;\n        this.schema = schema;\n        this.delegate = delegate;\n        this.valueListObserver = new ValueListObserver(this.element, this.controllerAttribute, this);\n        this.scopesByIdentifierByElement = new WeakMap();\n        this.scopeReferenceCounts = new WeakMap();\n    }\n    start() {\n        this.valueListObserver.start();\n    }\n    stop() {\n        this.valueListObserver.stop();\n    }\n    get controllerAttribute() {\n        return this.schema.controllerAttribute;\n    }\n    parseValueForToken(token) {\n        const { element, content: identifier } = token;\n        return this.parseValueForElementAndIdentifier(element, identifier);\n    }\n    parseValueForElementAndIdentifier(element, identifier) {\n        const scopesByIdentifier = this.fetchScopesByIdentifierForElement(element);\n        let scope = scopesByIdentifier.get(identifier);\n        if (!scope) {\n            scope = this.delegate.createScopeForElementAndIdentifier(element, identifier);\n            scopesByIdentifier.set(identifier, scope);\n        }\n        return scope;\n    }\n    elementMatchedValue(element, value) {\n        const referenceCount = (this.scopeReferenceCounts.get(value) || 0) + 1;\n        this.scopeReferenceCounts.set(value, referenceCount);\n        if (referenceCount == 1) {\n            this.delegate.scopeConnected(value);\n        }\n    }\n    elementUnmatchedValue(element, value) {\n        const referenceCount = this.scopeReferenceCounts.get(value);\n        if (referenceCount) {\n            this.scopeReferenceCounts.set(value, referenceCount - 1);\n            if (referenceCount == 1) {\n                this.delegate.scopeDisconnected(value);\n            }\n        }\n    }\n    fetchScopesByIdentifierForElement(element) {\n        let scopesByIdentifier = this.scopesByIdentifierByElement.get(element);\n        if (!scopesByIdentifier) {\n            scopesByIdentifier = new Map();\n            this.scopesByIdentifierByElement.set(element, scopesByIdentifier);\n        }\n        return scopesByIdentifier;\n    }\n}\n\nclass Router {\n    constructor(application) {\n        this.application = application;\n        this.scopeObserver = new ScopeObserver(this.element, this.schema, this);\n        this.scopesByIdentifier = new Multimap();\n        this.modulesByIdentifier = new Map();\n    }\n    get element() {\n        return this.application.element;\n    }\n    get schema() {\n        return this.application.schema;\n    }\n    get logger() {\n        return this.application.logger;\n    }\n    get controllerAttribute() {\n        return this.schema.controllerAttribute;\n    }\n    get modules() {\n        return Array.from(this.modulesByIdentifier.values());\n    }\n    get contexts() {\n        return this.modules.reduce((contexts, module) => contexts.concat(module.contexts), []);\n    }\n    start() {\n        this.scopeObserver.start();\n    }\n    stop() {\n        this.scopeObserver.stop();\n    }\n    loadDefinition(definition) {\n        this.unloadIdentifier(definition.identifier);\n        const module = new Module(this.application, definition);\n        this.connectModule(module);\n        const afterLoad = definition.controllerConstructor.afterLoad;\n        if (afterLoad) {\n            afterLoad.call(definition.controllerConstructor, definition.identifier, this.application);\n        }\n    }\n    unloadIdentifier(identifier) {\n        const module = this.modulesByIdentifier.get(identifier);\n        if (module) {\n            this.disconnectModule(module);\n        }\n    }\n    getContextForElementAndIdentifier(element, identifier) {\n        const module = this.modulesByIdentifier.get(identifier);\n        if (module) {\n            return module.contexts.find((context) => context.element == element);\n        }\n    }\n    proposeToConnectScopeForElementAndIdentifier(element, identifier) {\n        const scope = this.scopeObserver.parseValueForElementAndIdentifier(element, identifier);\n        if (scope) {\n            this.scopeObserver.elementMatchedValue(scope.element, scope);\n        }\n        else {\n            console.error(`Couldn't find or create scope for identifier: \"${identifier}\" and element:`, element);\n        }\n    }\n    handleError(error, message, detail) {\n        this.application.handleError(error, message, detail);\n    }\n    createScopeForElementAndIdentifier(element, identifier) {\n        return new Scope(this.schema, element, identifier, this.logger);\n    }\n    scopeConnected(scope) {\n        this.scopesByIdentifier.add(scope.identifier, scope);\n        const module = this.modulesByIdentifier.get(scope.identifier);\n        if (module) {\n            module.connectContextForScope(scope);\n        }\n    }\n    scopeDisconnected(scope) {\n        this.scopesByIdentifier.delete(scope.identifier, scope);\n        const module = this.modulesByIdentifier.get(scope.identifier);\n        if (module) {\n            module.disconnectContextForScope(scope);\n        }\n    }\n    connectModule(module) {\n        this.modulesByIdentifier.set(module.identifier, module);\n        const scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);\n        scopes.forEach((scope) => module.connectContextForScope(scope));\n    }\n    disconnectModule(module) {\n        this.modulesByIdentifier.delete(module.identifier);\n        const scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);\n        scopes.forEach((scope) => module.disconnectContextForScope(scope));\n    }\n}\n\nconst defaultSchema = {\n    controllerAttribute: \"data-controller\",\n    actionAttribute: \"data-action\",\n    targetAttribute: \"data-target\",\n    targetAttributeForScope: (identifier) => `data-${identifier}-target`,\n    outletAttributeForScope: (identifier, outlet) => `data-${identifier}-${outlet}-outlet`,\n    keyMappings: Object.assign(Object.assign({ enter: \"Enter\", tab: \"Tab\", esc: \"Escape\", space: \" \", up: \"ArrowUp\", down: \"ArrowDown\", left: \"ArrowLeft\", right: \"ArrowRight\", home: \"Home\", end: \"End\", page_up: \"PageUp\", page_down: \"PageDown\" }, objectFromEntries(\"abcdefghijklmnopqrstuvwxyz\".split(\"\").map((c) => [c, c]))), objectFromEntries(\"0123456789\".split(\"\").map((n) => [n, n]))),\n};\nfunction objectFromEntries(array) {\n    return array.reduce((memo, [k, v]) => (Object.assign(Object.assign({}, memo), { [k]: v })), {});\n}\n\nclass Application {\n    constructor(element = document.documentElement, schema = defaultSchema) {\n        this.logger = console;\n        this.debug = false;\n        this.logDebugActivity = (identifier, functionName, detail = {}) => {\n            if (this.debug) {\n                this.logFormattedMessage(identifier, functionName, detail);\n            }\n        };\n        this.element = element;\n        this.schema = schema;\n        this.dispatcher = new Dispatcher(this);\n        this.router = new Router(this);\n        this.actionDescriptorFilters = Object.assign({}, defaultActionDescriptorFilters);\n    }\n    static start(element, schema) {\n        const application = new this(element, schema);\n        application.start();\n        return application;\n    }\n    async start() {\n        await domReady();\n        this.logDebugActivity(\"application\", \"starting\");\n        this.dispatcher.start();\n        this.router.start();\n        this.logDebugActivity(\"application\", \"start\");\n    }\n    stop() {\n        this.logDebugActivity(\"application\", \"stopping\");\n        this.dispatcher.stop();\n        this.router.stop();\n        this.logDebugActivity(\"application\", \"stop\");\n    }\n    register(identifier, controllerConstructor) {\n        this.load({ identifier, controllerConstructor });\n    }\n    registerActionOption(name, filter) {\n        this.actionDescriptorFilters[name] = filter;\n    }\n    load(head, ...rest) {\n        const definitions = Array.isArray(head) ? head : [head, ...rest];\n        definitions.forEach((definition) => {\n            if (definition.controllerConstructor.shouldLoad) {\n                this.router.loadDefinition(definition);\n            }\n        });\n    }\n    unload(head, ...rest) {\n        const identifiers = Array.isArray(head) ? head : [head, ...rest];\n        identifiers.forEach((identifier) => this.router.unloadIdentifier(identifier));\n    }\n    get controllers() {\n        return this.router.contexts.map((context) => context.controller);\n    }\n    getControllerForElementAndIdentifier(element, identifier) {\n        const context = this.router.getContextForElementAndIdentifier(element, identifier);\n        return context ? context.controller : null;\n    }\n    handleError(error, message, detail) {\n        var _a;\n        this.logger.error(`%s\\n\\n%o\\n\\n%o`, message, error, detail);\n        (_a = window.onerror) === null || _a === void 0 ? void 0 : _a.call(window, message, \"\", 0, 0, error);\n    }\n    logFormattedMessage(identifier, functionName, detail = {}) {\n        detail = Object.assign({ application: this }, detail);\n        this.logger.groupCollapsed(`${identifier} #${functionName}`);\n        this.logger.log(\"details:\", Object.assign({}, detail));\n        this.logger.groupEnd();\n    }\n}\nfunction domReady() {\n    return new Promise((resolve) => {\n        if (document.readyState == \"loading\") {\n            document.addEventListener(\"DOMContentLoaded\", () => resolve());\n        }\n        else {\n            resolve();\n        }\n    });\n}\n\nfunction ClassPropertiesBlessing(constructor) {\n    const classes = readInheritableStaticArrayValues(constructor, \"classes\");\n    return classes.reduce((properties, classDefinition) => {\n        return Object.assign(properties, propertiesForClassDefinition(classDefinition));\n    }, {});\n}\nfunction propertiesForClassDefinition(key) {\n    return {\n        [`${key}Class`]: {\n            get() {\n                const { classes } = this;\n                if (classes.has(key)) {\n                    return classes.get(key);\n                }\n                else {\n                    const attribute = classes.getAttributeName(key);\n                    throw new Error(`Missing attribute \"${attribute}\"`);\n                }\n            },\n        },\n        [`${key}Classes`]: {\n            get() {\n                return this.classes.getAll(key);\n            },\n        },\n        [`has${capitalize(key)}Class`]: {\n            get() {\n                return this.classes.has(key);\n            },\n        },\n    };\n}\n\nfunction OutletPropertiesBlessing(constructor) {\n    const outlets = readInheritableStaticArrayValues(constructor, \"outlets\");\n    return outlets.reduce((properties, outletDefinition) => {\n        return Object.assign(properties, propertiesForOutletDefinition(outletDefinition));\n    }, {});\n}\nfunction getOutletController(controller, element, identifier) {\n    return controller.application.getControllerForElementAndIdentifier(element, identifier);\n}\nfunction getControllerAndEnsureConnectedScope(controller, element, outletName) {\n    let outletController = getOutletController(controller, element, outletName);\n    if (outletController)\n        return outletController;\n    controller.application.router.proposeToConnectScopeForElementAndIdentifier(element, outletName);\n    outletController = getOutletController(controller, element, outletName);\n    if (outletController)\n        return outletController;\n}\nfunction propertiesForOutletDefinition(name) {\n    const camelizedName = namespaceCamelize(name);\n    return {\n        [`${camelizedName}Outlet`]: {\n            get() {\n                const outletElement = this.outlets.find(name);\n                const selector = this.outlets.getSelectorForOutletName(name);\n                if (outletElement) {\n                    const outletController = getControllerAndEnsureConnectedScope(this, outletElement, name);\n                    if (outletController)\n                        return outletController;\n                    throw new Error(`The provided outlet element is missing an outlet controller \"${name}\" instance for host controller \"${this.identifier}\"`);\n                }\n                throw new Error(`Missing outlet element \"${name}\" for host controller \"${this.identifier}\". Stimulus couldn't find a matching outlet element using selector \"${selector}\".`);\n            },\n        },\n        [`${camelizedName}Outlets`]: {\n            get() {\n                const outlets = this.outlets.findAll(name);\n                if (outlets.length > 0) {\n                    return outlets\n                        .map((outletElement) => {\n                        const outletController = getControllerAndEnsureConnectedScope(this, outletElement, name);\n                        if (outletController)\n                            return outletController;\n                        console.warn(`The provided outlet element is missing an outlet controller \"${name}\" instance for host controller \"${this.identifier}\"`, outletElement);\n                    })\n                        .filter((controller) => controller);\n                }\n                return [];\n            },\n        },\n        [`${camelizedName}OutletElement`]: {\n            get() {\n                const outletElement = this.outlets.find(name);\n                const selector = this.outlets.getSelectorForOutletName(name);\n                if (outletElement) {\n                    return outletElement;\n                }\n                else {\n                    throw new Error(`Missing outlet element \"${name}\" for host controller \"${this.identifier}\". Stimulus couldn't find a matching outlet element using selector \"${selector}\".`);\n                }\n            },\n        },\n        [`${camelizedName}OutletElements`]: {\n            get() {\n                return this.outlets.findAll(name);\n            },\n        },\n        [`has${capitalize(camelizedName)}Outlet`]: {\n            get() {\n                return this.outlets.has(name);\n            },\n        },\n    };\n}\n\nfunction TargetPropertiesBlessing(constructor) {\n    const targets = readInheritableStaticArrayValues(constructor, \"targets\");\n    return targets.reduce((properties, targetDefinition) => {\n        return Object.assign(properties, propertiesForTargetDefinition(targetDefinition));\n    }, {});\n}\nfunction propertiesForTargetDefinition(name) {\n    return {\n        [`${name}Target`]: {\n            get() {\n                const target = this.targets.find(name);\n                if (target) {\n                    return target;\n                }\n                else {\n                    throw new Error(`Missing target element \"${name}\" for \"${this.identifier}\" controller`);\n                }\n            },\n        },\n        [`${name}Targets`]: {\n            get() {\n                return this.targets.findAll(name);\n            },\n        },\n        [`has${capitalize(name)}Target`]: {\n            get() {\n                return this.targets.has(name);\n            },\n        },\n    };\n}\n\nfunction ValuePropertiesBlessing(constructor) {\n    const valueDefinitionPairs = readInheritableStaticObjectPairs(constructor, \"values\");\n    const propertyDescriptorMap = {\n        valueDescriptorMap: {\n            get() {\n                return valueDefinitionPairs.reduce((result, valueDefinitionPair) => {\n                    const valueDescriptor = parseValueDefinitionPair(valueDefinitionPair, this.identifier);\n                    const attributeName = this.data.getAttributeNameForKey(valueDescriptor.key);\n                    return Object.assign(result, { [attributeName]: valueDescriptor });\n                }, {});\n            },\n        },\n    };\n    return valueDefinitionPairs.reduce((properties, valueDefinitionPair) => {\n        return Object.assign(properties, propertiesForValueDefinitionPair(valueDefinitionPair));\n    }, propertyDescriptorMap);\n}\nfunction propertiesForValueDefinitionPair(valueDefinitionPair, controller) {\n    const definition = parseValueDefinitionPair(valueDefinitionPair, controller);\n    const { key, name, reader: read, writer: write } = definition;\n    return {\n        [name]: {\n            get() {\n                const value = this.data.get(key);\n                if (value !== null) {\n                    return read(value);\n                }\n                else {\n                    return definition.defaultValue;\n                }\n            },\n            set(value) {\n                if (value === undefined) {\n                    this.data.delete(key);\n                }\n                else {\n                    this.data.set(key, write(value));\n                }\n            },\n        },\n        [`has${capitalize(name)}`]: {\n            get() {\n                return this.data.has(key) || definition.hasCustomDefaultValue;\n            },\n        },\n    };\n}\nfunction parseValueDefinitionPair([token, typeDefinition], controller) {\n    return valueDescriptorForTokenAndTypeDefinition({\n        controller,\n        token,\n        typeDefinition,\n    });\n}\nfunction parseValueTypeConstant(constant) {\n    switch (constant) {\n        case Array:\n            return \"array\";\n        case Boolean:\n            return \"boolean\";\n        case Number:\n            return \"number\";\n        case Object:\n            return \"object\";\n        case String:\n            return \"string\";\n    }\n}\nfunction parseValueTypeDefault(defaultValue) {\n    switch (typeof defaultValue) {\n        case \"boolean\":\n            return \"boolean\";\n        case \"number\":\n            return \"number\";\n        case \"string\":\n            return \"string\";\n    }\n    if (Array.isArray(defaultValue))\n        return \"array\";\n    if (Object.prototype.toString.call(defaultValue) === \"[object Object]\")\n        return \"object\";\n}\nfunction parseValueTypeObject(payload) {\n    const { controller, token, typeObject } = payload;\n    const hasType = isSomething(typeObject.type);\n    const hasDefault = isSomething(typeObject.default);\n    const fullObject = hasType && hasDefault;\n    const onlyType = hasType && !hasDefault;\n    const onlyDefault = !hasType && hasDefault;\n    const typeFromObject = parseValueTypeConstant(typeObject.type);\n    const typeFromDefaultValue = parseValueTypeDefault(payload.typeObject.default);\n    if (onlyType)\n        return typeFromObject;\n    if (onlyDefault)\n        return typeFromDefaultValue;\n    if (typeFromObject !== typeFromDefaultValue) {\n        const propertyPath = controller ? `${controller}.${token}` : token;\n        throw new Error(`The specified default value for the Stimulus Value \"${propertyPath}\" must match the defined type \"${typeFromObject}\". The provided default value of \"${typeObject.default}\" is of type \"${typeFromDefaultValue}\".`);\n    }\n    if (fullObject)\n        return typeFromObject;\n}\nfunction parseValueTypeDefinition(payload) {\n    const { controller, token, typeDefinition } = payload;\n    const typeObject = { controller, token, typeObject: typeDefinition };\n    const typeFromObject = parseValueTypeObject(typeObject);\n    const typeFromDefaultValue = parseValueTypeDefault(typeDefinition);\n    const typeFromConstant = parseValueTypeConstant(typeDefinition);\n    const type = typeFromObject || typeFromDefaultValue || typeFromConstant;\n    if (type)\n        return type;\n    const propertyPath = controller ? `${controller}.${typeDefinition}` : token;\n    throw new Error(`Unknown value type \"${propertyPath}\" for \"${token}\" value`);\n}\nfunction defaultValueForDefinition(typeDefinition) {\n    const constant = parseValueTypeConstant(typeDefinition);\n    if (constant)\n        return defaultValuesByType[constant];\n    const hasDefault = hasProperty(typeDefinition, \"default\");\n    const hasType = hasProperty(typeDefinition, \"type\");\n    const typeObject = typeDefinition;\n    if (hasDefault)\n        return typeObject.default;\n    if (hasType) {\n        const { type } = typeObject;\n        const constantFromType = parseValueTypeConstant(type);\n        if (constantFromType)\n            return defaultValuesByType[constantFromType];\n    }\n    return typeDefinition;\n}\nfunction valueDescriptorForTokenAndTypeDefinition(payload) {\n    const { token, typeDefinition } = payload;\n    const key = `${dasherize(token)}-value`;\n    const type = parseValueTypeDefinition(payload);\n    return {\n        type,\n        key,\n        name: camelize(key),\n        get defaultValue() {\n            return defaultValueForDefinition(typeDefinition);\n        },\n        get hasCustomDefaultValue() {\n            return parseValueTypeDefault(typeDefinition) !== undefined;\n        },\n        reader: readers[type],\n        writer: writers[type] || writers.default,\n    };\n}\nconst defaultValuesByType = {\n    get array() {\n        return [];\n    },\n    boolean: false,\n    number: 0,\n    get object() {\n        return {};\n    },\n    string: \"\",\n};\nconst readers = {\n    array(value) {\n        const array = JSON.parse(value);\n        if (!Array.isArray(array)) {\n            throw new TypeError(`expected value of type \"array\" but instead got value \"${value}\" of type \"${parseValueTypeDefault(array)}\"`);\n        }\n        return array;\n    },\n    boolean(value) {\n        return !(value == \"0\" || String(value).toLowerCase() == \"false\");\n    },\n    number(value) {\n        return Number(value.replace(/_/g, \"\"));\n    },\n    object(value) {\n        const object = JSON.parse(value);\n        if (object === null || typeof object != \"object\" || Array.isArray(object)) {\n            throw new TypeError(`expected value of type \"object\" but instead got value \"${value}\" of type \"${parseValueTypeDefault(object)}\"`);\n        }\n        return object;\n    },\n    string(value) {\n        return value;\n    },\n};\nconst writers = {\n    default: writeString,\n    array: writeJSON,\n    object: writeJSON,\n};\nfunction writeJSON(value) {\n    return JSON.stringify(value);\n}\nfunction writeString(value) {\n    return `${value}`;\n}\n\nclass Controller {\n    constructor(context) {\n        this.context = context;\n    }\n    static get shouldLoad() {\n        return true;\n    }\n    static afterLoad(_identifier, _application) {\n        return;\n    }\n    get application() {\n        return this.context.application;\n    }\n    get scope() {\n        return this.context.scope;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get identifier() {\n        return this.scope.identifier;\n    }\n    get targets() {\n        return this.scope.targets;\n    }\n    get outlets() {\n        return this.scope.outlets;\n    }\n    get classes() {\n        return this.scope.classes;\n    }\n    get data() {\n        return this.scope.data;\n    }\n    initialize() {\n    }\n    connect() {\n    }\n    disconnect() {\n    }\n    dispatch(eventName, { target = this.element, detail = {}, prefix = this.identifier, bubbles = true, cancelable = true, } = {}) {\n        const type = prefix ? `${prefix}:${eventName}` : eventName;\n        const event = new CustomEvent(type, { detail, bubbles, cancelable });\n        target.dispatchEvent(event);\n        return event;\n    }\n}\nController.blessings = [\n    ClassPropertiesBlessing,\n    TargetPropertiesBlessing,\n    ValuePropertiesBlessing,\n    OutletPropertiesBlessing,\n];\nController.targets = [];\nController.outlets = [];\nController.values = {};\n\nexport { Application, AttributeObserver, Context, Controller, ElementObserver, IndexedMultimap, Multimap, SelectorObserver, StringMapObserver, TokenListObserver, ValueListObserver, add, defaultSchema, del, fetch, prune };\n", "import { Application } from '@hotwired/stimulus'\n\nconst application = Application.start()\n\n// Configure Stimulus development experience\napplication.debug = false\nwindow.Stimulus = application\n\nexport { application }\n", "export var HOOKS = [\n    \"onChange\",\n    \"onClose\",\n    \"onDayCreate\",\n    \"onDestroy\",\n    \"onKeyDown\",\n    \"onMonthChange\",\n    \"onOpen\",\n    \"onParseConfig\",\n    \"onReady\",\n    \"onValueUpdate\",\n    \"onYearChange\",\n    \"onPreCalendarPosition\",\n];\nexport var defaults = {\n    _disable: [],\n    allowInput: false,\n    allowInvalidPreload: false,\n    altFormat: \"F j, Y\",\n    altInput: false,\n    altInputClass: \"form-control input\",\n    animate: typeof window === \"object\" &&\n        window.navigator.userAgent.indexOf(\"MSIE\") === -1,\n    ariaDateFormat: \"F j, Y\",\n    autoFillDefaultTime: true,\n    clickOpens: true,\n    closeOnSelect: true,\n    conjunction: \", \",\n    dateFormat: \"Y-m-d\",\n    defaultHour: 12,\n    defaultMinute: 0,\n    defaultSeconds: 0,\n    disable: [],\n    disableMobile: false,\n    enableSeconds: false,\n    enableTime: false,\n    errorHandler: function (err) {\n        return typeof console !== \"undefined\" && console.warn(err);\n    },\n    getWeek: function (givenDate) {\n        var date = new Date(givenDate.getTime());\n        date.setHours(0, 0, 0, 0);\n        date.setDate(date.getDate() + 3 - ((date.getDay() + 6) % 7));\n        var week1 = new Date(date.getFullYear(), 0, 4);\n        return (1 +\n            Math.round(((date.getTime() - week1.getTime()) / 86400000 -\n                3 +\n                ((week1.getDay() + 6) % 7)) /\n                7));\n    },\n    hourIncrement: 1,\n    ignoredFocusElements: [],\n    inline: false,\n    locale: \"default\",\n    minuteIncrement: 5,\n    mode: \"single\",\n    monthSelectorType: \"dropdown\",\n    nextArrow: \"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>\",\n    noCalendar: false,\n    now: new Date(),\n    onChange: [],\n    onClose: [],\n    onDayCreate: [],\n    onDestroy: [],\n    onKeyDown: [],\n    onMonthChange: [],\n    onOpen: [],\n    onParseConfig: [],\n    onReady: [],\n    onValueUpdate: [],\n    onYearChange: [],\n    onPreCalendarPosition: [],\n    plugins: [],\n    position: \"auto\",\n    positionElement: undefined,\n    prevArrow: \"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>\",\n    shorthandCurrentMonth: false,\n    showMonths: 1,\n    static: false,\n    time_24hr: false,\n    weekNumbers: false,\n    wrap: false,\n};\n", "export var english = {\n    weekdays: {\n        shorthand: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n        longhand: [\n            \"Sunday\",\n            \"Monday\",\n            \"Tuesday\",\n            \"Wednesday\",\n            \"Thursday\",\n            \"Friday\",\n            \"Saturday\",\n        ],\n    },\n    months: {\n        shorthand: [\n            \"Jan\",\n            \"Feb\",\n            \"Mar\",\n            \"Apr\",\n            \"May\",\n            \"Jun\",\n            \"Jul\",\n            \"Aug\",\n            \"Sep\",\n            \"Oct\",\n            \"Nov\",\n            \"Dec\",\n        ],\n        longhand: [\n            \"January\",\n            \"February\",\n            \"March\",\n            \"April\",\n            \"May\",\n            \"June\",\n            \"July\",\n            \"August\",\n            \"September\",\n            \"October\",\n            \"November\",\n            \"December\",\n        ],\n    },\n    daysInMonth: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],\n    firstDayOfWeek: 0,\n    ordinal: function (nth) {\n        var s = nth % 100;\n        if (s > 3 && s < 21)\n            return \"th\";\n        switch (s % 10) {\n            case 1:\n                return \"st\";\n            case 2:\n                return \"nd\";\n            case 3:\n                return \"rd\";\n            default:\n                return \"th\";\n        }\n    },\n    rangeSeparator: \" to \",\n    weekAbbreviation: \"Wk\",\n    scrollTitle: \"Scroll to increment\",\n    toggleTitle: \"Click to toggle\",\n    amPM: [\"AM\", \"PM\"],\n    yearAriaLabel: \"Year\",\n    monthAriaLabel: \"Month\",\n    hourAriaLabel: \"Hour\",\n    minuteAriaLabel: \"Minute\",\n    time_24hr: false,\n};\nexport default english;\n", "export var pad = function (number, length) {\n    if (length === void 0) { length = 2; }\n    return (\"000\" + number).slice(length * -1);\n};\nexport var int = function (bool) { return (bool === true ? 1 : 0); };\nexport function debounce(fn, wait) {\n    var t;\n    return function () {\n        var _this = this;\n        var args = arguments;\n        clearTimeout(t);\n        t = setTimeout(function () { return fn.apply(_this, args); }, wait);\n    };\n}\nexport var arrayify = function (obj) {\n    return obj instanceof Array ? obj : [obj];\n};\n", "export function toggleClass(elem, className, bool) {\n    if (bool === true)\n        return elem.classList.add(className);\n    elem.classList.remove(className);\n}\nexport function createElement(tag, className, content) {\n    var e = window.document.createElement(tag);\n    className = className || \"\";\n    content = content || \"\";\n    e.className = className;\n    if (content !== undefined)\n        e.textContent = content;\n    return e;\n}\nexport function clearNode(node) {\n    while (node.firstChild)\n        node.removeChild(node.firstChild);\n}\nexport function findParent(node, condition) {\n    if (condition(node))\n        return node;\n    else if (node.parentNode)\n        return findParent(node.parentNode, condition);\n    return undefined;\n}\nexport function createNumberInput(inputClassName, opts) {\n    var wrapper = createElement(\"div\", \"numInputWrapper\"), numInput = createElement(\"input\", \"numInput \" + inputClassName), arrowUp = createElement(\"span\", \"arrowUp\"), arrowDown = createElement(\"span\", \"arrowDown\");\n    if (navigator.userAgent.indexOf(\"MSIE 9.0\") === -1) {\n        numInput.type = \"number\";\n    }\n    else {\n        numInput.type = \"text\";\n        numInput.pattern = \"\\\\d*\";\n    }\n    if (opts !== undefined)\n        for (var key in opts)\n            numInput.setAttribute(key, opts[key]);\n    wrapper.appendChild(numInput);\n    wrapper.appendChild(arrowUp);\n    wrapper.appendChild(arrowDown);\n    return wrapper;\n}\nexport function getEventTarget(event) {\n    try {\n        if (typeof event.composedPath === \"function\") {\n            var path = event.composedPath();\n            return path[0];\n        }\n        return event.target;\n    }\n    catch (error) {\n        return event.target;\n    }\n}\n", "import { int, pad } from \"../utils\";\nvar doNothing = function () { return undefined; };\nexport var monthToStr = function (monthNumber, shorthand, locale) { return locale.months[shorthand ? \"shorthand\" : \"longhand\"][monthNumber]; };\nexport var revFormat = {\n    D: doNothing,\n    F: function (dateObj, monthName, locale) {\n        dateObj.setMonth(locale.months.longhand.indexOf(monthName));\n    },\n    G: function (dateObj, hour) {\n        dateObj.setHours((dateObj.getHours() >= 12 ? 12 : 0) + parseFloat(hour));\n    },\n    H: function (dateObj, hour) {\n        dateObj.setHours(parseFloat(hour));\n    },\n    J: function (dateObj, day) {\n        dateObj.setDate(parseFloat(day));\n    },\n    K: function (dateObj, amPM, locale) {\n        dateObj.setHours((dateObj.getHours() % 12) +\n            12 * int(new RegExp(locale.amPM[1], \"i\").test(amPM)));\n    },\n    M: function (dateObj, shortMonth, locale) {\n        dateObj.setMonth(locale.months.shorthand.indexOf(shortMonth));\n    },\n    S: function (dateObj, seconds) {\n        dateObj.setSeconds(parseFloat(seconds));\n    },\n    U: function (_, unixSeconds) { return new Date(parseFloat(unixSeconds) * 1000); },\n    W: function (dateObj, weekNum, locale) {\n        var weekNumber = parseInt(weekNum);\n        var date = new Date(dateObj.getFullYear(), 0, 2 + (weekNumber - 1) * 7, 0, 0, 0, 0);\n        date.setDate(date.getDate() - date.getDay() + locale.firstDayOfWeek);\n        return date;\n    },\n    Y: function (dateObj, year) {\n        dateObj.setFullYear(parseFloat(year));\n    },\n    Z: function (_, ISODate) { return new Date(ISODate); },\n    d: function (dateObj, day) {\n        dateObj.setDate(parseFloat(day));\n    },\n    h: function (dateObj, hour) {\n        dateObj.setHours((dateObj.getHours() >= 12 ? 12 : 0) + parseFloat(hour));\n    },\n    i: function (dateObj, minutes) {\n        dateObj.setMinutes(parseFloat(minutes));\n    },\n    j: function (dateObj, day) {\n        dateObj.setDate(parseFloat(day));\n    },\n    l: doNothing,\n    m: function (dateObj, month) {\n        dateObj.setMonth(parseFloat(month) - 1);\n    },\n    n: function (dateObj, month) {\n        dateObj.setMonth(parseFloat(month) - 1);\n    },\n    s: function (dateObj, seconds) {\n        dateObj.setSeconds(parseFloat(seconds));\n    },\n    u: function (_, unixMillSeconds) {\n        return new Date(parseFloat(unixMillSeconds));\n    },\n    w: doNothing,\n    y: function (dateObj, year) {\n        dateObj.setFullYear(2000 + parseFloat(year));\n    },\n};\nexport var tokenRegex = {\n    D: \"\",\n    F: \"\",\n    G: \"(\\\\d\\\\d|\\\\d)\",\n    H: \"(\\\\d\\\\d|\\\\d)\",\n    J: \"(\\\\d\\\\d|\\\\d)\\\\w+\",\n    K: \"\",\n    M: \"\",\n    S: \"(\\\\d\\\\d|\\\\d)\",\n    U: \"(.+)\",\n    W: \"(\\\\d\\\\d|\\\\d)\",\n    Y: \"(\\\\d{4})\",\n    Z: \"(.+)\",\n    d: \"(\\\\d\\\\d|\\\\d)\",\n    h: \"(\\\\d\\\\d|\\\\d)\",\n    i: \"(\\\\d\\\\d|\\\\d)\",\n    j: \"(\\\\d\\\\d|\\\\d)\",\n    l: \"\",\n    m: \"(\\\\d\\\\d|\\\\d)\",\n    n: \"(\\\\d\\\\d|\\\\d)\",\n    s: \"(\\\\d\\\\d|\\\\d)\",\n    u: \"(.+)\",\n    w: \"(\\\\d\\\\d|\\\\d)\",\n    y: \"(\\\\d{2})\",\n};\nexport var formats = {\n    Z: function (date) { return date.toISOString(); },\n    D: function (date, locale, options) {\n        return locale.weekdays.shorthand[formats.w(date, locale, options)];\n    },\n    F: function (date, locale, options) {\n        return monthToStr(formats.n(date, locale, options) - 1, false, locale);\n    },\n    G: function (date, locale, options) {\n        return pad(formats.h(date, locale, options));\n    },\n    H: function (date) { return pad(date.getHours()); },\n    J: function (date, locale) {\n        return locale.ordinal !== undefined\n            ? date.getDate() + locale.ordinal(date.getDate())\n            : date.getDate();\n    },\n    K: function (date, locale) { return locale.amPM[int(date.getHours() > 11)]; },\n    M: function (date, locale) {\n        return monthToStr(date.getMonth(), true, locale);\n    },\n    S: function (date) { return pad(date.getSeconds()); },\n    U: function (date) { return date.getTime() / 1000; },\n    W: function (date, _, options) {\n        return options.getWeek(date);\n    },\n    Y: function (date) { return pad(date.getFullYear(), 4); },\n    d: function (date) { return pad(date.getDate()); },\n    h: function (date) { return (date.getHours() % 12 ? date.getHours() % 12 : 12); },\n    i: function (date) { return pad(date.getMinutes()); },\n    j: function (date) { return date.getDate(); },\n    l: function (date, locale) {\n        return locale.weekdays.longhand[date.getDay()];\n    },\n    m: function (date) { return pad(date.getMonth() + 1); },\n    n: function (date) { return date.getMonth() + 1; },\n    s: function (date) { return date.getSeconds(); },\n    u: function (date) { return date.getTime(); },\n    w: function (date) { return date.getDay(); },\n    y: function (date) { return String(date.getFullYear()).substring(2); },\n};\n", "import { tokenRegex, revFormat, formats, } from \"./formatting\";\nimport { defaults } from \"../types/options\";\nimport { english } from \"../l10n/default\";\nexport var createDateFormatter = function (_a) {\n    var _b = _a.config, config = _b === void 0 ? defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? english : _c, _d = _a.isMobile, isMobile = _d === void 0 ? false : _d;\n    return function (dateObj, frmt, overrideLocale) {\n        var locale = overrideLocale || l10n;\n        if (config.formatDate !== undefined && !isMobile) {\n            return config.formatDate(dateObj, frmt, locale);\n        }\n        return frmt\n            .split(\"\")\n            .map(function (c, i, arr) {\n            return formats[c] && arr[i - 1] !== \"\\\\\"\n                ? formats[c](dateObj, locale, config)\n                : c !== \"\\\\\"\n                    ? c\n                    : \"\";\n        })\n            .join(\"\");\n    };\n};\nexport var createDateParser = function (_a) {\n    var _b = _a.config, config = _b === void 0 ? defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? english : _c;\n    return function (date, givenFormat, timeless, customLocale) {\n        if (date !== 0 && !date)\n            return undefined;\n        var locale = customLocale || l10n;\n        var parsedDate;\n        var dateOrig = date;\n        if (date instanceof Date)\n            parsedDate = new Date(date.getTime());\n        else if (typeof date !== \"string\" &&\n            date.toFixed !== undefined)\n            parsedDate = new Date(date);\n        else if (typeof date === \"string\") {\n            var format = givenFormat || (config || defaults).dateFormat;\n            var datestr = String(date).trim();\n            if (datestr === \"today\") {\n                parsedDate = new Date();\n                timeless = true;\n            }\n            else if (config && config.parseDate) {\n                parsedDate = config.parseDate(date, format);\n            }\n            else if (/Z$/.test(datestr) ||\n                /GMT$/.test(datestr)) {\n                parsedDate = new Date(date);\n            }\n            else {\n                var matched = void 0, ops = [];\n                for (var i = 0, matchIndex = 0, regexStr = \"\"; i < format.length; i++) {\n                    var token = format[i];\n                    var isBackSlash = token === \"\\\\\";\n                    var escaped = format[i - 1] === \"\\\\\" || isBackSlash;\n                    if (tokenRegex[token] && !escaped) {\n                        regexStr += tokenRegex[token];\n                        var match = new RegExp(regexStr).exec(date);\n                        if (match && (matched = true)) {\n                            ops[token !== \"Y\" ? \"push\" : \"unshift\"]({\n                                fn: revFormat[token],\n                                val: match[++matchIndex],\n                            });\n                        }\n                    }\n                    else if (!isBackSlash)\n                        regexStr += \".\";\n                }\n                parsedDate =\n                    !config || !config.noCalendar\n                        ? new Date(new Date().getFullYear(), 0, 1, 0, 0, 0, 0)\n                        : new Date(new Date().setHours(0, 0, 0, 0));\n                ops.forEach(function (_a) {\n                    var fn = _a.fn, val = _a.val;\n                    return (parsedDate = fn(parsedDate, val, locale) || parsedDate);\n                });\n                parsedDate = matched ? parsedDate : undefined;\n            }\n        }\n        if (!(parsedDate instanceof Date && !isNaN(parsedDate.getTime()))) {\n            config.errorHandler(new Error(\"Invalid date provided: \" + dateOrig));\n            return undefined;\n        }\n        if (timeless === true)\n            parsedDate.setHours(0, 0, 0, 0);\n        return parsedDate;\n    };\n};\nexport function compareDates(date1, date2, timeless) {\n    if (timeless === void 0) { timeless = true; }\n    if (timeless !== false) {\n        return (new Date(date1.getTime()).setHours(0, 0, 0, 0) -\n            new Date(date2.getTime()).setHours(0, 0, 0, 0));\n    }\n    return date1.getTime() - date2.getTime();\n}\nexport function compareTimes(date1, date2) {\n    return (3600 * (date1.getHours() - date2.getHours()) +\n        60 * (date1.getMinutes() - date2.getMinutes()) +\n        date1.getSeconds() -\n        date2.getSeconds());\n}\nexport var isBetween = function (ts, ts1, ts2) {\n    return ts > Math.min(ts1, ts2) && ts < Math.max(ts1, ts2);\n};\nexport var calculateSecondsSinceMidnight = function (hours, minutes, seconds) {\n    return hours * 3600 + minutes * 60 + seconds;\n};\nexport var parseSeconds = function (secondsSinceMidnight) {\n    var hours = Math.floor(secondsSinceMidnight / 3600), minutes = (secondsSinceMidnight - hours * 3600) / 60;\n    return [hours, minutes, secondsSinceMidnight - hours * 3600 - minutes * 60];\n};\nexport var duration = {\n    DAY: 86400000,\n};\nexport function getDefaultHours(config) {\n    var hours = config.defaultHour;\n    var minutes = config.defaultMinute;\n    var seconds = config.defaultSeconds;\n    if (config.minDate !== undefined) {\n        var minHour = config.minDate.getHours();\n        var minMinutes = config.minDate.getMinutes();\n        var minSeconds = config.minDate.getSeconds();\n        if (hours < minHour) {\n            hours = minHour;\n        }\n        if (hours === minHour && minutes < minMinutes) {\n            minutes = minMinutes;\n        }\n        if (hours === minHour && minutes === minMinutes && seconds < minSeconds)\n            seconds = config.minDate.getSeconds();\n    }\n    if (config.maxDate !== undefined) {\n        var maxHr = config.maxDate.getHours();\n        var maxMinutes = config.maxDate.getMinutes();\n        hours = Math.min(hours, maxHr);\n        if (hours === maxHr)\n            minutes = Math.min(maxMinutes, minutes);\n        if (hours === maxHr && minutes === maxMinutes)\n            seconds = config.maxDate.getSeconds();\n    }\n    return { hours: hours, minutes: minutes, seconds: seconds };\n}\n", "\"use strict\";\nif (typeof Object.assign !== \"function\") {\n    Object.assign = function (target) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!target) {\n            throw TypeError(\"Cannot convert undefined or null to object\");\n        }\n        var _loop_1 = function (source) {\n            if (source) {\n                Object.keys(source).forEach(function (key) { return (target[key] = source[key]); });\n            }\n        };\n        for (var _a = 0, args_1 = args; _a < args_1.length; _a++) {\n            var source = args_1[_a];\n            _loop_1(source);\n        }\n        return target;\n    };\n}\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { defaults as defaultOptions, HOOKS, } from \"./types/options\";\nimport English from \"./l10n/default\";\nimport { arrayify, debounce, int, pad } from \"./utils\";\nimport { clearNode, createElement, createNumberInput, findParent, toggleClass, getEventTarget, } from \"./utils/dom\";\nimport { compareDates, createDateParser, createDateFormatter, duration, isBetween, getDefaultHours, calculateSecondsSinceMidnight, parseSeconds, } from \"./utils/dates\";\nimport { tokenRegex, monthToStr } from \"./utils/formatting\";\nimport \"./utils/polyfills\";\nvar DEBOUNCED_CHANGE_MS = 300;\nfunction FlatpickrInstance(element, instanceConfig) {\n    var self = {\n        config: __assign(__assign({}, defaultOptions), flatpickr.defaultConfig),\n        l10n: English,\n    };\n    self.parseDate = createDateParser({ config: self.config, l10n: self.l10n });\n    self._handlers = [];\n    self.pluginElements = [];\n    self.loadedPlugins = [];\n    self._bind = bind;\n    self._setHoursFromDate = setHoursFromDate;\n    self._positionCalendar = positionCalendar;\n    self.changeMonth = changeMonth;\n    self.changeYear = changeYear;\n    self.clear = clear;\n    self.close = close;\n    self.onMouseOver = onMouseOver;\n    self._createElement = createElement;\n    self.createDay = createDay;\n    self.destroy = destroy;\n    self.isEnabled = isEnabled;\n    self.jumpToDate = jumpToDate;\n    self.updateValue = updateValue;\n    self.open = open;\n    self.redraw = redraw;\n    self.set = set;\n    self.setDate = setDate;\n    self.toggle = toggle;\n    function setupHelperFunctions() {\n        self.utils = {\n            getDaysInMonth: function (month, yr) {\n                if (month === void 0) { month = self.currentMonth; }\n                if (yr === void 0) { yr = self.currentYear; }\n                if (month === 1 && ((yr % 4 === 0 && yr % 100 !== 0) || yr % 400 === 0))\n                    return 29;\n                return self.l10n.daysInMonth[month];\n            },\n        };\n    }\n    function init() {\n        self.element = self.input = element;\n        self.isOpen = false;\n        parseConfig();\n        setupLocale();\n        setupInputs();\n        setupDates();\n        setupHelperFunctions();\n        if (!self.isMobile)\n            build();\n        bindEvents();\n        if (self.selectedDates.length || self.config.noCalendar) {\n            if (self.config.enableTime) {\n                setHoursFromDate(self.config.noCalendar ? self.latestSelectedDateObj : undefined);\n            }\n            updateValue(false);\n        }\n        setCalendarWidth();\n        var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n        if (!self.isMobile && isSafari) {\n            positionCalendar();\n        }\n        triggerEvent(\"onReady\");\n    }\n    function getClosestActiveElement() {\n        var _a;\n        return (((_a = self.calendarContainer) === null || _a === void 0 ? void 0 : _a.getRootNode())\n            .activeElement || document.activeElement);\n    }\n    function bindToInstance(fn) {\n        return fn.bind(self);\n    }\n    function setCalendarWidth() {\n        var config = self.config;\n        if (config.weekNumbers === false && config.showMonths === 1) {\n            return;\n        }\n        else if (config.noCalendar !== true) {\n            window.requestAnimationFrame(function () {\n                if (self.calendarContainer !== undefined) {\n                    self.calendarContainer.style.visibility = \"hidden\";\n                    self.calendarContainer.style.display = \"block\";\n                }\n                if (self.daysContainer !== undefined) {\n                    var daysWidth = (self.days.offsetWidth + 1) * config.showMonths;\n                    self.daysContainer.style.width = daysWidth + \"px\";\n                    self.calendarContainer.style.width =\n                        daysWidth +\n                            (self.weekWrapper !== undefined\n                                ? self.weekWrapper.offsetWidth\n                                : 0) +\n                            \"px\";\n                    self.calendarContainer.style.removeProperty(\"visibility\");\n                    self.calendarContainer.style.removeProperty(\"display\");\n                }\n            });\n        }\n    }\n    function updateTime(e) {\n        if (self.selectedDates.length === 0) {\n            var defaultDate = self.config.minDate === undefined ||\n                compareDates(new Date(), self.config.minDate) >= 0\n                ? new Date()\n                : new Date(self.config.minDate.getTime());\n            var defaults = getDefaultHours(self.config);\n            defaultDate.setHours(defaults.hours, defaults.minutes, defaults.seconds, defaultDate.getMilliseconds());\n            self.selectedDates = [defaultDate];\n            self.latestSelectedDateObj = defaultDate;\n        }\n        if (e !== undefined && e.type !== \"blur\") {\n            timeWrapper(e);\n        }\n        var prevValue = self._input.value;\n        setHoursFromInputs();\n        updateValue();\n        if (self._input.value !== prevValue) {\n            self._debouncedChange();\n        }\n    }\n    function ampm2military(hour, amPM) {\n        return (hour % 12) + 12 * int(amPM === self.l10n.amPM[1]);\n    }\n    function military2ampm(hour) {\n        switch (hour % 24) {\n            case 0:\n            case 12:\n                return 12;\n            default:\n                return hour % 12;\n        }\n    }\n    function setHoursFromInputs() {\n        if (self.hourElement === undefined || self.minuteElement === undefined)\n            return;\n        var hours = (parseInt(self.hourElement.value.slice(-2), 10) || 0) % 24, minutes = (parseInt(self.minuteElement.value, 10) || 0) % 60, seconds = self.secondElement !== undefined\n            ? (parseInt(self.secondElement.value, 10) || 0) % 60\n            : 0;\n        if (self.amPM !== undefined) {\n            hours = ampm2military(hours, self.amPM.textContent);\n        }\n        var limitMinHours = self.config.minTime !== undefined ||\n            (self.config.minDate &&\n                self.minDateHasTime &&\n                self.latestSelectedDateObj &&\n                compareDates(self.latestSelectedDateObj, self.config.minDate, true) ===\n                    0);\n        var limitMaxHours = self.config.maxTime !== undefined ||\n            (self.config.maxDate &&\n                self.maxDateHasTime &&\n                self.latestSelectedDateObj &&\n                compareDates(self.latestSelectedDateObj, self.config.maxDate, true) ===\n                    0);\n        if (self.config.maxTime !== undefined &&\n            self.config.minTime !== undefined &&\n            self.config.minTime > self.config.maxTime) {\n            var minBound = calculateSecondsSinceMidnight(self.config.minTime.getHours(), self.config.minTime.getMinutes(), self.config.minTime.getSeconds());\n            var maxBound = calculateSecondsSinceMidnight(self.config.maxTime.getHours(), self.config.maxTime.getMinutes(), self.config.maxTime.getSeconds());\n            var currentTime = calculateSecondsSinceMidnight(hours, minutes, seconds);\n            if (currentTime > maxBound && currentTime < minBound) {\n                var result = parseSeconds(minBound);\n                hours = result[0];\n                minutes = result[1];\n                seconds = result[2];\n            }\n        }\n        else {\n            if (limitMaxHours) {\n                var maxTime = self.config.maxTime !== undefined\n                    ? self.config.maxTime\n                    : self.config.maxDate;\n                hours = Math.min(hours, maxTime.getHours());\n                if (hours === maxTime.getHours())\n                    minutes = Math.min(minutes, maxTime.getMinutes());\n                if (minutes === maxTime.getMinutes())\n                    seconds = Math.min(seconds, maxTime.getSeconds());\n            }\n            if (limitMinHours) {\n                var minTime = self.config.minTime !== undefined\n                    ? self.config.minTime\n                    : self.config.minDate;\n                hours = Math.max(hours, minTime.getHours());\n                if (hours === minTime.getHours() && minutes < minTime.getMinutes())\n                    minutes = minTime.getMinutes();\n                if (minutes === minTime.getMinutes())\n                    seconds = Math.max(seconds, minTime.getSeconds());\n            }\n        }\n        setHours(hours, minutes, seconds);\n    }\n    function setHoursFromDate(dateObj) {\n        var date = dateObj || self.latestSelectedDateObj;\n        if (date && date instanceof Date) {\n            setHours(date.getHours(), date.getMinutes(), date.getSeconds());\n        }\n    }\n    function setHours(hours, minutes, seconds) {\n        if (self.latestSelectedDateObj !== undefined) {\n            self.latestSelectedDateObj.setHours(hours % 24, minutes, seconds || 0, 0);\n        }\n        if (!self.hourElement || !self.minuteElement || self.isMobile)\n            return;\n        self.hourElement.value = pad(!self.config.time_24hr\n            ? ((12 + hours) % 12) + 12 * int(hours % 12 === 0)\n            : hours);\n        self.minuteElement.value = pad(minutes);\n        if (self.amPM !== undefined)\n            self.amPM.textContent = self.l10n.amPM[int(hours >= 12)];\n        if (self.secondElement !== undefined)\n            self.secondElement.value = pad(seconds);\n    }\n    function onYearInput(event) {\n        var eventTarget = getEventTarget(event);\n        var year = parseInt(eventTarget.value) + (event.delta || 0);\n        if (year / 1000 > 1 ||\n            (event.key === \"Enter\" && !/[^\\d]/.test(year.toString()))) {\n            changeYear(year);\n        }\n    }\n    function bind(element, event, handler, options) {\n        if (event instanceof Array)\n            return event.forEach(function (ev) { return bind(element, ev, handler, options); });\n        if (element instanceof Array)\n            return element.forEach(function (el) { return bind(el, event, handler, options); });\n        element.addEventListener(event, handler, options);\n        self._handlers.push({\n            remove: function () { return element.removeEventListener(event, handler, options); },\n        });\n    }\n    function triggerChange() {\n        triggerEvent(\"onChange\");\n    }\n    function bindEvents() {\n        if (self.config.wrap) {\n            [\"open\", \"close\", \"toggle\", \"clear\"].forEach(function (evt) {\n                Array.prototype.forEach.call(self.element.querySelectorAll(\"[data-\" + evt + \"]\"), function (el) {\n                    return bind(el, \"click\", self[evt]);\n                });\n            });\n        }\n        if (self.isMobile) {\n            setupMobile();\n            return;\n        }\n        var debouncedResize = debounce(onResize, 50);\n        self._debouncedChange = debounce(triggerChange, DEBOUNCED_CHANGE_MS);\n        if (self.daysContainer && !/iPhone|iPad|iPod/i.test(navigator.userAgent))\n            bind(self.daysContainer, \"mouseover\", function (e) {\n                if (self.config.mode === \"range\")\n                    onMouseOver(getEventTarget(e));\n            });\n        bind(self._input, \"keydown\", onKeyDown);\n        if (self.calendarContainer !== undefined) {\n            bind(self.calendarContainer, \"keydown\", onKeyDown);\n        }\n        if (!self.config.inline && !self.config.static)\n            bind(window, \"resize\", debouncedResize);\n        if (window.ontouchstart !== undefined)\n            bind(window.document, \"touchstart\", documentClick);\n        else\n            bind(window.document, \"mousedown\", documentClick);\n        bind(window.document, \"focus\", documentClick, { capture: true });\n        if (self.config.clickOpens === true) {\n            bind(self._input, \"focus\", self.open);\n            bind(self._input, \"click\", self.open);\n        }\n        if (self.daysContainer !== undefined) {\n            bind(self.monthNav, \"click\", onMonthNavClick);\n            bind(self.monthNav, [\"keyup\", \"increment\"], onYearInput);\n            bind(self.daysContainer, \"click\", selectDate);\n        }\n        if (self.timeContainer !== undefined &&\n            self.minuteElement !== undefined &&\n            self.hourElement !== undefined) {\n            var selText = function (e) {\n                return getEventTarget(e).select();\n            };\n            bind(self.timeContainer, [\"increment\"], updateTime);\n            bind(self.timeContainer, \"blur\", updateTime, { capture: true });\n            bind(self.timeContainer, \"click\", timeIncrement);\n            bind([self.hourElement, self.minuteElement], [\"focus\", \"click\"], selText);\n            if (self.secondElement !== undefined)\n                bind(self.secondElement, \"focus\", function () { return self.secondElement && self.secondElement.select(); });\n            if (self.amPM !== undefined) {\n                bind(self.amPM, \"click\", function (e) {\n                    updateTime(e);\n                });\n            }\n        }\n        if (self.config.allowInput) {\n            bind(self._input, \"blur\", onBlur);\n        }\n    }\n    function jumpToDate(jumpDate, triggerChange) {\n        var jumpTo = jumpDate !== undefined\n            ? self.parseDate(jumpDate)\n            : self.latestSelectedDateObj ||\n                (self.config.minDate && self.config.minDate > self.now\n                    ? self.config.minDate\n                    : self.config.maxDate && self.config.maxDate < self.now\n                        ? self.config.maxDate\n                        : self.now);\n        var oldYear = self.currentYear;\n        var oldMonth = self.currentMonth;\n        try {\n            if (jumpTo !== undefined) {\n                self.currentYear = jumpTo.getFullYear();\n                self.currentMonth = jumpTo.getMonth();\n            }\n        }\n        catch (e) {\n            e.message = \"Invalid date supplied: \" + jumpTo;\n            self.config.errorHandler(e);\n        }\n        if (triggerChange && self.currentYear !== oldYear) {\n            triggerEvent(\"onYearChange\");\n            buildMonthSwitch();\n        }\n        if (triggerChange &&\n            (self.currentYear !== oldYear || self.currentMonth !== oldMonth)) {\n            triggerEvent(\"onMonthChange\");\n        }\n        self.redraw();\n    }\n    function timeIncrement(e) {\n        var eventTarget = getEventTarget(e);\n        if (~eventTarget.className.indexOf(\"arrow\"))\n            incrementNumInput(e, eventTarget.classList.contains(\"arrowUp\") ? 1 : -1);\n    }\n    function incrementNumInput(e, delta, inputElem) {\n        var target = e && getEventTarget(e);\n        var input = inputElem ||\n            (target && target.parentNode && target.parentNode.firstChild);\n        var event = createEvent(\"increment\");\n        event.delta = delta;\n        input && input.dispatchEvent(event);\n    }\n    function build() {\n        var fragment = window.document.createDocumentFragment();\n        self.calendarContainer = createElement(\"div\", \"flatpickr-calendar\");\n        self.calendarContainer.tabIndex = -1;\n        if (!self.config.noCalendar) {\n            fragment.appendChild(buildMonthNav());\n            self.innerContainer = createElement(\"div\", \"flatpickr-innerContainer\");\n            if (self.config.weekNumbers) {\n                var _a = buildWeeks(), weekWrapper = _a.weekWrapper, weekNumbers = _a.weekNumbers;\n                self.innerContainer.appendChild(weekWrapper);\n                self.weekNumbers = weekNumbers;\n                self.weekWrapper = weekWrapper;\n            }\n            self.rContainer = createElement(\"div\", \"flatpickr-rContainer\");\n            self.rContainer.appendChild(buildWeekdays());\n            if (!self.daysContainer) {\n                self.daysContainer = createElement(\"div\", \"flatpickr-days\");\n                self.daysContainer.tabIndex = -1;\n            }\n            buildDays();\n            self.rContainer.appendChild(self.daysContainer);\n            self.innerContainer.appendChild(self.rContainer);\n            fragment.appendChild(self.innerContainer);\n        }\n        if (self.config.enableTime) {\n            fragment.appendChild(buildTime());\n        }\n        toggleClass(self.calendarContainer, \"rangeMode\", self.config.mode === \"range\");\n        toggleClass(self.calendarContainer, \"animate\", self.config.animate === true);\n        toggleClass(self.calendarContainer, \"multiMonth\", self.config.showMonths > 1);\n        self.calendarContainer.appendChild(fragment);\n        var customAppend = self.config.appendTo !== undefined &&\n            self.config.appendTo.nodeType !== undefined;\n        if (self.config.inline || self.config.static) {\n            self.calendarContainer.classList.add(self.config.inline ? \"inline\" : \"static\");\n            if (self.config.inline) {\n                if (!customAppend && self.element.parentNode)\n                    self.element.parentNode.insertBefore(self.calendarContainer, self._input.nextSibling);\n                else if (self.config.appendTo !== undefined)\n                    self.config.appendTo.appendChild(self.calendarContainer);\n            }\n            if (self.config.static) {\n                var wrapper = createElement(\"div\", \"flatpickr-wrapper\");\n                if (self.element.parentNode)\n                    self.element.parentNode.insertBefore(wrapper, self.element);\n                wrapper.appendChild(self.element);\n                if (self.altInput)\n                    wrapper.appendChild(self.altInput);\n                wrapper.appendChild(self.calendarContainer);\n            }\n        }\n        if (!self.config.static && !self.config.inline)\n            (self.config.appendTo !== undefined\n                ? self.config.appendTo\n                : window.document.body).appendChild(self.calendarContainer);\n    }\n    function createDay(className, date, _dayNumber, i) {\n        var dateIsEnabled = isEnabled(date, true), dayElement = createElement(\"span\", className, date.getDate().toString());\n        dayElement.dateObj = date;\n        dayElement.$i = i;\n        dayElement.setAttribute(\"aria-label\", self.formatDate(date, self.config.ariaDateFormat));\n        if (className.indexOf(\"hidden\") === -1 &&\n            compareDates(date, self.now) === 0) {\n            self.todayDateElem = dayElement;\n            dayElement.classList.add(\"today\");\n            dayElement.setAttribute(\"aria-current\", \"date\");\n        }\n        if (dateIsEnabled) {\n            dayElement.tabIndex = -1;\n            if (isDateSelected(date)) {\n                dayElement.classList.add(\"selected\");\n                self.selectedDateElem = dayElement;\n                if (self.config.mode === \"range\") {\n                    toggleClass(dayElement, \"startRange\", self.selectedDates[0] &&\n                        compareDates(date, self.selectedDates[0], true) === 0);\n                    toggleClass(dayElement, \"endRange\", self.selectedDates[1] &&\n                        compareDates(date, self.selectedDates[1], true) === 0);\n                    if (className === \"nextMonthDay\")\n                        dayElement.classList.add(\"inRange\");\n                }\n            }\n        }\n        else {\n            dayElement.classList.add(\"flatpickr-disabled\");\n        }\n        if (self.config.mode === \"range\") {\n            if (isDateInRange(date) && !isDateSelected(date))\n                dayElement.classList.add(\"inRange\");\n        }\n        if (self.weekNumbers &&\n            self.config.showMonths === 1 &&\n            className !== \"prevMonthDay\" &&\n            i % 7 === 6) {\n            self.weekNumbers.insertAdjacentHTML(\"beforeend\", \"<span class='flatpickr-day'>\" + self.config.getWeek(date) + \"</span>\");\n        }\n        triggerEvent(\"onDayCreate\", dayElement);\n        return dayElement;\n    }\n    function focusOnDayElem(targetNode) {\n        targetNode.focus();\n        if (self.config.mode === \"range\")\n            onMouseOver(targetNode);\n    }\n    function getFirstAvailableDay(delta) {\n        var startMonth = delta > 0 ? 0 : self.config.showMonths - 1;\n        var endMonth = delta > 0 ? self.config.showMonths : -1;\n        for (var m = startMonth; m != endMonth; m += delta) {\n            var month = self.daysContainer.children[m];\n            var startIndex = delta > 0 ? 0 : month.children.length - 1;\n            var endIndex = delta > 0 ? month.children.length : -1;\n            for (var i = startIndex; i != endIndex; i += delta) {\n                var c = month.children[i];\n                if (c.className.indexOf(\"hidden\") === -1 && isEnabled(c.dateObj))\n                    return c;\n            }\n        }\n        return undefined;\n    }\n    function getNextAvailableDay(current, delta) {\n        var givenMonth = current.className.indexOf(\"Month\") === -1\n            ? current.dateObj.getMonth()\n            : self.currentMonth;\n        var endMonth = delta > 0 ? self.config.showMonths : -1;\n        var loopDelta = delta > 0 ? 1 : -1;\n        for (var m = givenMonth - self.currentMonth; m != endMonth; m += loopDelta) {\n            var month = self.daysContainer.children[m];\n            var startIndex = givenMonth - self.currentMonth === m\n                ? current.$i + delta\n                : delta < 0\n                    ? month.children.length - 1\n                    : 0;\n            var numMonthDays = month.children.length;\n            for (var i = startIndex; i >= 0 && i < numMonthDays && i != (delta > 0 ? numMonthDays : -1); i += loopDelta) {\n                var c = month.children[i];\n                if (c.className.indexOf(\"hidden\") === -1 &&\n                    isEnabled(c.dateObj) &&\n                    Math.abs(current.$i - i) >= Math.abs(delta))\n                    return focusOnDayElem(c);\n            }\n        }\n        self.changeMonth(loopDelta);\n        focusOnDay(getFirstAvailableDay(loopDelta), 0);\n        return undefined;\n    }\n    function focusOnDay(current, offset) {\n        var activeElement = getClosestActiveElement();\n        var dayFocused = isInView(activeElement || document.body);\n        var startElem = current !== undefined\n            ? current\n            : dayFocused\n                ? activeElement\n                : self.selectedDateElem !== undefined && isInView(self.selectedDateElem)\n                    ? self.selectedDateElem\n                    : self.todayDateElem !== undefined && isInView(self.todayDateElem)\n                        ? self.todayDateElem\n                        : getFirstAvailableDay(offset > 0 ? 1 : -1);\n        if (startElem === undefined) {\n            self._input.focus();\n        }\n        else if (!dayFocused) {\n            focusOnDayElem(startElem);\n        }\n        else {\n            getNextAvailableDay(startElem, offset);\n        }\n    }\n    function buildMonthDays(year, month) {\n        var firstOfMonth = (new Date(year, month, 1).getDay() - self.l10n.firstDayOfWeek + 7) % 7;\n        var prevMonthDays = self.utils.getDaysInMonth((month - 1 + 12) % 12, year);\n        var daysInMonth = self.utils.getDaysInMonth(month, year), days = window.document.createDocumentFragment(), isMultiMonth = self.config.showMonths > 1, prevMonthDayClass = isMultiMonth ? \"prevMonthDay hidden\" : \"prevMonthDay\", nextMonthDayClass = isMultiMonth ? \"nextMonthDay hidden\" : \"nextMonthDay\";\n        var dayNumber = prevMonthDays + 1 - firstOfMonth, dayIndex = 0;\n        for (; dayNumber <= prevMonthDays; dayNumber++, dayIndex++) {\n            days.appendChild(createDay(\"flatpickr-day \" + prevMonthDayClass, new Date(year, month - 1, dayNumber), dayNumber, dayIndex));\n        }\n        for (dayNumber = 1; dayNumber <= daysInMonth; dayNumber++, dayIndex++) {\n            days.appendChild(createDay(\"flatpickr-day\", new Date(year, month, dayNumber), dayNumber, dayIndex));\n        }\n        for (var dayNum = daysInMonth + 1; dayNum <= 42 - firstOfMonth &&\n            (self.config.showMonths === 1 || dayIndex % 7 !== 0); dayNum++, dayIndex++) {\n            days.appendChild(createDay(\"flatpickr-day \" + nextMonthDayClass, new Date(year, month + 1, dayNum % daysInMonth), dayNum, dayIndex));\n        }\n        var dayContainer = createElement(\"div\", \"dayContainer\");\n        dayContainer.appendChild(days);\n        return dayContainer;\n    }\n    function buildDays() {\n        if (self.daysContainer === undefined) {\n            return;\n        }\n        clearNode(self.daysContainer);\n        if (self.weekNumbers)\n            clearNode(self.weekNumbers);\n        var frag = document.createDocumentFragment();\n        for (var i = 0; i < self.config.showMonths; i++) {\n            var d = new Date(self.currentYear, self.currentMonth, 1);\n            d.setMonth(self.currentMonth + i);\n            frag.appendChild(buildMonthDays(d.getFullYear(), d.getMonth()));\n        }\n        self.daysContainer.appendChild(frag);\n        self.days = self.daysContainer.firstChild;\n        if (self.config.mode === \"range\" && self.selectedDates.length === 1) {\n            onMouseOver();\n        }\n    }\n    function buildMonthSwitch() {\n        if (self.config.showMonths > 1 ||\n            self.config.monthSelectorType !== \"dropdown\")\n            return;\n        var shouldBuildMonth = function (month) {\n            if (self.config.minDate !== undefined &&\n                self.currentYear === self.config.minDate.getFullYear() &&\n                month < self.config.minDate.getMonth()) {\n                return false;\n            }\n            return !(self.config.maxDate !== undefined &&\n                self.currentYear === self.config.maxDate.getFullYear() &&\n                month > self.config.maxDate.getMonth());\n        };\n        self.monthsDropdownContainer.tabIndex = -1;\n        self.monthsDropdownContainer.innerHTML = \"\";\n        for (var i = 0; i < 12; i++) {\n            if (!shouldBuildMonth(i))\n                continue;\n            var month = createElement(\"option\", \"flatpickr-monthDropdown-month\");\n            month.value = new Date(self.currentYear, i).getMonth().toString();\n            month.textContent = monthToStr(i, self.config.shorthandCurrentMonth, self.l10n);\n            month.tabIndex = -1;\n            if (self.currentMonth === i) {\n                month.selected = true;\n            }\n            self.monthsDropdownContainer.appendChild(month);\n        }\n    }\n    function buildMonth() {\n        var container = createElement(\"div\", \"flatpickr-month\");\n        var monthNavFragment = window.document.createDocumentFragment();\n        var monthElement;\n        if (self.config.showMonths > 1 ||\n            self.config.monthSelectorType === \"static\") {\n            monthElement = createElement(\"span\", \"cur-month\");\n        }\n        else {\n            self.monthsDropdownContainer = createElement(\"select\", \"flatpickr-monthDropdown-months\");\n            self.monthsDropdownContainer.setAttribute(\"aria-label\", self.l10n.monthAriaLabel);\n            bind(self.monthsDropdownContainer, \"change\", function (e) {\n                var target = getEventTarget(e);\n                var selectedMonth = parseInt(target.value, 10);\n                self.changeMonth(selectedMonth - self.currentMonth);\n                triggerEvent(\"onMonthChange\");\n            });\n            buildMonthSwitch();\n            monthElement = self.monthsDropdownContainer;\n        }\n        var yearInput = createNumberInput(\"cur-year\", { tabindex: \"-1\" });\n        var yearElement = yearInput.getElementsByTagName(\"input\")[0];\n        yearElement.setAttribute(\"aria-label\", self.l10n.yearAriaLabel);\n        if (self.config.minDate) {\n            yearElement.setAttribute(\"min\", self.config.minDate.getFullYear().toString());\n        }\n        if (self.config.maxDate) {\n            yearElement.setAttribute(\"max\", self.config.maxDate.getFullYear().toString());\n            yearElement.disabled =\n                !!self.config.minDate &&\n                    self.config.minDate.getFullYear() === self.config.maxDate.getFullYear();\n        }\n        var currentMonth = createElement(\"div\", \"flatpickr-current-month\");\n        currentMonth.appendChild(monthElement);\n        currentMonth.appendChild(yearInput);\n        monthNavFragment.appendChild(currentMonth);\n        container.appendChild(monthNavFragment);\n        return {\n            container: container,\n            yearElement: yearElement,\n            monthElement: monthElement,\n        };\n    }\n    function buildMonths() {\n        clearNode(self.monthNav);\n        self.monthNav.appendChild(self.prevMonthNav);\n        if (self.config.showMonths) {\n            self.yearElements = [];\n            self.monthElements = [];\n        }\n        for (var m = self.config.showMonths; m--;) {\n            var month = buildMonth();\n            self.yearElements.push(month.yearElement);\n            self.monthElements.push(month.monthElement);\n            self.monthNav.appendChild(month.container);\n        }\n        self.monthNav.appendChild(self.nextMonthNav);\n    }\n    function buildMonthNav() {\n        self.monthNav = createElement(\"div\", \"flatpickr-months\");\n        self.yearElements = [];\n        self.monthElements = [];\n        self.prevMonthNav = createElement(\"span\", \"flatpickr-prev-month\");\n        self.prevMonthNav.innerHTML = self.config.prevArrow;\n        self.nextMonthNav = createElement(\"span\", \"flatpickr-next-month\");\n        self.nextMonthNav.innerHTML = self.config.nextArrow;\n        buildMonths();\n        Object.defineProperty(self, \"_hidePrevMonthArrow\", {\n            get: function () { return self.__hidePrevMonthArrow; },\n            set: function (bool) {\n                if (self.__hidePrevMonthArrow !== bool) {\n                    toggleClass(self.prevMonthNav, \"flatpickr-disabled\", bool);\n                    self.__hidePrevMonthArrow = bool;\n                }\n            },\n        });\n        Object.defineProperty(self, \"_hideNextMonthArrow\", {\n            get: function () { return self.__hideNextMonthArrow; },\n            set: function (bool) {\n                if (self.__hideNextMonthArrow !== bool) {\n                    toggleClass(self.nextMonthNav, \"flatpickr-disabled\", bool);\n                    self.__hideNextMonthArrow = bool;\n                }\n            },\n        });\n        self.currentYearElement = self.yearElements[0];\n        updateNavigationCurrentMonth();\n        return self.monthNav;\n    }\n    function buildTime() {\n        self.calendarContainer.classList.add(\"hasTime\");\n        if (self.config.noCalendar)\n            self.calendarContainer.classList.add(\"noCalendar\");\n        var defaults = getDefaultHours(self.config);\n        self.timeContainer = createElement(\"div\", \"flatpickr-time\");\n        self.timeContainer.tabIndex = -1;\n        var separator = createElement(\"span\", \"flatpickr-time-separator\", \":\");\n        var hourInput = createNumberInput(\"flatpickr-hour\", {\n            \"aria-label\": self.l10n.hourAriaLabel,\n        });\n        self.hourElement = hourInput.getElementsByTagName(\"input\")[0];\n        var minuteInput = createNumberInput(\"flatpickr-minute\", {\n            \"aria-label\": self.l10n.minuteAriaLabel,\n        });\n        self.minuteElement = minuteInput.getElementsByTagName(\"input\")[0];\n        self.hourElement.tabIndex = self.minuteElement.tabIndex = -1;\n        self.hourElement.value = pad(self.latestSelectedDateObj\n            ? self.latestSelectedDateObj.getHours()\n            : self.config.time_24hr\n                ? defaults.hours\n                : military2ampm(defaults.hours));\n        self.minuteElement.value = pad(self.latestSelectedDateObj\n            ? self.latestSelectedDateObj.getMinutes()\n            : defaults.minutes);\n        self.hourElement.setAttribute(\"step\", self.config.hourIncrement.toString());\n        self.minuteElement.setAttribute(\"step\", self.config.minuteIncrement.toString());\n        self.hourElement.setAttribute(\"min\", self.config.time_24hr ? \"0\" : \"1\");\n        self.hourElement.setAttribute(\"max\", self.config.time_24hr ? \"23\" : \"12\");\n        self.hourElement.setAttribute(\"maxlength\", \"2\");\n        self.minuteElement.setAttribute(\"min\", \"0\");\n        self.minuteElement.setAttribute(\"max\", \"59\");\n        self.minuteElement.setAttribute(\"maxlength\", \"2\");\n        self.timeContainer.appendChild(hourInput);\n        self.timeContainer.appendChild(separator);\n        self.timeContainer.appendChild(minuteInput);\n        if (self.config.time_24hr)\n            self.timeContainer.classList.add(\"time24hr\");\n        if (self.config.enableSeconds) {\n            self.timeContainer.classList.add(\"hasSeconds\");\n            var secondInput = createNumberInput(\"flatpickr-second\");\n            self.secondElement = secondInput.getElementsByTagName(\"input\")[0];\n            self.secondElement.value = pad(self.latestSelectedDateObj\n                ? self.latestSelectedDateObj.getSeconds()\n                : defaults.seconds);\n            self.secondElement.setAttribute(\"step\", self.minuteElement.getAttribute(\"step\"));\n            self.secondElement.setAttribute(\"min\", \"0\");\n            self.secondElement.setAttribute(\"max\", \"59\");\n            self.secondElement.setAttribute(\"maxlength\", \"2\");\n            self.timeContainer.appendChild(createElement(\"span\", \"flatpickr-time-separator\", \":\"));\n            self.timeContainer.appendChild(secondInput);\n        }\n        if (!self.config.time_24hr) {\n            self.amPM = createElement(\"span\", \"flatpickr-am-pm\", self.l10n.amPM[int((self.latestSelectedDateObj\n                ? self.hourElement.value\n                : self.config.defaultHour) > 11)]);\n            self.amPM.title = self.l10n.toggleTitle;\n            self.amPM.tabIndex = -1;\n            self.timeContainer.appendChild(self.amPM);\n        }\n        return self.timeContainer;\n    }\n    function buildWeekdays() {\n        if (!self.weekdayContainer)\n            self.weekdayContainer = createElement(\"div\", \"flatpickr-weekdays\");\n        else\n            clearNode(self.weekdayContainer);\n        for (var i = self.config.showMonths; i--;) {\n            var container = createElement(\"div\", \"flatpickr-weekdaycontainer\");\n            self.weekdayContainer.appendChild(container);\n        }\n        updateWeekdays();\n        return self.weekdayContainer;\n    }\n    function updateWeekdays() {\n        if (!self.weekdayContainer) {\n            return;\n        }\n        var firstDayOfWeek = self.l10n.firstDayOfWeek;\n        var weekdays = __spreadArrays(self.l10n.weekdays.shorthand);\n        if (firstDayOfWeek > 0 && firstDayOfWeek < weekdays.length) {\n            weekdays = __spreadArrays(weekdays.splice(firstDayOfWeek, weekdays.length), weekdays.splice(0, firstDayOfWeek));\n        }\n        for (var i = self.config.showMonths; i--;) {\n            self.weekdayContainer.children[i].innerHTML = \"\\n      <span class='flatpickr-weekday'>\\n        \" + weekdays.join(\"</span><span class='flatpickr-weekday'>\") + \"\\n      </span>\\n      \";\n        }\n    }\n    function buildWeeks() {\n        self.calendarContainer.classList.add(\"hasWeeks\");\n        var weekWrapper = createElement(\"div\", \"flatpickr-weekwrapper\");\n        weekWrapper.appendChild(createElement(\"span\", \"flatpickr-weekday\", self.l10n.weekAbbreviation));\n        var weekNumbers = createElement(\"div\", \"flatpickr-weeks\");\n        weekWrapper.appendChild(weekNumbers);\n        return {\n            weekWrapper: weekWrapper,\n            weekNumbers: weekNumbers,\n        };\n    }\n    function changeMonth(value, isOffset) {\n        if (isOffset === void 0) { isOffset = true; }\n        var delta = isOffset ? value : value - self.currentMonth;\n        if ((delta < 0 && self._hidePrevMonthArrow === true) ||\n            (delta > 0 && self._hideNextMonthArrow === true))\n            return;\n        self.currentMonth += delta;\n        if (self.currentMonth < 0 || self.currentMonth > 11) {\n            self.currentYear += self.currentMonth > 11 ? 1 : -1;\n            self.currentMonth = (self.currentMonth + 12) % 12;\n            triggerEvent(\"onYearChange\");\n            buildMonthSwitch();\n        }\n        buildDays();\n        triggerEvent(\"onMonthChange\");\n        updateNavigationCurrentMonth();\n    }\n    function clear(triggerChangeEvent, toInitial) {\n        if (triggerChangeEvent === void 0) { triggerChangeEvent = true; }\n        if (toInitial === void 0) { toInitial = true; }\n        self.input.value = \"\";\n        if (self.altInput !== undefined)\n            self.altInput.value = \"\";\n        if (self.mobileInput !== undefined)\n            self.mobileInput.value = \"\";\n        self.selectedDates = [];\n        self.latestSelectedDateObj = undefined;\n        if (toInitial === true) {\n            self.currentYear = self._initialDate.getFullYear();\n            self.currentMonth = self._initialDate.getMonth();\n        }\n        if (self.config.enableTime === true) {\n            var _a = getDefaultHours(self.config), hours = _a.hours, minutes = _a.minutes, seconds = _a.seconds;\n            setHours(hours, minutes, seconds);\n        }\n        self.redraw();\n        if (triggerChangeEvent)\n            triggerEvent(\"onChange\");\n    }\n    function close() {\n        self.isOpen = false;\n        if (!self.isMobile) {\n            if (self.calendarContainer !== undefined) {\n                self.calendarContainer.classList.remove(\"open\");\n            }\n            if (self._input !== undefined) {\n                self._input.classList.remove(\"active\");\n            }\n        }\n        triggerEvent(\"onClose\");\n    }\n    function destroy() {\n        if (self.config !== undefined)\n            triggerEvent(\"onDestroy\");\n        for (var i = self._handlers.length; i--;) {\n            self._handlers[i].remove();\n        }\n        self._handlers = [];\n        if (self.mobileInput) {\n            if (self.mobileInput.parentNode)\n                self.mobileInput.parentNode.removeChild(self.mobileInput);\n            self.mobileInput = undefined;\n        }\n        else if (self.calendarContainer && self.calendarContainer.parentNode) {\n            if (self.config.static && self.calendarContainer.parentNode) {\n                var wrapper = self.calendarContainer.parentNode;\n                wrapper.lastChild && wrapper.removeChild(wrapper.lastChild);\n                if (wrapper.parentNode) {\n                    while (wrapper.firstChild)\n                        wrapper.parentNode.insertBefore(wrapper.firstChild, wrapper);\n                    wrapper.parentNode.removeChild(wrapper);\n                }\n            }\n            else\n                self.calendarContainer.parentNode.removeChild(self.calendarContainer);\n        }\n        if (self.altInput) {\n            self.input.type = \"text\";\n            if (self.altInput.parentNode)\n                self.altInput.parentNode.removeChild(self.altInput);\n            delete self.altInput;\n        }\n        if (self.input) {\n            self.input.type = self.input._type;\n            self.input.classList.remove(\"flatpickr-input\");\n            self.input.removeAttribute(\"readonly\");\n        }\n        [\n            \"_showTimeInput\",\n            \"latestSelectedDateObj\",\n            \"_hideNextMonthArrow\",\n            \"_hidePrevMonthArrow\",\n            \"__hideNextMonthArrow\",\n            \"__hidePrevMonthArrow\",\n            \"isMobile\",\n            \"isOpen\",\n            \"selectedDateElem\",\n            \"minDateHasTime\",\n            \"maxDateHasTime\",\n            \"days\",\n            \"daysContainer\",\n            \"_input\",\n            \"_positionElement\",\n            \"innerContainer\",\n            \"rContainer\",\n            \"monthNav\",\n            \"todayDateElem\",\n            \"calendarContainer\",\n            \"weekdayContainer\",\n            \"prevMonthNav\",\n            \"nextMonthNav\",\n            \"monthsDropdownContainer\",\n            \"currentMonthElement\",\n            \"currentYearElement\",\n            \"navigationCurrentMonth\",\n            \"selectedDateElem\",\n            \"config\",\n        ].forEach(function (k) {\n            try {\n                delete self[k];\n            }\n            catch (_) { }\n        });\n    }\n    function isCalendarElem(elem) {\n        return self.calendarContainer.contains(elem);\n    }\n    function documentClick(e) {\n        if (self.isOpen && !self.config.inline) {\n            var eventTarget_1 = getEventTarget(e);\n            var isCalendarElement = isCalendarElem(eventTarget_1);\n            var isInput = eventTarget_1 === self.input ||\n                eventTarget_1 === self.altInput ||\n                self.element.contains(eventTarget_1) ||\n                (e.path &&\n                    e.path.indexOf &&\n                    (~e.path.indexOf(self.input) ||\n                        ~e.path.indexOf(self.altInput)));\n            var lostFocus = !isInput &&\n                !isCalendarElement &&\n                !isCalendarElem(e.relatedTarget);\n            var isIgnored = !self.config.ignoredFocusElements.some(function (elem) {\n                return elem.contains(eventTarget_1);\n            });\n            if (lostFocus && isIgnored) {\n                if (self.config.allowInput) {\n                    self.setDate(self._input.value, false, self.config.altInput\n                        ? self.config.altFormat\n                        : self.config.dateFormat);\n                }\n                if (self.timeContainer !== undefined &&\n                    self.minuteElement !== undefined &&\n                    self.hourElement !== undefined &&\n                    self.input.value !== \"\" &&\n                    self.input.value !== undefined) {\n                    updateTime();\n                }\n                self.close();\n                if (self.config &&\n                    self.config.mode === \"range\" &&\n                    self.selectedDates.length === 1)\n                    self.clear(false);\n            }\n        }\n    }\n    function changeYear(newYear) {\n        if (!newYear ||\n            (self.config.minDate && newYear < self.config.minDate.getFullYear()) ||\n            (self.config.maxDate && newYear > self.config.maxDate.getFullYear()))\n            return;\n        var newYearNum = newYear, isNewYear = self.currentYear !== newYearNum;\n        self.currentYear = newYearNum || self.currentYear;\n        if (self.config.maxDate &&\n            self.currentYear === self.config.maxDate.getFullYear()) {\n            self.currentMonth = Math.min(self.config.maxDate.getMonth(), self.currentMonth);\n        }\n        else if (self.config.minDate &&\n            self.currentYear === self.config.minDate.getFullYear()) {\n            self.currentMonth = Math.max(self.config.minDate.getMonth(), self.currentMonth);\n        }\n        if (isNewYear) {\n            self.redraw();\n            triggerEvent(\"onYearChange\");\n            buildMonthSwitch();\n        }\n    }\n    function isEnabled(date, timeless) {\n        var _a;\n        if (timeless === void 0) { timeless = true; }\n        var dateToCheck = self.parseDate(date, undefined, timeless);\n        if ((self.config.minDate &&\n            dateToCheck &&\n            compareDates(dateToCheck, self.config.minDate, timeless !== undefined ? timeless : !self.minDateHasTime) < 0) ||\n            (self.config.maxDate &&\n                dateToCheck &&\n                compareDates(dateToCheck, self.config.maxDate, timeless !== undefined ? timeless : !self.maxDateHasTime) > 0))\n            return false;\n        if (!self.config.enable && self.config.disable.length === 0)\n            return true;\n        if (dateToCheck === undefined)\n            return false;\n        var bool = !!self.config.enable, array = (_a = self.config.enable) !== null && _a !== void 0 ? _a : self.config.disable;\n        for (var i = 0, d = void 0; i < array.length; i++) {\n            d = array[i];\n            if (typeof d === \"function\" &&\n                d(dateToCheck))\n                return bool;\n            else if (d instanceof Date &&\n                dateToCheck !== undefined &&\n                d.getTime() === dateToCheck.getTime())\n                return bool;\n            else if (typeof d === \"string\") {\n                var parsed = self.parseDate(d, undefined, true);\n                return parsed && parsed.getTime() === dateToCheck.getTime()\n                    ? bool\n                    : !bool;\n            }\n            else if (typeof d === \"object\" &&\n                dateToCheck !== undefined &&\n                d.from &&\n                d.to &&\n                dateToCheck.getTime() >= d.from.getTime() &&\n                dateToCheck.getTime() <= d.to.getTime())\n                return bool;\n        }\n        return !bool;\n    }\n    function isInView(elem) {\n        if (self.daysContainer !== undefined)\n            return (elem.className.indexOf(\"hidden\") === -1 &&\n                elem.className.indexOf(\"flatpickr-disabled\") === -1 &&\n                self.daysContainer.contains(elem));\n        return false;\n    }\n    function onBlur(e) {\n        var isInput = e.target === self._input;\n        var valueChanged = self._input.value.trimEnd() !== getDateStr();\n        if (isInput &&\n            valueChanged &&\n            !(e.relatedTarget && isCalendarElem(e.relatedTarget))) {\n            self.setDate(self._input.value, true, e.target === self.altInput\n                ? self.config.altFormat\n                : self.config.dateFormat);\n        }\n    }\n    function onKeyDown(e) {\n        var eventTarget = getEventTarget(e);\n        var isInput = self.config.wrap\n            ? element.contains(eventTarget)\n            : eventTarget === self._input;\n        var allowInput = self.config.allowInput;\n        var allowKeydown = self.isOpen && (!allowInput || !isInput);\n        var allowInlineKeydown = self.config.inline && isInput && !allowInput;\n        if (e.keyCode === 13 && isInput) {\n            if (allowInput) {\n                self.setDate(self._input.value, true, eventTarget === self.altInput\n                    ? self.config.altFormat\n                    : self.config.dateFormat);\n                self.close();\n                return eventTarget.blur();\n            }\n            else {\n                self.open();\n            }\n        }\n        else if (isCalendarElem(eventTarget) ||\n            allowKeydown ||\n            allowInlineKeydown) {\n            var isTimeObj = !!self.timeContainer &&\n                self.timeContainer.contains(eventTarget);\n            switch (e.keyCode) {\n                case 13:\n                    if (isTimeObj) {\n                        e.preventDefault();\n                        updateTime();\n                        focusAndClose();\n                    }\n                    else\n                        selectDate(e);\n                    break;\n                case 27:\n                    e.preventDefault();\n                    focusAndClose();\n                    break;\n                case 8:\n                case 46:\n                    if (isInput && !self.config.allowInput) {\n                        e.preventDefault();\n                        self.clear();\n                    }\n                    break;\n                case 37:\n                case 39:\n                    if (!isTimeObj && !isInput) {\n                        e.preventDefault();\n                        var activeElement = getClosestActiveElement();\n                        if (self.daysContainer !== undefined &&\n                            (allowInput === false ||\n                                (activeElement && isInView(activeElement)))) {\n                            var delta_1 = e.keyCode === 39 ? 1 : -1;\n                            if (!e.ctrlKey)\n                                focusOnDay(undefined, delta_1);\n                            else {\n                                e.stopPropagation();\n                                changeMonth(delta_1);\n                                focusOnDay(getFirstAvailableDay(1), 0);\n                            }\n                        }\n                    }\n                    else if (self.hourElement)\n                        self.hourElement.focus();\n                    break;\n                case 38:\n                case 40:\n                    e.preventDefault();\n                    var delta = e.keyCode === 40 ? 1 : -1;\n                    if ((self.daysContainer &&\n                        eventTarget.$i !== undefined) ||\n                        eventTarget === self.input ||\n                        eventTarget === self.altInput) {\n                        if (e.ctrlKey) {\n                            e.stopPropagation();\n                            changeYear(self.currentYear - delta);\n                            focusOnDay(getFirstAvailableDay(1), 0);\n                        }\n                        else if (!isTimeObj)\n                            focusOnDay(undefined, delta * 7);\n                    }\n                    else if (eventTarget === self.currentYearElement) {\n                        changeYear(self.currentYear - delta);\n                    }\n                    else if (self.config.enableTime) {\n                        if (!isTimeObj && self.hourElement)\n                            self.hourElement.focus();\n                        updateTime(e);\n                        self._debouncedChange();\n                    }\n                    break;\n                case 9:\n                    if (isTimeObj) {\n                        var elems = [\n                            self.hourElement,\n                            self.minuteElement,\n                            self.secondElement,\n                            self.amPM,\n                        ]\n                            .concat(self.pluginElements)\n                            .filter(function (x) { return x; });\n                        var i = elems.indexOf(eventTarget);\n                        if (i !== -1) {\n                            var target = elems[i + (e.shiftKey ? -1 : 1)];\n                            e.preventDefault();\n                            (target || self._input).focus();\n                        }\n                    }\n                    else if (!self.config.noCalendar &&\n                        self.daysContainer &&\n                        self.daysContainer.contains(eventTarget) &&\n                        e.shiftKey) {\n                        e.preventDefault();\n                        self._input.focus();\n                    }\n                    break;\n                default:\n                    break;\n            }\n        }\n        if (self.amPM !== undefined && eventTarget === self.amPM) {\n            switch (e.key) {\n                case self.l10n.amPM[0].charAt(0):\n                case self.l10n.amPM[0].charAt(0).toLowerCase():\n                    self.amPM.textContent = self.l10n.amPM[0];\n                    setHoursFromInputs();\n                    updateValue();\n                    break;\n                case self.l10n.amPM[1].charAt(0):\n                case self.l10n.amPM[1].charAt(0).toLowerCase():\n                    self.amPM.textContent = self.l10n.amPM[1];\n                    setHoursFromInputs();\n                    updateValue();\n                    break;\n            }\n        }\n        if (isInput || isCalendarElem(eventTarget)) {\n            triggerEvent(\"onKeyDown\", e);\n        }\n    }\n    function onMouseOver(elem, cellClass) {\n        if (cellClass === void 0) { cellClass = \"flatpickr-day\"; }\n        if (self.selectedDates.length !== 1 ||\n            (elem &&\n                (!elem.classList.contains(cellClass) ||\n                    elem.classList.contains(\"flatpickr-disabled\"))))\n            return;\n        var hoverDate = elem\n            ? elem.dateObj.getTime()\n            : self.days.firstElementChild.dateObj.getTime(), initialDate = self.parseDate(self.selectedDates[0], undefined, true).getTime(), rangeStartDate = Math.min(hoverDate, self.selectedDates[0].getTime()), rangeEndDate = Math.max(hoverDate, self.selectedDates[0].getTime());\n        var containsDisabled = false;\n        var minRange = 0, maxRange = 0;\n        for (var t = rangeStartDate; t < rangeEndDate; t += duration.DAY) {\n            if (!isEnabled(new Date(t), true)) {\n                containsDisabled =\n                    containsDisabled || (t > rangeStartDate && t < rangeEndDate);\n                if (t < initialDate && (!minRange || t > minRange))\n                    minRange = t;\n                else if (t > initialDate && (!maxRange || t < maxRange))\n                    maxRange = t;\n            }\n        }\n        var hoverableCells = Array.from(self.rContainer.querySelectorAll(\"*:nth-child(-n+\" + self.config.showMonths + \") > .\" + cellClass));\n        hoverableCells.forEach(function (dayElem) {\n            var date = dayElem.dateObj;\n            var timestamp = date.getTime();\n            var outOfRange = (minRange > 0 && timestamp < minRange) ||\n                (maxRange > 0 && timestamp > maxRange);\n            if (outOfRange) {\n                dayElem.classList.add(\"notAllowed\");\n                [\"inRange\", \"startRange\", \"endRange\"].forEach(function (c) {\n                    dayElem.classList.remove(c);\n                });\n                return;\n            }\n            else if (containsDisabled && !outOfRange)\n                return;\n            [\"startRange\", \"inRange\", \"endRange\", \"notAllowed\"].forEach(function (c) {\n                dayElem.classList.remove(c);\n            });\n            if (elem !== undefined) {\n                elem.classList.add(hoverDate <= self.selectedDates[0].getTime()\n                    ? \"startRange\"\n                    : \"endRange\");\n                if (initialDate < hoverDate && timestamp === initialDate)\n                    dayElem.classList.add(\"startRange\");\n                else if (initialDate > hoverDate && timestamp === initialDate)\n                    dayElem.classList.add(\"endRange\");\n                if (timestamp >= minRange &&\n                    (maxRange === 0 || timestamp <= maxRange) &&\n                    isBetween(timestamp, initialDate, hoverDate))\n                    dayElem.classList.add(\"inRange\");\n            }\n        });\n    }\n    function onResize() {\n        if (self.isOpen && !self.config.static && !self.config.inline)\n            positionCalendar();\n    }\n    function open(e, positionElement) {\n        if (positionElement === void 0) { positionElement = self._positionElement; }\n        if (self.isMobile === true) {\n            if (e) {\n                e.preventDefault();\n                var eventTarget = getEventTarget(e);\n                if (eventTarget) {\n                    eventTarget.blur();\n                }\n            }\n            if (self.mobileInput !== undefined) {\n                self.mobileInput.focus();\n                self.mobileInput.click();\n            }\n            triggerEvent(\"onOpen\");\n            return;\n        }\n        else if (self._input.disabled || self.config.inline) {\n            return;\n        }\n        var wasOpen = self.isOpen;\n        self.isOpen = true;\n        if (!wasOpen) {\n            self.calendarContainer.classList.add(\"open\");\n            self._input.classList.add(\"active\");\n            triggerEvent(\"onOpen\");\n            positionCalendar(positionElement);\n        }\n        if (self.config.enableTime === true && self.config.noCalendar === true) {\n            if (self.config.allowInput === false &&\n                (e === undefined ||\n                    !self.timeContainer.contains(e.relatedTarget))) {\n                setTimeout(function () { return self.hourElement.select(); }, 50);\n            }\n        }\n    }\n    function minMaxDateSetter(type) {\n        return function (date) {\n            var dateObj = (self.config[\"_\" + type + \"Date\"] = self.parseDate(date, self.config.dateFormat));\n            var inverseDateObj = self.config[\"_\" + (type === \"min\" ? \"max\" : \"min\") + \"Date\"];\n            if (dateObj !== undefined) {\n                self[type === \"min\" ? \"minDateHasTime\" : \"maxDateHasTime\"] =\n                    dateObj.getHours() > 0 ||\n                        dateObj.getMinutes() > 0 ||\n                        dateObj.getSeconds() > 0;\n            }\n            if (self.selectedDates) {\n                self.selectedDates = self.selectedDates.filter(function (d) { return isEnabled(d); });\n                if (!self.selectedDates.length && type === \"min\")\n                    setHoursFromDate(dateObj);\n                updateValue();\n            }\n            if (self.daysContainer) {\n                redraw();\n                if (dateObj !== undefined)\n                    self.currentYearElement[type] = dateObj.getFullYear().toString();\n                else\n                    self.currentYearElement.removeAttribute(type);\n                self.currentYearElement.disabled =\n                    !!inverseDateObj &&\n                        dateObj !== undefined &&\n                        inverseDateObj.getFullYear() === dateObj.getFullYear();\n            }\n        };\n    }\n    function parseConfig() {\n        var boolOpts = [\n            \"wrap\",\n            \"weekNumbers\",\n            \"allowInput\",\n            \"allowInvalidPreload\",\n            \"clickOpens\",\n            \"time_24hr\",\n            \"enableTime\",\n            \"noCalendar\",\n            \"altInput\",\n            \"shorthandCurrentMonth\",\n            \"inline\",\n            \"static\",\n            \"enableSeconds\",\n            \"disableMobile\",\n        ];\n        var userConfig = __assign(__assign({}, JSON.parse(JSON.stringify(element.dataset || {}))), instanceConfig);\n        var formats = {};\n        self.config.parseDate = userConfig.parseDate;\n        self.config.formatDate = userConfig.formatDate;\n        Object.defineProperty(self.config, \"enable\", {\n            get: function () { return self.config._enable; },\n            set: function (dates) {\n                self.config._enable = parseDateRules(dates);\n            },\n        });\n        Object.defineProperty(self.config, \"disable\", {\n            get: function () { return self.config._disable; },\n            set: function (dates) {\n                self.config._disable = parseDateRules(dates);\n            },\n        });\n        var timeMode = userConfig.mode === \"time\";\n        if (!userConfig.dateFormat && (userConfig.enableTime || timeMode)) {\n            var defaultDateFormat = flatpickr.defaultConfig.dateFormat || defaultOptions.dateFormat;\n            formats.dateFormat =\n                userConfig.noCalendar || timeMode\n                    ? \"H:i\" + (userConfig.enableSeconds ? \":S\" : \"\")\n                    : defaultDateFormat + \" H:i\" + (userConfig.enableSeconds ? \":S\" : \"\");\n        }\n        if (userConfig.altInput &&\n            (userConfig.enableTime || timeMode) &&\n            !userConfig.altFormat) {\n            var defaultAltFormat = flatpickr.defaultConfig.altFormat || defaultOptions.altFormat;\n            formats.altFormat =\n                userConfig.noCalendar || timeMode\n                    ? \"h:i\" + (userConfig.enableSeconds ? \":S K\" : \" K\")\n                    : defaultAltFormat + (\" h:i\" + (userConfig.enableSeconds ? \":S\" : \"\") + \" K\");\n        }\n        Object.defineProperty(self.config, \"minDate\", {\n            get: function () { return self.config._minDate; },\n            set: minMaxDateSetter(\"min\"),\n        });\n        Object.defineProperty(self.config, \"maxDate\", {\n            get: function () { return self.config._maxDate; },\n            set: minMaxDateSetter(\"max\"),\n        });\n        var minMaxTimeSetter = function (type) { return function (val) {\n            self.config[type === \"min\" ? \"_minTime\" : \"_maxTime\"] = self.parseDate(val, \"H:i:S\");\n        }; };\n        Object.defineProperty(self.config, \"minTime\", {\n            get: function () { return self.config._minTime; },\n            set: minMaxTimeSetter(\"min\"),\n        });\n        Object.defineProperty(self.config, \"maxTime\", {\n            get: function () { return self.config._maxTime; },\n            set: minMaxTimeSetter(\"max\"),\n        });\n        if (userConfig.mode === \"time\") {\n            self.config.noCalendar = true;\n            self.config.enableTime = true;\n        }\n        Object.assign(self.config, formats, userConfig);\n        for (var i = 0; i < boolOpts.length; i++)\n            self.config[boolOpts[i]] =\n                self.config[boolOpts[i]] === true ||\n                    self.config[boolOpts[i]] === \"true\";\n        HOOKS.filter(function (hook) { return self.config[hook] !== undefined; }).forEach(function (hook) {\n            self.config[hook] = arrayify(self.config[hook] || []).map(bindToInstance);\n        });\n        self.isMobile =\n            !self.config.disableMobile &&\n                !self.config.inline &&\n                self.config.mode === \"single\" &&\n                !self.config.disable.length &&\n                !self.config.enable &&\n                !self.config.weekNumbers &&\n                /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n        for (var i = 0; i < self.config.plugins.length; i++) {\n            var pluginConf = self.config.plugins[i](self) || {};\n            for (var key in pluginConf) {\n                if (HOOKS.indexOf(key) > -1) {\n                    self.config[key] = arrayify(pluginConf[key])\n                        .map(bindToInstance)\n                        .concat(self.config[key]);\n                }\n                else if (typeof userConfig[key] === \"undefined\")\n                    self.config[key] = pluginConf[key];\n            }\n        }\n        if (!userConfig.altInputClass) {\n            self.config.altInputClass =\n                getInputElem().className + \" \" + self.config.altInputClass;\n        }\n        triggerEvent(\"onParseConfig\");\n    }\n    function getInputElem() {\n        return self.config.wrap\n            ? element.querySelector(\"[data-input]\")\n            : element;\n    }\n    function setupLocale() {\n        if (typeof self.config.locale !== \"object\" &&\n            typeof flatpickr.l10ns[self.config.locale] === \"undefined\")\n            self.config.errorHandler(new Error(\"flatpickr: invalid locale \" + self.config.locale));\n        self.l10n = __assign(__assign({}, flatpickr.l10ns.default), (typeof self.config.locale === \"object\"\n            ? self.config.locale\n            : self.config.locale !== \"default\"\n                ? flatpickr.l10ns[self.config.locale]\n                : undefined));\n        tokenRegex.D = \"(\" + self.l10n.weekdays.shorthand.join(\"|\") + \")\";\n        tokenRegex.l = \"(\" + self.l10n.weekdays.longhand.join(\"|\") + \")\";\n        tokenRegex.M = \"(\" + self.l10n.months.shorthand.join(\"|\") + \")\";\n        tokenRegex.F = \"(\" + self.l10n.months.longhand.join(\"|\") + \")\";\n        tokenRegex.K = \"(\" + self.l10n.amPM[0] + \"|\" + self.l10n.amPM[1] + \"|\" + self.l10n.amPM[0].toLowerCase() + \"|\" + self.l10n.amPM[1].toLowerCase() + \")\";\n        var userConfig = __assign(__assign({}, instanceConfig), JSON.parse(JSON.stringify(element.dataset || {})));\n        if (userConfig.time_24hr === undefined &&\n            flatpickr.defaultConfig.time_24hr === undefined) {\n            self.config.time_24hr = self.l10n.time_24hr;\n        }\n        self.formatDate = createDateFormatter(self);\n        self.parseDate = createDateParser({ config: self.config, l10n: self.l10n });\n    }\n    function positionCalendar(customPositionElement) {\n        if (typeof self.config.position === \"function\") {\n            return void self.config.position(self, customPositionElement);\n        }\n        if (self.calendarContainer === undefined)\n            return;\n        triggerEvent(\"onPreCalendarPosition\");\n        var positionElement = customPositionElement || self._positionElement;\n        var calendarHeight = Array.prototype.reduce.call(self.calendarContainer.children, (function (acc, child) { return acc + child.offsetHeight; }), 0), calendarWidth = self.calendarContainer.offsetWidth, configPos = self.config.position.split(\" \"), configPosVertical = configPos[0], configPosHorizontal = configPos.length > 1 ? configPos[1] : null, inputBounds = positionElement.getBoundingClientRect(), distanceFromBottom = window.innerHeight - inputBounds.bottom, showOnTop = configPosVertical === \"above\" ||\n            (configPosVertical !== \"below\" &&\n                distanceFromBottom < calendarHeight &&\n                inputBounds.top > calendarHeight);\n        var top = window.pageYOffset +\n            inputBounds.top +\n            (!showOnTop ? positionElement.offsetHeight + 2 : -calendarHeight - 2);\n        toggleClass(self.calendarContainer, \"arrowTop\", !showOnTop);\n        toggleClass(self.calendarContainer, \"arrowBottom\", showOnTop);\n        if (self.config.inline)\n            return;\n        var left = window.pageXOffset + inputBounds.left;\n        var isCenter = false;\n        var isRight = false;\n        if (configPosHorizontal === \"center\") {\n            left -= (calendarWidth - inputBounds.width) / 2;\n            isCenter = true;\n        }\n        else if (configPosHorizontal === \"right\") {\n            left -= calendarWidth - inputBounds.width;\n            isRight = true;\n        }\n        toggleClass(self.calendarContainer, \"arrowLeft\", !isCenter && !isRight);\n        toggleClass(self.calendarContainer, \"arrowCenter\", isCenter);\n        toggleClass(self.calendarContainer, \"arrowRight\", isRight);\n        var right = window.document.body.offsetWidth -\n            (window.pageXOffset + inputBounds.right);\n        var rightMost = left + calendarWidth > window.document.body.offsetWidth;\n        var centerMost = right + calendarWidth > window.document.body.offsetWidth;\n        toggleClass(self.calendarContainer, \"rightMost\", rightMost);\n        if (self.config.static)\n            return;\n        self.calendarContainer.style.top = top + \"px\";\n        if (!rightMost) {\n            self.calendarContainer.style.left = left + \"px\";\n            self.calendarContainer.style.right = \"auto\";\n        }\n        else if (!centerMost) {\n            self.calendarContainer.style.left = \"auto\";\n            self.calendarContainer.style.right = right + \"px\";\n        }\n        else {\n            var doc = getDocumentStyleSheet();\n            if (doc === undefined)\n                return;\n            var bodyWidth = window.document.body.offsetWidth;\n            var centerLeft = Math.max(0, bodyWidth / 2 - calendarWidth / 2);\n            var centerBefore = \".flatpickr-calendar.centerMost:before\";\n            var centerAfter = \".flatpickr-calendar.centerMost:after\";\n            var centerIndex = doc.cssRules.length;\n            var centerStyle = \"{left:\" + inputBounds.left + \"px;right:auto;}\";\n            toggleClass(self.calendarContainer, \"rightMost\", false);\n            toggleClass(self.calendarContainer, \"centerMost\", true);\n            doc.insertRule(centerBefore + \",\" + centerAfter + centerStyle, centerIndex);\n            self.calendarContainer.style.left = centerLeft + \"px\";\n            self.calendarContainer.style.right = \"auto\";\n        }\n    }\n    function getDocumentStyleSheet() {\n        var editableSheet = null;\n        for (var i = 0; i < document.styleSheets.length; i++) {\n            var sheet = document.styleSheets[i];\n            if (!sheet.cssRules)\n                continue;\n            try {\n                sheet.cssRules;\n            }\n            catch (err) {\n                continue;\n            }\n            editableSheet = sheet;\n            break;\n        }\n        return editableSheet != null ? editableSheet : createStyleSheet();\n    }\n    function createStyleSheet() {\n        var style = document.createElement(\"style\");\n        document.head.appendChild(style);\n        return style.sheet;\n    }\n    function redraw() {\n        if (self.config.noCalendar || self.isMobile)\n            return;\n        buildMonthSwitch();\n        updateNavigationCurrentMonth();\n        buildDays();\n    }\n    function focusAndClose() {\n        self._input.focus();\n        if (window.navigator.userAgent.indexOf(\"MSIE\") !== -1 ||\n            navigator.msMaxTouchPoints !== undefined) {\n            setTimeout(self.close, 0);\n        }\n        else {\n            self.close();\n        }\n    }\n    function selectDate(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        var isSelectable = function (day) {\n            return day.classList &&\n                day.classList.contains(\"flatpickr-day\") &&\n                !day.classList.contains(\"flatpickr-disabled\") &&\n                !day.classList.contains(\"notAllowed\");\n        };\n        var t = findParent(getEventTarget(e), isSelectable);\n        if (t === undefined)\n            return;\n        var target = t;\n        var selectedDate = (self.latestSelectedDateObj = new Date(target.dateObj.getTime()));\n        var shouldChangeMonth = (selectedDate.getMonth() < self.currentMonth ||\n            selectedDate.getMonth() >\n                self.currentMonth + self.config.showMonths - 1) &&\n            self.config.mode !== \"range\";\n        self.selectedDateElem = target;\n        if (self.config.mode === \"single\")\n            self.selectedDates = [selectedDate];\n        else if (self.config.mode === \"multiple\") {\n            var selectedIndex = isDateSelected(selectedDate);\n            if (selectedIndex)\n                self.selectedDates.splice(parseInt(selectedIndex), 1);\n            else\n                self.selectedDates.push(selectedDate);\n        }\n        else if (self.config.mode === \"range\") {\n            if (self.selectedDates.length === 2) {\n                self.clear(false, false);\n            }\n            self.latestSelectedDateObj = selectedDate;\n            self.selectedDates.push(selectedDate);\n            if (compareDates(selectedDate, self.selectedDates[0], true) !== 0)\n                self.selectedDates.sort(function (a, b) { return a.getTime() - b.getTime(); });\n        }\n        setHoursFromInputs();\n        if (shouldChangeMonth) {\n            var isNewYear = self.currentYear !== selectedDate.getFullYear();\n            self.currentYear = selectedDate.getFullYear();\n            self.currentMonth = selectedDate.getMonth();\n            if (isNewYear) {\n                triggerEvent(\"onYearChange\");\n                buildMonthSwitch();\n            }\n            triggerEvent(\"onMonthChange\");\n        }\n        updateNavigationCurrentMonth();\n        buildDays();\n        updateValue();\n        if (!shouldChangeMonth &&\n            self.config.mode !== \"range\" &&\n            self.config.showMonths === 1)\n            focusOnDayElem(target);\n        else if (self.selectedDateElem !== undefined &&\n            self.hourElement === undefined) {\n            self.selectedDateElem && self.selectedDateElem.focus();\n        }\n        if (self.hourElement !== undefined)\n            self.hourElement !== undefined && self.hourElement.focus();\n        if (self.config.closeOnSelect) {\n            var single = self.config.mode === \"single\" && !self.config.enableTime;\n            var range = self.config.mode === \"range\" &&\n                self.selectedDates.length === 2 &&\n                !self.config.enableTime;\n            if (single || range) {\n                focusAndClose();\n            }\n        }\n        triggerChange();\n    }\n    var CALLBACKS = {\n        locale: [setupLocale, updateWeekdays],\n        showMonths: [buildMonths, setCalendarWidth, buildWeekdays],\n        minDate: [jumpToDate],\n        maxDate: [jumpToDate],\n        positionElement: [updatePositionElement],\n        clickOpens: [\n            function () {\n                if (self.config.clickOpens === true) {\n                    bind(self._input, \"focus\", self.open);\n                    bind(self._input, \"click\", self.open);\n                }\n                else {\n                    self._input.removeEventListener(\"focus\", self.open);\n                    self._input.removeEventListener(\"click\", self.open);\n                }\n            },\n        ],\n    };\n    function set(option, value) {\n        if (option !== null && typeof option === \"object\") {\n            Object.assign(self.config, option);\n            for (var key in option) {\n                if (CALLBACKS[key] !== undefined)\n                    CALLBACKS[key].forEach(function (x) { return x(); });\n            }\n        }\n        else {\n            self.config[option] = value;\n            if (CALLBACKS[option] !== undefined)\n                CALLBACKS[option].forEach(function (x) { return x(); });\n            else if (HOOKS.indexOf(option) > -1)\n                self.config[option] = arrayify(value);\n        }\n        self.redraw();\n        updateValue(true);\n    }\n    function setSelectedDate(inputDate, format) {\n        var dates = [];\n        if (inputDate instanceof Array)\n            dates = inputDate.map(function (d) { return self.parseDate(d, format); });\n        else if (inputDate instanceof Date || typeof inputDate === \"number\")\n            dates = [self.parseDate(inputDate, format)];\n        else if (typeof inputDate === \"string\") {\n            switch (self.config.mode) {\n                case \"single\":\n                case \"time\":\n                    dates = [self.parseDate(inputDate, format)];\n                    break;\n                case \"multiple\":\n                    dates = inputDate\n                        .split(self.config.conjunction)\n                        .map(function (date) { return self.parseDate(date, format); });\n                    break;\n                case \"range\":\n                    dates = inputDate\n                        .split(self.l10n.rangeSeparator)\n                        .map(function (date) { return self.parseDate(date, format); });\n                    break;\n                default:\n                    break;\n            }\n        }\n        else\n            self.config.errorHandler(new Error(\"Invalid date supplied: \" + JSON.stringify(inputDate)));\n        self.selectedDates = (self.config.allowInvalidPreload\n            ? dates\n            : dates.filter(function (d) { return d instanceof Date && isEnabled(d, false); }));\n        if (self.config.mode === \"range\")\n            self.selectedDates.sort(function (a, b) { return a.getTime() - b.getTime(); });\n    }\n    function setDate(date, triggerChange, format) {\n        if (triggerChange === void 0) { triggerChange = false; }\n        if (format === void 0) { format = self.config.dateFormat; }\n        if ((date !== 0 && !date) || (date instanceof Array && date.length === 0))\n            return self.clear(triggerChange);\n        setSelectedDate(date, format);\n        self.latestSelectedDateObj =\n            self.selectedDates[self.selectedDates.length - 1];\n        self.redraw();\n        jumpToDate(undefined, triggerChange);\n        setHoursFromDate();\n        if (self.selectedDates.length === 0) {\n            self.clear(false);\n        }\n        updateValue(triggerChange);\n        if (triggerChange)\n            triggerEvent(\"onChange\");\n    }\n    function parseDateRules(arr) {\n        return arr\n            .slice()\n            .map(function (rule) {\n            if (typeof rule === \"string\" ||\n                typeof rule === \"number\" ||\n                rule instanceof Date) {\n                return self.parseDate(rule, undefined, true);\n            }\n            else if (rule &&\n                typeof rule === \"object\" &&\n                rule.from &&\n                rule.to)\n                return {\n                    from: self.parseDate(rule.from, undefined),\n                    to: self.parseDate(rule.to, undefined),\n                };\n            return rule;\n        })\n            .filter(function (x) { return x; });\n    }\n    function setupDates() {\n        self.selectedDates = [];\n        self.now = self.parseDate(self.config.now) || new Date();\n        var preloadedDate = self.config.defaultDate ||\n            ((self.input.nodeName === \"INPUT\" ||\n                self.input.nodeName === \"TEXTAREA\") &&\n                self.input.placeholder &&\n                self.input.value === self.input.placeholder\n                ? null\n                : self.input.value);\n        if (preloadedDate)\n            setSelectedDate(preloadedDate, self.config.dateFormat);\n        self._initialDate =\n            self.selectedDates.length > 0\n                ? self.selectedDates[0]\n                : self.config.minDate &&\n                    self.config.minDate.getTime() > self.now.getTime()\n                    ? self.config.minDate\n                    : self.config.maxDate &&\n                        self.config.maxDate.getTime() < self.now.getTime()\n                        ? self.config.maxDate\n                        : self.now;\n        self.currentYear = self._initialDate.getFullYear();\n        self.currentMonth = self._initialDate.getMonth();\n        if (self.selectedDates.length > 0)\n            self.latestSelectedDateObj = self.selectedDates[0];\n        if (self.config.minTime !== undefined)\n            self.config.minTime = self.parseDate(self.config.minTime, \"H:i\");\n        if (self.config.maxTime !== undefined)\n            self.config.maxTime = self.parseDate(self.config.maxTime, \"H:i\");\n        self.minDateHasTime =\n            !!self.config.minDate &&\n                (self.config.minDate.getHours() > 0 ||\n                    self.config.minDate.getMinutes() > 0 ||\n                    self.config.minDate.getSeconds() > 0);\n        self.maxDateHasTime =\n            !!self.config.maxDate &&\n                (self.config.maxDate.getHours() > 0 ||\n                    self.config.maxDate.getMinutes() > 0 ||\n                    self.config.maxDate.getSeconds() > 0);\n    }\n    function setupInputs() {\n        self.input = getInputElem();\n        if (!self.input) {\n            self.config.errorHandler(new Error(\"Invalid input element specified\"));\n            return;\n        }\n        self.input._type = self.input.type;\n        self.input.type = \"text\";\n        self.input.classList.add(\"flatpickr-input\");\n        self._input = self.input;\n        if (self.config.altInput) {\n            self.altInput = createElement(self.input.nodeName, self.config.altInputClass);\n            self._input = self.altInput;\n            self.altInput.placeholder = self.input.placeholder;\n            self.altInput.disabled = self.input.disabled;\n            self.altInput.required = self.input.required;\n            self.altInput.tabIndex = self.input.tabIndex;\n            self.altInput.type = \"text\";\n            self.input.setAttribute(\"type\", \"hidden\");\n            if (!self.config.static && self.input.parentNode)\n                self.input.parentNode.insertBefore(self.altInput, self.input.nextSibling);\n        }\n        if (!self.config.allowInput)\n            self._input.setAttribute(\"readonly\", \"readonly\");\n        updatePositionElement();\n    }\n    function updatePositionElement() {\n        self._positionElement = self.config.positionElement || self._input;\n    }\n    function setupMobile() {\n        var inputType = self.config.enableTime\n            ? self.config.noCalendar\n                ? \"time\"\n                : \"datetime-local\"\n            : \"date\";\n        self.mobileInput = createElement(\"input\", self.input.className + \" flatpickr-mobile\");\n        self.mobileInput.tabIndex = 1;\n        self.mobileInput.type = inputType;\n        self.mobileInput.disabled = self.input.disabled;\n        self.mobileInput.required = self.input.required;\n        self.mobileInput.placeholder = self.input.placeholder;\n        self.mobileFormatStr =\n            inputType === \"datetime-local\"\n                ? \"Y-m-d\\\\TH:i:S\"\n                : inputType === \"date\"\n                    ? \"Y-m-d\"\n                    : \"H:i:S\";\n        if (self.selectedDates.length > 0) {\n            self.mobileInput.defaultValue = self.mobileInput.value = self.formatDate(self.selectedDates[0], self.mobileFormatStr);\n        }\n        if (self.config.minDate)\n            self.mobileInput.min = self.formatDate(self.config.minDate, \"Y-m-d\");\n        if (self.config.maxDate)\n            self.mobileInput.max = self.formatDate(self.config.maxDate, \"Y-m-d\");\n        if (self.input.getAttribute(\"step\"))\n            self.mobileInput.step = String(self.input.getAttribute(\"step\"));\n        self.input.type = \"hidden\";\n        if (self.altInput !== undefined)\n            self.altInput.type = \"hidden\";\n        try {\n            if (self.input.parentNode)\n                self.input.parentNode.insertBefore(self.mobileInput, self.input.nextSibling);\n        }\n        catch (_a) { }\n        bind(self.mobileInput, \"change\", function (e) {\n            self.setDate(getEventTarget(e).value, false, self.mobileFormatStr);\n            triggerEvent(\"onChange\");\n            triggerEvent(\"onClose\");\n        });\n    }\n    function toggle(e) {\n        if (self.isOpen === true)\n            return self.close();\n        self.open(e);\n    }\n    function triggerEvent(event, data) {\n        if (self.config === undefined)\n            return;\n        var hooks = self.config[event];\n        if (hooks !== undefined && hooks.length > 0) {\n            for (var i = 0; hooks[i] && i < hooks.length; i++)\n                hooks[i](self.selectedDates, self.input.value, self, data);\n        }\n        if (event === \"onChange\") {\n            self.input.dispatchEvent(createEvent(\"change\"));\n            self.input.dispatchEvent(createEvent(\"input\"));\n        }\n    }\n    function createEvent(name) {\n        var e = document.createEvent(\"Event\");\n        e.initEvent(name, true, true);\n        return e;\n    }\n    function isDateSelected(date) {\n        for (var i = 0; i < self.selectedDates.length; i++) {\n            var selectedDate = self.selectedDates[i];\n            if (selectedDate instanceof Date &&\n                compareDates(selectedDate, date) === 0)\n                return \"\" + i;\n        }\n        return false;\n    }\n    function isDateInRange(date) {\n        if (self.config.mode !== \"range\" || self.selectedDates.length < 2)\n            return false;\n        return (compareDates(date, self.selectedDates[0]) >= 0 &&\n            compareDates(date, self.selectedDates[1]) <= 0);\n    }\n    function updateNavigationCurrentMonth() {\n        if (self.config.noCalendar || self.isMobile || !self.monthNav)\n            return;\n        self.yearElements.forEach(function (yearElement, i) {\n            var d = new Date(self.currentYear, self.currentMonth, 1);\n            d.setMonth(self.currentMonth + i);\n            if (self.config.showMonths > 1 ||\n                self.config.monthSelectorType === \"static\") {\n                self.monthElements[i].textContent =\n                    monthToStr(d.getMonth(), self.config.shorthandCurrentMonth, self.l10n) + \" \";\n            }\n            else {\n                self.monthsDropdownContainer.value = d.getMonth().toString();\n            }\n            yearElement.value = d.getFullYear().toString();\n        });\n        self._hidePrevMonthArrow =\n            self.config.minDate !== undefined &&\n                (self.currentYear === self.config.minDate.getFullYear()\n                    ? self.currentMonth <= self.config.minDate.getMonth()\n                    : self.currentYear < self.config.minDate.getFullYear());\n        self._hideNextMonthArrow =\n            self.config.maxDate !== undefined &&\n                (self.currentYear === self.config.maxDate.getFullYear()\n                    ? self.currentMonth + 1 > self.config.maxDate.getMonth()\n                    : self.currentYear > self.config.maxDate.getFullYear());\n    }\n    function getDateStr(specificFormat) {\n        var format = specificFormat ||\n            (self.config.altInput ? self.config.altFormat : self.config.dateFormat);\n        return self.selectedDates\n            .map(function (dObj) { return self.formatDate(dObj, format); })\n            .filter(function (d, i, arr) {\n            return self.config.mode !== \"range\" ||\n                self.config.enableTime ||\n                arr.indexOf(d) === i;\n        })\n            .join(self.config.mode !== \"range\"\n            ? self.config.conjunction\n            : self.l10n.rangeSeparator);\n    }\n    function updateValue(triggerChange) {\n        if (triggerChange === void 0) { triggerChange = true; }\n        if (self.mobileInput !== undefined && self.mobileFormatStr) {\n            self.mobileInput.value =\n                self.latestSelectedDateObj !== undefined\n                    ? self.formatDate(self.latestSelectedDateObj, self.mobileFormatStr)\n                    : \"\";\n        }\n        self.input.value = getDateStr(self.config.dateFormat);\n        if (self.altInput !== undefined) {\n            self.altInput.value = getDateStr(self.config.altFormat);\n        }\n        if (triggerChange !== false)\n            triggerEvent(\"onValueUpdate\");\n    }\n    function onMonthNavClick(e) {\n        var eventTarget = getEventTarget(e);\n        var isPrevMonth = self.prevMonthNav.contains(eventTarget);\n        var isNextMonth = self.nextMonthNav.contains(eventTarget);\n        if (isPrevMonth || isNextMonth) {\n            changeMonth(isPrevMonth ? -1 : 1);\n        }\n        else if (self.yearElements.indexOf(eventTarget) >= 0) {\n            eventTarget.select();\n        }\n        else if (eventTarget.classList.contains(\"arrowUp\")) {\n            self.changeYear(self.currentYear + 1);\n        }\n        else if (eventTarget.classList.contains(\"arrowDown\")) {\n            self.changeYear(self.currentYear - 1);\n        }\n    }\n    function timeWrapper(e) {\n        e.preventDefault();\n        var isKeyDown = e.type === \"keydown\", eventTarget = getEventTarget(e), input = eventTarget;\n        if (self.amPM !== undefined && eventTarget === self.amPM) {\n            self.amPM.textContent =\n                self.l10n.amPM[int(self.amPM.textContent === self.l10n.amPM[0])];\n        }\n        var min = parseFloat(input.getAttribute(\"min\")), max = parseFloat(input.getAttribute(\"max\")), step = parseFloat(input.getAttribute(\"step\")), curValue = parseInt(input.value, 10), delta = e.delta ||\n            (isKeyDown ? (e.which === 38 ? 1 : -1) : 0);\n        var newValue = curValue + step * delta;\n        if (typeof input.value !== \"undefined\" && input.value.length === 2) {\n            var isHourElem = input === self.hourElement, isMinuteElem = input === self.minuteElement;\n            if (newValue < min) {\n                newValue =\n                    max +\n                        newValue +\n                        int(!isHourElem) +\n                        (int(isHourElem) && int(!self.amPM));\n                if (isMinuteElem)\n                    incrementNumInput(undefined, -1, self.hourElement);\n            }\n            else if (newValue > max) {\n                newValue =\n                    input === self.hourElement ? newValue - max - int(!self.amPM) : min;\n                if (isMinuteElem)\n                    incrementNumInput(undefined, 1, self.hourElement);\n            }\n            if (self.amPM &&\n                isHourElem &&\n                (step === 1\n                    ? newValue + curValue === 23\n                    : Math.abs(newValue - curValue) > step)) {\n                self.amPM.textContent =\n                    self.l10n.amPM[int(self.amPM.textContent === self.l10n.amPM[0])];\n            }\n            input.value = pad(newValue);\n        }\n    }\n    init();\n    return self;\n}\nfunction _flatpickr(nodeList, config) {\n    var nodes = Array.prototype.slice\n        .call(nodeList)\n        .filter(function (x) { return x instanceof HTMLElement; });\n    var instances = [];\n    for (var i = 0; i < nodes.length; i++) {\n        var node = nodes[i];\n        try {\n            if (node.getAttribute(\"data-fp-omit\") !== null)\n                continue;\n            if (node._flatpickr !== undefined) {\n                node._flatpickr.destroy();\n                node._flatpickr = undefined;\n            }\n            node._flatpickr = FlatpickrInstance(node, config || {});\n            instances.push(node._flatpickr);\n        }\n        catch (e) {\n            console.error(e);\n        }\n    }\n    return instances.length === 1 ? instances[0] : instances;\n}\nif (typeof HTMLElement !== \"undefined\" &&\n    typeof HTMLCollection !== \"undefined\" &&\n    typeof NodeList !== \"undefined\") {\n    HTMLCollection.prototype.flatpickr = NodeList.prototype.flatpickr = function (config) {\n        return _flatpickr(this, config);\n    };\n    HTMLElement.prototype.flatpickr = function (config) {\n        return _flatpickr([this], config);\n    };\n}\nvar flatpickr = function (selector, config) {\n    if (typeof selector === \"string\") {\n        return _flatpickr(window.document.querySelectorAll(selector), config);\n    }\n    else if (selector instanceof Node) {\n        return _flatpickr([selector], config);\n    }\n    else {\n        return _flatpickr(selector, config);\n    }\n};\nflatpickr.defaultConfig = {};\nflatpickr.l10ns = {\n    en: __assign({}, English),\n    default: __assign({}, English),\n};\nflatpickr.localize = function (l10n) {\n    flatpickr.l10ns.default = __assign(__assign({}, flatpickr.l10ns.default), l10n);\n};\nflatpickr.setDefaults = function (config) {\n    flatpickr.defaultConfig = __assign(__assign({}, flatpickr.defaultConfig), config);\n};\nflatpickr.parseDate = createDateParser({});\nflatpickr.formatDate = createDateFormatter({});\nflatpickr.compareDates = compareDates;\nif (typeof jQuery !== \"undefined\" && typeof jQuery.fn !== \"undefined\") {\n    jQuery.fn.flatpickr = function (config) {\n        return _flatpickr(this, config);\n    };\n}\nDate.prototype.fp_incr = function (days) {\n    return new Date(this.getFullYear(), this.getMonth(), this.getDate() + (typeof days === \"string\" ? parseInt(days, 10) : days));\n};\nif (typeof window !== \"undefined\") {\n    window.flatpickr = flatpickr;\n}\nexport default flatpickr;\n", "import { Controller } from '@hotwired/stimulus'\nimport flatpickr from 'flatpickr'\nimport zhTw from 'flatpickr/dist/l10n/zh-tw.js'\n\nexport default class extends Controller {\n    static targets = [\n        'calendar',\n        'dateField',\n        'timeField',\n        'datetimeField',\n        'partySize',\n        'adultsCount',\n        'childrenCount',\n        'forceMode',\n        'adminOverride',\n        'businessPeriodField',\n        'businessPeriodHint',\n        'businessPeriodTime',\n    ]\n    static values = {\n        restaurantSlug: String,\n    }\n\n    connect() {\n        console.log('\uD83D\uDD27 Admin reservation controller connected successfully!')\n        console.log('\uD83D\uDD27 Controller element:', this.element)\n        console.log('\uD83D\uDD27 Available targets:', this.targets)\n        console.log('\uD83D\uDD27 Has calendar target:', this.hasCalendarTarget)\n        console.log('\uD83D\uDD27 Calendar target element:', this.hasCalendarTarget ? this.calendarTarget : 'NOT FOUND')\n        console.log('\uD83D\uDD27 Restaurant slug:', this.restaurantSlugValue)\n\n        // \u6AA2\u67E5 flatpickr \u662F\u5426\u53EF\u7528\n        console.log('\uD83D\uDD27 Flatpickr available:', typeof flatpickr !== 'undefined')\n\n        this.selectedDate = null\n        this.selectedTime = null\n        this.forceMode = false\n\n        // \u5EF6\u9072\u521D\u59CB\u5316\uFF0C\u78BA\u4FDD DOM \u5B8C\u5168\u8F09\u5165\n        setTimeout(() => {\n            console.log('\uD83D\uDD27 Starting delayed initialization...')\n            try {\n                this.initDatePicker()\n            } catch (error) {\n                console.error('\uD83D\uDD27 Error in initDatePicker:', error)\n            }\n        }, 300)\n    }\n\n    disconnect() {\n        if (this.datePicker) {\n            this.datePicker.destroy()\n        }\n    }\n\n    initDatePicker() {\n        console.log('\uD83D\uDD27 Admin reservation: initializing date picker')\n\n        if (!this.hasCalendarTarget) {\n            console.error('\uD83D\uDD27 No calendar target found!')\n            return\n        }\n\n        // \u92B7\u6BC0\u73FE\u6709\u7684 flatpickr \u5BE6\u4F8B\n        if (this.datePicker) {\n            this.datePicker.destroy()\n            this.datePicker = null\n        }\n\n        // \u7BA1\u7406\u5F8C\u53F0\u76F4\u63A5\u4F7F\u7528\u57FA\u672C\u65E5\u671F\u9078\u64C7\u5668\n        this.initBasicDatePicker()\n    }\n\n    async initBasicDatePicker() {\n        console.log('\uD83D\uDD27 Creating basic flatpickr instance with closure dates')\n\n        if (!this.hasCalendarTarget) {\n            console.error('\uD83D\uDD27 No calendar target found for basic picker!')\n            return\n        }\n\n        try {\n            // \u7372\u53D6\u9910\u5EF3\u4F11\u606F\u65E5\u8CC7\u8A0A\n            const disabledDates = await this.fetchDisabledDates()\n            \n            const config = {\n                inline: true,\n                locale: zhTw.zh_tw,\n                dateFormat: 'Y-m-d',\n                minDate: 'today',\n                maxDate: new Date().fp_incr(90), // \u7BA1\u7406\u54E1\u53EF\u4EE5\u9078\u64C7\u66F4\u9060\u7684\u65E5\u671F\n                static: true, // \u9632\u6B62\u65E5\u66C6\u88AB\u5176\u4ED6\u5143\u7D20\u8986\u84CB\n                disable: disabledDates, // \u6392\u9664\u4F11\u606F\u65E5\n                onChange: (selectedDates, dateStr) => {\n                    console.log('\uD83D\uDD27 Basic picker date selected:', dateStr)\n                    this.handleDateChange(dateStr)\n                },\n                onReady: () => {\n                    console.log('\uD83D\uDD27 Basic picker ready')\n                    setTimeout(() => {\n                        this.styleFlatpickr()\n                    }, 50)\n                },\n                onError: (error) => {\n                    console.error('\uD83D\uDD27 Flatpickr error:', error)\n                },\n            }\n\n            console.log('\uD83D\uDD27 Creating flatpickr with config:', config)\n            this.datePicker = flatpickr(this.calendarTarget, config)\n\n            if (this.datePicker) {\n                console.log('\uD83D\uDD27 Basic picker created successfully:', this.datePicker)\n            } else {\n                console.error('\uD83D\uDD27 Failed to create flatpickr instance')\n            }\n        } catch (error) {\n            console.error('\uD83D\uDD27 Error creating basic picker:', error)\n            // \u5982\u679C\u7121\u6CD5\u7372\u53D6\u4F11\u606F\u65E5\u8CC7\u8A0A\uFF0C\u5EFA\u7ACB\u57FA\u672C\u7684\u65E5\u671F\u9078\u64C7\u5668\n            this.createFallbackDatePicker()\n        }\n    }\n\n    styleFlatpickr() {\n        console.log('\uD83D\uDD27 Styling flatpickr calendar for inline display')\n\n        const calendarElement = this.calendarTarget.querySelector('.flatpickr-calendar')\n        if (calendarElement) {\n            console.log('\uD83D\uDD27 Found calendar element, applying inline styling')\n\n            // \u57FA\u672C\u5B9A\u4F4D\u548C\u986F\u793A\uFF08light theme is already applied via CSS import\uFF09\n            calendarElement.classList.add('inline')\n            calendarElement.style.position = 'relative'\n            calendarElement.style.top = 'auto'\n            calendarElement.style.left = 'auto'\n            calendarElement.style.display = 'block'\n            calendarElement.style.width = '100%'\n            calendarElement.style.maxWidth = 'none'\n            calendarElement.style.visibility = 'visible'\n            calendarElement.style.opacity = '1'\n\n            // \u78BA\u4FDD\u65E5\u671F\u5BB9\u5668\u6709\u6B63\u78BA\u7684\u5BEC\u5EA6\n            const dayContainer = calendarElement.querySelector('.dayContainer')\n            if (dayContainer) {\n                dayContainer.style.width = '100%'\n                dayContainer.style.minWidth = '100%'\n                dayContainer.style.maxWidth = '100%'\n            }\n        } else {\n            console.error('\uD83D\uDD27 No calendar element found for styling')\n        }\n    }\n\n    handleDateChange(dateStr) {\n        this.selectedDate = dateStr\n\n        // \u66F4\u65B0\u96B1\u85CF\u7684\u65E5\u671F\u6B04\u4F4D\n        if (this.hasDateFieldTarget) {\n            this.dateFieldTarget.value = dateStr\n        }\n\n        // \u66F4\u65B0\u65E5\u671F\u6642\u9593\u6B04\u4F4D\n        this.updateDateTimeField()\n    }\n\n    handleTimeChange() {\n        const timeValue = this.timeFieldTarget.value\n        this.selectedTime = timeValue\n\n        console.log('\uD83D\uDD27 Time changed:', timeValue)\n\n        // \u66F4\u65B0\u65E5\u671F\u6642\u9593\u6B04\u4F4D\n        this.updateDateTimeField()\n    }\n\n    handlePartySizeChange() {\n        console.log('\uD83D\uDD27 Party size changed, refreshing date picker with new closure data...')\n\n        // \u91CD\u65B0\u521D\u59CB\u5316\u65E5\u671F\u9078\u64C7\u5668\uFF08\u4EBA\u6578\u8B8A\u66F4\u4E0D\u5F71\u97FF\u5F8C\u53F0\u7684\u516C\u4F11\u65E5\u908F\u8F2F\uFF09\n        this.initDatePicker()\n    }\n\n    updateDateTimeField() {\n        console.log('\uD83D\uDD27 Updating datetime field:', {\n            selectedDate: this.selectedDate,\n            selectedTime: this.selectedTime,\n            hasDatetimeField: this.hasDatetimeFieldTarget,\n        })\n\n        if (this.selectedDate && this.selectedTime && this.hasDatetimeFieldTarget) {\n            const fullDateTime = `${this.selectedDate}T${this.selectedTime}`\n            this.datetimeFieldTarget.value = fullDateTime\n            console.log('\uD83D\uDD27 Updated datetime field:', fullDateTime)\n\n            // \u89F8\u767C change \u4E8B\u4EF6\u4EE5\u4FBF\u5176\u4ED6\u63A7\u5236\u5668\u80FD\u5920\u97FF\u61C9\n            this.datetimeFieldTarget.dispatchEvent(new Event('change'))\n        } else {\n            console.log('\uD83D\uDD27 Cannot update datetime field - missing data or target')\n        }\n    }\n\n    getCurrentPartySize() {\n        return this.hasPartySizeTarget ? parseInt(this.partySizeTarget.value) || 2 : 2\n    }\n\n    toggleForceMode() {\n        this.forceMode = this.hasForceModeTarget ? this.forceModeTarget.checked : false\n        console.log('\uD83D\uDD27 Force mode toggled:', this.forceMode)\n\n        // \u8A2D\u7F6E\u7BA1\u7406\u54E1\u5F37\u5236\u6A21\u5F0F\u6A19\u8A18\n        if (this.hasAdminOverrideTarget) {\n            this.adminOverrideTarget.value = this.forceMode ? 'true' : 'false'\n        }\n    }\n\n    handleBusinessPeriodChange() {\n        console.log('\uD83D\uDD27 Business period changed')\n\n        if (!this.hasBusinessPeriodFieldTarget) {\n            console.error('\uD83D\uDD27 No business period field target found')\n            return\n        }\n\n        const selectedOption = this.businessPeriodFieldTarget.selectedOptions[0]\n\n        if (selectedOption && selectedOption.value) {\n            console.log('\uD83D\uDD27 Selected business period:', selectedOption.text)\n\n            // \u986F\u793A\u9910\u671F\u6642\u9593\u7BC4\u570D\u63D0\u793A\n            if (this.hasBusinessPeriodHintTarget && this.hasBusinessPeriodTimeTarget) {\n                this.businessPeriodTimeTarget.textContent = selectedOption.text\n                this.businessPeriodHintTarget.classList.remove('hidden')\n            }\n\n            // \u53EF\u4EE5\u5728\u9019\u88E1\u6DFB\u52A0\u66F4\u591A\u908F\u8F2F\uFF0C\u6BD4\u5982\u81EA\u52D5\u8A2D\u5B9A\u6642\u9593\u7BC4\u570D\n            this.setDefaultTimeForPeriod(selectedOption.text)\n        } else {\n            // \u96B1\u85CF\u63D0\u793A\n            if (this.hasBusinessPeriodHintTarget) {\n                this.businessPeriodHintTarget.classList.add('hidden')\n            }\n        }\n    }\n\n    setDefaultTimeForPeriod(periodText) {\n        // \u5F9E\u9910\u671F\u6587\u5B57\u4E2D\u63D0\u53D6\u6642\u9593\u7BC4\u570D\uFF08\u683C\u5F0F\u5982\uFF1A\u5348\u9910 (11:30 - 14:30)\uFF09\n        const timeMatch = periodText.match(/\\((\\d{2}:\\d{2})\\s*-\\s*(\\d{2}:\\d{2})\\)/)\n\n        if (timeMatch && this.hasTimeFieldTarget) {\n            const startTime = timeMatch[1]\n            // \u8A2D\u5B9A\u70BA\u9910\u671F\u958B\u59CB\u6642\u9593\u5F8C30\u5206\u9418\n            const [hours, minutes] = startTime.split(':')\n            const startDate = new Date()\n            startDate.setHours(parseInt(hours), parseInt(minutes) + 30)\n\n            const defaultTime = startDate.toTimeString().slice(0, 5)\n            this.timeFieldTarget.value = defaultTime\n            this.selectedTime = defaultTime\n\n            console.log('\uD83D\uDD27 Set default time for period:', defaultTime)\n            this.updateDateTimeField()\n        }\n    }\n\n    async fetchDisabledDates() {\n        console.log('\uD83D\uDD27 Fetching closure dates for admin (ignoring capacity restrictions)')\n        \n        try {\n            const partySize = this.getCurrentPartySize()\n            const apiUrl = `/restaurants/${this.restaurantSlugValue}/available_days?party_size=${partySize}`\n            console.log('\uD83D\uDD27 Fetching from:', apiUrl)\n\n            const response = await fetch(apiUrl, {\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                },\n            })\n\n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`)\n            }\n\n            const data = await response.json()\n            console.log('\uD83D\uDD27 Available days data:', data)\n\n            // \u5F8C\u53F0\u53EA\u6392\u9664\u516C\u4F11\u65E5\uFF0C\u4E0D\u8003\u616E\u5BB9\u91CF\u9650\u5236\n            const disabledDates = this.calculateAdminDisabledDates(\n                data.weekly_closures || [],\n                data.special_closures || []\n            )\n\n            console.log('\uD83D\uDD27 Admin disabled dates calculated:', disabledDates)\n            return disabledDates\n        } catch (error) {\n            console.error('\uD83D\uDD27 Error fetching closure dates:', error)\n            return [] // \u8FD4\u56DE\u7A7A\u9663\u5217\uFF0C\u4E0D\u7981\u7528\u4EFB\u4F55\u65E5\u671F\n        }\n    }\n\n    calculateAdminDisabledDates(weekly_closures, special_closures) {\n        const disabledDates = []\n\n        // \u8655\u7406\u6BCF\u9031\u56FA\u5B9A\u4F11\u606F\u65E5\n        if (weekly_closures && weekly_closures.length > 0) {\n            disabledDates.push((date) => {\n                const dayOfWeek = date.getDay()\n                return weekly_closures.includes(dayOfWeek)\n            })\n        }\n\n        // \u8655\u7406\u7279\u6B8A\u4F11\u606F\u65E5 - \u5C07\u5B57\u4E32\u8F49\u63DB\u70BA Date \u7269\u4EF6\u6BD4\u8F03\n        if (special_closures && special_closures.length > 0) {\n            special_closures.forEach((closureStr) => {\n                const closureDate = new Date(closureStr)\n                // \u6BD4\u8F03\u5E74\u3001\u6708\u3001\u65E5\n                disabledDates.push((date) => {\n                    return (\n                        date.getFullYear() === closureDate.getFullYear() &&\n                        date.getMonth() === closureDate.getMonth() &&\n                        date.getDate() === closureDate.getDate()\n                    )\n                })\n            })\n        }\n\n        return disabledDates\n    }\n\n    createFallbackDatePicker() {\n        console.log('\uD83D\uDD27 Creating fallback date picker without closure restrictions')\n        \n        const config = {\n            inline: true,\n            locale: zhTw.zh_tw,\n            dateFormat: 'Y-m-d',\n            minDate: 'today',\n            maxDate: new Date().fp_incr(90),\n            static: true,\n            onChange: (selectedDates, dateStr) => {\n                console.log('\uD83D\uDD27 Fallback picker date selected:', dateStr)\n                this.handleDateChange(dateStr)\n            },\n            onReady: () => {\n                console.log('\uD83D\uDD27 Fallback picker ready')\n                setTimeout(() => {\n                    this.styleFlatpickr()\n                }, 50)\n            },\n        }\n\n        this.datePicker = flatpickr(this.calendarTarget, config)\n    }\n}\n", "import { Controller } from '@hotwired/stimulus'\n\nexport default class extends Controller {\n    static targets = ['monthYear', 'daysGrid', 'selectedDate']\n    static values = { currentUrl: String }\n\n    static classes = ['selected', 'today', 'normal']\n\n    connect() {\n        console.log('Calendar controller connected')\n        console.log('Available targets:', {\n            monthYear: this.hasMonthYearTarget,\n            daysGrid: this.hasDaysGridTarget,\n            selectedDate: this.hasSelectedDateTarget,\n        })\n\n        // \u5F9E URL \u53C3\u6578\u4E2D\u7372\u53D6\u65E5\u671F\u7BE9\u9078\u548C\u986F\u793A\u5168\u90E8\u53C3\u6578\n        const urlParams = new URLSearchParams(window.location.search)\n        const dateFilter = urlParams.get('date_filter')\n        const showAll = urlParams.get('show_all')\n\n        this.currentDate = new Date()\n\n        // \u5982\u679C\u662F\u986F\u793A\u5168\u90E8\u6A21\u5F0F\uFF0C\u4E0D\u9078\u4E2D\u4EFB\u4F55\u65E5\u671F\n        if (showAll === 'true') {\n            this.selectedDateValue = null\n            this.showAllMode = true\n        } else if (dateFilter) {\n            // \u5982\u679C URL \u4E2D\u6709\u65E5\u671F\u7BE9\u9078\u53C3\u6578\uFF0C\u4F7F\u7528\u8A72\u65E5\u671F\n            this.selectedDateValue = new Date(dateFilter)\n            // \u8A2D\u5B9A\u65E5\u66C6\u986F\u793A\u7684\u6708\u4EFD\u70BA\u9078\u4E2D\u65E5\u671F\u7684\u6708\u4EFD\n            this.currentDate = new Date(this.selectedDateValue)\n            this.showAllMode = false\n        } else {\n            // \u5426\u5247\u4F7F\u7528\u4ECA\u5929\n            this.selectedDateValue = new Date()\n            this.showAllMode = false\n        }\n\n        this.monthNames = [\n            '\u4E00\u6708',\n            '\u4E8C\u6708',\n            '\u4E09\u6708',\n            '\u56DB\u6708',\n            '\u4E94\u6708',\n            '\u516D\u6708',\n            '\u4E03\u6708',\n            '\u516B\u6708',\n            '\u4E5D\u6708',\n            '\u5341\u6708',\n            '\u5341\u4E00\u6708',\n            '\u5341\u4E8C\u6708',\n        ]\n\n        // \u7B49\u5F85 DOM \u5B8C\u5168\u8F09\u5165\u5F8C\u6E32\u67D3\n        if (document.readyState === 'loading') {\n            document.addEventListener('DOMContentLoaded', () => this.initializeCalendar())\n        } else {\n            this.initializeCalendar()\n        }\n    }\n\n    initializeCalendar() {\n        try {\n            this.renderCalendar()\n            this.updateSelectedDateDisplay()\n        } catch (error) {\n            console.error('Failed to initialize calendar:', error)\n        }\n    }\n\n    previousMonth() {\n        this.currentDate.setMonth(this.currentDate.getMonth() - 1)\n        this.renderCalendar()\n    }\n\n    nextMonth() {\n        this.currentDate.setMonth(this.currentDate.getMonth() + 1)\n        this.renderCalendar()\n    }\n\n    selectDate(event) {\n        const dateButton = event.target.closest('[data-date]')\n        if (!dateButton) return\n        if (!this.hasDaysGridTarget) return\n\n        const dateString = dateButton.dataset.date\n        this.selectedDateValue = new Date(dateString)\n\n        // \u79FB\u9664\u4E4B\u524D\u9078\u4E2D\u7684\u6A23\u5F0F\n        this.daysGridTarget.querySelectorAll('.bg-blue-500').forEach((el) => {\n            el.classList.remove('bg-blue-500', 'text-white')\n            el.classList.add('hover:bg-gray-100')\n        })\n\n        // \u6DFB\u52A0\u65B0\u7684\u9078\u4E2D\u6A23\u5F0F\n        dateButton.classList.remove('hover:bg-gray-100')\n        dateButton.classList.add('bg-blue-500', 'text-white')\n\n        this.updateSelectedDateDisplay()\n        this.filterReservationsByDate(dateString)\n    }\n\n    renderCalendar() {\n        console.log('Rendering calendar...')\n        const year = this.currentDate.getFullYear()\n        const month = this.currentDate.getMonth()\n\n        // \u6AA2\u67E5\u5FC5\u8981\u7684 targets \u662F\u5426\u5B58\u5728\n        if (!this.hasMonthYearTarget || !this.hasDaysGridTarget) {\n            console.error('Calendar targets not found:', {\n                monthYear: this.hasMonthYearTarget,\n                daysGrid: this.hasDaysGridTarget,\n            })\n            return\n        }\n\n        // \u66F4\u65B0\u6708\u4EFD\u5E74\u4EFD\u986F\u793A\n        this.monthYearTarget.textContent = `${year}\u5E74 ${this.monthNames[month]}`\n\n        // \u6E05\u7A7A\u65E5\u671F\u7DB2\u683C\n        this.daysGridTarget.innerHTML = ''\n\n        // \u7372\u53D6\u672C\u6708\u7B2C\u4E00\u5929\u548C\u6700\u5F8C\u4E00\u5929\n        const firstDay = new Date(year, month, 1)\n        const lastDay = new Date(year, month + 1, 0)\n        const firstDayOfWeek = firstDay.getDay()\n\n        console.log('Calendar info:', { year, month, firstDayOfWeek, lastDay: lastDay.getDate() })\n\n        // \u6DFB\u52A0\u4E0A\u500B\u6708\u7684\u7A7A\u767D\u5929\u6578\n        for (let i = 0; i < firstDayOfWeek; i++) {\n            const emptyDay = document.createElement('div')\n            emptyDay.className = 'h-8'\n            this.daysGridTarget.appendChild(emptyDay)\n        }\n\n        // \u6DFB\u52A0\u672C\u6708\u7684\u65E5\u671F\n        for (let day = 1; day <= lastDay.getDate(); day++) {\n            const dayButton = this.createDayButton(year, month, day)\n            this.daysGridTarget.appendChild(dayButton)\n        }\n\n        console.log('Calendar rendered with', this.daysGridTarget.children.length, 'elements')\n    }\n\n    createDayButton(year, month, day) {\n        const date = new Date(year, month, day)\n        const dateString = this.formatDateForServer(date)\n        const today = new Date()\n        const isToday = this.isSameDate(date, today)\n        const isSelected = this.selectedDateValue && this.isSameDate(date, this.selectedDateValue)\n\n        const button = document.createElement('button')\n        button.type = 'button'\n        button.textContent = day\n        button.dataset.date = dateString\n        button.dataset.action = 'click->calendar#selectDate'\n\n        let classes = 'h-8 w-8 text-sm rounded-full transition-colors duration-200 '\n\n        if (this.showAllMode) {\n            // \u5728\u986F\u793A\u5168\u90E8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u9078\u4E2D\u4EFB\u4F55\u65E5\u671F\n            if (isToday) {\n                classes += 'bg-blue-100 text-blue-600 font-medium hover:bg-blue-200'\n            } else {\n                classes += 'text-gray-700 hover:bg-gray-100'\n            }\n        } else if (isSelected) {\n            classes += 'bg-blue-500 text-white'\n        } else if (isToday) {\n            classes += 'bg-blue-100 text-blue-600 font-medium hover:bg-blue-200'\n        } else {\n            classes += 'text-gray-700 hover:bg-gray-100'\n        }\n\n        button.className = classes\n\n        return button\n    }\n\n    isSameDate(date1, date2) {\n        return (\n            date1.getFullYear() === date2.getFullYear() &&\n            date1.getMonth() === date2.getMonth() &&\n            date1.getDate() === date2.getDate()\n        )\n    }\n\n    formatDateForServer(date) {\n        const year = date.getFullYear()\n        const month = String(date.getMonth() + 1).padStart(2, '0')\n        const day = String(date.getDate()).padStart(2, '0')\n        return `${year}-${month}-${day}`\n    }\n\n    formatDateForDisplay(date) {\n        const year = date.getFullYear()\n        const month = date.getMonth() + 1\n        const day = date.getDate()\n        return `${year}\u5E74${month}\u6708${day}\u65E5`\n    }\n\n    updateSelectedDateDisplay() {\n        if (!this.hasSelectedDateTarget) return\n\n        if (this.showAllMode) {\n            this.selectedDateTarget.textContent = '\u5168\u90E8\u8A02\u4F4D'\n        } else if (this.selectedDateValue) {\n            this.selectedDateTarget.textContent = this.formatDateForDisplay(this.selectedDateValue)\n        } else {\n            this.selectedDateTarget.textContent = '\u4ECA\u5929'\n        }\n    }\n\n    async filterReservationsByDate(dateString) {\n        try {\n            // \u69CB\u5EFA\u65B0\u7684 URL\uFF0C\u4FDD\u7559\u73FE\u6709\u7684\u67E5\u8A62\u53C3\u6578\n            const url = new URL(window.location.href)\n\n            // \u79FB\u9664 show_all \u53C3\u6578\n            url.searchParams.delete('show_all')\n\n            // \u8A2D\u5B9A date_filter \u53C3\u6578\n            url.searchParams.set('date_filter', dateString)\n\n            // \u76F4\u63A5\u8DF3\u8F49\u5230\u65B0\u7684 URL\uFF0C\u9019\u6A23 query \u53C3\u6578\u6703\u4FDD\u7559\u5728 URL \u4E0A\n            Turbo.visit(url.toString(), { action: 'replace' })\n        } catch (error) {\n            console.error('Failed to filter reservations:', error)\n        }\n    }\n\n    showLoading() {\n        // \u53EF\u4EE5\u6DFB\u52A0\u8F09\u5165\u6307\u793A\u5668\n        const reservationList = document.querySelector('.reservation-list')\n        if (reservationList) {\n            reservationList.style.opacity = '0.6'\n        }\n    }\n\n    hideLoading() {\n        const reservationList = document.querySelector('.reservation-list')\n        if (reservationList) {\n            reservationList.style.opacity = '1'\n        }\n    }\n}\n", "import { Controller } from '@hotwired/stimulus'\n\nexport default class extends Controller {\n    static targets = [\n        'weeklyForm',\n        'specificForm',\n        'allDayCheckbox',\n        'timeFields',\n        'weekdayLabel',\n        'weekdayCheckbox',\n        'weeklyPattern',\n    ]\n    static values = {\n        restaurantSlug: String,\n        closureDatesUrl: String,\n    }\n\n    static identifier = 'closure-dates'\n\n    connect() {\n        // \u7ACB\u5373\u8A2D\u5B9A\u5168\u57DF\u51FD\u6578\uFF08\u70BA\u4E86\u5411\u5F8C\u76F8\u5BB9\uFF09\n        this.setupGlobalFunctions()\n\n        // \u7D81\u5B9A\u4E8B\u4EF6\u76E3\u807D\u5668\u5230\u7576\u524D\u5BE6\u4F8B\n        this.boundTurboFrameLoad = this.handleTurboFrameLoad.bind(this)\n        this.boundBeforeStreamAction = this.handleBeforeStreamAction.bind(this)\n\n        // \u76E3\u807D Turbo Stream \u66F4\u65B0\u4E8B\u4EF6\uFF0C\u78BA\u4FDD\u52D5\u614B\u5167\u5BB9\u8F09\u5165\u5F8C\u91CD\u65B0\u521D\u59CB\u5316\n        document.addEventListener('turbo:frame-load', this.boundTurboFrameLoad)\n        document.addEventListener('turbo:before-stream-action', this.boundBeforeStreamAction)\n\n        // \u5EF6\u9072\u521D\u59CB\u5316\u6AA2\u67E5\uFF0C\u78BA\u4FDD DOM \u5B8C\u5168\u8F09\u5165\n        setTimeout(() => {\n            this.checkExistingClosureDates()\n        }, 150)\n    }\n\n    disconnect() {\n        // \u79FB\u9664\u4E8B\u4EF6\u76E3\u807D\u5668\uFF08\u4F7F\u7528\u7D81\u5B9A\u7684\u5BE6\u4F8B\uFF09\n        if (this.boundTurboFrameLoad) {\n            document.removeEventListener('turbo:frame-load', this.boundTurboFrameLoad)\n        }\n        if (this.boundBeforeStreamAction) {\n            document.removeEventListener('turbo:before-stream-action', this.boundBeforeStreamAction)\n        }\n    }\n\n    // \u8A2D\u5B9A\u5168\u57DF\u51FD\u6578\uFF08\u70BA\u4E86\u5411\u5F8C\u76F8\u5BB9\u52D5\u614B\u8F09\u5165\u7684\u5167\u5BB9\uFF09\n    setupGlobalFunctions() {\n        window.handleWeeklyClosureSubmit = (event) => {\n            return this.submitWeeklyForm(event)\n        }\n\n        window.selectWeekdayInForm = (weekday) => {\n            return this.selectWeekdayInForm(weekday)\n        }\n\n        window.checkExistingClosureDates = () => {\n            checkExistingClosureDatesRetryCount = 0 // \u91CD\u7F6E\u91CD\u8A66\u8A08\u6578\n            return this.checkExistingClosureDates()\n        }\n\n        window.updateStatistics = () => {\n            return this.updateStatistics()\n        }\n    }\n\n    // \u6AA2\u67E5\u5DF2\u5B58\u5728\u7684\u516C\u4F11\u8A2D\u5B9A\n    checkExistingClosureDates() {\n        const existingWeekdays = new Set()\n\n        // \u5F9E\u9801\u9762\u7684\u516C\u4F11\u65E5\u6E05\u55AE\u4E2D\u63D0\u53D6\u5DF2\u8A2D\u5B9A\u7684\u9031\u5E7E\n        const closureDateItems = document.querySelectorAll('#closure_dates_list .border')\n\n        closureDateItems.forEach((item, index) => {\n            const titleElement = item.querySelector('h4')\n            if (titleElement) {\n                const titleText = titleElement.textContent.trim()\n\n                if (titleText.includes('\u6BCF\u9031') && titleText.includes('\u516C\u4F11')) {\n                    const weekdayMatch = titleText.match(/\u6BCF\u9031\\s*(\u9031[\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u65E5])\\s*\u516C\u4F11/)\n                    if (weekdayMatch) {\n                        const weekdayName = weekdayMatch[1]\n                        const weekdayNumber = this.getWeekdayNumber(weekdayName)\n\n                        if (weekdayNumber) {\n                            existingWeekdays.add(weekdayNumber)\n                        }\n                    }\n                }\n            }\n        })\n\n        // \u66F4\u65B0 checkbox \u72C0\u614B\n        this.updateWeekdayCheckboxes(existingWeekdays)\n    }\n\n    // \u66F4\u65B0\u9031\u5E7E checkbox \u72C0\u614B\n    updateWeekdayCheckboxes(existingWeekdays) {\n        const weekdayCheckboxes = this.weekdayCheckboxTargets\n\n        weekdayCheckboxes.forEach((checkbox) => {\n            const weekdayValue = parseInt(checkbox.value)\n            const label = checkbox.closest('label')\n            const textSpan = label ? label.querySelector('span:last-child') : null\n\n            if (existingWeekdays.has(weekdayValue)) {\n                // \u5DF2\u8A2D\u5B9A\u7684\u9031\u5E7E\uFF1A\u7981\u7528\u4E14\u986F\u793A\u70BA\u5DF2\u8A2D\u5B9A\n                checkbox.checked = false\n                checkbox.disabled = true\n\n                if (label) {\n                    label.classList.add('bg-red-50', 'border-red-200', 'cursor-not-allowed', 'opacity-60')\n                    label.classList.remove('hover:bg-blue-100', 'border-gray-300')\n\n                    if (textSpan) {\n                        const weekdayNames = ['\u9031\u65E5', '\u9031\u4E00', '\u9031\u4E8C', '\u9031\u4E09', '\u9031\u56DB', '\u9031\u4E94', '\u9031\u516D']\n                        const originalText =\n                            weekdayNames[weekdayValue] || textSpan.textContent.trim().replace(/\\s*\\(.*?\\).*/, '')\n                        textSpan.innerHTML = `${originalText} <br><span class=\"text-xs text-red-600 font-medium\">(\u5DF2\u8A2D\u5B9A)</span>`\n                    }\n                }\n            } else {\n                // \u672A\u8A2D\u5B9A\u7684\u9031\u5E7E\uFF1A\u78BA\u4FDD\u53EF\u4EE5\u6B63\u5E38\u9078\u64C7\n                checkbox.checked = false\n                checkbox.disabled = false\n\n                if (label) {\n                    label.classList.remove('bg-red-50', 'border-red-200', 'cursor-not-allowed', 'opacity-60')\n                    label.classList.add('hover:bg-blue-100', 'border-gray-300')\n\n                    if (textSpan) {\n                        const weekdayNames = ['\u9031\u65E5', '\u9031\u4E00', '\u9031\u4E8C', '\u9031\u4E09', '\u9031\u56DB', '\u9031\u4E94', '\u9031\u516D']\n                        textSpan.innerHTML =\n                            weekdayNames[weekdayValue] || textSpan.textContent.replace(/\\s*\\(.*?\\).*/, '').trim()\n                    }\n                }\n            }\n        })\n    }\n\n    // \u63D0\u4EA4\u6BCF\u9031\u516C\u4F11\u8868\u55AE\n    async submitWeeklyForm(event) {\n        event.preventDefault()\n\n        try {\n            // \u6AA2\u67E5\u5DF2\u52FE\u9078\u7684\u9805\u76EE\n            const allCheckedBoxes = this.element.querySelectorAll('input[name=\"weekdays[]\"]:checked')\n            const enabledCheckedBoxes = this.element.querySelectorAll('input[name=\"weekdays[]\"]:checked:not(:disabled)')\n\n            // \u6AA2\u67E5\u662F\u5426\u6709\u5617\u8A66\u9078\u64C7\u5DF2\u8A2D\u5B9A\u7684\u9031\u5E7E\n            const disabledCheckedBoxes = Array.from(allCheckedBoxes).filter((cb) => cb.disabled)\n            if (disabledCheckedBoxes.length > 0) {\n                const disabledWeekdays = disabledCheckedBoxes\n                    .map((cb) => {\n                        const weekdayNames = ['\u9031\u65E5', '\u9031\u4E00', '\u9031\u4E8C', '\u9031\u4E09', '\u9031\u56DB', '\u9031\u4E94', '\u9031\u516D']\n                        return weekdayNames[parseInt(cb.value)]\n                    })\n                    .join('\u3001')\n\n                alert(`\u7121\u6CD5\u9078\u64C7\u5DF2\u8A2D\u5B9A\u7684\u516C\u4F11\u65E5\uFF1A${disabledWeekdays}\\n\\n\u8ACB\u53D6\u6D88\u52FE\u9078\u5DF2\u8A2D\u5B9A\u7684\u9805\u76EE\uFF0C\u53EA\u9078\u64C7\u5C1A\u672A\u8A2D\u5B9A\u7684\u9031\u5E7E\u3002`)\n\n                // \u81EA\u52D5\u53D6\u6D88\u52FE\u9078\u7981\u7528\u7684\u9805\u76EE\n                disabledCheckedBoxes.forEach((cb) => (cb.checked = false))\n                return\n            }\n\n            if (enabledCheckedBoxes.length === 0) {\n                alert('\u8ACB\u81F3\u5C11\u9078\u64C7\u4E00\u500B\u5C1A\u672A\u8A2D\u5B9A\u7684\u5B9A\u4F11\u65E5')\n                return\n            }\n\n            // \u518D\u6B21\u6AA2\u67E5\u91CD\u8907\n            const selectedWeekdays = Array.from(enabledCheckedBoxes).map((cb) => parseInt(cb.value))\n            const existingWeekdays = this.getExistingWeekdays()\n            const duplicates = selectedWeekdays.filter((weekday) => existingWeekdays.has(weekday))\n\n            if (duplicates.length > 0) {\n                const duplicateNames = duplicates\n                    .map((weekday) => {\n                        const weekdayNames = ['\u9031\u65E5', '\u9031\u4E00', '\u9031\u4E8C', '\u9031\u4E09', '\u9031\u56DB', '\u9031\u4E94', '\u9031\u516D']\n                        return weekdayNames[weekday]\n                    })\n                    .join('\u3001')\n\n                alert(`\u6AA2\u6E2C\u5230\u91CD\u8907\u7684\u516C\u4F11\u8A2D\u5B9A\uFF1A${duplicateNames}\\n\\n\u9019\u4E9B\u9031\u5E7E\u5DF2\u7D93\u8A2D\u5B9A\u904E\u516C\u4F11\u65E5\uFF0C\u7121\u6CD5\u91CD\u8907\u5EFA\u7ACB\u3002`)\n                return\n            }\n\n            // \u7372\u53D6\u539F\u56E0\n            const reasonField = this.element.querySelector('input[name*=\"reason\"]')\n            const reason = reasonField ? reasonField.value : '\u6BCF\u9031\u56FA\u5B9A\u516C\u4F11'\n\n            // \u63D0\u4EA4\u8ACB\u6C42\n            await this.submitWeeklyClosureRequests(enabledCheckedBoxes, reason)\n\n            // \u6210\u529F\u5F8C\u8655\u7406\n            alert('\u8A2D\u5B9A\u6210\u529F\uFF01')\n            enabledCheckedBoxes.forEach((checkbox) => (checkbox.checked = false))\n\n            // \u91CD\u65B0\u8F09\u5165\u9801\u9762\n            setTimeout(() => window.location.reload(), 500)\n        } catch (error) {\n            console.error('\uD83D\uDCA5 \u8A2D\u5B9A\u5931\u6557:', error)\n            alert(`\u8A2D\u5B9A\u5931\u6557\uFF1A${error.message}`)\n        }\n    }\n\n    // \u63D0\u4EA4\u6BCF\u9031\u516C\u4F11\u8ACB\u6C42\n    async submitWeeklyClosureRequests(checkboxes, reason) {\n        const csrfToken = this.getCSRFToken()\n\n        const promises = Array.from(checkboxes).map(async (checkbox, index) => {\n            const weekday = parseInt(checkbox.value)\n            // \u8A08\u7B97\u76EE\u6A19\u65E5\u671F\n            const targetDate = this.calculateTargetDate(weekday)\n\n            // \u6E96\u5099\u8868\u55AE\u8CC7\u6599\n            const formData = new FormData()\n            formData.append('closure_date[date]', targetDate)\n            formData.append('closure_date[reason]', reason)\n            formData.append('closure_date[closure_type]', 'regular')\n            formData.append('closure_date[all_day]', 'true')\n            formData.append('closure_date[recurring]', 'true')\n            formData.append('closure_date[weekday]', weekday)\n\n            // \u767C\u9001\u8ACB\u6C42\n            const response = await fetch(this.closureDatesUrlValue, {\n                method: 'POST',\n                body: formData,\n                headers: {\n                    'X-CSRF-Token': csrfToken,\n                    Accept: 'text/vnd.turbo-stream.html',\n                    'X-Requested-With': 'XMLHttpRequest',\n                },\n            })\n\n            if (!response.ok) {\n                const errorText = await response.text()\n                console.error(`\u274C Request ${index + 1} failed:`, errorText)\n                throw new Error(`HTTP ${response.status}: ${response.statusText}`)\n            }\n\n            return response\n        })\n\n        await Promise.all(promises)\n    }\n\n    // \u9EDE\u9078\u53F3\u5074\u516C\u4F11\u9805\u76EE\u4F86\u9078\u64C7\u5C0D\u61C9\u9031\u5E7E\n    selectWeekdayInForm(weekday) {\n        if (!weekday) {\n            return\n        }\n\n        const checkbox = this.element.querySelector(`input[name=\"weekdays[]\"][value=\"${weekday}\"]`)\n        if (checkbox && !checkbox.disabled) {\n            checkbox.checked = !checkbox.checked\n\n            // \u8996\u89BA\u53CD\u994B\n            const label = checkbox.closest('label')\n            if (label) {\n                label.classList.add('bg-blue-200', 'scale-105')\n                setTimeout(() => {\n                    label.classList.remove('bg-blue-200', 'scale-105')\n                }, 300)\n            }\n        } else if (checkbox && checkbox.disabled) {\n            alert('\u6B64\u9031\u5E7E\u5DF2\u7D93\u8A2D\u5B9A\u904E\u516C\u4F11\u65E5')\n        }\n    }\n\n    // \u66F4\u65B0\u7D71\u8A08\u6578\u5B57\n    updateStatistics() {\n        const allItems = document.querySelectorAll('#closure_dates_list .border')\n        const recurringCount = Array.from(document.querySelectorAll('#closure_dates_list h4')).filter((h4) =>\n            h4.textContent.includes('\u6BCF\u9031')\n        ).length\n        const specialCount = Array.from(document.querySelectorAll('#closure_dates_list h4')).filter(\n            (h4) => !h4.textContent.includes('\u6BCF\u9031')\n        ).length\n        const totalCount = allItems.length\n\n        // \u66F4\u65B0\u7D71\u8A08\u5361\u7247\n        const badges = {\n            recurring: document.querySelector('.bg-blue-100.text-blue-800'),\n            special: document.querySelector('.bg-yellow-100.text-yellow-800'),\n            total: document.querySelector('.bg-gray-100.text-gray-800'),\n        }\n\n        if (badges.recurring) badges.recurring.textContent = `${recurringCount} \u9805`\n        if (badges.special) badges.special.textContent = `${specialCount} \u5929`\n        if (badges.total) badges.total.textContent = `${totalCount} \u9805`\n    }\n\n    // \u8F14\u52A9\u65B9\u6CD5\uFF1A\u7372\u53D6\u9031\u5E7E\u6578\u5B57\uFF08\u4F7F\u7528 0-6 \u683C\u5F0F\uFF09\n    getWeekdayNumber(weekdayName) {\n        const weekdayMap = {\n            \u9031\u65E5: 0,\n            \u9031\u4E00: 1,\n            \u9031\u4E8C: 2,\n            \u9031\u4E09: 3,\n            \u9031\u56DB: 4,\n            \u9031\u4E94: 5,\n            \u9031\u516D: 6,\n        }\n        return weekdayMap[weekdayName]\n    }\n\n    // \u8F14\u52A9\u65B9\u6CD5\uFF1A\u7372\u53D6\u5DF2\u5B58\u5728\u7684\u9031\u5E7E\n    getExistingWeekdays() {\n        const existingWeekdays = new Set()\n        const closureDateItems = document.querySelectorAll('#closure_dates_list .border')\n\n        closureDateItems.forEach((item) => {\n            const titleElement = item.querySelector('h4')\n            if (\n                titleElement &&\n                titleElement.textContent.includes('\u6BCF\u9031') &&\n                titleElement.textContent.includes('\u516C\u4F11')\n            ) {\n                const weekdayMatch = titleElement.textContent.match(/\u6BCF\u9031\\s*(\u9031[\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u65E5])\\s*\u516C\u4F11/)\n                if (weekdayMatch) {\n                    const weekdayNumber = this.getWeekdayNumber(weekdayMatch[1])\n                    if (weekdayNumber) {\n                        existingWeekdays.add(weekdayNumber)\n                    }\n                }\n            }\n        })\n\n        return existingWeekdays\n    }\n\n    // \u8F14\u52A9\u65B9\u6CD5\uFF1A\u8A08\u7B97\u76EE\u6A19\u65E5\u671F\uFF08\u4F7F\u7528 0-6 \u683C\u5F0F\uFF09\n    calculateTargetDate(weekday) {\n        const today = new Date()\n        const todayWeekday = today.getDay() // 0-6 \u683C\u5F0F\uFF08\u9031\u65E5=0\uFF09\n        let daysToAdd = weekday - todayWeekday\n        if (daysToAdd <= 0) {\n            daysToAdd += 7\n        }\n        const targetDate = new Date(today)\n        targetDate.setDate(today.getDate() + daysToAdd)\n\n        return targetDate.toISOString().split('T')[0]\n    }\n\n    // \u8F14\u52A9\u65B9\u6CD5\uFF1A\u7372\u53D6 CSRF Token\n    getCSRFToken() {\n        const token = document.querySelector('[name=\"csrf-token\"]')?.content\n        if (!token) {\n            throw new Error('CSRF token not found')\n        }\n        return token\n    }\n\n    // \u8655\u7406 Turbo Frame \u8F09\u5165\n    handleTurboFrameLoad(event) {\n        setTimeout(() => {\n            this.checkExistingClosureDates()\n        }, 100)\n    }\n\n    // \u8655\u7406 Turbo Stream \u52D5\u4F5C\u524D\u4E8B\u4EF6\n    handleBeforeStreamAction(event) {\n        if (\n            event.detail.action === 'replace' &&\n            (event.detail.target === 'weekly-closure-section' || event.detail.target === 'closure-dates-content')\n        ) {\n            // \u5728 Stream \u52D5\u4F5C\u5B8C\u6210\u5F8C\u91CD\u65B0\u521D\u59CB\u5316\n            setTimeout(() => {\n                this.setupGlobalFunctions()\n                this.checkExistingClosureDates()\n\n                // \u78BA\u4FDD flash \u8A0A\u606F\u81EA\u52D5\u96B1\u85CF\u529F\u80FD\u6B63\u5E38\u5DE5\u4F5C\n                const flashElements = document.querySelectorAll('[data-flash-message]')\n                flashElements.forEach((flashElement) => {\n                    const autoHideTime = flashElement.dataset.autoHide || 3000\n                    setTimeout(() => {\n                        flashElement.style.transition = 'opacity 0.5s ease-out'\n                        flashElement.style.opacity = '0'\n                        setTimeout(() => {\n                            flashElement.remove()\n                        }, 500)\n                    }, parseInt(autoHideTime))\n                })\n            }, 300)\n        }\n    }\n}\n\n// \u7ACB\u5373\u8A2D\u5B9A\u57FA\u672C\u7684\u5168\u57DF\u51FD\u6578\u9632\u8B77\uFF08\u907F\u514D\u7121\u9650\u8FF4\u5708\uFF09\nlet checkExistingClosureDatesRetryCount = 0\nconst maxRetries = 3\n\nwindow.checkExistingClosureDates =\n    window.checkExistingClosureDates ||\n    function () {\n        if (checkExistingClosureDatesRetryCount >= maxRetries) {\n            return\n        }\n\n        checkExistingClosureDatesRetryCount++\n    }\n", "import { Controller } from '@hotwired/stimulus'\n\nexport default class extends Controller {\n    static values = { message: String }\n\n    connect() {\n        this.element.addEventListener('click', this.handleClick.bind(this))\n    }\n\n    handleClick(event) {\n        const message = this.messageValue || '\u78BA\u5B9A\u8981\u57F7\u884C\u6B64\u64CD\u4F5C\u55CE\uFF1F'\n\n        if (!confirm(message)) {\n            event.preventDefault()\n            event.stopPropagation()\n            return false\n        }\n    }\n}\n", "import { Controller } from \"@hotwired/stimulus\"\n\nexport default class extends Controller {\n  static targets = [\"container\"]\n\n  connect() {\n    console.log(\"Daily reservation periods controller connected\")\n  }\n\n  toggleDay(event) {\n    const weekday = event.target.dataset.weekday\n    const isChecked = event.target.checked\n    const row = event.target.closest('.daily-period-row')\n    const statusDisplay = row.querySelector('.status-display')\n    \n    if (isChecked) {\n      // \u555F\u7528\u8A72\u65E5\uFF0C\u986F\u793A\u7DE8\u8F2F\u6309\u9215\n      statusDisplay.innerHTML = '<span class=\"text-gray-500\">\u9EDE\u64CA\u7DE8\u8F2F\u8A2D\u5B9A\u71DF\u696D\u6642\u6BB5</span>'\n      row.classList.remove('opacity-50')\n    } else {\n      // \u505C\u7528\u8A72\u65E5\n      statusDisplay.innerHTML = '<span class=\"text-gray-500\">\u4E0D\u958B\u653E\u8A02\u4F4D</span>'\n      row.classList.add('opacity-50')\n      // \u9019\u88E1\u53EF\u4EE5\u767C\u9001 AJAX \u8ACB\u6C42\u505C\u7528\u8A72\u65E5\u7684\u71DF\u696D\u6642\u6BB5\n      this.disableDay(weekday)\n    }\n  }\n\n  editDay(event) {\n    const weekday = event.target.dataset.weekday\n    this.openEditModal(weekday)\n  }\n\n  copyDay(event) {\n    const weekday = event.target.dataset.weekday\n    // \u5BE6\u73FE\u8907\u88FD\u529F\u80FD\n    console.log(`Copy day ${weekday}`)\n  }\n\n  async openEditModal(weekday) {\n    try {\n      const response = await fetch(`/admin/restaurants/${this.getRestaurantSlug()}/reservation_periods/edit_day?weekday=${weekday}`, {\n        headers: {\n          'Accept': 'text/html',\n          'X-Requested-With': 'XMLHttpRequest'\n        }\n      })\n      \n      if (response.ok) {\n        const html = await response.text()\n        const modalContainer = document.getElementById('edit-modal-container')\n        const modalContent = document.getElementById('edit-modal-content')\n        \n        modalContent.innerHTML = html\n        modalContainer.classList.remove('hidden')\n        \n        // \u89F8\u767C modal \u986F\u793A\u52D5\u756B\n        setTimeout(() => {\n          modalContainer.classList.add('opacity-100')\n        }, 10)\n      }\n    } catch (error) {\n      console.error('Error opening edit modal:', error)\n    }\n  }\n\n  async disableDay(weekday) {\n    try {\n      await fetch(`/admin/restaurants/${this.getRestaurantSlug()}/reservation_periods/disable_day`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRF-Token': this.getCSRFToken(),\n          'X-Requested-With': 'XMLHttpRequest'\n        },\n        body: JSON.stringify({ weekday: weekday })\n      })\n    } catch (error) {\n      console.error('Error disabling day:', error)\n    }\n  }\n\n  getRestaurantSlug() {\n    return window.location.pathname.split('/')[3] // \u5047\u8A2D\u8DEF\u5F91\u662F /admin/restaurants/:slug/...\n  }\n\n  getCSRFToken() {\n    return document.querySelector('meta[name=\"csrf-token\"]')?.getAttribute('content')\n  }\n}", "import { Controller } from '@hotwired/stimulus'\n\nexport default class extends Controller {\n    static targets = [\n        'unlimitedCheckbox',\n        'limitedTimeSettings',\n        'diningDurationField',\n        'bufferTimeField',\n        'durationPreview',\n        'examplePreview',\n    ]\n\n    connect() {\n        this.toggleUnlimitedTime()\n        this.updatePreview()\n    }\n\n    toggleUnlimitedTime() {\n        const isUnlimited = this.unlimitedCheckboxTarget.checked\n\n        if (isUnlimited) {\n            this.limitedTimeSettingsTarget.classList.add('opacity-50', 'pointer-events-none')\n            this.durationPreviewTarget.innerHTML = `\u7E3D\u4F54\u7528\u6642\u9593\uFF1A<span class=\"font-medium text-yellow-600\">\u7121\u9650\u5236</span>`\n            this.examplePreviewTarget.innerHTML = `\u4F8B\u5982\uFF1A18:00 \u8A02\u4F4D\uFF0C<span class=\"font-medium text-yellow-600\">\u684C\u4F4D\u4E0D\u6703\u81EA\u52D5\u91CB\u653E</span>`\n        } else {\n            this.limitedTimeSettingsTarget.classList.remove('opacity-50', 'pointer-events-none')\n            this.updatePreview()\n        }\n    }\n\n    updatePreview() {\n        if (this.unlimitedCheckboxTarget.checked) {\n            return // \u7121\u9650\u6642\u6A21\u5F0F\u4E0D\u9700\u8981\u66F4\u65B0\u9810\u89BD\n        }\n\n        const diningMinutes = parseInt(this.diningDurationFieldTarget.value) || 120\n        const bufferMinutes = parseInt(this.bufferTimeFieldTarget.value) || 15\n        const totalMinutes = diningMinutes + bufferMinutes\n\n        // \u8A08\u7B97\u7D50\u675F\u6642\u9593\uFF08\u4EE5 18:00 \u70BA\u4F8B\uFF09\n        const startTime = new Date()\n        startTime.setHours(18, 0, 0, 0)\n        const endTime = new Date(startTime.getTime() + totalMinutes * 60000)\n\n        this.durationPreviewTarget.innerHTML = `\u7E3D\u4F54\u7528\u6642\u9593\uFF1A<span class=\"font-medium text-blue-600\">${totalMinutes} \u5206\u9418</span>`\n        this.examplePreviewTarget.innerHTML = `\u4F8B\u5982\uFF1A18:00 \u8A02\u4F4D\uFF0C\u684C\u4F4D\u6703\u88AB\u4F54\u7528\u5230 <span class=\"font-medium text-blue-600\">${endTime\n            .getHours()\n            .toString()\n            .padStart(2, '0')}:${endTime.getMinutes().toString().padStart(2, '0')}</span>`\n    }\n}\n", "import { Controller } from '@hotwired/stimulus'\n\nexport default class extends Controller {\n    static targets = ['button', 'menu']\n\n    connect() {\n        this.boundClickOutside = this.clickOutside.bind(this)\n    }\n\n    disconnect() {\n        document.removeEventListener('click', this.boundClickOutside)\n    }\n\n    toggle(event) {\n        event.preventDefault()\n        event.stopPropagation()\n\n        if (this.menuTarget.classList.contains('hidden')) {\n            this.open()\n        } else {\n            this.close()\n        }\n    }\n\n    open() {\n        this.menuTarget.classList.remove('hidden')\n        document.addEventListener('click', this.boundClickOutside)\n    }\n\n    close() {\n        this.menuTarget.classList.add('hidden')\n        document.removeEventListener('click', this.boundClickOutside)\n    }\n\n    clickOutside(event) {\n        if (!this.element.contains(event.target)) {\n            this.close()\n        }\n    }\n}\n", "import { Controller } from '@hotwired/stimulus'\n\nexport default class extends Controller {\n    static values = {\n        message: String,\n        type: String,\n        autoHide: Boolean,\n        redirectAfter: Boolean,\n        hideDelay: Number,\n    }\n\n    connect() {\n        console.log('\uFFFD\uFFFD Flash \u63A7\u5236\u5668\u5DF2\u9023\u63A5!', {\n            autoHide: this.autoHideValue,\n            redirectAfter: this.redirectAfterValue,\n            hideDelay: this.hideDelayValue,\n        })\n\n        this.showFlash()\n\n        if (this.autoHideValue) {\n            const delay = this.hideDelayValue || 800\n            console.log(`\u23F0 \u5C07\u5728 ${delay}ms \u5F8C\u81EA\u52D5\u96B1\u85CF`)\n            setTimeout(() => {\n                this.hide()\n            }, delay)\n        }\n    }\n\n    showFlash() {\n        console.log('\u2728 \u986F\u793A Flash \u52D5\u756B')\n        // \u6DFB\u52A0\u6DE1\u5165\u52D5\u756B\n        this.element.style.opacity = '0'\n        this.element.style.transform = 'translateX(100%)'\n        this.element.style.transition = 'all 0.3s ease-out'\n\n        // \u5EF6\u9072\u4E00\u9EDE\u986F\u793A\u52D5\u756B\n        setTimeout(() => {\n            this.element.style.opacity = '1'\n            this.element.style.transform = 'translateX(0)'\n        }, 100)\n    }\n\n    hide() {\n        console.log('\uD83D\uDEAA \u958B\u59CB\u96B1\u85CF Flash')\n        this.element.style.transition = 'all 0.3s ease-in'\n        this.element.style.opacity = '0'\n        this.element.style.transform = 'translateX(100%)'\n\n        setTimeout(() => {\n            if (this.redirectAfterValue) {\n                console.log('\uD83D\uDD04 \u91CD\u65B0\u8F09\u5165\u9801\u9762')\n                window.location.reload()\n            } else {\n                console.log('\uD83D\uDDD1\uFE0F \u79FB\u9664 Flash \u5143\u7D20')\n                this.element.remove()\n            }\n        }, 300)\n    }\n\n    // \u624B\u52D5\u95DC\u9589\u6309\u9215\n    close() {\n        console.log('\u274C \u624B\u52D5\u95DC\u9589 Flash')\n        this.hide()\n    }\n}\n", "import { Controller } from '@hotwired/stimulus'\n\nexport default class extends Controller {\n    static targets = ['nameInput', 'validationMessage']\n    static values = { \n        restaurantId: String,\n        currentName: String // \u7528\u65BC\u7DE8\u8F2F\u6642\u6392\u9664\u7576\u524D\u8A18\u9304\n    }\n    \n    connect() {\n        console.log('\uD83D\uDD25 Form validation controller connected')\n        this.debounceTimer = null\n    }\n    \n    validateName() {\n        const name = this.nameInputTarget.value.trim()\n        \n        // \u6E05\u9664\u4E4B\u524D\u7684\u8A08\u6642\u5668\n        if (this.debounceTimer) {\n            clearTimeout(this.debounceTimer)\n        }\n        \n        // \u5982\u679C\u662F\u7A7A\u503C\u6216\u8207\u7576\u524D\u540D\u7A31\u76F8\u540C\uFF0C\u6E05\u9664\u9A57\u8B49\u8A0A\u606F\n        if (!name || name === this.currentNameValue) {\n            this.clearValidationMessage()\n            return\n        }\n        \n        // \u5EF6\u9072\u9A57\u8B49\u907F\u514D\u904E\u5EA6\u8ACB\u6C42\n        this.debounceTimer = setTimeout(() => {\n            this.checkNameUniqueness(name)\n        }, 500)\n    }\n    \n    checkNameUniqueness(name) {\n        const csrfToken = document.querySelector('[name=\"csrf-token\"]').content\n        \n        fetch(`/admin/restaurants/${this.restaurantIdValue}/table_groups/check_name_uniqueness`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'X-CSRF-Token': csrfToken,\n            },\n            body: JSON.stringify({\n                name: name,\n                current_name: this.currentNameValue\n            })\n        })\n        .then(response => response.json())\n        .then(data => {\n            if (data.unique) {\n                this.showValidationMessage('\u540D\u7A31\u53EF\u7528', 'success')\n            } else {\n                this.showValidationMessage('\u8A72\u540D\u7A31\u5DF2\u5B58\u5728\uFF0C\u8ACB\u4F7F\u7528\u5176\u4ED6\u540D\u7A31', 'error')\n            }\n        })\n        .catch(error => {\n            console.error('\uD83D\uDD25 Validation error:', error)\n            this.clearValidationMessage()\n        })\n    }\n    \n    showValidationMessage(message, type) {\n        const messageElement = this.validationMessageTarget\n        const isError = type === 'error'\n        \n        messageElement.textContent = message\n        messageElement.className = `mt-1 text-sm ${isError ? 'text-red-600' : 'text-green-600'}`\n        messageElement.style.display = 'block'\n        \n        // \u66F4\u65B0\u8F38\u5165\u6846\u6A23\u5F0F\n        this.nameInputTarget.className = this.nameInputTarget.className.replace(\n            /border-gray-300|border-red-300|border-green-300/,\n            isError ? 'border-red-300' : 'border-green-300'\n        )\n        \n        // \u66F4\u65B0\u63D0\u4EA4\u6309\u9215\u72C0\u614B\n        const submitButton = this.element.querySelector('input[type=\"submit\"]')\n        if (submitButton) {\n            submitButton.disabled = isError\n            submitButton.className = submitButton.className.replace(\n                /bg-blue-600|bg-gray-400/,\n                isError ? 'bg-gray-400' : 'bg-blue-600'\n            )\n        }\n    }\n    \n    clearValidationMessage() {\n        const messageElement = this.validationMessageTarget\n        messageElement.style.display = 'none'\n        messageElement.textContent = ''\n        \n        // \u91CD\u7F6E\u8F38\u5165\u6846\u6A23\u5F0F\n        this.nameInputTarget.className = this.nameInputTarget.className.replace(\n            /border-red-300|border-green-300/,\n            'border-gray-300'\n        )\n        \n        // \u91CD\u7F6E\u63D0\u4EA4\u6309\u9215\u72C0\u614B\n        const submitButton = this.element.querySelector('input[type=\"submit\"]')\n        if (submitButton) {\n            submitButton.disabled = false\n            submitButton.className = submitButton.className.replace(\n                /bg-gray-400/,\n                'bg-blue-600'\n            )\n        }\n    }\n}", "import { Controller } from \"@hotwired/stimulus\"\n\nexport default class extends Controller {\n  connect() {\n    this.element.textContent = \"Hello World!\"\n  }\n}\n", "import { Controller } from '@hotwired/stimulus'\n\nexport default class extends Controller {\n    static targets = ['overlay', 'content', 'title', 'message', 'confirmBtn', 'icon', 'iconContainer']\n\n    connect() {\n        this.pendingForm = null\n        this.pendingAction = null\n\n        // \u521D\u59CB\u5316\u5168\u57DF\u8B8A\u6578\n        if (!window.modalState) {\n            window.modalState = {\n                pendingForm: null,\n                pendingAction: null\n            }\n        }\n\n        // \u8A3B\u518A\u5168\u57DF flash \u986F\u793A\u51FD\u6578\n        window.showModalFlash = (message, type) => {\n            this.showFlash(message, type)\n        }\n\n        // \u6DFB\u52A0\u5168\u57DF\u4E8B\u4EF6\u59D4\u6D3E\u4F86\u8655\u7406\u52D5\u614B\u8F09\u5165\u7684\u95DC\u9589\u6309\u9215\n        this.boundHandleModalClose = this.handleModalClose.bind(this)\n        document.addEventListener('click', this.boundHandleModalClose)\n\n        // \u76E3\u807D\u5168\u57DF\u7684\u95DC\u9589\u4E8B\u4EF6\n        this.boundCloseEvent = this.close.bind(this)\n        document.addEventListener('close-modal', this.boundCloseEvent)\n    }\n\n    disconnect() {\n        // \u6E05\u7406\u4E8B\u4EF6\u76E3\u807D\u5668\n        if (this.boundHandleModalClose) {\n            document.removeEventListener('click', this.boundHandleModalClose)\n        }\n        if (this.boundCloseEvent) {\n            document.removeEventListener('close-modal', this.boundCloseEvent)\n        }\n    }\n\n    // \u8655\u7406 modal \u95DC\u9589\u6309\u9215\u7684\u5168\u57DF\u9EDE\u64CA\u4E8B\u4EF6\n    handleModalClose(event) {\n        // \u6AA2\u67E5\u9EDE\u64CA\u7684\u5143\u7D20\u662F\u5426\u6709 modal \u95DC\u9589 action\n        const closestActionElement = event.target.closest('[data-action*=\"modal#close\"]')\n        if (closestActionElement) {\n            event.preventDefault()\n            this.close()\n        }\n    }\n\n    // \u986F\u793A\u78BA\u8A8D\u5C0D\u8A71\u6846\n    show(event) {\n        event.preventDefault()\n        \n        console.log('\uD83D\uDD25 Modal show triggered')\n\n        const button = event.currentTarget\n        const form = button.closest('form')\n        console.log('\uD83D\uDCDD Form found:', form)\n        \n        const title = button.dataset.confirmTitle || '\u78BA\u8A8D\u64CD\u4F5C'\n        const message = button.dataset.confirmMessage || '\u60A8\u78BA\u5B9A\u8981\u57F7\u884C\u6B64\u64CD\u4F5C\u55CE\uFF1F'\n        const confirmText = button.dataset.confirmText || '\u78BA\u8A8D'\n        const type = button.dataset.confirmType || 'danger' // danger, warning, info\n\n        // \u5C0B\u627E modal \u5143\u7D20\uFF08\u53EF\u80FD\u5728\u4E0D\u540C\u7684 DOM \u5340\u57DF\uFF09\n        const modal = document.getElementById('confirmation-modal')\n        const titleElement = modal?.querySelector('[data-modal-target=\"title\"]')\n        const messageElement = modal?.querySelector('[data-modal-target=\"message\"]')\n        const confirmBtnElement = modal?.querySelector('[data-modal-target=\"confirmBtn\"]')\n        const overlayElement = modal?.querySelector('[data-modal-target=\"overlay\"]')\n        const contentElement = modal?.querySelector('[data-modal-target=\"content\"]')\n\n        if (!modal || !titleElement || !messageElement || !confirmBtnElement) {\n            console.error('\u274C Modal elements not found')\n            return\n        }\n\n        // \u8A2D\u5B9A modal \u5167\u5BB9\n        titleElement.textContent = title\n        messageElement.textContent = message\n        confirmBtnElement.textContent = confirmText\n\n        // \u8A2D\u5B9A\u5716\u793A\u548C\u984F\u8272\n        this.setModalStyleForElement(modal, type)\n\n        // \u5132\u5B58\u5F85\u57F7\u884C\u7684\u8868\u55AE\u6216\u52D5\u4F5C\u5230\u5168\u57DF\u72C0\u614B\n        window.modalState.pendingForm = form\n        window.modalState.pendingAction = () => {\n            console.log('\uD83D\uDE80 Executing pending action, form:', form)\n            if (form) {\n                console.log('\uD83D\uDCE8 Submitting form:', form.action)\n                form.submit()\n            } else {\n                // \u5982\u679C\u6C92\u6709\u8868\u55AE\uFF0C\u57F7\u884C\u5176\u4ED6\u52D5\u4F5C\uFF08\u4F8B\u5982\u9023\u7D50\u9EDE\u64CA\uFF09\n                const href = button.href\n                if (href) {\n                    console.log('\uD83D\uDD17 Navigating to:', href)\n                    window.location.href = href\n                }\n            }\n        }\n        \n        console.log('\uD83D\uDCBE Saved to global state:', window.modalState)\n        \n        // \u4E5F\u4FDD\u5B58\u5230\u672C\u5730\u5BE6\u4F8B\uFF08\u5411\u5F8C\u76F8\u5BB9\uFF09\n        this.pendingForm = form\n        this.pendingAction = window.modalState.pendingAction\n\n        // \u986F\u793A modal\n        modal.classList.remove('hidden')\n        modal.classList.add('block')\n\n        // \u52A0\u5165\u52D5\u756B\u6548\u679C\n        requestAnimationFrame(() => {\n            overlayElement?.classList.add('opacity-100')\n            contentElement?.classList.add('opacity-100')\n        })\n    }\n\n    // \u95DC\u9589\u5C0D\u8A71\u6846\n    close() {\n        // \u5617\u8A66\u95DC\u9589\u78BA\u8A8D\u5C0D\u8A71\u6846\n        const confirmationModal = document.getElementById('confirmation-modal')\n        if (confirmationModal && !confirmationModal.classList.contains('hidden')) {\n            const overlayElement = confirmationModal?.querySelector('[data-modal-target=\"overlay\"]')\n            const contentElement = confirmationModal?.querySelector('[data-modal-target=\"content\"]')\n\n            if (overlayElement && contentElement) {\n                overlayElement.classList.remove('opacity-100')\n                contentElement.classList.remove('opacity-100')\n            }\n\n            setTimeout(() => {\n                if (confirmationModal) {\n                    confirmationModal.classList.add('hidden')\n                    confirmationModal.classList.remove('block')\n                }\n                \n                // \u6E05\u9664\u672C\u5730\u548C\u5168\u57DF\u72C0\u614B\n                this.pendingForm = null\n                this.pendingAction = null\n                if (window.modalState) {\n                    window.modalState.pendingForm = null\n                    window.modalState.pendingAction = null\n                }\n            }, 200)\n            return\n        }\n\n        // \u5617\u8A66\u95DC\u9589\u5167\u5BB9 modal\n        const modalContainer = document.getElementById('modal-container')\n        if (modalContainer && !modalContainer.classList.contains('hidden')) {\n            modalContainer.classList.add('hidden')\n\n            // \u6E05\u7A7A\u5167\u5BB9\n            const modalContent = document.getElementById('modal-content')\n            if (modalContent) {\n                modalContent.innerHTML = ''\n            }\n        }\n    }\n\n    // \u78BA\u8A8D\u64CD\u4F5C\n    confirm() {\n        console.log('\u2705 Modal confirm triggered')\n        console.log('\uD83D\uDD0D Current global state:', window.modalState)\n        \n        // \u512A\u5148\u4F7F\u7528\u5168\u57DF\u72C0\u614B\uFF0C\u56DE\u9000\u5230\u672C\u5730\u5BE6\u4F8B\n        const pendingAction = window.modalState?.pendingAction || this.pendingAction\n        console.log('\u26A1 Pending action found:', !!pendingAction)\n        \n        if (pendingAction) {\n            // \u5148\u57F7\u884C\u52D5\u4F5C\n            pendingAction()\n\n            // \u6E05\u9664\u5168\u57DF\u72C0\u614B\n            if (window.modalState) {\n                window.modalState.pendingForm = null\n                window.modalState.pendingAction = null\n            }\n\n            // \u7136\u5F8C\u95DC\u9589 modal\n            this.close()\n        } else {\n            console.log('\u274C No pending action found')\n            this.close()\n        }\n    }\n\n    // \u8A2D\u5B9A modal \u7684\u6A23\u5F0F\uFF08\u5716\u793A\u548C\u984F\u8272\uFF09- \u4F7F\u7528\u5143\u7D20\u53C3\u6578\n    setModalStyleForElement(modal, type) {\n        const iconContainer = modal.querySelector('[data-modal-target=\"iconContainer\"]')\n        const icon = modal.querySelector('[data-modal-target=\"icon\"]')\n        const confirmBtn = modal.querySelector('[data-modal-target=\"confirmBtn\"]')\n\n        if (!iconContainer || !icon || !confirmBtn) {\n            console.error('\u274C Modal style elements not found')\n            return\n        }\n\n        this.applyModalStyle(iconContainer, icon, confirmBtn, type)\n    }\n\n    // \u8A2D\u5B9A modal \u7684\u6A23\u5F0F\uFF08\u5716\u793A\u548C\u984F\u8272\uFF09- \u539F\u59CB\u65B9\u6CD5\n    setModalStyle(type) {\n        const iconContainer = this.iconContainerTarget\n        const icon = this.iconTarget\n        const confirmBtn = this.confirmBtnTarget\n\n        this.applyModalStyle(iconContainer, icon, confirmBtn, type)\n    }\n\n    // \u901A\u7528\u7684\u6A23\u5F0F\u5957\u7528\u65B9\u6CD5\n    applyModalStyle(iconContainer, icon, confirmBtn, type) {\n        // \u91CD\u7F6E\u6240\u6709\u6A23\u5F0F\n        iconContainer.className =\n            'mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full sm:mx-0 sm:h-10 sm:w-10'\n        confirmBtn.className =\n            'w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm'\n\n        switch (type) {\n            case 'danger':\n                iconContainer.classList.add('bg-red-100')\n                icon.classList.add('text-red-600')\n                confirmBtn.classList.add('bg-red-600', 'hover:bg-red-700', 'focus:ring-red-500')\n                // \u8B66\u544A\u5716\u793A\n                icon.innerHTML =\n                    '<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />'\n                break\n            case 'warning':\n                iconContainer.classList.add('bg-yellow-100')\n                icon.classList.add('text-yellow-600')\n                confirmBtn.classList.add('bg-yellow-600', 'hover:bg-yellow-700', 'focus:ring-yellow-500')\n                // \u9A5A\u5606\u865F\u5716\u793A\n                icon.innerHTML =\n                    '<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />'\n                break\n            case 'info':\n                iconContainer.classList.add('bg-blue-100')\n                icon.classList.add('text-blue-600')\n                confirmBtn.classList.add('bg-blue-600', 'hover:bg-blue-700', 'focus:ring-blue-500')\n                // \u8CC7\u8A0A\u5716\u793A\n                icon.innerHTML =\n                    '<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />'\n                break\n            default:\n                iconContainer.classList.add('bg-gray-100')\n                icon.classList.add('text-gray-600')\n                confirmBtn.classList.add('bg-gray-600', 'hover:bg-gray-700', 'focus:ring-gray-500')\n        }\n    }\n\n    // \u9375\u76E4\u4E8B\u4EF6\u8655\u7406\n    keydown(event) {\n        if (event.key === 'Escape') {\n            this.close()\n        } else if (event.key === 'Enter') {\n            this.confirm()\n        }\n    }\n\n    // \u986F\u793A flash \u8A0A\u606F\n    showFlash(message, type = 'success') {\n        const flashContainer = document.getElementById('modal-flash-messages')\n        const flashContent = document.getElementById('modal-flash-content')\n        const flashIcon = document.getElementById('modal-flash-icon')\n        const flashText = document.getElementById('modal-flash-text')\n\n        if (!flashContainer || !flashContent || !flashIcon || !flashText) return\n\n        // \u6E05\u9664\u4E4B\u524D\u7684\u6A23\u5F0F\n        flashContent.className = 'rounded-md p-4'\n        flashIcon.innerHTML = ''\n\n        // \u6839\u64DA\u985E\u578B\u8A2D\u5B9A\u6A23\u5F0F\u548C\u5716\u793A\n        switch (type) {\n            case 'success':\n                flashContent.classList.add('bg-green-50', 'border', 'border-green-200')\n                flashIcon.classList.add('text-green-400')\n                flashIcon.innerHTML =\n                    '<path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clip-rule=\"evenodd\"></path>'\n                flashText.classList.add('text-green-800')\n                break\n            case 'error':\n                flashContent.classList.add('bg-red-50', 'border', 'border-red-200')\n                flashIcon.classList.add('text-red-400')\n                flashIcon.innerHTML =\n                    '<path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clip-rule=\"evenodd\"></path>'\n                flashText.classList.add('text-red-800')\n                break\n            case 'warning':\n                flashContent.classList.add('bg-yellow-50', 'border', 'border-yellow-200')\n                flashIcon.classList.add('text-yellow-400')\n                flashIcon.innerHTML =\n                    '<path fill-rule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clip-rule=\"evenodd\"></path>'\n                flashText.classList.add('text-yellow-800')\n                break\n        }\n\n        // \u8A2D\u5B9A\u8A0A\u606F\u6587\u5B57\n        flashText.textContent = message\n\n        // \u986F\u793A\u8A0A\u606F\n        flashContainer.classList.remove('hidden')\n\n        // 3 \u79D2\u5F8C\u81EA\u52D5\u96B1\u85CF\n        setTimeout(() => {\n            flashContainer.classList.add('hidden')\n        }, 3000)\n    }\n\n    // \u96B1\u85CF flash \u8A0A\u606F\n    hideFlash() {\n        const flashContainer = document.getElementById('modal-flash-messages')\n        if (flashContainer) {\n            flashContainer.classList.add('hidden')\n        }\n    }\n\n    // \u6514\u622A\u8868\u55AE\u63D0\u4EA4\uFF0C\u986F\u793A\u78BA\u8A8D\u5C0D\u8A71\u6846\n    interceptSubmit(event) {\n        event.preventDefault()\n        \n        console.log('\uD83D\uDD25 Form submit intercepted')\n        \n        const form = event.currentTarget\n        console.log('\uD83D\uDCDD Form found:', form)\n        \n        const title = form.dataset.confirmTitle || '\u78BA\u8A8D\u64CD\u4F5C'\n        const message = form.dataset.confirmMessage || '\u60A8\u78BA\u5B9A\u8981\u57F7\u884C\u6B64\u64CD\u4F5C\u55CE\uFF1F'\n        const confirmText = form.dataset.confirmText || '\u78BA\u8A8D'\n        const type = form.dataset.confirmType || 'danger'\n\n        // \u5C0B\u627E modal \u5143\u7D20\n        const modal = document.getElementById('confirmation-modal')\n        const titleElement = modal?.querySelector('[data-modal-target=\"title\"]')\n        const messageElement = modal?.querySelector('[data-modal-target=\"message\"]')\n        const confirmBtnElement = modal?.querySelector('[data-modal-target=\"confirmBtn\"]')\n        const overlayElement = modal?.querySelector('[data-modal-target=\"overlay\"]')\n        const contentElement = modal?.querySelector('[data-modal-target=\"content\"]')\n\n        if (!modal || !titleElement || !messageElement || !confirmBtnElement) {\n            console.error('\u274C Modal elements not found')\n            // \u5982\u679C\u627E\u4E0D\u5230 modal\uFF0C\u76F4\u63A5\u63D0\u4EA4\u8868\u55AE\n            form.submit()\n            return\n        }\n\n        // \u8A2D\u5B9A modal \u5167\u5BB9\n        titleElement.textContent = title\n        messageElement.textContent = message\n        confirmBtnElement.textContent = confirmText\n\n        // \u8A2D\u5B9A\u5716\u793A\u548C\u984F\u8272\n        this.setModalStyleForElement(modal, type)\n\n        // \u5132\u5B58\u5F85\u57F7\u884C\u7684\u8868\u55AE\u5230\u5168\u57DF\u72C0\u614B\n        window.modalState.pendingForm = form\n        window.modalState.pendingAction = () => {\n            console.log('\uD83D\uDE80 Executing pending form submission')\n            console.log('\uD83D\uDCE8 Submitting form:', form.action)\n            form.submit()\n        }\n        \n        console.log('\uD83D\uDCBE Saved form to global state:', window.modalState)\n\n        // \u986F\u793A modal\n        modal.classList.remove('hidden')\n        modal.classList.add('block')\n\n        // \u52A0\u5165\u52D5\u756B\u6548\u679C\n        requestAnimationFrame(() => {\n            overlayElement?.classList.add('opacity-100')\n            contentElement?.classList.add('opacity-100')\n        })\n    }\n\n    testClick() {\n        alert('Stimulus modal controller \u5DE5\u4F5C\u6B63\u5E38\uFF01')\n    }\n\n    // \u9060\u7A0B\u8F09\u5165 Modal \u5167\u5BB9\n    openRemote(event) {\n        event.preventDefault()\n\n        const link = event.currentTarget\n        const url = link.href\n\n        // \u627E\u5230 modal \u5BB9\u5668\n        const modalContainer = document.getElementById('modal-container')\n        const modalContent = document.getElementById('modal-content')\n\n        if (!modalContainer || !modalContent) {\n            console.error('\u274C Modal container not found')\n            return\n        }\n\n        // \u986F\u793A\u8F09\u5165\u72C0\u614B\n        modalContent.innerHTML = `\n            <div class=\"p-6 text-center\">\n                <svg class=\"animate-spin h-8 w-8 text-gray-400 mx-auto\" fill=\"none\" viewBox=\"0 0 24 24\">\n                    <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n                    <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                </svg>\n                <p class=\"mt-2 text-gray-500\">\u8F09\u5165\u4E2D...</p>\n            </div>\n        `\n\n        // \u986F\u793A Modal\n        modalContainer.classList.remove('hidden')\n\n        // \u900F\u904E AJAX \u8F09\u5165\u5167\u5BB9\n        fetch(url, {\n            headers: {\n                Accept: 'text/html',\n                'X-Requested-With': 'XMLHttpRequest',\n            },\n        })\n            .then((response) => {\n                console.log('\uD83D\uDCE1 Response status:', response.status)\n                console.log('\uD83D\uDCE1 Response headers:', response.headers.get('Content-Type'))\n\n                if (!response.ok) {\n                    throw new Error(`HTTP ${response.status}: ${response.statusText}`)\n                }\n                return response.text()\n            })\n            .then((html) => {\n                console.log('\u2705 HTML loaded successfully, length:', html.length)\n                modalContent.innerHTML = html\n\n                // \u79FB\u9664\u6709\u554F\u984C\u7684 application.load() \u8ABF\u7528\n                // \u52D5\u614B\u5167\u5BB9\u4E2D\u7684\u95DC\u9589\u6309\u9215\u6703\u7531\u5168\u57DF\u4E8B\u4EF6\u59D4\u6D3E\u8655\u7406\n            })\n            .catch((error) => {\n                console.error('\uD83D\uDCA5 \u8F09\u5165\u5931\u6557\u8A73\u7D30\u932F\u8AA4:', error)\n                modalContent.innerHTML = `\n                <div class=\"p-6 text-center\">\n                    <p class=\"text-red-500\">\u8F09\u5165\u5931\u6557\uFF1A${error.message}</p>\n                    <p class=\"text-sm text-gray-500 mt-2\">\u8ACB\u6AA2\u67E5\u63A7\u5236\u53F0\u4E86\u89E3\u8A73\u7D30\u932F\u8AA4</p>\n                </div>\n            `\n            })\n    }\n}\n", "import { Controller } from \"@hotwired/stimulus\"\n\nexport default class extends Controller {\n  static targets = [\"customPeriodsSection\", \"periodsList\"]\n\n  connect() {\n    console.log(\"Period editor controller connected\")\n    this.updateAllPreviews()\n  }\n\n  modeChanged(event) {\n    const mode = event.target.value\n    const customSection = document.getElementById('custom-periods-section')\n    \n    if (mode === 'custom_hours') {\n      customSection.classList.remove('hidden')\n    } else {\n      customSection.classList.add('hidden')\n    }\n  }\n\n  timeChanged(event) {\n    const periodItem = event.target.closest('.period-item')\n    this.updatePreview(periodItem)\n  }\n\n  intervalChanged(event) {\n    const periodItem = event.target.closest('.period-item')\n    this.updatePreview(periodItem)\n  }\n\n  addPeriod(event) {\n    const periodsContainer = document.getElementById('periods-list')\n    const existingPeriods = periodsContainer.querySelectorAll('.period-item')\n    const newIndex = existingPeriods.length\n    \n    const newPeriodHTML = this.createPeriodHTML(newIndex)\n    periodsContainer.insertAdjacentHTML('beforeend', newPeriodHTML)\n    \n    // \u66F4\u65B0\u65B0\u6642\u6BB5\u7684\u9810\u89BD\n    const newPeriod = periodsContainer.lastElementChild\n    this.updatePreview(newPeriod)\n  }\n\n  removePeriod(event) {\n    const periodItem = event.target.closest('.period-item')\n    periodItem.remove()\n    this.reindexPeriods()\n  }\n\n  async savePeriods(event) {\n    const weekday = event.target.dataset.weekday\n    const mode = document.querySelector('input[name=\"operation_mode\"]:checked').value\n    const periods = this.collectPeriods()\n    \n    try {\n      const response = await fetch(`/admin/restaurants/${this.getRestaurantSlug()}/reservation_periods/update_day`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRF-Token': this.getCSRFToken(),\n          'X-Requested-With': 'XMLHttpRequest'\n        },\n        body: JSON.stringify({\n          weekday: weekday,\n          operation_mode: mode,\n          periods: periods\n        })\n      })\n      \n      if (response.ok) {\n        // \u95DC\u9589 modal\n        this.closeModal()\n        // \u5237\u65B0\u9801\u9762\u5167\u5BB9\n        window.location.reload()\n      } else {\n        console.error('Error saving periods')\n      }\n    } catch (error) {\n      console.error('Error saving periods:', error)\n    }\n  }\n\n  updatePreview(periodItem) {\n    const startTime = periodItem.querySelector('input[name$=\"[start_time]\"]').value\n    const endTime = periodItem.querySelector('input[name$=\"[end_time]\"]').value\n    const interval = parseInt(periodItem.querySelector('select[name$=\"[interval]\"]').value)\n    \n    if (startTime && endTime && interval) {\n      const slots = this.generateTimeSlots(startTime, endTime, interval)\n      const slotCount = periodItem.querySelector('.slot-count')\n      const slotsPreview = periodItem.querySelector('.time-slots-preview')\n      \n      if (slotCount) slotCount.textContent = slots.length\n      if (slotsPreview) slotsPreview.textContent = slots.join(', ')\n    }\n  }\n\n  updateAllPreviews() {\n    const periods = document.querySelectorAll('.period-item')\n    periods.forEach(period => this.updatePreview(period))\n  }\n\n  generateTimeSlots(startTime, endTime, intervalMinutes) {\n    const slots = []\n    const start = new Date(`2000-01-01T${startTime}:00`)\n    const end = new Date(`2000-01-01T${endTime}:00`)\n    \n    let current = new Date(start)\n    \n    while (current <= end) {\n      slots.push(current.toTimeString().slice(0, 5))\n      current.setMinutes(current.getMinutes() + intervalMinutes)\n    }\n    \n    return slots\n  }\n\n  createPeriodHTML(index) {\n    return `\n      <div class=\"period-item bg-gray-50 p-4 rounded-lg\" data-period-index=\"${index}\">\n        <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div class=\"md:col-span-2\">\n            <div class=\"flex items-center space-x-2\">\n              <input type=\"time\" \n                     name=\"periods[${index}][start_time]\" \n                     value=\"18:00\"\n                     class=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n                     data-action=\"change->period-editor#timeChanged\" />\n              <span class=\"text-gray-500\">\u81F3</span>\n              <input type=\"time\" \n                     name=\"periods[${index}][end_time]\" \n                     value=\"20:00\"\n                     class=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n                     data-action=\"change->period-editor#timeChanged\" />\n            </div>\n          </div>\n          <div>\n            <select name=\"periods[${index}][interval]\" \n                    class=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n                    data-action=\"change->period-editor#intervalChanged\">\n              <option value=\"15\">15 \u5206\u9418</option>\n              <option value=\"30\" selected>30 \u5206\u9418</option>\n              <option value=\"60\">60 \u5206\u9418</option>\n              <option value=\"90\">90 \u5206\u9418</option>\n              <option value=\"120\">120 \u5206\u9418</option>\n              <option value=\"150\">150 \u5206\u9418</option>\n              <option value=\"180\">180 \u5206\u9418</option>\n              <option value=\"210\">210 \u5206\u9418</option>\n              <option value=\"240\">240 \u5206\u9418</option>\n            </select>\n          </div>\n        </div>\n        <div class=\"mt-3\">\n          <div class=\"text-sm text-gray-600\">\n            \u8A02\u4F4D\u6642\u9593\u9078\u9805\uFF1A\u5171 <span class=\"slot-count\">5</span> \u500B\n          </div>\n          <div class=\"time-slots-preview mt-1 text-sm text-gray-500\">\n            18:00, 18:30, 19:00, 19:30, 20:00\n          </div>\n        </div>\n        <div class=\"mt-3 flex justify-end\">\n          <button type=\"button\" \n                  class=\"text-red-600 hover:text-red-800 text-sm\"\n                  data-action=\"click->period-editor#removePeriod\"\n                  data-period-index=\"${index}\">\n            \u79FB\u9664\u6B64\u6642\u6BB5\n          </button>\n        </div>\n      </div>\n    `\n  }\n\n  collectPeriods() {\n    const periods = []\n    const periodItems = document.querySelectorAll('.period-item')\n    \n    periodItems.forEach(item => {\n      const startTime = item.querySelector('input[name$=\"[start_time]\"]').value\n      const endTime = item.querySelector('input[name$=\"[end_time]\"]').value\n      const interval = item.querySelector('select[name$=\"[interval]\"]').value\n      \n      if (startTime && endTime) {\n        periods.push({\n          start_time: startTime,\n          end_time: endTime,\n          interval_minutes: parseInt(interval)\n        })\n      }\n    })\n    \n    return periods\n  }\n\n  reindexPeriods() {\n    const periodItems = document.querySelectorAll('.period-item')\n    periodItems.forEach((item, index) => {\n      item.dataset.periodIndex = index\n      item.querySelector('input[name$=\"[start_time]\"]').name = `periods[${index}][start_time]`\n      item.querySelector('input[name$=\"[end_time]\"]').name = `periods[${index}][end_time]`\n      item.querySelector('select[name$=\"[interval]\"]').name = `periods[${index}][interval]`\n      \n      const removeButton = item.querySelector('button[data-action*=\"removePeriod\"]')\n      if (removeButton) {\n        removeButton.dataset.periodIndex = index\n      }\n    })\n  }\n\n  closeModal() {\n    const modalContainer = document.getElementById('edit-modal-container')\n    modalContainer.classList.add('hidden')\n  }\n\n  getRestaurantSlug() {\n    return window.location.pathname.split('/')[3]\n  }\n\n  getCSRFToken() {\n    return document.querySelector('meta[name=\"csrf-token\"]')?.getAttribute('content')\n  }\n}", "import { Controller } from '@hotwired/stimulus'\nimport flatpickr from 'flatpickr'\n\nexport default class extends Controller {\n    static targets = [\n        'adultSelect',\n        'childSelect',\n        'dateTimeSection',\n        'loadingState',\n        'calendarInput',\n        'selectedDateDisplay',\n        'selectedDateText',\n        'selectedWeekdayText',\n        'fullBookedState',\n        'fullBookedUntilDate',\n        'timeSlotsContainer',\n        'afternoonSlots',\n        'afternoonSlotsGrid',\n        'eveningSlots',\n        'eveningSlotsGrid',\n        'nextStepButton',\n        'phoneInput',\n        'phoneLimitWarning',\n    ]\n\n    static values = {\n        restaurantSlug: String,\n    }\n\n    connect() {\n        console.log('ReservationCalendarController connected')\n        this.selectedDate = null\n        this.selectedTime = null\n        this.availableDates = []\n        this.businessPeriods = []\n        this.flatpickrInstance = null\n\n        // \u521D\u59CB\u8F09\u5165\n        this.updatePartySize()\n    }\n\n    disconnect() {\n        // \u6E05\u7406 Flatpickr \u5BE6\u4F8B\n        if (this.flatpickrInstance) {\n            this.flatpickrInstance.destroy()\n        }\n    }\n\n    // \u683C\u5F0F\u5316\u65E5\u671F\u70BA\u672C\u5730\u6642\u5340\u5B57\u4E32 (YYYY-MM-DD) - \u4F7F\u7528\u8207\u7B2C\u4E00\u500B\u6A94\u6848\u76F8\u540C\u7684\u65B9\u5F0F\n    formatDateToLocal(date) {\n        // \u4F7F\u7528\u672C\u5730\u6642\u5340\u683C\u5F0F\u5316\uFF0C\u907F\u514D\u6642\u5340\u8F49\u63DB\u554F\u984C\n        const year = date.getFullYear()\n        const month = String(date.getMonth() + 1).padStart(2, '0')\n        const day = String(date.getDate()).padStart(2, '0')\n        return `${year}-${month}-${day}`\n    }\n\n    // \u89E3\u6790\u65E5\u671F\u5B57\u4E32\u70BA\u672C\u5730\u65E5\u671F\u7269\u4EF6 - \u4FEE\u6B63\u6642\u5340\u8655\u7406\n    parseLocalDate(dateString) {\n        // \u4F7F\u7528\u8207\u7B2C\u4E00\u500B\u6A94\u6848\u76F8\u540C\u7684\u5B89\u5168\u89E3\u6790\u65B9\u5F0F\n        if (dateString.includes('T')) {\n            dateString = dateString.split('T')[0]\n        }\n        const [year, month, day] = dateString.split('-').map(Number)\n        return new Date(year, month - 1, day) // \u6708\u4EFD\u9700\u8981\u6E1B1\n    }\n\n    // \u7372\u53D6\u672C\u5730\u5316\u7684\u9031\u5E7E\u540D\u7A31\n    getLocalWeekdayName(date) {\n        const weekdays = ['\u65E5', '\u4E00', '\u4E8C', '\u4E09', '\u56DB', '\u4E94', '\u516D']\n        return weekdays[date.getDay()]\n    }\n\n    // \u6AA2\u67E5\u65E5\u671F\u662F\u5426\u662F\u4ECA\u5929\u6216\u4E4B\u524D\n    isDateBeforeOrToday(date) {\n        const today = new Date()\n        today.setHours(0, 0, 0, 0) // \u8A2D\u70BA\u4ECA\u5929\u7684\u958B\u59CB\u6642\u9593\n\n        const checkDate = new Date(date)\n        checkDate.setHours(0, 0, 0, 0) // \u8A2D\u70BA\u6AA2\u67E5\u65E5\u671F\u7684\u958B\u59CB\u6642\u9593\n\n        return checkDate <= today\n    }\n\n    // \u7576\u5927\u4EBA\u6216\u5C0F\u5B69\u4EBA\u6578\u6539\u8B8A\u6642\n    updatePartySize() {\n        const adults = parseInt(this.adultSelectTarget.value)\n        const children = parseInt(this.childSelectTarget.value)\n        const totalPartySize = adults + children\n\n        // \u6AA2\u67E5\u7E3D\u4EBA\u6578\u9650\u5236\n        if (totalPartySize > 12) {\n            this.showError('\u7E3D\u4EBA\u6578\u4E0D\u80FD\u8D85\u904E12\u4EBA')\n            return\n        }\n\n        this.partySize = totalPartySize\n        this.loadAvailableDates()\n    }\n\n    // \u8F09\u5165\u53EF\u9810\u7D04\u65E5\u671F\n    async loadAvailableDates() {\n        try {\n            this.showLoading()\n\n            const response = await fetch(\n                `/restaurant/${this.restaurantSlugValue}/available_dates?party_size=${this.partySize}`\n            )\n\n            if (!response.ok) {\n                const errorData = await response.json()\n                if (response.status === 503 && errorData.disabled) {\n                    this.showError('\u7DDA\u4E0A\u8A02\u4F4D\u529F\u80FD\u66AB\u505C\u670D\u52D9\uFF0C\u5982\u9700\u8A02\u4F4D\u8ACB\u76F4\u63A5\u81F4\u96FB\u9910\u5EF3')\n                    return\n                }\n                throw new Error('\u8F09\u5165\u5931\u6557')\n            }\n\n            const data = await response.json()\n            this.availableDates = data.available_dates || []\n            this.businessPeriods = data.reservation_periods || []\n\n            // \u904E\u6FFE\u6389\u4ECA\u5929\u53CA\u4E4B\u524D\u7684\u65E5\u671F\n            this.availableDates = this.availableDates.filter((dateStr) => {\n                const date = this.parseLocalDate(dateStr)\n                return !this.isDateBeforeOrToday(date)\n            })\n\n            console.log('\u8F09\u5165\u7684\u53EF\u7528\u65E5\u671F (\u904E\u6FFE\u5F8C):', this.availableDates)\n\n            // \u53EA\u6709\u5728\u9910\u5EF3\u6709\u8DB3\u5920\u5BB9\u91CF\u4F46\u6C92\u6709\u53EF\u9810\u7D04\u65E5\u671F\u6642\uFF0C\u624D\u986F\u793A\u984D\u6EFF\u8A0A\u606F\n            if (this.availableDates.length === 0 && data.has_capacity && data.full_booked_until) {\n                this.showFullBookedState(data.full_booked_until)\n            } else if (this.availableDates.length === 0 && !data.has_capacity) {\n                // \u9910\u5EF3\u6C92\u6709\u8DB3\u5920\u5BB9\u91CF\u7684\u684C\u4F4D\uFF0C\u986F\u793A\u7121\u6CD5\u5BB9\u7D0D\u7684\u8A0A\u606F\n                this.showNoCapacityState()\n            } else {\n                this.showCalendar()\n                this.initializeFlatpickr()\n            }\n        } catch (error) {\n            console.error('\u8F09\u5165\u53EF\u9810\u7D04\u65E5\u671F\u5931\u6557:', error)\n            this.showError('\u8F09\u5165\u5931\u6557\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66')\n        }\n    }\n\n    // \u521D\u59CB\u5316 Flatpickr \u65E5\u66C6 - \u4FEE\u6B63\u65E5\u671F\u8655\u7406\u65B9\u5F0F\n    initializeFlatpickr() {\n        // \u92B7\u6BC0\u73FE\u6709\u5BE6\u4F8B\n        if (this.flatpickrInstance) {\n            this.flatpickrInstance.destroy()\n        }\n\n        // \u4F7F\u7528\u8207\u7B2C\u4E00\u500B\u6A94\u6848\u76F8\u540C\u7684\u5B89\u5168\u65E5\u671F\u8F49\u63DB\u65B9\u5F0F\n        const enabledDates = this.availableDates.map((dateStr) => {\n            // \u78BA\u4FDD\u4F7F\u7528\u6B63\u78BA\u7684\u65E5\u671F\u89E3\u6790\uFF0C\u907F\u514D\u6642\u5340\u554F\u984C\n            const [year, month, day] = dateStr.split('-').map(Number)\n            return new Date(year, month - 1, day) // \u6708\u4EFD\u9700\u8981\u6E1B1\n        })\n\n        console.log('\u539F\u59CB\u53EF\u7528\u65E5\u671F:', this.availableDates)\n        console.log('\u8F49\u63DB\u5F8C\u7684 Date \u7269\u4EF6:', enabledDates)\n\n        // \u9A57\u8B49\u8F49\u63DB\u662F\u5426\u6B63\u78BA\n        enabledDates.forEach((date, index) => {\n            const originalStr = this.availableDates[index]\n            const convertedStr = this.formatDateToLocal(date)\n            const dayOfWeek = date.getDay()\n            const weekdayNames = ['\u65E5', '\u4E00', '\u4E8C', '\u4E09', '\u56DB', '\u4E94', '\u516D']\n            console.log(`${originalStr} -> ${convertedStr} (\u661F\u671F${weekdayNames[dayOfWeek]})`)\n        })\n\n        // \u6E05\u7A7A\u5BB9\u5668\u5167\u5BB9\u4E26\u8A2D\u5B9A\u57FA\u672C\u6A23\u5F0F\n        this.calendarInputTarget.innerHTML = ''\n        this.calendarInputTarget.style.width = '100%'\n        this.calendarInputTarget.style.maxWidth = '400px'\n        this.calendarInputTarget.style.margin = '0 auto'\n\n        // \u8A2D\u5B9A\u7E41\u9AD4\u4E2D\u6587\u8A9E\u8A00\u5305\n        const chineseTraditional = {\n            weekdays: {\n                // \u78BA\u4FDD\u661F\u671F\u9806\u5E8F\u6B63\u78BA\uFF1A\u661F\u671F\u65E5\u958B\u59CB\n                shorthand: ['\u65E5', '\u4E00', '\u4E8C', '\u4E09', '\u56DB', '\u4E94', '\u516D'],\n                longhand: ['\u661F\u671F\u65E5', '\u661F\u671F\u4E00', '\u661F\u671F\u4E8C', '\u661F\u671F\u4E09', '\u661F\u671F\u56DB', '\u661F\u671F\u4E94', '\u661F\u671F\u516D'],\n            },\n            months: {\n                shorthand: ['1\u6708', '2\u6708', '3\u6708', '4\u6708', '5\u6708', '6\u6708', '7\u6708', '8\u6708', '9\u6708', '10\u6708', '11\u6708', '12\u6708'],\n                longhand: [\n                    '\u4E00\u6708',\n                    '\u4E8C\u6708',\n                    '\u4E09\u6708',\n                    '\u56DB\u6708',\n                    '\u4E94\u6708',\n                    '\u516D\u6708',\n                    '\u4E03\u6708',\n                    '\u516B\u6708',\n                    '\u4E5D\u6708',\n                    '\u5341\u6708',\n                    '\u5341\u4E00\u6708',\n                    '\u5341\u4E8C\u6708',\n                ],\n            },\n            firstDayOfWeek: 0, // \u661F\u671F\u65E5\u958B\u59CB\n            rangeSeparator: ' \u5230 ',\n            weekAbbreviation: '\u9031',\n            scrollTitle: '\u6EFE\u52D5\u5207\u63DB',\n            toggleTitle: '\u9EDE\u64CA\u5207\u63DB 12/24 \u5C0F\u6642\u5236',\n        }\n\n        // \u7372\u53D6\u660E\u5929\u7684\u65E5\u671F\u4F5C\u70BA\u6700\u5C0F\u53EF\u9078\u65E5\u671F\n        const tomorrow = new Date()\n        tomorrow.setDate(tomorrow.getDate() + 1)\n        tomorrow.setHours(0, 0, 0, 0)\n\n        this.flatpickrInstance = flatpickr(this.calendarInputTarget, {\n            locale: chineseTraditional,\n            dateFormat: 'Y-m-d',\n            minDate: tomorrow, // \u8A2D\u5B9A\u6700\u5C0F\u65E5\u671F\u70BA\u660E\u5929\n            maxDate: new Date().fp_incr(60), // 60\u5929\u5F8C\n            enable: enabledDates.length > 0 ? enabledDates : [], // \u4F7F\u7528\u4FEE\u6B63\u5F8C\u7684\u65E5\u671F\u9663\u5217\n            disableMobile: true,\n            inline: true, // \u76F4\u63A5\u986F\u793A\u65E5\u66C6\uFF0C\u4E0D\u9700\u8981 input\n\n            // \u81EA\u5B9A\u7FA9\u65E5\u671F\u7981\u7528\u908F\u8F2F\n            disable: [\n                // \u7981\u7528\u4ECA\u5929\u53CA\u4E4B\u524D\u7684\u6240\u6709\u65E5\u671F\n                {\n                    from: new Date(1900, 0, 1), // \u5F9E\u5F88\u4E45\u4EE5\u524D\u958B\u59CB\n                    to: new Date(), // \u5230\u4ECA\u5929\u70BA\u6B62\n                },\n            ],\n\n            onChange: (selectedDates) => {\n                if (selectedDates.length > 0) {\n                    const selectedDate = selectedDates[0]\n\n                    // \u96D9\u91CD\u6AA2\u67E5\uFF1A\u78BA\u4FDD\u9078\u64C7\u7684\u65E5\u671F\u4E0D\u662F\u4ECA\u5929\u6216\u4E4B\u524D\n                    if (this.isDateBeforeOrToday(selectedDate)) {\n                        this.showError('\u4E0D\u53EF\u9810\u5B9A\u7576\u5929\u6216\u904E\u53BB\u7684\u65E5\u671F')\n                        this.flatpickrInstance.clear()\n                        return\n                    }\n\n                    this.selectDate(selectedDate)\n                }\n            },\n\n            onReady: () => {\n                // \u65E5\u66C6\u6E96\u5099\u597D\u5F8C\u96B1\u85CF\u8F09\u5165\u72C0\u614B\n                this.hideLoading()\n                console.log('Flatpickr ready - calendar initialized successfully')\n\n                // \u6DFB\u52A0\u81EA\u5B9A\u7FA9\u6A23\u5F0F\u8B93\u7981\u7528\u7684\u65E5\u671F\u66F4\u660E\u986F\n                this.addDisabledDateStyles()\n            },\n\n            onDayCreate: (dObj, dStr, fp, dayElem) => {\n                const date = dayElem.dateObj\n\n                // \u5982\u679C\u662F\u4ECA\u5929\u6216\u4E4B\u524D\u7684\u65E5\u671F\uFF0C\u6DFB\u52A0\u7279\u6B8A\u6A23\u5F0F\u548C\u63D0\u793A\n                if (this.isDateBeforeOrToday(date)) {\n                    dayElem.classList.add('disabled-date')\n                    dayElem.title = '\u4E0D\u53EF\u9810\u5B9A\u7576\u5929\u6216\u904E\u53BB\u7684\u65E5\u671F'\n                    dayElem.style.opacity = '0.3'\n                    dayElem.style.cursor = 'not-allowed'\n                    dayElem.style.textDecoration = 'line-through'\n                }\n            },\n        })\n    }\n\n    // \u6DFB\u52A0\u7981\u7528\u65E5\u671F\u7684\u81EA\u5B9A\u7FA9\u6A23\u5F0F\n    addDisabledDateStyles() {\n        const style = document.createElement('style')\n        style.textContent = `\n            .flatpickr-calendar .disabled-date {\n                opacity: 0.3 !important;\n                cursor: not-allowed !important;\n                text-decoration: line-through !important;\n                background-color: #f3f4f6 !important;\n                color: #9ca3af !important;\n            }\n            \n            .flatpickr-calendar .disabled-date:hover {\n                background-color: #f3f4f6 !important;\n                color: #9ca3af !important;\n            }\n            \n            .flatpickr-calendar .flatpickr-disabled {\n                opacity: 0.3 !important;\n                cursor: not-allowed !important;\n            }\n        `\n\n        if (!document.querySelector('#flatpickr-disabled-styles')) {\n            style.id = 'flatpickr-disabled-styles'\n            document.head.appendChild(style)\n        }\n    }\n\n    // \u986F\u793A\u8F09\u5165\u72C0\u614B\n    showLoading() {\n        this.loadingStateTarget.classList.remove('hidden')\n        this.calendarInputTarget.style.display = 'none'\n        this.fullBookedStateTarget.classList.add('hidden')\n    }\n\n    // \u96B1\u85CF\u8F09\u5165\u72C0\u614B\n    hideLoading() {\n        this.loadingStateTarget.classList.add('hidden')\n    }\n\n    // \u986F\u793A\u65E5\u66C6\n    showCalendar() {\n        this.loadingStateTarget.classList.add('hidden')\n        this.calendarInputTarget.style.display = 'block'\n        this.fullBookedStateTarget.classList.add('hidden')\n    }\n\n    // \u986F\u793A\u5B8C\u5168\u9810\u7D04\u6EFF\u7684\u72C0\u614B\n    showFullBookedState(fullBookedUntil) {\n        this.loadingStateTarget.classList.add('hidden')\n        this.calendarInputTarget.style.display = 'none'\n        this.fullBookedStateTarget.classList.remove('hidden')\n\n        if (fullBookedUntil && this.hasFullBookedUntilDateTarget) {\n            const date = this.parseLocalDate(fullBookedUntil)\n            const formattedDate = `${date.getMonth() + 1}\u6708${date.getDate()}\u65E5`\n            this.fullBookedUntilDateTarget.textContent = formattedDate\n        }\n    }\n\n    // \u986F\u793A\u9910\u5EF3\u7121\u6CD5\u5BB9\u7D0D\u8A72\u4EBA\u6578\u7684\u72C0\u614B\n    showNoCapacityState() {\n        this.loadingStateTarget.classList.add('hidden')\n        this.calendarInputTarget.style.display = 'none'\n        this.fullBookedStateTarget.classList.add('hidden')\n\n        // \u986F\u793A\u7121\u6CD5\u5BB9\u7D0D\u7684\u8A0A\u606F\n        this.showError('\u5F88\u62B1\u6B49\uFF0C\u9910\u5EF3\u76EE\u524D\u6C92\u6709\u9069\u5408\u8A72\u4EBA\u6578\u7684\u684C\u4F4D\u3002\u8ACB\u8ABF\u6574\u4EBA\u6578\u6216\u806F\u7D61\u9910\u5EF3\u8A62\u554F\u3002')\n    }\n\n    // \u9078\u64C7\u65E5\u671F\n    selectDate(date) {\n        // \u518D\u6B21\u6AA2\u67E5\u662F\u5426\u70BA\u4ECA\u5929\u6216\u4E4B\u524D\u7684\u65E5\u671F\n        if (this.isDateBeforeOrToday(date)) {\n            this.showError('\u4E0D\u53EF\u9810\u5B9A\u7576\u5929\u6216\u904E\u53BB\u7684\u65E5\u671F')\n            return\n        }\n\n        console.log('\u9078\u64C7\u65E5\u671F:', date)\n        this.selectedDate = date\n        this.updateSelectedDateDisplay()\n        this.loadAvailableTimeSlots()\n\n        // \u986F\u793A\u65E5\u671F\u6642\u9593\u9078\u64C7\u5340\u57DF\n        this.dateTimeSectionTarget.classList.remove('hidden')\n    }\n\n    // \u66F4\u65B0\u9078\u64C7\u7684\u65E5\u671F\u986F\u793A\n    updateSelectedDateDisplay() {\n        if (!this.selectedDate) return\n\n        const month = this.selectedDate.getMonth() + 1\n        const day = this.selectedDate.getDate()\n        const weekday = this.getLocalWeekdayName(this.selectedDate)\n\n        if (this.hasSelectedDateTextTarget) {\n            this.selectedDateTextTarget.textContent = `${month}\u6708${day}\u65E5`\n        }\n\n        if (this.hasSelectedWeekdayTextTarget) {\n            this.selectedWeekdayTextTarget.textContent = `\u661F\u671F${weekday}`\n        }\n\n        if (this.hasSelectedDateDisplayTarget) {\n            this.selectedDateDisplayTarget.textContent = `${month}\u6708${day}\u65E5 \u661F\u671F${weekday}`\n        }\n    }\n\n    // \u8F09\u5165\u53EF\u7528\u6642\u6BB5\n    async loadAvailableTimeSlots() {\n        if (!this.selectedDate) return\n\n        try {\n            const dateString = this.formatDateToLocal(this.selectedDate)\n            const response = await fetch(\n                `/restaurant/${this.restaurantSlugValue}/available_times?date=${dateString}&party_size=${this.partySize}`\n            )\n\n            if (!response.ok) {\n                const errorData = await response.json()\n                if (response.status === 503 && errorData.disabled) {\n                    this.showError('\u7DDA\u4E0A\u8A02\u4F4D\u529F\u80FD\u66AB\u505C\u670D\u52D9')\n                    return\n                }\n                if (response.status === 422) {\n                    this.showError(errorData.error || '\u7121\u6CD5\u53D6\u5F97\u53EF\u7528\u6642\u6BB5')\n                    return\n                }\n                throw new Error('\u8F09\u5165\u6642\u6BB5\u5931\u6557')\n            }\n\n            const data = await response.json()\n            this.renderTimeSlots(data.available_times || [])\n        } catch (error) {\n            console.error('\u8F09\u5165\u53EF\u7528\u6642\u6BB5\u5931\u6557:', error)\n            this.showError('\u8F09\u5165\u6642\u6BB5\u5931\u6557\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66')\n        }\n    }\n\n    // \u6E32\u67D3\u6642\u6BB5\u6309\u9215\n    renderTimeSlots(timeSlots) {\n        console.log('\u6E32\u67D3\u6642\u6BB5:', timeSlots)\n\n        // \u6E05\u7A7A\u73FE\u6709\u6642\u6BB5\n        if (this.hasAfternoonSlotsGridTarget) this.afternoonSlotsGridTarget.innerHTML = ''\n        if (this.hasEveningSlotsGridTarget) this.eveningSlotsGridTarget.innerHTML = ''\n\n        let hasAfternoon = false\n        let hasEvening = false\n\n        timeSlots.forEach((slot) => {\n            const button = this.createTimeSlotButton(slot)\n            const hour = parseInt(slot.time.split(':')[0])\n\n            if (hour < 17) {\n                // \u4E0B\u5348\u6642\u6BB5 (17:00 \u4E4B\u524D)\n                if (this.hasAfternoonSlotsGridTarget) {\n                    this.afternoonSlotsGridTarget.appendChild(button)\n                    hasAfternoon = true\n                }\n            } else {\n                // \u665A\u9910\u6642\u6BB5 (17:00 \u53CA\u4E4B\u5F8C)\n                if (this.hasEveningSlotsGridTarget) {\n                    this.eveningSlotsGridTarget.appendChild(button)\n                    hasEvening = true\n                }\n            }\n        })\n\n        // \u986F\u793A/\u96B1\u85CF\u6642\u6BB5\u5340\u584A\n        if (this.hasAfternoonSlotsTarget) {\n            this.afternoonSlotsTarget.style.display = hasAfternoon ? 'block' : 'none'\n        }\n        if (this.hasEveningSlotsTarget) {\n            this.eveningSlotsTarget.style.display = hasEvening ? 'block' : 'none'\n        }\n\n        // \u986F\u793A\u6642\u6BB5\u5BB9\u5668\n        if (this.hasTimeSlotsContainerTarget) {\n            this.timeSlotsContainerTarget.classList.remove('hidden')\n        }\n    }\n\n    // \u5275\u5EFA\u6642\u6BB5\u6309\u9215\n    createTimeSlotButton(slot) {\n        const button = document.createElement('button')\n        button.type = 'button'\n        button.textContent = slot.time\n        button.className =\n            'px-4 py-2 border border-gray-300 rounded-lg text-sm hover:border-blue-500 hover:bg-blue-50 transition-colors'\n        button.dataset.time = slot.time\n        button.dataset.action = 'click->reservation-calendar#selectTimeSlot'\n        button.dataset.slot = JSON.stringify(slot)\n\n        return button\n    }\n\n    // \u9078\u64C7\u6642\u6BB5\n    selectTimeSlot(event) {\n        const button = event.target\n        const slot = JSON.parse(button.dataset.slot)\n\n        this.selectedTime = slot\n        console.log('\u9078\u64C7\u6642\u6BB5:', slot)\n\n        this.updateTimeSlotButtons()\n\n        // \u555F\u7528\u4E0B\u4E00\u6B65\u6309\u9215\n        if (this.hasNextStepButtonTarget) {\n            this.nextStepButtonTarget.disabled = false\n        }\n    }\n\n    // \u66F4\u65B0\u6642\u6BB5\u6309\u9215\u72C0\u614B\n    updateTimeSlotButtons() {\n        const allButtons = [\n            ...(this.hasAfternoonSlotsGridTarget ? this.afternoonSlotsGridTarget.querySelectorAll('button') : []),\n            ...(this.hasEveningSlotsGridTarget ? this.eveningSlotsGridTarget.querySelectorAll('button') : []),\n        ]\n\n        allButtons.forEach((button) => {\n            if (this.selectedTime && button.dataset.time === this.selectedTime.time) {\n                button.className =\n                    'px-4 py-2 border-2 border-blue-500 bg-blue-500 text-white rounded-lg text-sm transition-colors'\n            } else {\n                button.className =\n                    'px-4 py-2 border border-gray-300 rounded-lg text-sm hover:border-blue-500 hover:bg-blue-50 transition-colors'\n            }\n        })\n    }\n\n    // \u6E05\u9664\u9078\u64C7\u7684\u65E5\u671F\n    clearSelectedDate() {\n        this.selectedDate = null\n        this.selectedTime = null\n\n        // \u96B1\u85CF\u65E5\u671F\u6642\u9593\u9078\u64C7\u5340\u57DF\n        if (this.hasDateTimeSectionTarget) {\n            this.dateTimeSectionTarget.classList.add('hidden')\n        }\n\n        // \u6E05\u9664 Flatpickr \u9078\u64C7\n        if (this.flatpickrInstance) {\n            this.flatpickrInstance.clear()\n        }\n\n        // \u7981\u7528\u4E0B\u4E00\u6B65\u6309\u9215\n        if (this.hasNextStepButtonTarget) {\n            this.nextStepButtonTarget.disabled = true\n        }\n    }\n\n    // \u9032\u5165\u4E0B\u4E00\u6B65\uFF08\u586B\u5BEB\u8A02\u4F4D\u8CC7\u8A0A\uFF09\n    proceedToReservation() {\n        if (!this.selectedDate || !this.selectedTime) {\n            this.showError('\u8ACB\u9078\u64C7\u65E5\u671F\u548C\u6642\u6BB5')\n            return\n        }\n\n        // \u6700\u5F8C\u4E00\u6B21\u6AA2\u67E5\u65E5\u671F\u662F\u5426\u6709\u6548\n        if (this.isDateBeforeOrToday(this.selectedDate)) {\n            this.showError('\u4E0D\u53EF\u9810\u5B9A\u7576\u5929\u6216\u904E\u53BB\u7684\u65E5\u671F')\n            this.clearSelectedDate()\n            return\n        }\n\n        const dateString = this.formatDateToLocal(this.selectedDate)\n        const params = new URLSearchParams({\n            date: dateString,\n            time: this.selectedTime.time,\n            party_size: this.partySize,\n        })\n\n        window.location.href = `/restaurant/${this.restaurantSlugValue}/reservations/new?${params}`\n    }\n\n    // \u986F\u793A\u932F\u8AA4\u8A0A\u606F\n    showError(message) {\n        // \u5275\u5EFA\u6216\u66F4\u65B0\u932F\u8AA4\u8A0A\u606F\u5143\u7D20\n        let errorElement = document.querySelector('#reservation-error-message')\n        if (!errorElement) {\n            errorElement = document.createElement('div')\n            errorElement.id = 'reservation-error-message'\n            errorElement.className = 'bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4'\n            this.element.insertBefore(errorElement, this.element.firstChild)\n        }\n\n        errorElement.textContent = message\n        errorElement.style.display = 'block'\n\n        // 3\u79D2\u5F8C\u81EA\u52D5\u96B1\u85CF\n        setTimeout(() => {\n            if (errorElement) {\n                errorElement.style.display = 'none'\n            }\n        }, 3000)\n    }\n}\n", "import { Controller } from '@hotwired/stimulus'\nimport flatpickr from 'flatpickr'\nimport zhTw from 'flatpickr/dist/l10n/zh-tw.js'\n\nexport default class extends Controller {\n    static targets = [\n        'date',\n        'calendar',\n        'timeSlots',\n        'periodInfo',\n        'nextStep',\n        'adultCount',\n        'childCount',\n        'fullBookingNotice',\n        'datePickerContainer',\n    ]\n    static values = {\n        restaurantSlug: String,\n        businessHours: Object,\n        maxPartySize: Number,\n        minPartySize: Number,\n    }\n\n    connect() {\n        this.selectedDate = null\n        this.selectedPeriodId = null\n        this.selectedTime = null\n        this.maxReservationDays = 30\n\n        // \u76E3\u807D\u7A97\u53E3\u5927\u5C0F\u8B8A\u5316\uFF0C\u91CD\u65B0\u61C9\u7528\u7E2E\u653E\uFF08\u4F7F\u7528\u9632\u6296\u52D5\uFF09\n        this.resizeTimeout = null\n        this.resizeHandler = () => {\n            clearTimeout(this.resizeTimeout)\n            this.resizeTimeout = setTimeout(() => {\n                const calendarElement = this.calendarTarget?.querySelector('.flatpickr-calendar')\n                if (calendarElement) {\n                    this.applyResponsiveScale(calendarElement)\n                }\n            }, 150)\n        }\n        window.addEventListener('resize', this.resizeHandler)\n\n        // \u76E3\u807D\u624B\u6A5F\u65CB\u8F49\u4E8B\u4EF6\n        window.addEventListener('orientationchange', () => {\n            setTimeout(() => {\n                const calendarElement = this.calendarTarget?.querySelector('.flatpickr-calendar')\n                if (calendarElement) {\n                    this.applyResponsiveScale(calendarElement)\n                }\n            }, 300)\n        })\n\n        // \u5EF6\u9072\u521D\u59CB\u5316\uFF0C\u78BA\u4FDD DOM \u5B8C\u5168\u8F09\u5165\n        setTimeout(() => {\n            this.initDatePicker()\n            this.setupGuestCountListeners()\n            this.updateGuestCountOptions()\n        }, 100)\n    }\n\n    disconnect() {\n        // \u6E05\u7406\u4E8B\u4EF6\u76E3\u807D\u5668\n        if (this.resizeHandler) {\n            window.removeEventListener('resize', this.resizeHandler)\n        }\n\n        // \u6E05\u7406\u9632\u6296\u52D5\u8A08\u6642\u5668\n        if (this.resizeTimeout) {\n            clearTimeout(this.resizeTimeout)\n        }\n    }\n\n    setupGuestCountListeners() {\n        const handleGuestCountChange = () => {\n            this.updateGuestCountOptions()\n            this.updateHiddenFields()\n            this.clearSelectedTimeSlot()\n\n            // \u91CD\u65B0\u7372\u53D6\u53EF\u7528\u65E5\u671F\uFF08\u56E0\u70BA\u4EBA\u6578\u8B8A\u66F4\u53EF\u80FD\u5F71\u97FF\u65E5\u671F\u53EF\u7528\u6027\uFF09\n            if (this.datePicker) {\n                this.refreshAvailableDates()\n            } else {\n                this.initDatePicker()\n            }\n\n            // \u5982\u679C\u5DF2\u7D93\u9078\u4E86\u65E5\u671F\uFF0C\u91CD\u65B0\u8F09\u5165\u8A72\u65E5\u671F\u7684\u6642\u6BB5\n            if (this.selectedDate) {\n                this.loadAllTimeSlots(this.selectedDate)\n            }\n        }\n\n        if (this.hasAdultCountTarget) {\n            this.adultCountTarget.addEventListener('change', handleGuestCountChange)\n        }\n\n        if (this.hasChildCountTarget) {\n            this.childCountTarget.addEventListener('change', handleGuestCountChange)\n        }\n\n        // \u521D\u59CB\u5316\u96B1\u85CF\u6B04\u4F4D\n        this.updateHiddenFields()\n    }\n\n    updateGuestCountOptions() {\n        if (!this.hasAdultCountTarget || !this.hasChildCountTarget) return\n\n        const currentAdults = parseInt(this.adultCountTarget.value) || 1\n        const currentChildren = parseInt(this.childCountTarget.value) || 0\n        const maxPartySize = this.maxPartySizeValue || 6\n\n        // \u66F4\u65B0\u5927\u4EBA\u9078\u9805 (\u81F3\u5C111\u4EBA)\n        this.updateSelectOptions(this.adultCountTarget, currentAdults, 1, maxPartySize - currentChildren)\n\n        // \u66F4\u65B0\u5C0F\u5B69\u9078\u9805 (\u53EF\u4EE5\u662F0\u4EBA)\n        this.updateSelectOptions(this.childCountTarget, currentChildren, 0, maxPartySize - currentAdults)\n\n        // \u9A57\u8B49\u7576\u524D\u9078\u64C7\u662F\u5426\u5408\u6CD5\n        this.validateCurrentSelection()\n    }\n\n    updateSelectOptions(selectElement, currentValue, minValue, maxValue) {\n        // \u6E05\u7A7A\u73FE\u6709\u9078\u9805\n        selectElement.innerHTML = ''\n\n        // \u751F\u6210\u65B0\u9078\u9805\n        for (let i = minValue; i <= maxValue; i++) {\n            const option = document.createElement('option')\n            option.value = i\n            option.textContent = i\n            if (i === currentValue) {\n                option.selected = true\n            }\n            selectElement.appendChild(option)\n        }\n    }\n\n    validateCurrentSelection() {\n        const adults = parseInt(this.adultCountTarget.value) || 1\n        const children = parseInt(this.childCountTarget.value) || 0\n        const totalPartySize = adults + children\n        const maxPartySize = this.maxPartySizeValue || 6\n\n        // \u5982\u679C\u7E3D\u4EBA\u6578\u8D85\u904E\u4E0A\u9650\uFF0C\u8ABF\u6574\u5C0F\u5B69\u6578\n        if (totalPartySize > maxPartySize) {\n            const adjustedChildren = Math.max(0, maxPartySize - adults)\n            this.childCountTarget.value = adjustedChildren\n            setTimeout(() => this.updateGuestCountOptions(), 10)\n        }\n\n        // \u5982\u679C\u5927\u4EBA\u6578\u70BA0\uFF0C\u8ABF\u6574\u70BA1\n        if (adults < 1) {\n            this.adultCountTarget.value = 1\n            setTimeout(() => this.updateGuestCountOptions(), 10)\n        }\n    }\n\n    updateHiddenFields() {\n        const adultHiddenField = document.getElementById('adult_count')\n        const childHiddenField = document.getElementById('child_count')\n\n        if (adultHiddenField && this.hasAdultCountTarget) {\n            adultHiddenField.value = this.adultCountTarget.value\n        }\n\n        if (childHiddenField && this.hasChildCountTarget) {\n            childHiddenField.value = this.childCountTarget.value\n        }\n    }\n\n    getCurrentPartySize() {\n        const adults = this.hasAdultCountTarget ? parseInt(this.adultCountTarget.value) || 0 : 2\n        const children = this.hasChildCountTarget ? parseInt(this.childCountTarget.value) || 0 : 0\n        return adults + children\n    }\n\n    async initDatePicker() {\n        if (!this.hasCalendarTarget) {\n            return\n        }\n\n        // \u92B7\u6BC0\u73FE\u6709\u7684 flatpickr \u5BE6\u4F8B\n        if (this.datePicker) {\n            this.datePicker.destroy()\n            this.datePicker = null\n        }\n\n        try {\n            // \u5148\u6AA2\u67E5\u662F\u5426\u6709\u53EF\u7528\u65E5\u671F (\u4F7F\u7528 available_dates \u7AEF\u9EDE)\n            const partySize = this.getCurrentPartySize()\n            const adults = this.hasAdultCountTarget ? parseInt(this.adultCountTarget.value) || 0 : partySize\n            const children = this.hasChildCountTarget ? parseInt(this.childCountTarget.value) || 0 : 0\n\n            const availableDatesUrl = `/restaurants/${this.restaurantSlugValue}/available_dates?party_size=${partySize}&adults=${adults}&children=${children}`\n\n            const availableDatesResponse = await fetch(availableDatesUrl, {\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                },\n            })\n\n            if (availableDatesResponse.status === 503) {\n                const errorData = await availableDatesResponse.json()\n                this.showServiceUnavailable(errorData.message || errorData.error)\n                return\n            }\n\n            if (!availableDatesResponse.ok) {\n                throw new Error(`HTTP error! status: ${availableDatesResponse.status}`)\n            }\n\n            const availableDatesData = await availableDatesResponse.json()\n\n            // \u6AA2\u67E5\u662F\u5426\u5B8C\u5168\u6C92\u6709\u53EF\u7528\u65E5\u671F\n            if (\n                availableDatesData.has_capacity &&\n                (!availableDatesData.available_dates || availableDatesData.available_dates.length === 0)\n            ) {\n                // \u92B7\u6BC0\u73FE\u6709\u7684 flatpickr \u5BE6\u4F8B\n                if (this.datePicker) {\n                    this.datePicker.destroy()\n                    this.datePicker = null\n                }\n                // \u4F7F\u7528 full_booked_until \u5982\u679C\u6709\u7684\u8A71\uFF0C\u5426\u5247\u4F7F\u7528\u9910\u5EF3\u8A2D\u5B9A\u7684\u9810\u7D04\u5929\u6578\u4F5C\u70BA\u9810\u8A2D\u503C\n                const advanceBookingDays = availableDatesData.advance_booking_days || 30\n                const fullBookedUntil = availableDatesData.full_booked_until || new Date(Date.now() + advanceBookingDays * 24 * 60 * 60 * 1000).toISOString().split('T')[0]\n                this.showFullyBookedMessage(fullBookedUntil, partySize)\n                return\n            }\n\n            // \u5982\u679C\u9910\u5EF3\u6C92\u6709\u8DB3\u5920\u5BB9\u91CF\uFF0C\u4E5F\u986F\u793A\u76F8\u61C9\u8A0A\u606F\n            if (!availableDatesData.has_capacity) {\n                // \u92B7\u6BC0\u73FE\u6709\u7684 flatpickr \u5BE6\u4F8B\n                if (this.datePicker) {\n                    this.datePicker.destroy()\n                    this.datePicker = null\n                }\n                this.showNoCapacityMessage(partySize)\n                return\n            }\n\n            // \u5982\u679C\u6709\u53EF\u7528\u65E5\u671F\uFF0C\u7E7C\u7E8C\u8F09\u5165\u65E5\u66C6\n            // \u53D6\u5F97\u53EF\u9810\u7D04\u65E5\u8CC7\u8A0A (\u4F7F\u7528 available_days \u7AEF\u9EDE\u53D6\u5F97\u8A73\u7D30\u7684\u7981\u7528\u65E5\u671F)\n            const apiUrl = `/restaurants/${this.restaurantSlugValue}/available_days?party_size=${partySize}`\n\n            const response = await fetch(apiUrl, {\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                },\n            })\n\n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`)\n            }\n\n            const data = await response.json()\n\n            // \u66F4\u65B0\u6700\u5927\u9810\u7D04\u5929\u6578\u70BA\u9910\u5EF3\u5BE6\u969B\u8A2D\u5B9A\n            if (data.max_days) {\n                this.maxReservationDays = data.max_days\n            }\n\n            // \u96B1\u85CF\u5B8C\u5168\u8A02\u6EFF\u8A0A\u606F\uFF0C\u986F\u793A\u65E5\u66C6\n            this.hideFullyBookedMessage()\n\n            // \u8A08\u7B97\u4E0D\u53EF\u7528\u65E5\u671F - \u4F7F\u7528\u65B0\u7684 API \u56DE\u61C9\u683C\u5F0F\uFF0C\u4E26\u50B3\u5165\u5BE6\u969B\u53EF\u9810\u7D04\u65E5\u671F\n            const disabledDates = this.calculateDisabledDates(\n                data.weekly_closures || [],\n                data.special_closures || [],\n                data.has_capacity,\n                availableDatesData.available_dates || []\n            )\n\n            // \u6C7A\u5B9A\u65E5\u66C6\u7684\u9810\u8A2D\u65E5\u671F\u548C\u986F\u793A\u6708\u4EFD\n            let defaultDate = null\n            let defaultViewDate = null\n            \n            if (availableDatesData.available_dates && availableDatesData.available_dates.length > 0) {\n                // \u4F7F\u7528\u7B2C\u4E00\u500B\u53EF\u9810\u7D04\u65E5\u671F\u4F5C\u70BA\u9810\u8A2D\u65E5\u671F\n                defaultDate = availableDatesData.available_dates[0]\n                try {\n                    defaultViewDate = new Date(defaultDate)\n                    // \u9A57\u8B49\u65E5\u671F\u662F\u5426\u6709\u6548\n                    if (isNaN(defaultViewDate.getTime())) {\n                        defaultDate = null\n                        defaultViewDate = null\n                    }\n                } catch (error) {\n                    defaultDate = null\n                    defaultViewDate = null\n                }\n            }\n\n\n            // \u521D\u59CB\u5316 flatpickr\n            const flatpickrConfig = {\n                inline: true,\n                static: true,\n                // \u79FB\u9664 appendTo\uFF0C\u8B93 flatpickr \u4F7F\u7528\u9810\u8A2D\u884C\u70BA\n                locale: zhTw.zh_tw,\n                dateFormat: 'Y-m-d',\n                minDate: 'today',\n                maxDate: new Date().fp_incr(this.maxReservationDays),\n                disable: disabledDates,\n                // \u5982\u679C\u6709\u53EF\u9810\u7D04\u65E5\u671F\uFF0C\u8A2D\u5B9A\u9810\u8A2D\u65E5\u671F\u548C\u8996\u5716\u6708\u4EFD\n                ...(defaultDate && { defaultDate: defaultDate }),\n                ...(defaultViewDate && { defaultViewDate: defaultViewDate }),\n                onChange: (_, dateStr) => {\n                    // \u6AA2\u67E5\u65E5\u671F\u662F\u5426\u6709\u6548\u4E14\u4E0D\u70BA\u7A7A\n                    if (!dateStr || dateStr === '') {\n                        return\n                    }\n                    \n                    this.selectedDate = dateStr\n\n                    // \u66F4\u65B0 JavaScript target \u6B04\u4F4D\n                    if (this.hasDateTarget) {\n                        this.dateTarget.value = dateStr\n                    }\n                    \n                    // \u540C\u6642\u66F4\u65B0\u8868\u55AE\u63D0\u4EA4\u7684\u96B1\u85CF\u6B04\u4F4D\n                    const reservationDateField = document.getElementById('reservation_date')\n                    if (reservationDateField) {\n                        reservationDateField.value = dateStr\n                    }\n\n                    // \u66F4\u65B0 URL\uFF0C\u79FB\u9664 show_all \u53C3\u6578\u4E26\u8A2D\u5B9A date_filter\n                    this.updateUrlWithDate(dateStr)\n\n                    this.loadAllTimeSlots(dateStr)\n                },\n                onReady: (_, __, instance) => {\n                    setTimeout(() => this.styleFlatpickr(), 100)\n                    \n                    if (defaultDate && instance) {\n                        setTimeout(() => {\n                            instance.setDate(defaultDate, true)\n                            \n                            // \u5099\u4EFD\u6A5F\u5236\uFF1A\u5982\u679C onChange \u6C92\u6709\u6B63\u5E38\u89F8\u767C\uFF0C\u624B\u52D5\u8F09\u5165\u6642\u6BB5\n                            setTimeout(() => {\n                                if (this.hasTimeSlotsTarget) {\n                                    const currentTimeSlots = this.timeSlotsTarget.innerHTML.trim()\n                                    if (!currentTimeSlots || \n                                        currentTimeSlots.includes('\u8ACB\u5148\u9078\u64C7\u65E5\u671F') || \n                                        currentTimeSlots === '') {\n                                        this.selectedDate = defaultDate\n                                        this.loadAllTimeSlots(defaultDate)\n                                    }\n                                }\n                            }, 100)\n                        }, 300)\n                    }\n                },\n                onOpen: () => {\n                    setTimeout(() => this.styleFlatpickr(), 100)\n                },\n                onMonthChange: () => {\n                    setTimeout(() => this.styleFlatpickr(), 50)\n                },\n                onYearChange: () => {\n                    setTimeout(() => this.styleFlatpickr(), 50)\n                }\n            }\n            \n            this.datePicker = flatpickr(this.calendarTarget, flatpickrConfig)\n\n        } catch (error) {\n            this.showError('\u8F09\u5165\u65E5\u671F\u9078\u64C7\u5668\u6642\u767C\u751F\u932F\u8AA4')\n        }\n    }\n\n    styleFlatpickr(retryCount = 0) {\n        // \u5617\u8A66\u5728 calendarTarget \u5167\u90E8\u548C\u6574\u500B\u6587\u6A94\u4E2D\u67E5\u627E\n        let calendarElement = this.calendarTarget?.querySelector('.flatpickr-calendar')\n        if (!calendarElement) {\n            calendarElement = document.querySelector('.flatpickr-calendar')\n        }\n\n        if (!calendarElement) {\n            if (retryCount < 3) {\n                setTimeout(() => this.styleFlatpickr(retryCount + 1), 200)\n            }\n            return\n        }\n\n        // \u78BA\u4FDD\u65E5\u66C6\u662F inline \u6A21\u5F0F\n        calendarElement.classList.add('inline')\n\n        // \u79FB\u9664\u53EF\u80FD\u885D\u7A81\u7684\u5167\u806F\u6A23\u5F0F\uFF0C\u8B93CSS\u751F\u6548\n        calendarElement.style.position = 'relative'\n        calendarElement.style.top = ''\n        calendarElement.style.left = ''\n        calendarElement.style.display = 'block'\n        calendarElement.style.width = '100%'\n        calendarElement.style.maxWidth = '100%'\n        calendarElement.style.transformOrigin = 'center center'\n\n        // \u61C9\u7528\u97FF\u61C9\u5F0F\u7E2E\u653E\n        this.applyResponsiveScale(calendarElement)\n\n        // \u8B93\u5BB9\u5668\u4F7F\u7528CSS\u8A2D\u5B9A\n        const dayContainer = calendarElement.querySelector('.dayContainer')\n        if (dayContainer) {\n            dayContainer.style.width = ''\n            dayContainer.style.minWidth = ''\n            dayContainer.style.maxWidth = ''\n        }\n\n        const daysContainer = calendarElement.querySelector('.flatpickr-days')\n        if (daysContainer) {\n            daysContainer.style.width = ''\n        }\n    }\n\n    applyResponsiveScale(calendarElement) {\n        const screenWidth = window.innerWidth\n        let scale, margin, maxWidth\n\n        // \u97FF\u61C9\u5F0F\u7E2E\u653E\u8A2D\u5B9A\n        if (screenWidth <= 480) {\n            scale = 1.2\n            margin = '1rem auto'\n            maxWidth = '100%'\n        } else if (screenWidth <= 768) {\n            scale = 1.1\n            margin = '1rem auto'\n            maxWidth = '90%'\n        } else if (screenWidth <= 1024) {\n            scale = 1.1\n            margin = '1.25rem auto'\n            maxWidth = '100%'\n        } else if (screenWidth <= 1440) {\n            scale = 1.2\n            margin = '2rem auto'\n            maxWidth = '100%'\n        } else {\n            scale = 1.3\n            margin = '2rem auto'\n            maxWidth = '100%'\n        }\n\n        // \u61C9\u7528\u7E2E\u653E\u548C\u908A\u8DDD\n        calendarElement.style.transform = `scale(${scale})`\n        calendarElement.style.webkitTransform = `scale(${scale})`\n        calendarElement.style.mozTransform = `scale(${scale})`\n        calendarElement.style.msTransform = `scale(${scale})`\n        calendarElement.style.margin = margin\n        calendarElement.style.maxWidth = maxWidth\n    }\n\n    updateFullBookingNotice() {\n        // \u7C21\u5316\u908F\u8F2F\uFF1A\u4E0D\u986F\u793A\u984D\u6EFF\u63D0\u793A\u8A0A\u606F\n        if (this.hasFullBookingNoticeTarget) {\n            this.fullBookingNoticeTarget.classList.add('hidden')\n        }\n    }\n\n    showFullyBookedMessage(fullBookedUntil, partySize) {\n        // \u6E05\u9664\u9078\u4E2D\u7684\u65E5\u671F\n        this.selectedDate = null\n        this.selectedTime = null\n        this.selectedPeriodId = null\n\n        // \u6E05\u9664\u96B1\u85CF\u6B04\u4F4D\n        const reservationDateField = document.getElementById('reservation_date')\n        if (reservationDateField) {\n            reservationDateField.value = ''\n        }\n        \n        if (this.hasDateTarget) {\n            this.dateTarget.value = ''\n        }\n\n        // \u6E05\u9664 URL \u53C3\u6578\n        const url = new URL(window.location)\n        url.searchParams.delete('date_filter')\n        window.history.pushState({}, '', url.toString())\n\n        // \u92B7\u6BC0\u4E26\u6E05\u9664 flatpickr \u5BE6\u4F8B\n        if (this.datePicker) {\n            this.datePicker.destroy()\n            this.datePicker = null\n        }\n\n        // \u6E05\u9664\u65E5\u66C6\u5BB9\u5668\u5167\u5BB9\n        if (this.hasCalendarTarget) {\n            this.calendarTarget.innerHTML = ''\n        }\n\n        // \u5B8C\u5168\u96B1\u85CF\u6574\u500B\u65E5\u671F\u9078\u64C7\u5BB9\u5668\n        if (this.hasDatePickerContainerTarget) {\n            this.datePickerContainerTarget.classList.add('hidden')\n            this.datePickerContainerTarget.style.display = 'none'\n        }\n\n        // \u96B1\u85CF\u6642\u9593\u9078\u64C7\u5340\u57DF\n        if (this.hasTimeSlotsTarget) {\n            this.timeSlotsTarget.innerHTML = ''\n        }\n\n        // \u986F\u793A\u5B8C\u5168\u8A02\u6EFF\u8A0A\u606F\n        if (this.hasFullBookingNoticeTarget) {\n            const formattedDate = this.formatDateToTaiwan(fullBookedUntil)\n            this.fullBookingNoticeTarget.innerHTML = `\n                <div class=\"bg-gray-800 border border-gray-600 rounded-lg p-6 text-center\">\n                    <div class=\"flex justify-center mb-4\">\n                        <svg class=\"h-12 w-12 text-orange-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"></path>\n                        </svg>\n                    </div>\n                    <h3 class=\"text-lg font-semibold text-white mb-2\">\u8A02\u4F4D\u5DF2\u984D\u6EFF</h3>\n                    <p class=\"text-gray-300\">\u5230 <strong>${formattedDate}</strong> \u524D\uFF0C<strong>${partySize} \u4EBA</strong>\u4F4D\u7684\u8A02\u4F4D\u5DF2\u984D\u6EFF</p>\n                    <p class=\"text-gray-400 text-sm mt-2\">\u8ACB\u5617\u8A66\u8ABF\u6574\u4EBA\u6578\u6216\u9078\u64C7\u5176\u4ED6\u65E5\u671F\uFF0C\u6216\u76F4\u63A5\u806F\u7D61\u9910\u5EF3</p>\n                </div>\n            `\n            this.fullBookingNoticeTarget.classList.remove('hidden')\n        }\n\n        // \u7981\u7528\u4E0B\u4E00\u6B65\u6309\u9215\n        if (this.hasNextStepTarget) {\n            this.nextStepTarget.disabled = true\n            this.nextStepTarget.classList.remove('bg-blue-600', 'hover:bg-blue-700')\n            this.nextStepTarget.classList.add('bg-gray-600', 'hover:bg-gray-500')\n        }\n    }\n\n    showNoCapacityMessage(partySize) {\n        // \u6E05\u9664\u9078\u4E2D\u7684\u65E5\u671F\n        this.selectedDate = null\n        this.selectedTime = null\n        this.selectedPeriodId = null\n\n        // \u6E05\u9664\u96B1\u85CF\u6B04\u4F4D\n        const reservationDateField = document.getElementById('reservation_date')\n        if (reservationDateField) {\n            reservationDateField.value = ''\n        }\n        \n        if (this.hasDateTarget) {\n            this.dateTarget.value = ''\n        }\n\n        // \u6E05\u9664 URL \u53C3\u6578\n        const url = new URL(window.location)\n        url.searchParams.delete('date_filter')\n        window.history.pushState({}, '', url.toString())\n\n        // \u92B7\u6BC0\u4E26\u6E05\u9664 flatpickr \u5BE6\u4F8B\n        if (this.datePicker) {\n            this.datePicker.destroy()\n            this.datePicker = null\n        }\n\n        // \u6E05\u9664\u65E5\u66C6\u5BB9\u5668\u5167\u5BB9\n        if (this.hasCalendarTarget) {\n            this.calendarTarget.innerHTML = ''\n        }\n\n        // \u5B8C\u5168\u96B1\u85CF\u6574\u500B\u65E5\u671F\u9078\u64C7\u5BB9\u5668\n        if (this.hasDatePickerContainerTarget) {\n            this.datePickerContainerTarget.classList.add('hidden')\n            this.datePickerContainerTarget.style.display = 'none'\n        }\n\n        // \u96B1\u85CF\u6642\u9593\u9078\u64C7\u5340\u57DF\n        if (this.hasTimeSlotsTarget) {\n            this.timeSlotsTarget.innerHTML = ''\n        }\n\n        // \u986F\u793A\u7121\u5BB9\u91CF\u8A0A\u606F\n        if (this.hasFullBookingNoticeTarget) {\n            this.fullBookingNoticeTarget.innerHTML = `\n                <div class=\"bg-gray-800 border border-gray-600 rounded-lg p-6 text-center\">\n                    <div class=\"flex justify-center mb-4\">\n                        <svg class=\"h-12 w-12 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.664-.833-2.464 0L4.35 16.5c-.77.833.192 2.5 1.732 2.5z\"></path>\n                        </svg>\n                    </div>\n                    <h3 class=\"text-lg font-semibold text-white mb-2\">\u7121\u6CD5\u5B89\u6392\u8A02\u4F4D</h3>\n                    <p class=\"text-gray-300\">\u5F88\u62B1\u6B49\uFF0C\u7121\u6CD5\u70BA <strong>${partySize} \u4EBA</strong> \u5B89\u6392\u8A02\u4F4D</p>\n                    <p class=\"text-gray-400 text-sm mt-2\">\u8ACB\u5617\u8A66\u8ABF\u6574\u4EBA\u6578\u6216\u76F4\u63A5\u806F\u7D61\u9910\u5EF3</p>\n                </div>\n            `\n            this.fullBookingNoticeTarget.classList.remove('hidden')\n        }\n\n        // \u7981\u7528\u4E0B\u4E00\u6B65\u6309\u9215\n        if (this.hasNextStepTarget) {\n            this.nextStepTarget.disabled = true\n            this.nextStepTarget.classList.remove('bg-blue-600', 'hover:bg-blue-700')\n            this.nextStepTarget.classList.add('bg-gray-600', 'hover:bg-gray-500')\n        }\n    }\n\n    hideFullyBookedMessage() {\n        // \u91CD\u65B0\u986F\u793A\u65E5\u66C6\u5BB9\u5668\n        if (this.hasDatePickerContainerTarget) {\n            this.datePickerContainerTarget.classList.remove('hidden')\n            this.datePickerContainerTarget.style.display = ''\n        }\n\n        // \u96B1\u85CF\u5B8C\u5168\u8A02\u6EFF\u8A0A\u606F\n        if (this.hasFullBookingNoticeTarget) {\n            this.fullBookingNoticeTarget.classList.add('hidden')\n        }\n    }\n\n    formatDateToTaiwan(dateString) {\n        try {\n            const date = new Date(dateString)\n            const year = date.getFullYear()\n            const month = date.getMonth() + 1\n            const day = date.getDate()\n            return `${year}\u5E74${month}\u6708${day}\u65E5`\n        } catch (error) {\n            return dateString\n        }\n    }\n\n    async loadAllTimeSlots(date) {\n        if (!this.hasTimeSlotsTarget) {\n            return\n        }\n\n        // \u9A57\u8B49\u65E5\u671F\u683C\u5F0F\n        if (!date || date === '' || date === 'undefined' || date === 'null') {\n            this.showError('\u8ACB\u5148\u9078\u64C7\u65E5\u671F')\n            return\n        }\n\n        try {\n            const partySize = this.getCurrentPartySize()\n            const adults = this.hasAdultCountTarget ? parseInt(this.adultCountTarget.value) || 1 : Math.max(1, partySize)\n            const children = this.hasChildCountTarget ? parseInt(this.childCountTarget.value) || 0 : 0\n\n            // \u78BA\u4FDD\u65E5\u671F\u683C\u5F0F\u6B63\u78BA (YYYY-MM-DD)\n            let formattedDate = date\n            if (date instanceof Date) {\n                formattedDate = date.toISOString().split('T')[0]\n            } else if (typeof date === 'string' && date.length > 0) {\n                // \u9A57\u8B49\u65E5\u671F\u5B57\u7B26\u4E32\u683C\u5F0F\n                const dateRegex = /^\\d{4}-\\d{2}-\\d{2}$/\n                if (!dateRegex.test(date)) {\n                    this.showError('\u65E5\u671F\u683C\u5F0F\u932F\u8AA4\uFF0C\u8ACB\u91CD\u65B0\u9078\u64C7\u65E5\u671F')\n                    return\n                }\n                formattedDate = date\n            } else {\n                this.showError('\u65E5\u671F\u683C\u5F0F\u932F\u8AA4\uFF0C\u8ACB\u91CD\u65B0\u9078\u64C7\u65E5\u671F')\n                return\n            }\n\n            const url = `/restaurants/${this.restaurantSlugValue}/reservations/available_slots?date=${formattedDate}&adult_count=${adults}&child_count=${children}`\n\n            const response = await fetch(url, {\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                },\n            })\n            if (!response.ok) {\n                const errorData = await response.json().catch(() => ({}))\n                throw new Error(errorData.error || `HTTP error! status: ${response.status}`)\n            }\n\n            const data = await response.json()\n\n            this.renderTimeSlots(data.slots || [])\n            this.updateFormState()\n        } catch (error) {\n            this.showError(error.message || '\u8F09\u5165\u6642\u9593\u6642\u767C\u751F\u932F\u8AA4')\n        }\n    }\n\n    renderTimeSlots(timeSlots) {\n        this.timeSlotsTarget.innerHTML = ''\n\n        if (timeSlots.length === 0) {\n            this.timeSlotsTarget.innerHTML = '<p class=\"text-gray-500 text-center py-4\">\u6B64\u65E5\u671F\u7121\u53EF\u7528\u6642\u9593</p>'\n            return\n        }\n\n        // \u6309\u9910\u671F\u5206\u7D44\u6642\u9593\u69FD\n        const groupedSlots = this.groupTimeSlotsByPeriod(timeSlots)\n\n        Object.entries(groupedSlots).forEach(([periodName, slots]) => {\n            const periodDiv = document.createElement('div')\n            periodDiv.className = 'mb-6'\n\n            const periodTitle = document.createElement('h3')\n            periodTitle.className = 'text-white font-medium mb-3 flex items-center'\n            periodTitle.innerHTML = `\n                <span class=\"w-2 h-2 bg-green-500 rounded-full mr-2\"></span>\n                ${periodName}\n            `\n            periodDiv.appendChild(periodTitle)\n\n            const slotsGrid = document.createElement('div')\n            slotsGrid.className = 'grid grid-cols-2 gap-3'\n\n            slots.forEach((slot) => {\n                const button = document.createElement('button')\n                button.type = 'button'\n                button.className = `\n                    bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white text-center\n                    hover:bg-gray-700 hover:border-gray-500 transition-colors\n                    focus:outline-none focus:ring-2 focus:ring-blue-500\n                    ${slot.available ? '' : 'opacity-50 cursor-not-allowed'}\n                `\n                button.innerHTML = `\n                    <div class=\"font-medium\">${slot.time}</div>\n                    <div class=\"text-xs text-gray-400 mt-1\">\n                        ${slot.available ? '\u53EF\u9810\u7D04' : '\u5DF2\u984D\u6EFF'}\n                    </div>\n                `\n\n                if (slot.available) {\n                    button.addEventListener('click', () => this.selectTimeSlot(slot, button))\n                } else {\n                    button.disabled = true\n                }\n\n                slotsGrid.appendChild(button)\n            })\n\n            periodDiv.appendChild(slotsGrid)\n            this.timeSlotsTarget.appendChild(periodDiv)\n        })\n    }\n\n    groupTimeSlotsByPeriod(timeSlots) {\n        return timeSlots.reduce((groups, slot) => {\n            const period = slot.period_name || '\u7528\u9910\u6642\u6BB5'\n            if (!groups[period]) {\n                groups[period] = []\n            }\n            groups[period].push(slot)\n            return groups\n        }, {})\n    }\n\n    updatePeriodInfo(businessPeriods) {\n        if (!this.hasPeriodInfoTarget) return\n\n        if (businessPeriods.length === 0) {\n            this.periodInfoTarget.innerHTML = '<p class=\"text-gray-500\">\u6B64\u65E5\u671F\u672A\u71DF\u696D</p>'\n            return\n        }\n\n        const periodsText = businessPeriods\n            .map((period) => `${period.name}: ${period.start_time}-${period.end_time}`)\n            .join('\u3001')\n\n        this.periodInfoTarget.innerHTML = `<p class=\"text-gray-400\">\u53EF\u7528\u9910\u671F\uFF1A${periodsText}</p>`\n    }\n\n    selectTimeSlot(slot, buttonElement) {\n        // \u79FB\u9664\u4E4B\u524D\u9078\u4E2D\u7684\u6A23\u5F0F\n        this.timeSlotsTarget.querySelectorAll('button').forEach((btn) => {\n            btn.classList.remove('bg-blue-600', 'border-blue-500')\n            btn.classList.add('bg-gray-800', 'border-gray-600')\n        })\n\n        // \u6DFB\u52A0\u9078\u4E2D\u6A23\u5F0F\u5230\u7576\u524D\u6309\u9215\n        buttonElement.classList.remove('bg-gray-800', 'border-gray-600')\n        buttonElement.classList.add('bg-blue-600', 'border-blue-500')\n\n        // \u8A2D\u7F6E\u9078\u4E2D\u7684\u503C\n        this.selectedTime = slot.time\n        this.selectedPeriodId = slot.period_id\n\n        // \u8A2D\u7F6E\u96B1\u85CF\u6B04\u4F4D\u7684\u503C\n        const timeField = document.getElementById('reservation_time')\n        const periodField = document.getElementById('operating_period_id')\n\n        if (timeField) timeField.value = slot.time\n        if (periodField) periodField.value = slot.period_id\n\n        this.updateFormState()\n    }\n\n    updateFormState() {\n        if (!this.hasNextStepTarget) return\n\n        const hasDate = this.selectedDate\n        const hasTime = this.selectedTime\n\n        if (hasDate && hasTime) {\n            this.nextStepTarget.disabled = false\n            this.nextStepTarget.classList.remove('bg-gray-600', 'hover:bg-gray-500')\n            this.nextStepTarget.classList.add('bg-blue-600', 'hover:bg-blue-700')\n        } else {\n            this.nextStepTarget.disabled = true\n            this.nextStepTarget.classList.remove('bg-blue-600', 'hover:bg-blue-700')\n            this.nextStepTarget.classList.add('bg-gray-600', 'hover:bg-gray-500')\n        }\n    }\n\n    showServiceUnavailable(message) {\n        if (this.hasTimeSlotsTarget) {\n            this.timeSlotsTarget.innerHTML = `\n                <div class=\"bg-red-50 border border-red-200 rounded-lg p-6 text-center\">\n                    <div class=\"flex justify-center mb-4\">\n                        <svg class=\"h-12 w-12 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                        </svg>\n                    </div>\n                    <h3 class=\"text-lg font-medium text-red-800 mb-2\">\u7DDA\u4E0A\u8A02\u4F4D\u66AB\u505C\u670D\u52D9</h3>\n                    <p class=\"text-red-700\">${message}</p>\n                </div>\n            `\n        }\n    }\n\n    showError(message) {\n        if (this.hasTimeSlotsTarget) {\n            this.timeSlotsTarget.innerHTML = `\n                <div class=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center\">\n                    <p class=\"text-yellow-800\">${message}</p>\n                </div>\n            `\n        }\n    }\n\n    calculateDisabledDates(weekly_closures, special_closures, hasCapacity = true, availableDates = []) {\n        const disabledDates = []\n\n        // \u5982\u679C\u6C92\u6709\u5BB9\u91CF\uFF0C\u7981\u7528\u6240\u6709\u65E5\u671F\n        if (!hasCapacity) {\n            const today = new Date()\n            for (let i = 0; i <= this.maxReservationDays; i++) {\n                const date = new Date(today)\n                date.setDate(today.getDate() + i)\n                disabledDates.push(date)\n            }\n            return disabledDates\n        }\n\n        // \u8655\u7406\u6BCF\u9031\u56FA\u5B9A\u4F11\u606F\u65E5\n        if (weekly_closures && weekly_closures.length > 0) {\n            disabledDates.push((date) => {\n                const dayOfWeek = date.getDay()\n                return weekly_closures.includes(dayOfWeek)\n            })\n        }\n\n        // \u8655\u7406\u7279\u6B8A\u4F11\u606F\u65E5 - \u5C07\u5B57\u4E32\u8F49\u63DB\u70BA Date \u7269\u4EF6\u6BD4\u8F03\n        if (special_closures && special_closures.length > 0) {\n            special_closures.forEach((closureStr) => {\n                const closureDate = new Date(closureStr)\n                // \u6BD4\u8F03\u5E74\u3001\u6708\u3001\u65E5\n                disabledDates.push((date) => {\n                    return (\n                        date.getFullYear() === closureDate.getFullYear() &&\n                        date.getMonth() === closureDate.getMonth() &&\n                        date.getDate() === closureDate.getDate()\n                    )\n                })\n            })\n        }\n\n        // \u5982\u679C\u6709\u63D0\u4F9B\u53EF\u9810\u7D04\u65E5\u671F\u5217\u8868\uFF0C\u53EA\u5141\u8A31\u8A72\u5217\u8868\u4E2D\u7684\u65E5\u671F\u53EF\u9EDE\u64CA\n        if (availableDates && availableDates.length > 0) {\n            // \u5C07\u53EF\u9810\u7D04\u65E5\u671F\u5B57\u4E32\u8F49\u63DB\u70BA Date \u7269\u4EF6\u96C6\u5408\n            const availableDateSet = new Set(availableDates.map(dateStr => {\n                const date = new Date(dateStr)\n                return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`\n            }))\n            \n            // \u6DFB\u52A0\u51FD\u6578\u4F86\u7981\u7528\u4E0D\u5728\u53EF\u9810\u7D04\u5217\u8868\u4E2D\u7684\u65E5\u671F\n            disabledDates.push((date) => {\n                const dateStr = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`\n                return !availableDateSet.has(dateStr)\n            })\n        }\n\n        return disabledDates\n    }\n\n    updateUrlWithDate(dateStr) {\n        if (!dateStr || dateStr === '') {\n            return\n        }\n        const url = new URL(window.location)\n        url.searchParams.delete('show_all')\n        url.searchParams.set('date_filter', dateStr)\n        window.history.pushState({}, '', url.toString())\n    }\n\n    clearSelectedTimeSlot() {\n        // \u6E05\u9664\u9078\u4E2D\u7684\u6642\u6BB5\n        this.selectedTime = null\n        this.selectedPeriodId = null\n\n        // \u6E05\u9664\u8996\u89BA\u4E0A\u7684\u9078\u4E2D\u72C0\u614B\n        if (this.hasTimeSlotsTarget) {\n            this.timeSlotsTarget.querySelectorAll('button').forEach((btn) => {\n                btn.classList.remove('bg-blue-600', 'border-blue-500')\n                btn.classList.add('bg-gray-800', 'border-gray-600')\n            })\n        }\n\n        // \u6E05\u9664\u96B1\u85CF\u6B04\u4F4D\u7684\u503C\n        const timeField = document.getElementById('reservation_time')\n        const periodField = document.getElementById('operating_period_id')\n\n        if (timeField) timeField.value = ''\n        if (periodField) periodField.value = ''\n\n        // \u66F4\u65B0\u8868\u55AE\u72C0\u614B\n        this.updateFormState()\n    }\n\n    async refreshAvailableDates() {\n        try {\n            // \u5148\u6AA2\u67E5\u662F\u5426\u6709\u53EF\u7528\u65E5\u671F\n            const partySize = this.getCurrentPartySize()\n            const adults = this.hasAdultCountTarget ? parseInt(this.adultCountTarget.value) || 0 : partySize\n            const children = this.hasChildCountTarget ? parseInt(this.childCountTarget.value) || 0 : 0\n\n            const availableDatesUrl = `/restaurants/${this.restaurantSlugValue}/available_dates?party_size=${partySize}&adults=${adults}&children=${children}`\n\n            const availableDatesResponse = await fetch(availableDatesUrl, {\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                },\n            })\n\n            if (!availableDatesResponse.ok) {\n                throw new Error(`HTTP error! status: ${availableDatesResponse.status}`)\n            }\n\n            const availableDatesData = await availableDatesResponse.json()\n\n            // \u6AA2\u67E5\u662F\u5426\u5B8C\u5168\u6C92\u6709\u53EF\u7528\u65E5\u671F\n            if (\n                availableDatesData.has_capacity &&\n                (!availableDatesData.available_dates || availableDatesData.available_dates.length === 0)\n            ) {\n                // \u92B7\u6BC0\u73FE\u6709\u7684 flatpickr \u5BE6\u4F8B\n                if (this.datePicker) {\n                    this.datePicker.destroy()\n                    this.datePicker = null\n                }\n                // \u4F7F\u7528 full_booked_until \u5982\u679C\u6709\u7684\u8A71\uFF0C\u5426\u5247\u4F7F\u7528\u9910\u5EF3\u8A2D\u5B9A\u7684\u9810\u7D04\u5929\u6578\u4F5C\u70BA\u9810\u8A2D\u503C\n                const advanceBookingDays = availableDatesData.advance_booking_days || 30\n                const fullBookedUntil = availableDatesData.full_booked_until || new Date(Date.now() + advanceBookingDays * 24 * 60 * 60 * 1000).toISOString().split('T')[0]\n                this.showFullyBookedMessage(fullBookedUntil, partySize)\n                return\n            }\n\n            // \u5982\u679C\u9910\u5EF3\u6C92\u6709\u8DB3\u5920\u5BB9\u91CF\uFF0C\u4E5F\u986F\u793A\u76F8\u61C9\u8A0A\u606F\n            if (!availableDatesData.has_capacity) {\n                // \u92B7\u6BC0\u73FE\u6709\u7684 flatpickr \u5BE6\u4F8B\n                if (this.datePicker) {\n                    this.datePicker.destroy()\n                    this.datePicker = null\n                }\n                this.showNoCapacityMessage(partySize)\n                return\n            }\n\n            // \u5982\u679C\u6709\u53EF\u7528\u65E5\u671F\uFF0C\u78BA\u4FDD\u65E5\u66C6\u662F\u986F\u793A\u7684\n            this.hideFullyBookedMessage()\n\n            // \u91CD\u65B0\u7372\u53D6\u53EF\u7528\u65E5\u671F\u8CC7\u8A0A\n            const apiUrl = `/restaurants/${this.restaurantSlugValue}/available_days?party_size=${partySize}`\n\n            const response = await fetch(apiUrl, {\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                },\n            })\n\n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`)\n            }\n\n            const data = await response.json()\n\n            // \u91CD\u65B0\u8A08\u7B97\u7981\u7528\u65E5\u671F\n            const disabledDates = this.calculateDisabledDates(\n                data.weekly_closures || [],\n                data.special_closures || [],\n                data.has_capacity,\n                availableDatesData.available_dates || []\n            )\n\n            // \u66F4\u65B0 flatpickr \u7684\u7981\u7528\u65E5\u671F\u8A2D\u5B9A\n            if (this.datePicker) {\n                this.datePicker.set('disable', disabledDates)\n                this.datePicker.redraw()\n                // \u91CD\u65B0\u61C9\u7528\u6A23\u5F0F\uFF0C\u56E0\u70BA redraw \u53EF\u80FD\u6703\u91CD\u7F6E\u6A23\u5F0F\n                setTimeout(() => this.styleFlatpickr(), 50)\n            } else {\n                // \u5982\u679C\u6C92\u6709 datePicker \u5BE6\u4F8B\uFF0C\u91CD\u65B0\u521D\u59CB\u5316\n                this.initDatePicker()\n                return\n            }\n\n            // \u5982\u679C\u7576\u524D\u9078\u4E2D\u7684\u65E5\u671F\u8B8A\u6210\u4E0D\u53EF\u7528\uFF0C\u6E05\u9664\u9078\u64C7\n            if (this.selectedDate && !data.has_capacity) {\n                this.selectedDate = null\n                if (this.hasDateTarget) {\n                    this.dateTarget.value = ''\n                }\n                \n                // \u540C\u6642\u6E05\u9664\u8868\u55AE\u63D0\u4EA4\u7684\u96B1\u85CF\u6B04\u4F4D\n                const reservationDateField = document.getElementById('reservation_date')\n                if (reservationDateField) {\n                    reservationDateField.value = ''\n                }\n\n                // \u6E05\u9664\u6642\u6BB5\u9078\u64C7\n                if (this.hasTimeSlotsTarget) {\n                    this.timeSlotsTarget.innerHTML = '<p class=\"text-gray-500 text-center py-4\">\u8ACB\u5148\u9078\u64C7\u65E5\u671F</p>'\n                }\n            }\n        } catch (error) {\n            this.showError('\u91CD\u65B0\u8F09\u5165\u53EF\u7528\u65E5\u671F\u6642\u767C\u751F\u932F\u8AA4')\n        }\n    }\n}\n", "import { Controller } from '@hotwired/stimulus'\n\nexport default class extends Controller {\n    static targets = [\n        'partySizeField',\n        'adultsField',\n        'childrenField',\n        'datetimeField',\n        'submitButton',\n        'phoneInput',\n        'phoneError',\n    ]\n    static values = {\n        restaurantId: String,\n        checkAvailabilityUrl: String,\n    }\n\n    connect() {\n        console.log('\uD83D\uDD27 Reservation form controller connected')\n        this.updateHeadCounts()\n    }\n\n    // \u66F4\u65B0\u5927\u4EBA\u548C\u5C0F\u5B69\u6578\u91CF\n    updateHeadCounts() {\n        if (!this.hasPartySizeFieldTarget || !this.hasAdultsFieldTarget || !this.hasChildrenFieldTarget) {\n            return\n        }\n\n        const partySize = parseInt(this.partySizeFieldTarget.value) || 1\n        const currentAdults = parseInt(this.adultsFieldTarget.value) || 0\n        const currentChildren = parseInt(this.childrenFieldTarget.value) || 0\n        const currentTotal = currentAdults + currentChildren\n\n        // \u5982\u679C\u7E3D\u4EBA\u6578\u6539\u8B8A\u4E86\uFF0C\u9700\u8981\u8ABF\u6574\n        if (partySize !== currentTotal) {\n            // \u4FDD\u6301\u5C0F\u5B69\u6578\u4E0D\u8B8A\uFF0C\u8ABF\u6574\u5927\u4EBA\u6578\n            let newAdults = Math.max(partySize - currentChildren, 1) // \u81F3\u5C111\u500B\u5927\u4EBA\n            let newChildren = currentChildren\n\n            // \u5982\u679C\u8ABF\u6574\u5F8C\u8D85\u904E\u7E3D\u4EBA\u6578\uFF0C\u5247\u6E1B\u5C11\u5C0F\u5B69\u6578\n            if (newAdults + newChildren > partySize) {\n                newChildren = Math.max(partySize - newAdults, 0)\n            }\n\n            this.adultsFieldTarget.value = newAdults\n            this.childrenFieldTarget.value = newChildren\n\n            console.log(`\uD83D\uDD27 \u4EBA\u6578\u8ABF\u6574: \u7E3D\u8A08${partySize} = \u5927\u4EBA${newAdults} + \u5C0F\u5B69${newChildren}`)\n        }\n    }\n\n    // \u6AA2\u67E5\u53EF\u7528\u6027\n    async checkAvailability() {\n        if (!this.hasDatetimeFieldTarget || !this.hasPartySizeFieldTarget) {\n            return\n        }\n\n        const datetime = this.datetimeFieldTarget.value\n        const partySize = this.partySizeFieldTarget.value\n\n        if (!datetime || !partySize) {\n            return\n        }\n\n        console.log(`\uD83D\uDD27 \u6AA2\u67E5\u53EF\u7528\u6027: ${datetime}, ${partySize}\u4EBA`)\n\n        try {\n            // \u9019\u88E1\u53EF\u4EE5\u5BE6\u4F5C AJAX \u547C\u53EB\u4F86\u6AA2\u67E5\u53EF\u7528\u6027\n            // const response = await fetch(this.checkAvailabilityUrlValue, {\n            //     method: 'POST',\n            //     headers: {\n            //         'Content-Type': 'application/json',\n            //         'X-CSRF-Token': this.getCSRFToken()\n            //     },\n            //     body: JSON.stringify({\n            //         datetime: datetime,\n            //         party_size: partySize\n            //     })\n            // })\n            // const result = await response.json()\n            // this.displayAvailabilityResult(result)\n        } catch (error) {\n            console.error('\u6AA2\u67E5\u53EF\u7528\u6027\u6642\u767C\u751F\u932F\u8AA4:', error)\n        }\n    }\n\n    // \u986F\u793A\u53EF\u7528\u6027\u6AA2\u67E5\u7D50\u679C\n    displayAvailabilityResult(result) {\n        const availabilityCheck = document.getElementById('availability_check')\n        const availabilityResults = document.getElementById('availability_results')\n\n        if (availabilityCheck && availabilityResults) {\n            availabilityCheck.classList.remove('hidden')\n\n            if (result.available) {\n                availabilityResults.innerHTML = `\n                    <div class=\"flex items-center p-3 bg-green-50 border border-green-200 rounded-md\">\n                        <svg class=\"w-5 h-5 text-green-500 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clip-rule=\"evenodd\"></path>\n                        </svg>\n                        <div>\n                            <p class=\"text-sm font-medium text-green-800\">\u6709\u53EF\u7528\u684C\u4F4D</p>\n                            <p class=\"text-sm text-green-700\">${result.message}</p>\n                        </div>\n                    </div>\n                `\n            } else {\n                availabilityResults.innerHTML = `\n                    <div class=\"flex items-center p-3 bg-yellow-50 border border-yellow-200 rounded-md\">\n                        <svg class=\"w-5 h-5 text-yellow-500 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path fill-rule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clip-rule=\"evenodd\"></path>\n                        </svg>\n                        <div>\n                            <p class=\"text-sm font-medium text-yellow-800\">\u684C\u4F4D\u4E0D\u8DB3</p>\n                            <p class=\"text-sm text-yellow-700\">${result.message}</p>\n                            <p class=\"text-sm text-blue-600 mt-1\">\u7BA1\u7406\u54E1\u53EF\u4F7F\u7528\u5F37\u5236\u6A21\u5F0F\u5EFA\u7ACB\u8A02\u4F4D</p>\n                        </div>\n                    </div>\n                `\n            }\n        }\n    }\n\n    // \u7372\u53D6 CSRF Token\n    // getCSRFToken() {\n    //     const token = document.querySelector('[name=\"csrf-token\"]')\n    //     return token ? token.content : ''\n    // }\n\n    // \u96FB\u8A71\u865F\u78BC\u9A57\u8B49\n    validatePhone() {\n        if (!this.hasPhoneInputTarget) return true\n\n        const phone = this.phoneInputTarget.value\n        const phoneRegex = /^09\\d{8}$/\n        const isValid = phoneRegex.test(phone)\n\n        if (!isValid) {\n            this.phoneErrorTarget.textContent = '\u8ACB\u8F38\u5165\u6709\u6548\u7684\u53F0\u7063\u624B\u6A5F\u865F\u78BC (\u4F8B\u5982: 0912345678)'\n            this.phoneErrorTarget.classList.remove('hidden')\n            this.phoneInputTarget.classList.add('border-red-500')\n        } else {\n            this.phoneErrorTarget.textContent = ''\n            this.phoneErrorTarget.classList.add('hidden')\n            this.phoneInputTarget.classList.remove('border-red-500')\n        }\n        return isValid\n    }\n\n    // \u8868\u55AE\u63D0\u4EA4\u524D\u7684\u9A57\u8B49\n    validateForm(event) {\n        console.log('validateForm triggered')\n        // if (this.hasPartySizeFieldTarget && this.hasAdultsFieldTarget && this.hasChildrenFieldTarget) {\n        //     const partySize = parseInt(this.partySizeFieldTarget.value) || 0\n        //     const adults = parseInt(this.adultsFieldTarget.value) || 0\n        //     const children = parseInt(this.childrenFieldTarget.value) || 0\n\n        //     if (adults + children !== partySize) {\n        //         event.preventDefault()\n        //         alert('\u5927\u4EBA\u6578\u548C\u5C0F\u5B69\u6578\u7684\u7E3D\u548C\u5FC5\u9808\u7B49\u65BC\u7E3D\u4EBA\u6578')\n        //         return false\n        //     }\n\n        //     if (adults < 1) {\n        //         event.preventDefault()\n        //         alert('\u81F3\u5C11\u9700\u89811\u4F4D\u5927\u4EBA')\n        //         return false\n        //     }\n        // }\n        const isPhoneValid = this.validatePhone()\n        if (!isPhoneValid) {\n            event.preventDefault()\n            return false\n        }\n\n        return true\n    }\n\n    // \u7981\u7528\u63D0\u4EA4\u6309\u9215\n    disableSubmit() {\n        if (this.hasSubmitButtonTarget) {\n            this.submitButtonTarget.disabled = true\n            this.submitButtonTarget.textContent = '\u8655\u7406\u4E2D...'\n        }\n    }\n\n    // \u555F\u7528\u63D0\u4EA4\u6309\u9215\n    enableSubmit() {\n        if (this.hasSubmitButtonTarget) {\n            this.submitButtonTarget.disabled = false\n            this.submitButtonTarget.textContent = this.submitButtonTarget.dataset.originalText || '\u9001\u51FA'\n        }\n    }\n}\n", "import { Controller } from '@hotwired/stimulus'\n\nexport default class extends Controller {\n    static targets = [\n        'checkbox',\n        'toggle',\n        'toggleButton',\n        'status',\n        'settings',\n        'depositCheckbox',\n        'depositFields',\n        'unlimitedCheckbox',\n        'limitedTimeSettings',\n        'diningDurationField',\n        'durationPreview',\n        'examplePreview',\n    ]\n    static values = { enabled: Boolean }\n\n    connect() {\n        console.log('\uD83D\uDD27 ReservationPolicy controller connected')\n        this.updateUI()\n        this.initializeDeposit()\n        this.initializeDiningTime()\n        this.updateDiningTimePreview()\n    }\n\n    // \u8655\u7406\u5207\u63DB\u958B\u95DC\u9EDE\u64CA\n    toggle(event) {\n        event.preventDefault()\n        console.log('\uD83D\uDD27 \u5207\u63DB\u958B\u95DC\u88AB\u9EDE\u64CA')\n\n        // \u5207\u63DB checkbox \u72C0\u614B\n        this.checkboxTarget.checked = !this.checkboxTarget.checked\n        console.log('\uD83D\uDD27 \u65B0\u7684 checkbox \u72C0\u614B:', this.checkboxTarget.checked)\n\n        // \u66F4\u65B0 UI\n        this.updateUI()\n\n        // \u63D0\u4EA4\u8868\u55AE\n        this.submitForm()\n    }\n\n    // \u8655\u7406 checkbox \u8B8A\u66F4\u4E8B\u4EF6\n    checkboxChanged() {\n        console.log('\uD83D\uDD27 checkbox change \u4E8B\u4EF6\u89F8\u767C')\n        this.updateUI()\n        this.submitForm()\n    }\n\n    // \u66F4\u65B0UI\u72C0\u614B\n    updateUI() {\n        const enabled = this.checkboxTarget.checked\n        console.log('\uD83D\uDD27 \u66F4\u65B0UI\u72C0\u614B\u70BA:', enabled)\n\n        if (enabled) {\n            this.enableReservation()\n        } else {\n            this.disableReservation()\n        }\n    }\n\n    // \u555F\u7528\u8A02\u4F4D\u529F\u80FD\u7684UI\n    enableReservation() {\n        console.log('\uD83D\uDD27 \u8A2D\u5B9A\u70BA\u555F\u7528\u72C0\u614B')\n\n        // \u66F4\u65B0\u8A2D\u5B9A\u5340\u57DF\n        if (this.hasSettingsTarget) {\n            this.settingsTarget.classList.remove('opacity-50', 'pointer-events-none')\n        }\n\n        // \u66F4\u65B0\u5207\u63DB\u958B\u95DC\u6A23\u5F0F\n        if (this.hasToggleTarget) {\n            this.toggleTarget.classList.remove('bg-gray-200')\n            this.toggleTarget.classList.add('bg-blue-600')\n        }\n\n        // \u66F4\u65B0\u5207\u63DB\u6309\u9215\u4F4D\u7F6E\n        if (this.hasToggleButtonTarget) {\n            this.toggleButtonTarget.classList.remove('translate-x-0')\n            this.toggleButtonTarget.classList.add('translate-x-5')\n        }\n\n        // \u66F4\u65B0\u72C0\u614B\u6587\u5B57\n        if (this.hasStatusTarget) {\n            this.statusTarget.textContent = '\u5DF2\u555F\u7528'\n        }\n    }\n\n    // \u505C\u7528\u8A02\u4F4D\u529F\u80FD\u7684UI\n    disableReservation() {\n        console.log('\uD83D\uDD27 \u8A2D\u5B9A\u70BA\u505C\u7528\u72C0\u614B')\n\n        // \u66F4\u65B0\u8A2D\u5B9A\u5340\u57DF\n        if (this.hasSettingsTarget) {\n            this.settingsTarget.classList.add('opacity-50', 'pointer-events-none')\n        }\n\n        // \u66F4\u65B0\u5207\u63DB\u958B\u95DC\u6A23\u5F0F\n        if (this.hasToggleTarget) {\n            this.toggleTarget.classList.remove('bg-blue-600')\n            this.toggleTarget.classList.add('bg-gray-200')\n        }\n\n        // \u66F4\u65B0\u5207\u63DB\u6309\u9215\u4F4D\u7F6E\n        if (this.hasToggleButtonTarget) {\n            this.toggleButtonTarget.classList.remove('translate-x-5')\n            this.toggleButtonTarget.classList.add('translate-x-0')\n        }\n\n        // \u66F4\u65B0\u72C0\u614B\u6587\u5B57\n        if (this.hasStatusTarget) {\n            this.statusTarget.textContent = '\u5DF2\u505C\u7528'\n        }\n    }\n\n    // \u63D0\u4EA4\u8868\u55AE\n    submitForm() {\n        const form = document.getElementById('reservation_policy_form')\n        if (form) {\n            console.log('\uD83D\uDD27 \u63D0\u4EA4\u8868\u55AE')\n            form.requestSubmit()\n        } else {\n            console.error('\uD83D\uDD27 \u627E\u4E0D\u5230\u8868\u55AE')\n        }\n    }\n\n    // \u8655\u7406\u62BC\u91D1\u8A2D\u5B9A\u5207\u63DB\n    toggleDeposit(event) {\n        const enabled = event.target.checked\n        console.log('\uD83D\uDD27 \u62BC\u91D1\u8A2D\u5B9A\u5207\u63DB\u70BA:', enabled)\n\n        if (this.hasDepositFieldsTarget) {\n            if (enabled) {\n                this.depositFieldsTarget.classList.remove('hidden')\n            } else {\n                this.depositFieldsTarget.classList.add('hidden')\n            }\n        }\n    }\n\n    // \u521D\u59CB\u5316\u62BC\u91D1\u8A2D\u5B9A\u986F\u793A\u72C0\u614B\n    initializeDeposit() {\n        if (this.hasDepositCheckboxTarget && this.hasDepositFieldsTarget) {\n            const isEnabled = this.depositCheckboxTarget.checked\n            console.log('\uD83D\uDD27 \u521D\u59CB\u5316\u62BC\u91D1\u8A2D\u5B9A\u72C0\u614B:', isEnabled)\n\n            if (!isEnabled) {\n                this.depositFieldsTarget.classList.add('hidden')\n            } else {\n                this.depositFieldsTarget.classList.remove('hidden')\n            }\n        }\n    }\n\n    // \u8655\u7406\u7121\u9650\u7528\u9910\u6642\u9593\u5207\u63DB\n    toggleUnlimitedTime(event) {\n        const unlimited = event.target.checked\n        console.log('\uD83D\uDD27 \u7121\u9650\u7528\u9910\u6642\u9593\u5207\u63DB\u70BA:', unlimited)\n\n        if (this.hasLimitedTimeSettingsTarget) {\n            if (unlimited) {\n                this.limitedTimeSettingsTarget.classList.add('opacity-50', 'pointer-events-none')\n            } else {\n                this.limitedTimeSettingsTarget.classList.remove('opacity-50', 'pointer-events-none')\n            }\n        }\n\n        this.updateDiningTimePreview()\n    }\n\n    // \u521D\u59CB\u5316\u7528\u9910\u6642\u9593\u8A2D\u5B9A\n    initializeDiningTime() {\n        if (this.hasUnlimitedCheckboxTarget && this.hasLimitedTimeSettingsTarget) {\n            const unlimited = this.unlimitedCheckboxTarget.checked\n            console.log('\uD83D\uDD27 \u521D\u59CB\u5316\u7528\u9910\u6642\u9593\u8A2D\u5B9A:', unlimited ? '\u7121\u9650\u6642' : '\u6709\u9650\u6642')\n\n            if (unlimited) {\n                this.limitedTimeSettingsTarget.classList.add('opacity-50', 'pointer-events-none')\n            } else {\n                this.limitedTimeSettingsTarget.classList.remove('opacity-50', 'pointer-events-none')\n            }\n        }\n    }\n\n    // \u66F4\u65B0\u7528\u9910\u6642\u9593\u9810\u89BD\n    updateDiningTimePreview() {\n        if (!this.hasDurationPreviewTarget || !this.hasExamplePreviewTarget) {\n            return\n        }\n\n        if (this.hasUnlimitedCheckboxTarget && this.unlimitedCheckboxTarget.checked) {\n            this.durationPreviewTarget.innerHTML = '\u7E3D\u4F54\u7528\u6642\u9593\uFF1A<span class=\"font-medium text-yellow-600\">\u7121\u9650\u5236</span>'\n            this.examplePreviewTarget.innerHTML =\n                '\u4F8B\u5982\uFF1A18:00 \u8A02\u4F4D\uFF0C<span class=\"font-medium text-yellow-600\">\u4E0D\u9650\u5236\u7528\u9910\u6642\u9593</span>'\n            return\n        }\n\n        const diningMinutes = this.hasDiningDurationFieldTarget\n            ? parseInt(this.diningDurationFieldTarget.value) || 120\n            : 120\n\n        const totalMinutes = diningMinutes\n        const hours = Math.floor(totalMinutes / 60)\n        const minutes = totalMinutes % 60\n\n        let durationText\n        if (hours > 0 && minutes > 0) {\n            durationText = `${hours}\u5C0F\u6642${minutes}\u5206\u9418`\n        } else if (hours > 0) {\n            durationText = `${hours}\u5C0F\u6642`\n        } else {\n            durationText = `${minutes}\u5206\u9418`\n        }\n\n        // \u8A08\u7B97\u7D50\u675F\u6642\u9593\u793A\u4F8B\uFF0818:00 + \u7E3D\u6642\u9577\uFF09\n        const exampleStart = new Date()\n        exampleStart.setHours(18, 0, 0, 0)\n        const exampleEnd = new Date(exampleStart.getTime() + totalMinutes * 60000)\n        const endTimeString = exampleEnd.toLocaleTimeString('zh-TW', {\n            hour: '2-digit',\n            minute: '2-digit',\n            hour12: false,\n        })\n\n        this.durationPreviewTarget.innerHTML = `\u7528\u9910\u6642\u9593\uFF1A<span class=\"font-medium text-blue-600\">${durationText}</span>`\n        this.examplePreviewTarget.innerHTML = `\u4F8B\u5982\uFF1A18:00 \u8A02\u4F4D\uFF0C\u9810\u8A08 <span class=\"font-medium text-blue-600\">${endTimeString}</span> \u7528\u9910\u7D50\u675F`\n    }\n}\n", "import { Controller } from '@hotwired/stimulus'\n\nexport default class extends Controller {\n    static targets = ['infoButton', 'infoPanel', 'reminderButton', 'reminderPanel']\n\n    connect() {\n        console.log('\uD83D\uDD25 Restaurant Info Controller connected')\n    }\n\n    toggleInfo() {\n        console.log('\uD83D\uDD25 Toggle restaurant info')\n\n        if (this.infoPanelTarget.classList.contains('hidden')) {\n            // \u986F\u793A\u8CC7\u8A0A\u9762\u677F\n            this.infoPanelTarget.classList.remove('hidden')\n            this.infoPanelTarget.classList.add('animate-slideDown')\n        } else {\n            // \u96B1\u85CF\u8CC7\u8A0A\u9762\u677F\n            this.infoPanelTarget.classList.add('hidden')\n            this.infoPanelTarget.classList.remove('animate-slideDown')\n        }\n    }\n\n    toggleReminder() {\n        console.log('\uD83D\uDD25 Toggle reminder info')\n\n        if (this.hasReminderPanelTarget) {\n            if (this.reminderPanelTarget.classList.contains('hidden')) {\n                // \u986F\u793A\u63D0\u9192\u4E8B\u9805\u9762\u677F\n                this.reminderPanelTarget.classList.remove('hidden')\n                this.reminderPanelTarget.classList.add('animate-slideDown')\n            } else {\n                // \u96B1\u85CF\u63D0\u9192\u4E8B\u9805\u9762\u677F\n                this.reminderPanelTarget.classList.add('hidden')\n                this.reminderPanelTarget.classList.remove('animate-slideDown')\n            }\n        }\n    }\n}\n", "import { Controller } from '@hotwired/stimulus'\n\nexport default class extends Controller {\n    static targets = ['modal', 'tabContent', 'tab']\n    static values = {\n        restaurantSlug: String,\n        currentTab: String,\n    }\n    static classes = ['activeTab', 'inactiveTab', 'loading']\n\n    connect() {\n        console.log('\uD83D\uDD17 Restaurant management controller connected')\n        console.log('\uD83C\uDFAF Modal target:', this.modalTarget)\n        console.log('\uD83C\uDFEA Restaurant slug:', this.restaurantSlugValue)\n\n        // \u8A2D\u5B9A\u5168\u57DF\u51FD\u6578\u4EE5\u4FBF\u52D5\u614B\u8F09\u5165\u7684\u5167\u5BB9\u4F7F\u7528\n        this.setupGlobalFunctions()\n    }\n\n    // \u8A2D\u5B9A\u5168\u57DF\u51FD\u6578\n    setupGlobalFunctions() {\n        // \u516C\u4F11\u65E5\u671F\u76F8\u95DC\u7684\u5168\u57DF\u51FD\u6578\n        window.openModal = (modalId) => {\n            this.openModalById(modalId)\n        }\n\n        window.closeModal = (modalId) => {\n            this.closeModal(modalId)\n        }\n\n        window.setWeeklyClosureModal = () => {\n            this.openModalById('weeklyClosureModal')\n        }\n\n        window.setHolidayClosureModal = () => {\n            this.openModalById('holidayClosureModal')\n        }\n\n        window.createHolidayClosures = () => {\n            this.createHolidayClosures()\n        }\n    }\n\n    // \u958B\u555F\u7BA1\u7406\u6A21\u614B\u8996\u7A97\n    openModal() {\n        console.log('\uD83D\uDD13 Opening modal - button clicked')\n        console.log('\uD83C\uDFAF Modal element:', this.modalTarget)\n\n        if (this.modalTarget) {\n            console.log('\uD83D\uDCCB Modal classes before:', this.modalTarget.classList.toString())\n            this.modalTarget.classList.remove('hidden')\n            console.log('\uD83D\uDCCB Modal classes after:', this.modalTarget.classList.toString())\n\n            // \u81EA\u52D5\u986F\u793A\u7B2C\u4E00\u500B\u6A19\u7C64\u9801\uFF08\u9910\u5EF3\u8CC7\u8A0A\uFF09\n            setTimeout(() => {\n                this.activateFirstTab()\n            }, 100)\n        } else {\n            console.error('\u274C Modal target not found!')\n        }\n    }\n\n    // \u555F\u7528\u7B2C\u4E00\u500B\u6A19\u7C64\u9801\n    activateFirstTab() {\n        // \u627E\u5230\u7B2C\u4E00\u500B\u6A19\u7C64\u9801\u6309\u9215\u4E26\u6A21\u64EC\u9EDE\u64CA\n        const firstTabButton = this.tabTargets[0]\n        if (firstTabButton) {\n            const event = {\n                target: firstTabButton,\n                params: { tab: 'restaurant-info' },\n            }\n            this.switchTab(event)\n        }\n    }\n\n    // \u95DC\u9589\u7BA1\u7406\u6A21\u614B\u8996\u7A97\n    closeMainModal() {\n        console.log('\uD83D\uDD12 Closing main modal')\n        if (this.modalTarget) {\n            console.log('\u2705 Modal target found, adding hidden class')\n            this.modalTarget.classList.add('hidden')\n            console.log('\u2705 Main modal closed successfully')\n        } else {\n            console.error('\u274C Modal target not found!')\n        }\n    }\n\n    // \u9EDE\u64CA\u80CC\u666F\u95DC\u9589\u6A21\u614B\u8996\u7A97\n    closeOnBackground(event) {\n        console.log('\uD83D\uDDB1\uFE0F Background clicked')\n        console.log('\uD83C\uDFAF Event target:', event.target)\n        console.log('\uD83C\uDFAF Modal target:', this.modalTarget)\n\n        // \u53EA\u6709\u7576\u9EDE\u64CA\u7684\u662F\u6A21\u614B\u8996\u7A97\u80CC\u666F\u672C\u8EAB\u6642\u624D\u95DC\u9589\n        if (event.target === this.modalTarget) {\n            console.log('\u2705 Closing modal from background click')\n            this.closeMainModal()\n        } else {\n            console.log('\u26A0\uFE0F Not closing - clicked on modal content')\n        }\n    }\n\n    // \u5207\u63DB\u6A19\u7C64\u9801\n    switchTab(event) {\n        const tabName = event.params.tab\n\n        // \u96B1\u85CF\u6240\u6709\u9078\u9805\u5361\u5167\u5BB9\n        this.tabContentTargets.forEach((tab) => {\n            tab.classList.add('hidden')\n        })\n\n        // \u91CD\u7F6E\u6240\u6709\u9078\u9805\u5361\u6A23\u5F0F\n        this.tabTargets.forEach((tab) => {\n            tab.classList.remove('border-blue-500', 'text-blue-600')\n            tab.classList.add('border-transparent', 'text-gray-500')\n        })\n\n        // \u986F\u793A\u9078\u4E2D\u7684\u9078\u9805\u5361\n        const targetTab = document.getElementById(`${tabName}-tab`)\n        if (targetTab) {\n            targetTab.classList.remove('hidden')\n\n            // \u66F4\u65B0\u9078\u9805\u5361\u6A23\u5F0F\n            const clickedTab = event.target.closest('button')\n            if (clickedTab) {\n                clickedTab.classList.remove('border-transparent', 'text-gray-500')\n                clickedTab.classList.add('border-blue-500', 'text-blue-600')\n            }\n\n            // \u8F09\u5165\u5C0D\u61C9\u5167\u5BB9\n            this.loadTabContent(tabName)\n        }\n\n        this.currentTabValue = tabName\n    }\n\n    // \u8F09\u5165\u9078\u9805\u5361\u5167\u5BB9\n    async loadTabContent(tabName) {\n        const contentDiv = document.getElementById(`${tabName}-content`)\n        if (!contentDiv) return\n\n        // \u986F\u793A\u8F09\u5165\u72C0\u614B\n        this.showLoading(contentDiv)\n\n        try {\n            const url = this.getTabUrl(tabName)\n            console.log('\uD83C\uDF10 Loading tab:', tabName, 'URL:', url)\n\n            const response = await fetch(url, {\n                headers: {\n                    Accept: 'text/html, application/xhtml+xml',\n                    'X-Requested-With': 'XMLHttpRequest',\n                    'Content-Type': 'application/html',\n                },\n            })\n\n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`)\n            }\n\n            const html = await response.text()\n            console.log('\uD83D\uDCC4 Received HTML length:', html.length)\n\n            const parser = new DOMParser()\n            const doc = parser.parseFromString(html, 'text/html')\n\n            const extractedContent = this.extractContent(doc, tabName)\n\n            if (extractedContent) {\n                console.log('\u2705 Extracted content successfully')\n                contentDiv.innerHTML = extractedContent.innerHTML\n\n                // \u91CD\u65B0\u521D\u59CB\u5316\u4E8B\u4EF6\n                this.initializeTabScripts(tabName, contentDiv)\n\n                // \u91CD\u65B0\u521D\u59CB\u5316 Stimulus \u63A7\u5236\u5668\n                this.reinitializeStimulusControllers(contentDiv)\n            } else {\n                this.showError(contentDiv, '\u8F09\u5165\u5931\u6557\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66')\n            }\n        } catch (error) {\n            console.error('\uD83D\uDCA5 \u8F09\u5165\u5931\u6557:', error)\n            this.showError(contentDiv, '\u8F09\u5165\u5931\u6557\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66')\n        }\n    }\n\n    // \u7372\u53D6\u9078\u9805\u5361\u5C0D\u61C9\u7684 URL\n    getTabUrl(tabName) {\n        const slug = this.restaurantSlugValue\n\n        switch (tabName) {\n            case 'restaurant-info':\n                return `/admin/restaurants/${slug}/edit`\n            case 'business-periods':\n                return `/admin/restaurants/${slug}/reservation_periods`\n            case 'closure-dates':\n                return `/admin/restaurant_settings/restaurants/${slug}/closure_dates`\n            default:\n                return null\n        }\n    }\n\n    // \u63D0\u53D6\u9801\u9762\u5167\u5BB9\n    extractContent(doc, tabName) {\n        console.log('\uD83D\uDD0D Extracting content for tab:', tabName)\n\n        let mainContent\n\n        if (tabName === 'restaurant-info') {\n            // \u9910\u5EF3\u8CC7\u8A0A\uFF1A\u63D0\u53D6\u8868\u55AE\u5167\u5BB9\n            mainContent = doc.querySelector('form') || doc.querySelector('.max-w-7xl')\n            console.log('\uD83D\uDCCB Restaurant info form found:', !!mainContent)\n        } else if (tabName === 'business-periods') {\n            // \u71DF\u696D\u6642\u6BB5\uFF1A\u63D0\u53D6\u4E3B\u8981\u5167\u5BB9\u4F46\u79FB\u9664\u9801\u9762\u6A19\u984C\u548C\u8FD4\u56DE\u6309\u9215\n            const container = doc.querySelector('.max-w-7xl')\n            console.log('\uD83D\uDD50 Business periods container found:', !!container)\n\n            if (container) {\n                mainContent = container.cloneNode(true)\n\n                // \u79FB\u9664\u9801\u9762\u6A19\u984C\u5340\u584A\n                const titleSection = mainContent.querySelector('.mb-8')\n                if (titleSection && titleSection.querySelector('h1')) {\n                    console.log('\uD83D\uDDD1\uFE0F Removing title section')\n                    titleSection.remove()\n                }\n\n                // \u79FB\u9664\u8FD4\u56DE\u6309\u9215\n                const backLinks = mainContent.querySelectorAll('a[href*=\"admin_restaurant\"]')\n                console.log('\uD83D\uDD17 Back links found:', backLinks.length)\n                backLinks.forEach((link) => {\n                    if (link.textContent.includes('\u8FD4\u56DE')) {\n                        console.log('\uD83D\uDDD1\uFE0F Removing back link')\n                        link.closest('.flex')?.remove()\n                    }\n                })\n            }\n        } else if (tabName === 'closure-dates') {\n            // \u516C\u4F11\u65E5\u671F\uFF1A\u63D0\u53D6\u4E3B\u8981\u5167\u5BB9\u4F46\u79FB\u9664\u9801\u9762\u6A19\u984C\u3001\u5C0E\u89BD\u548C\u8FD4\u56DE\u6309\u9215\n            const container = doc.querySelector('.max-w-7xl')\n            console.log('\uD83D\uDCC5 Closure dates container found:', !!container)\n\n            if (container) {\n                mainContent = container.cloneNode(true)\n\n                // \u78BA\u4FDD\u4FDD\u7559 data-controller \u548C\u76F8\u95DC\u5C6C\u6027\n                if (!mainContent.dataset.controller) {\n                    const originalController = container.querySelector('[data-controller*=\"closure-dates\"]')\n                    if (originalController) {\n                        console.log('\uD83D\uDD27 Preserving closure-dates controller attributes')\n                        mainContent.setAttribute('data-controller', originalController.dataset.controller)\n                        // \u8907\u88FD\u6240\u6709 data-closure-dates \u76F8\u95DC\u5C6C\u6027\n                        Object.keys(originalController.dataset).forEach((key) => {\n                            if (key.startsWith('closureDates')) {\n                                mainContent.dataset[key] = originalController.dataset[key]\n                                console.log(`\uD83D\uDCCB Copied ${key}:`, originalController.dataset[key])\n                            }\n                        })\n                    }\n                }\n\n                // \u79FB\u9664\u9801\u9762\u6A19\u984C\u5340\u584A\n                const titleSection = mainContent.querySelector('.mb-8')\n                if (titleSection && titleSection.querySelector('h1')) {\n                    console.log('\uD83D\uDDD1\uFE0F Removing title section')\n                    titleSection.remove()\n                }\n\n                // \u79FB\u9664\u9078\u9805\u5361\u5C0E\u89BD\n                const tabsNav = mainContent.querySelector('.border-b.border-gray-200')\n                if (tabsNav && tabsNav.querySelector('nav')) {\n                    console.log('\uD83D\uDDD1\uFE0F Removing tabs navigation')\n                    tabsNav.remove()\n                }\n\n                // \u79FB\u9664\u8FD4\u56DE\u6309\u9215\n                const backLinks = mainContent.querySelectorAll('a[href*=\"admin_restaurant_settings\"]')\n                console.log('\uD83D\uDD17 Back links found:', backLinks.length)\n                backLinks.forEach((link) => {\n                    if (link.textContent.includes('\u8FD4\u56DE')) {\n                        console.log('\uD83D\uDDD1\uFE0F Removing back link')\n                        link.closest('.flex')?.remove()\n                    }\n                })\n            }\n        }\n\n        console.log('\uD83D\uDCE6 Extracted content:', !!mainContent)\n        if (mainContent) {\n            console.log('\uD83D\uDCCF Content HTML length:', mainContent.innerHTML.length)\n        }\n\n        return mainContent\n    }\n\n    // \u521D\u59CB\u5316\u9078\u9805\u5361\u8173\u672C\n    initializeTabScripts(tabName, contentDiv) {\n        if (tabName === 'business-periods') {\n            this.initializeBusinessPeriods(contentDiv)\n        } else if (tabName === 'closure-dates') {\n            this.initializeClosureDates(contentDiv)\n        }\n\n        // \u901A\u7528\u8868\u55AE\u8655\u7406\n        this.initializeForms(contentDiv, tabName)\n    }\n\n    // \u521D\u59CB\u5316\u71DF\u696D\u6642\u6BB5\u529F\u80FD\n    initializeBusinessPeriods(contentDiv) {\n        console.log('\uD83D\uDD50 Initializing business periods functionality')\n\n        // \u91CD\u65B0\u7D81\u5B9A\u7DE8\u8F2F\u6309\u9215\n        const editButtons = contentDiv.querySelectorAll('a[href*=\"edit\"], button[data-action*=\"edit\"]')\n        editButtons.forEach((button) => {\n            button.addEventListener('click', (e) => {\n                e.preventDefault()\n                const url = button.href || button.dataset.url\n                if (url) {\n                    this.loadEditContent(url)\n                }\n            })\n        })\n\n        // \u91CD\u65B0\u7D81\u5B9A\u5207\u63DB\u72C0\u614B\u6309\u9215\n        const toggleButtons = contentDiv.querySelectorAll('button[data-action*=\"toggle\"]')\n        toggleButtons.forEach((button) => {\n            button.addEventListener('click', async (e) => {\n                e.preventDefault()\n                const url = button.dataset.url\n                if (url) {\n                    try {\n                        const response = await fetch(url, {\n                            method: 'PATCH',\n                            headers: {\n                                'X-CSRF-Token': this.getCSRFToken(),\n                                Accept: 'text/vnd.turbo-stream.html',\n                            },\n                        })\n\n                        if (response.ok) {\n                            // \u91CD\u65B0\u8F09\u5165\u71DF\u696D\u6642\u6BB5\u5167\u5BB9\n                            this.loadTabContent('business-periods')\n                        }\n                    } catch (error) {\n                        console.error('\uD83D\uDCA5 \u5207\u63DB\u72C0\u614B\u5931\u6557:', error)\n                        alert('\u64CD\u4F5C\u5931\u6557\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66')\n                    }\n                }\n            })\n        })\n\n        // \u91CD\u65B0\u7D81\u5B9A\u65B0\u589E\u71DF\u696D\u6642\u6BB5\u8868\u55AE\n        const newBusinessPeriodForm = contentDiv.querySelector('#new_reservation_period_form form')\n        if (newBusinessPeriodForm) {\n            newBusinessPeriodForm.addEventListener('submit', async (e) => {\n                e.preventDefault()\n\n                try {\n                    const formData = new FormData(newBusinessPeriodForm)\n                    const response = await fetch(newBusinessPeriodForm.action, {\n                        method: 'POST',\n                        body: formData,\n                        headers: {\n                            'X-CSRF-Token': this.getCSRFToken(),\n                            Accept: 'text/vnd.turbo-stream.html',\n                        },\n                    })\n\n                    if (response.ok) {\n                        // \u91CD\u65B0\u8F09\u5165\u71DF\u696D\u6642\u6BB5\u5167\u5BB9\n                        this.loadTabContent('business-periods')\n                    } else {\n                        throw new Error('\u63D0\u4EA4\u5931\u6557')\n                    }\n                } catch (error) {\n                    console.error('\uD83D\uDCA5 \u65B0\u589E\u71DF\u696D\u6642\u6BB5\u5931\u6557:', error)\n                    alert('\u65B0\u589E\u5931\u6557\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66')\n                }\n            })\n        }\n    }\n\n    // \u521D\u59CB\u5316\u516C\u4F11\u65E5\u671F\u529F\u80FD\n    initializeClosureDates(contentDiv) {\n        console.log('\uD83D\uDCC5 Initializing closure dates functionality')\n\n        // \u5B9A\u7FA9\u5168\u57DF\u5099\u7528\u51FD\u6578\uFF0C\u4EE5\u9632\u9801\u9762\u4E2D\u7684\u8173\u672C\u6C92\u6709\u8F09\u5165\n        if (!window.handleWeeklyClosureSubmit) {\n            console.log('\uD83D\uDD27 Defining backup handleWeeklyClosureSubmit function')\n            window.handleWeeklyClosureSubmit = async (event) => {\n                console.log('\uD83D\uDD25 Backup handleWeeklyClosureSubmit called!')\n                event.preventDefault()\n\n                const container = event.target.closest('[data-controller*=\"closure-dates\"]')\n                if (container) {\n                    await this.manualWeeklySubmit(container)\n                } else {\n                    console.error('\u274C Could not find closure dates container for backup handler')\n                    alert('\u627E\u4E0D\u5230\u516C\u4F11\u65E5\u671F\u63A7\u5236\u5668')\n                }\n            }\n        }\n\n        // \u91CD\u65B0\u7D81\u5B9A\u7DE8\u8F2F\u548C\u522A\u9664\u6309\u9215\n        const editButtons = contentDiv.querySelectorAll('button[onclick*=\"edit\"], a[href*=\"edit\"]')\n        editButtons.forEach((button) => {\n            button.addEventListener('click', (e) => {\n                e.preventDefault()\n                const url = button.href || button.dataset.url\n                if (url) {\n                    this.loadEditContent(url)\n                }\n            })\n        })\n\n        // \u91CD\u65B0\u7D81\u5B9A\u522A\u9664\u6309\u9215\n        const deleteButtons = contentDiv.querySelectorAll('form[method=\"post\"] button[title=\"\u522A\u9664\"]')\n        deleteButtons.forEach((button) => {\n            const form = button.closest('form')\n            if (form) {\n                form.addEventListener('submit', async (e) => {\n                    e.preventDefault()\n\n                    const confirmMessage = button.dataset.confirm || '\u78BA\u5B9A\u8981\u522A\u9664\u55CE\uFF1F'\n                    if (confirm(confirmMessage)) {\n                        try {\n                            const formData = new FormData(form)\n                            const response = await fetch(form.action, {\n                                method: 'DELETE',\n                                body: formData,\n                                headers: {\n                                    'X-CSRF-Token': this.getCSRFToken(),\n                                    Accept: 'text/vnd.turbo-stream.html',\n                                    'X-Requested-With': 'XMLHttpRequest',\n                                },\n                            })\n\n                            if (response.ok) {\n                                console.log('\u2705 Delete successful')\n\n                                // \u5982\u679C\u56DE\u61C9\u662F Turbo Stream\uFF0C\u8655\u7406\u5B83\n                                const responseText = await response.text()\n                                console.log('\uD83D\uDCE1 Response received, content type:', response.headers.get('Content-Type'))\n\n                                if (response.headers.get('Content-Type')?.includes('turbo-stream')) {\n                                    console.log('\uD83D\uDCE1 Processing Turbo Stream response')\n                                    // \u8B93 Turbo \u8655\u7406\u56DE\u61C9\n                                    const turboStreamElement = document.createElement('div')\n                                    turboStreamElement.innerHTML = responseText\n\n                                    // \u57F7\u884C\u6BCF\u500B turbo-stream \u52D5\u4F5C\n                                    const turboStreams = turboStreamElement.querySelectorAll('turbo-stream')\n                                    console.log(`\uD83D\uDD04 Found ${turboStreams.length} turbo-stream elements`)\n\n                                    turboStreams.forEach((stream, index) => {\n                                        const action = stream.getAttribute('action')\n                                        const target = stream.getAttribute('target')\n                                        const template = stream.querySelector('template')\n\n                                        console.log(\n                                            `\uD83D\uDCCB Processing stream ${index + 1}: action=${action}, target=${target}`\n                                        )\n\n                                        if (action === 'remove' && target) {\n                                            const targetElement = document.getElementById(target)\n                                            if (targetElement) {\n                                                targetElement.remove()\n                                                console.log(`\uD83D\uDDD1\uFE0F Removed element: ${target}`)\n                                            } else {\n                                                console.warn(`\u26A0\uFE0F Target element not found: ${target}`)\n                                            }\n                                        } else if (action === 'update' && target && template) {\n                                            const targetElement = document.getElementById(target)\n                                            if (targetElement) {\n                                                targetElement.innerHTML = template.innerHTML\n                                                console.log(`\uD83D\uDD04 Updated element: ${target}`)\n                                            } else {\n                                                console.warn(`\u26A0\uFE0F Target element not found: ${target}`)\n                                            }\n                                        }\n                                    })\n\n                                    console.log('\u2705 Turbo Stream processing completed')\n                                } else {\n                                    console.log('\uD83D\uDCC4 Non-Turbo Stream response, reloading content')\n                                    // \u5982\u679C\u4E0D\u662F Turbo Stream\uFF0C\u91CD\u65B0\u8F09\u5165\u5167\u5BB9\n                                    this.loadTabContent('closure-dates')\n                                    return // \u65E9\u671F\u8FD4\u56DE\uFF0C\u907F\u514D\u91CD\u8907\u57F7\u884C\u66F4\u65B0\n                                }\n\n                                // \u91CD\u65B0\u6AA2\u67E5\u5DF2\u5B58\u5728\u7684\u516C\u4F11\u8A2D\u5B9A\n                                setTimeout(() => {\n                                    console.log('\uD83D\uDD04 Starting post-deletion updates...')\n\n                                    if (window.checkExistingClosureDates) {\n                                        console.log('\uD83D\uDD04 Re-checking existing closure dates after deletion')\n                                        window.checkExistingClosureDates()\n                                    } else {\n                                        console.warn('\u26A0\uFE0F checkExistingClosureDates function not found')\n                                    }\n\n                                    if (window.updateStatistics) {\n                                        console.log('\uD83D\uDCCA Updating statistics after deletion')\n                                        window.updateStatistics()\n                                    } else {\n                                        console.warn('\u26A0\uFE0F updateStatistics function not found')\n                                    }\n\n                                    console.log('\u2705 Post-deletion updates completed')\n                                }, 200)\n                            } else {\n                                throw new Error(`HTTP ${response.status}: ${response.statusText}`)\n                            }\n                        } catch (error) {\n                            console.error('\uD83D\uDCA5 Delete failed:', error)\n                            alert('\u522A\u9664\u5931\u6557\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66')\n                        }\n                    }\n                })\n            }\n        })\n\n        // \u5728\u8F09\u5165\u5B8C\u6210\u5F8C\u6AA2\u67E5\u5DF2\u5B58\u5728\u7684\u516C\u4F11\u8A2D\u5B9A\n        setTimeout(() => {\n            if (window.checkExistingClosureDates) {\n                console.log('\uD83D\uDD04 Calling checkExistingClosureDates after content load')\n                window.checkExistingClosureDates()\n            } else {\n                console.warn('\u26A0\uFE0F checkExistingClosureDates function not found')\n            }\n        }, 500)\n    }\n\n    // \u624B\u52D5\u8655\u7406\u9031\u5E7E\u516C\u4F11\u63D0\u4EA4\uFF08\u5099\u7528\u65B9\u6CD5\uFF09\n    async manualWeeklySubmit(container) {\n        console.log('\uD83D\uDD27 Manual weekly submit fallback')\n\n        try {\n            const checkboxes = container.querySelectorAll('input[name=\"weekdays[]\"]:checked')\n            const reasonField = container.querySelector('input[name*=\"reason\"]')\n            const reason = reasonField ? reasonField.value : '\u6BCF\u9031\u56FA\u5B9A\u516C\u4F11'\n\n            console.log('\uD83D\uDCCB Found checkboxes:', checkboxes.length)\n            console.log('\uD83D\uDCDD Reason:', reason)\n\n            if (checkboxes.length === 0) {\n                alert('\u8ACB\u81F3\u5C11\u9078\u64C7\u4E00\u500B\u5B9A\u4F11\u65E5')\n                return\n            }\n\n            console.log(\n                '\uD83D\uDCCB Selected weekdays:',\n                Array.from(checkboxes).map((cb) => cb.value)\n            )\n\n            const slug = this.restaurantSlugValue\n            const url = `/admin/restaurant_settings/restaurants/${slug}/closure_dates`\n\n            console.log('\uD83C\uDF10 Using slug:', slug)\n            console.log('\uD83C\uDF10 Using URL:', url)\n\n            // \u7372\u53D6 CSRF token\n            const csrfToken = this.getCSRFToken()\n            console.log('\uD83D\uDD10 CSRF token found:', !!csrfToken)\n\n            if (!csrfToken) {\n                console.error('\u274C CSRF token not found')\n                alert('\u627E\u4E0D\u5230\u5B89\u5168\u4EE4\u724C')\n                return\n            }\n\n            console.log('\uD83D\uDE80 Starting requests...')\n\n            const promises = Array.from(checkboxes).map(async (checkbox, index) => {\n                const weekday = parseInt(checkbox.value)\n                console.log(`\uD83D\uDCC5 Processing weekday ${index + 1}/${checkboxes.length}: ${weekday}`)\n\n                // \u8A08\u7B97\u4E0B\u4E00\u500B\u5C0D\u61C9\u7684\u661F\u671F\u5E7E\u65E5\u671F\n                const today = new Date()\n                const todayWeekday = today.getDay() === 0 ? 7 : today.getDay()\n                let daysToAdd = weekday - todayWeekday\n                if (daysToAdd <= 0) {\n                    daysToAdd += 7\n                }\n                const targetDate = new Date(today)\n                targetDate.setDate(today.getDate() + daysToAdd)\n\n                console.log(`\uD83D\uDCC5 Target date for weekday ${weekday}:`, targetDate.toISOString().split('T')[0])\n\n                const formData = new FormData()\n                formData.append('closure_date[date]', targetDate.toISOString().split('T')[0])\n                formData.append('closure_date[reason]', reason)\n                formData.append('closure_date[closure_type]', 'regular')\n                formData.append('closure_date[all_day]', 'true')\n                formData.append('closure_date[recurring]', 'true')\n                formData.append('closure_date[recurring_pattern]', JSON.stringify({ type: 'weekly', weekday: weekday }))\n\n                console.log(`\uD83D\uDCE6 Sending request ${index + 1} to:`, url)\n\n                const response = await fetch(url, {\n                    method: 'POST',\n                    body: formData,\n                    headers: {\n                        'X-CSRF-Token': csrfToken,\n                        Accept: 'text/vnd.turbo-stream.html',\n                        'X-Requested-With': 'XMLHttpRequest',\n                    },\n                })\n\n                console.log(`\uD83D\uDCE1 Response ${index + 1}:`, response.status, response.statusText)\n\n                if (!response.ok) {\n                    const errorText = await response.text()\n                    console.error(`\u274C Request ${index + 1} failed:`, errorText)\n                    throw new Error(`HTTP ${response.status}: ${response.statusText}`)\n                }\n\n                const responseText = await response.text()\n                console.log(`\u2705 Request ${index + 1} success:`, responseText.substring(0, 100) + '...')\n\n                return response\n            })\n\n            await Promise.all(promises)\n            console.log('\uD83C\uDF89 All requests completed successfully!')\n            alert('\u8A2D\u5B9A\u6210\u529F\uFF01')\n\n            // \u91CD\u7F6E\u8868\u55AE\n            checkboxes.forEach((checkbox) => (checkbox.checked = false))\n            console.log('\uD83D\uDD04 Form reset')\n\n            // \u91CD\u65B0\u8F09\u5165\u516C\u4F11\u65E5\u5167\u5BB9\n            this.loadTabContent('closure-dates')\n        } catch (error) {\n            console.error('\uD83D\uDCA5 Manual submission failed:', error)\n            console.error('\uD83D\uDCA5 Error stack:', error.stack)\n            alert(`\u8A2D\u5B9A\u5931\u6557\uFF1A${error.message}`)\n        }\n    }\n\n    // \u901A\u7528\u8868\u55AE\u521D\u59CB\u5316\n    initializeForms(contentDiv, tabName) {\n        const forms = contentDiv.querySelectorAll('form:not([data-processed])')\n        forms.forEach((form) => {\n            // \u6A19\u8A18\u70BA\u5DF2\u8655\u7406\n            form.setAttribute('data-processed', 'true')\n\n            // \u78BA\u4FDD\u8868\u55AE\u4F7F\u7528 Turbo\n            if (!form.hasAttribute('data-turbo')) {\n                form.setAttribute('data-turbo', 'true')\n            }\n\n            // \u7D81\u5B9A\u522A\u9664\u6309\u9215\n            const deleteButtons = form.querySelectorAll(\n                'a[data-turbo-method=\"delete\"], button[data-turbo-method=\"delete\"]'\n            )\n            deleteButtons.forEach((button) => {\n                button.addEventListener('click', async (e) => {\n                    e.preventDefault()\n\n                    if (confirm(button.dataset.confirm || '\u78BA\u5B9A\u8981\u522A\u9664\u55CE\uFF1F')) {\n                        try {\n                            const url = button.href || button.dataset.url\n                            const response = await fetch(url, {\n                                method: 'DELETE',\n                                headers: {\n                                    'X-CSRF-Token': this.getCSRFToken(),\n                                    Accept: 'text/vnd.turbo-stream.html',\n                                },\n                            })\n\n                            if (response.ok) {\n                                // \u91CD\u65B0\u8F09\u5165\u9078\u9805\u5361\u5167\u5BB9\n                                this.loadTabContent(tabName)\n                            }\n                        } catch (error) {\n                            console.error('\uD83D\uDCA5 \u522A\u9664\u5931\u6557:', error)\n                            alert('\u522A\u9664\u5931\u6557\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66')\n                        }\n                    }\n                })\n            })\n        })\n    }\n\n    // \u8F09\u5165\u7DE8\u8F2F\u5167\u5BB9\u5230 modal\n    async loadEditContent(url) {\n        try {\n            console.log('\uD83D\uDD27 Loading edit content from:', url)\n            const response = await fetch(url, {\n                headers: {\n                    Accept: 'text/html',\n                    'X-Requested-With': 'XMLHttpRequest',\n                },\n            })\n\n            const html = await response.text()\n            const parser = new DOMParser()\n            const doc = parser.parseFromString(html, 'text/html')\n            const content = doc.querySelector('.max-w-7xl') || doc.body\n\n            // \u78BA\u4FDD\u6709\u7DE8\u8F2F\u6A21\u614B\u8996\u7A97\u5BB9\u5668\n            let modal = document.getElementById('modal')\n            if (!modal) {\n                console.log('\uD83D\uDD27 Creating edit modal')\n                // \u5275\u5EFA\u7DE8\u8F2F\u6A21\u614B\u8996\u7A97\n                modal = document.createElement('div')\n                modal.id = 'modal'\n                modal.className = 'fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50'\n                modal.innerHTML = `\n                    <div class=\"relative top-10 mx-auto p-0 border w-full max-w-4xl shadow-lg rounded-md bg-white min-h-96 max-h-screen overflow-y-auto\">\n                        <div class=\"flex items-center justify-between p-6 border-b border-gray-200\">\n                            <h3 class=\"text-xl font-semibold text-gray-900\">\u7DE8\u8F2F</h3>\n                            <button type=\"button\" \n                                    onclick=\"this.closest('#modal').classList.add('hidden')\"\n                                    class=\"text-gray-400 hover:text-gray-600 edit-modal-close\">\n                                <svg class=\"h-6 w-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                                </svg>\n                            </button>\n                        </div>\n                        <div id=\"modal-content\" class=\"p-6\"></div>\n                    </div>\n                `\n                document.body.appendChild(modal)\n\n                // \u9EDE\u64CA\u80CC\u666F\u95DC\u9589\u6A21\u614B\u8996\u7A97\n                modal.addEventListener('click', (e) => {\n                    if (e.target === modal) {\n                        console.log('\uD83D\uDD12 Closing edit modal from background click')\n                        modal.classList.add('hidden')\n                    }\n                })\n            }\n\n            const modalContent = modal.querySelector('#modal-content')\n            if (modalContent) {\n                modalContent.innerHTML = content.innerHTML\n                modal.classList.remove('hidden')\n                console.log('\u2705 Edit modal opened successfully')\n\n                // \u91CD\u65B0\u7D81\u5B9A\u8868\u55AE\u63D0\u4EA4\u4E8B\u4EF6\n                this.bindEditFormEvents(modal)\n            }\n        } catch (error) {\n            console.error('\uD83D\uDCA5 \u8F09\u5165\u7DE8\u8F2F\u5167\u5BB9\u5931\u6557:', error)\n            alert('\u8F09\u5165\u5931\u6557\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66')\n        }\n    }\n\n    // \u7D81\u5B9A\u7DE8\u8F2F\u8868\u55AE\u4E8B\u4EF6\n    bindEditFormEvents(modal) {\n        console.log('\uD83D\uDD27 Binding edit form events')\n\n        const form = modal.querySelector('form')\n        if (form) {\n            // \u79FB\u9664\u820A\u7684\u4E8B\u4EF6\u76E3\u807D\u5668\n            form.removeEventListener('submit', this.handleEditFormSubmit)\n\n            // \u7D81\u5B9A\u65B0\u7684\u4E8B\u4EF6\u76E3\u807D\u5668\n            this.handleEditFormSubmit = async (e) => {\n                e.preventDefault()\n                console.log('\uD83D\uDCDD Edit form submitted')\n\n                try {\n                    const formData = new FormData(form)\n                    const response = await fetch(form.action, {\n                        method: form.method || 'PATCH',\n                        body: formData,\n                        headers: {\n                            'X-CSRF-Token': this.getCSRFToken(),\n                            Accept: 'text/vnd.turbo-stream.html',\n                        },\n                    })\n\n                    if (response.ok) {\n                        console.log('\u2705 Form updated successfully')\n                        // \u95DC\u9589\u7DE8\u8F2F\u6A21\u614B\u8996\u7A97\n                        modal.classList.add('hidden')\n\n                        // \u91CD\u65B0\u8F09\u5165\u5C0D\u61C9\u7684\u6A19\u7C64\u9801\u5167\u5BB9\n                        if (this.currentTabValue) {\n                            this.loadTabContent(this.currentTabValue)\n                        }\n                    } else {\n                        throw new Error('\u66F4\u65B0\u5931\u6557')\n                    }\n                } catch (error) {\n                    console.error('\uD83D\uDCA5 \u66F4\u65B0\u5931\u6557:', error)\n                    alert('\u66F4\u65B0\u5931\u6557\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66')\n                }\n            }\n\n            form.addEventListener('submit', this.handleEditFormSubmit)\n        }\n\n        // \u7D81\u5B9A\u6240\u6709\u53D6\u6D88\u548C\u95DC\u9589\u6309\u9215\n        const cancelButtons = modal.querySelectorAll('button, a')\n        cancelButtons.forEach((button) => {\n            const buttonText = button.textContent.trim()\n            const isCloseButton =\n                buttonText.includes('\u53D6\u6D88') ||\n                buttonText.includes('\u95DC\u9589') ||\n                buttonText.includes('\u00D7') ||\n                button.classList.contains('edit-modal-close') ||\n                (button.type === 'button' && !button.closest('form'))\n\n            if (isCloseButton) {\n                button.addEventListener('click', (e) => {\n                    e.preventDefault()\n                    console.log('\uD83D\uDD12 Closing edit modal from button click')\n                    modal.classList.add('hidden')\n                })\n            }\n        })\n\n        // \u7D81\u5B9A\u9802\u90E8\u95DC\u9589\u6309\u9215\n        const topCloseButton = modal.querySelector('.edit-modal-close')\n        if (topCloseButton) {\n            topCloseButton.addEventListener('click', () => {\n                console.log('\uD83D\uDD12 Closing edit modal from top close button')\n                modal.classList.add('hidden')\n            })\n        }\n    }\n\n    // \u95DC\u9589\u7DE8\u8F2F modal\n    closeEditModal() {\n        console.log('\uD83D\uDD12 Closing edit modal via action')\n        const modal = document.getElementById('modal')\n        if (modal) {\n            console.log('\u2705 Edit modal found, adding hidden class')\n            modal.classList.add('hidden')\n            console.log('\u2705 Edit modal closed successfully')\n        } else {\n            console.error('\u274C Edit modal not found!')\n        }\n    }\n\n    // \u986F\u793A\u8F09\u5165\u72C0\u614B\n    showLoading(contentDiv) {\n        contentDiv.innerHTML = `\n      <div class=\"text-center py-8\">\n        <div class=\"inline-flex items-center px-4 py-2 bg-blue-100 text-blue-800 rounded-lg\">\n          <svg class=\"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-600\" fill=\"none\" viewBox=\"0 0 24 24\">\n            <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n            <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n          </svg>\n          \u8F09\u5165\u4E2D...\n        </div>\n      </div>\n    `\n    }\n\n    // \u986F\u793A\u932F\u8AA4\u8A0A\u606F\n    showError(contentDiv, message) {\n        contentDiv.innerHTML = `\n      <div class=\"text-center py-8 text-red-600\">\n        ${message}\n      </div>\n    `\n    }\n\n    // \u7372\u53D6 CSRF Token\n    getCSRFToken() {\n        return document.querySelector('[name=\"csrf-token\"]').content\n    }\n\n    // \u95DC\u9589 modal \u901A\u7528\u65B9\u6CD5\n    closeModal(modalId) {\n        const modal = document.getElementById(modalId)\n        if (modal) {\n            modal.classList.add('hidden')\n        }\n    }\n\n    // \u958B\u555F modal \u901A\u7528\u65B9\u6CD5\n    openModalById(modalId) {\n        const modal = document.getElementById(modalId)\n        if (modal) {\n            modal.classList.remove('hidden')\n        }\n    }\n\n    // \u5EFA\u7ACB\u570B\u5B9A\u5047\u65E5\u516C\u4F11\n    async createHolidayClosures() {\n        const selectedHolidays = document.querySelectorAll('#holidayClosureModal input[type=\"checkbox\"]:checked')\n\n        if (selectedHolidays.length === 0) {\n            alert('\u8ACB\u9078\u64C7\u81F3\u5C11\u4E00\u500B\u570B\u5B9A\u5047\u65E5')\n            return\n        }\n\n        const promises = []\n        const slug = this.restaurantSlugValue\n\n        selectedHolidays.forEach((checkbox) => {\n            const dates = checkbox.value.split(',')\n            const holidayName = checkbox.dataset.name\n\n            dates.forEach((date) => {\n                const promise = fetch(`/admin/restaurant_settings/restaurants/${slug}/closure_dates`, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'X-CSRF-Token': this.getCSRFToken(),\n                    },\n                    body: JSON.stringify({\n                        closure_date: {\n                            date: date,\n                            reason: holidayName,\n                            closure_type: 'holiday',\n                            all_day: true,\n                            recurring: false,\n                        },\n                    }),\n                })\n\n                promises.push(promise)\n            })\n        })\n\n        try {\n            await Promise.all(promises)\n\n            // \u95DC\u9589 modal\n            this.closeModal('holidayClosureModal')\n\n            // \u91CD\u65B0\u8F09\u5165\u516C\u4F11\u65E5\u5167\u5BB9\n            setTimeout(() => {\n                this.loadTabContent('closure-dates')\n            }, 1000)\n        } catch (error) {\n            console.error('\uD83D\uDCA5 \u5EFA\u7ACB\u570B\u5B9A\u5047\u65E5\u5931\u6557:', error)\n            alert('\u5EFA\u7ACB\u5931\u6557\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66')\n        }\n    }\n\n    // \u91CD\u65B0\u521D\u59CB\u5316 Stimulus \u63A7\u5236\u5668\n    reinitializeStimulusControllers(contentDiv) {\n        console.log('\uD83D\uDD04 Reinitializing Stimulus controllers...')\n\n        // \u5C0B\u627E\u6240\u6709\u6709 data-controller \u5C6C\u6027\u7684\u5143\u7D20\n        const controllerElements = contentDiv.querySelectorAll('[data-controller]')\n\n        controllerElements.forEach((element) => {\n            const controllerNames = element.dataset.controller.split(' ')\n            console.log(`\uD83C\uDFAF Found element with controllers: ${controllerNames.join(', ')}`)\n        })\n\n        // \u6AA2\u67E5\u4E26\u547C\u53EB\u7279\u5B9A\u7684\u5168\u57DF\u51FD\u6578\n        setTimeout(() => {\n            if (typeof window.checkExistingClosureDates === 'function') {\n                console.log('\u2705 Calling checkExistingClosureDates...')\n                window.checkExistingClosureDates()\n            } else {\n                console.warn('\u26A0\uFE0F checkExistingClosureDates function not found')\n            }\n        }, 200)\n\n        console.log('\u2705 Controller reinitialization requested')\n    }\n}\n", "import { Controller } from '@hotwired/stimulus'\n\nexport default class extends Controller {\n    static targets = ['sidebar', 'overlay', 'mainContainer']\n\n    connect() {\n        this.setupEventListeners()\n    }\n\n    setupEventListeners() {\n        window.addEventListener('resize', this.handleResize.bind(this))\n        document.addEventListener('keydown', this.handleKeydown.bind(this))\n    }\n\n    toggle() {\n        if (this.isMobile()) {\n            if (this.sidebarTarget.classList.contains('sidebar-open')) {\n                this.close()\n            } else {\n                this.show()\n            }\n        }\n    }\n\n    show() {\n        if (this.isMobile()) {\n            this.sidebarTarget.classList.add('sidebar-open')\n\n            if (this.hasOverlayTarget) {\n                this.overlayTarget.style.display = 'block'\n                this.overlayTarget.offsetHeight\n                this.overlayTarget.classList.add('opacity-75')\n            }\n\n            document.body.classList.add('overflow-hidden')\n\n            if (this.hasMainContainerTarget) {\n                this.mainContainerTarget.style.transition = 'transform 0.3s ease-in-out'\n                this.mainContainerTarget.style.transform = 'translateX(18rem)' // 18rem is w-72\n            }\n        }\n    }\n\n    close() {\n        if (this.isMobile()) {\n            this.sidebarTarget.classList.remove('sidebar-open')\n\n            if (this.hasOverlayTarget) {\n                this.overlayTarget.classList.remove('opacity-75')\n                setTimeout(() => {\n                    this.overlayTarget.style.display = 'none'\n                }, 300)\n            }\n\n            document.body.classList.remove('overflow-hidden')\n\n            if (this.hasMainContainerTarget) {\n                this.mainContainerTarget.style.transform = ''\n            }\n        }\n    }\n\n    handleResize() {\n        if (!this.isMobile()) {\n            this.close()\n            // Ensure main container is reset on resize to desktop\n            if (this.hasMainContainerTarget) {\n                this.mainContainerTarget.style.transform = ''\n                this.mainContainerTarget.style.transition = ''\n            }\n        }\n    }\n\n    handleKeydown(event) {\n        if (event.key === 'Escape') {\n            this.close()\n        }\n    }\n\n    isMobile() {\n        return window.innerWidth < 1024 // lg breakpoint\n    }\n\n    disconnect() {\n        window.removeEventListener('resize', this.handleResize.bind(this))\n        document.removeEventListener('keydown', this.handleKeydown.bind(this))\n        document.body.classList.remove('overflow-hidden')\n    }\n}\n", "/**!\n * Sortable 1.15.6\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar version = \"1.15.6\";\n\nfunction userAgent(pattern) {\n  if (typeof window !== 'undefined' && window.navigator) {\n    return !! /*@__PURE__*/navigator.userAgent.match(pattern);\n  }\n}\nvar IE11OrLess = userAgent(/(?:Trident.*rv[ :]?11\\.|msie|iemobile|Windows Phone)/i);\nvar Edge = userAgent(/Edge/i);\nvar FireFox = userAgent(/firefox/i);\nvar Safari = userAgent(/safari/i) && !userAgent(/chrome/i) && !userAgent(/android/i);\nvar IOS = userAgent(/iP(ad|od|hone)/i);\nvar ChromeForAndroid = userAgent(/chrome/i) && userAgent(/android/i);\n\nvar captureMode = {\n  capture: false,\n  passive: false\n};\nfunction on(el, event, fn) {\n  el.addEventListener(event, fn, !IE11OrLess && captureMode);\n}\nfunction off(el, event, fn) {\n  el.removeEventListener(event, fn, !IE11OrLess && captureMode);\n}\nfunction matches( /**HTMLElement*/el, /**String*/selector) {\n  if (!selector) return;\n  selector[0] === '>' && (selector = selector.substring(1));\n  if (el) {\n    try {\n      if (el.matches) {\n        return el.matches(selector);\n      } else if (el.msMatchesSelector) {\n        return el.msMatchesSelector(selector);\n      } else if (el.webkitMatchesSelector) {\n        return el.webkitMatchesSelector(selector);\n      }\n    } catch (_) {\n      return false;\n    }\n  }\n  return false;\n}\nfunction getParentOrHost(el) {\n  return el.host && el !== document && el.host.nodeType ? el.host : el.parentNode;\n}\nfunction closest( /**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx, includeCTX) {\n  if (el) {\n    ctx = ctx || document;\n    do {\n      if (selector != null && (selector[0] === '>' ? el.parentNode === ctx && matches(el, selector) : matches(el, selector)) || includeCTX && el === ctx) {\n        return el;\n      }\n      if (el === ctx) break;\n      /* jshint boss:true */\n    } while (el = getParentOrHost(el));\n  }\n  return null;\n}\nvar R_SPACE = /\\s+/g;\nfunction toggleClass(el, name, state) {\n  if (el && name) {\n    if (el.classList) {\n      el.classList[state ? 'add' : 'remove'](name);\n    } else {\n      var className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n      el.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n    }\n  }\n}\nfunction css(el, prop, val) {\n  var style = el && el.style;\n  if (style) {\n    if (val === void 0) {\n      if (document.defaultView && document.defaultView.getComputedStyle) {\n        val = document.defaultView.getComputedStyle(el, '');\n      } else if (el.currentStyle) {\n        val = el.currentStyle;\n      }\n      return prop === void 0 ? val : val[prop];\n    } else {\n      if (!(prop in style) && prop.indexOf('webkit') === -1) {\n        prop = '-webkit-' + prop;\n      }\n      style[prop] = val + (typeof val === 'string' ? '' : 'px');\n    }\n  }\n}\nfunction matrix(el, selfOnly) {\n  var appliedTransforms = '';\n  if (typeof el === 'string') {\n    appliedTransforms = el;\n  } else {\n    do {\n      var transform = css(el, 'transform');\n      if (transform && transform !== 'none') {\n        appliedTransforms = transform + ' ' + appliedTransforms;\n      }\n      /* jshint boss:true */\n    } while (!selfOnly && (el = el.parentNode));\n  }\n  var matrixFn = window.DOMMatrix || window.WebKitCSSMatrix || window.CSSMatrix || window.MSCSSMatrix;\n  /*jshint -W056 */\n  return matrixFn && new matrixFn(appliedTransforms);\n}\nfunction find(ctx, tagName, iterator) {\n  if (ctx) {\n    var list = ctx.getElementsByTagName(tagName),\n      i = 0,\n      n = list.length;\n    if (iterator) {\n      for (; i < n; i++) {\n        iterator(list[i], i);\n      }\n    }\n    return list;\n  }\n  return [];\n}\nfunction getWindowScrollingElement() {\n  var scrollingElement = document.scrollingElement;\n  if (scrollingElement) {\n    return scrollingElement;\n  } else {\n    return document.documentElement;\n  }\n}\n\n/**\r\n * Returns the \"bounding client rect\" of given element\r\n * @param  {HTMLElement} el                       The element whose boundingClientRect is wanted\r\n * @param  {[Boolean]} relativeToContainingBlock  Whether the rect should be relative to the containing block of (including) the container\r\n * @param  {[Boolean]} relativeToNonStaticParent  Whether the rect should be relative to the relative parent of (including) the contaienr\r\n * @param  {[Boolean]} undoScale                  Whether the container's scale() should be undone\r\n * @param  {[HTMLElement]} container              The parent the element will be placed in\r\n * @return {Object}                               The boundingClientRect of el, with specified adjustments\r\n */\nfunction getRect(el, relativeToContainingBlock, relativeToNonStaticParent, undoScale, container) {\n  if (!el.getBoundingClientRect && el !== window) return;\n  var elRect, top, left, bottom, right, height, width;\n  if (el !== window && el.parentNode && el !== getWindowScrollingElement()) {\n    elRect = el.getBoundingClientRect();\n    top = elRect.top;\n    left = elRect.left;\n    bottom = elRect.bottom;\n    right = elRect.right;\n    height = elRect.height;\n    width = elRect.width;\n  } else {\n    top = 0;\n    left = 0;\n    bottom = window.innerHeight;\n    right = window.innerWidth;\n    height = window.innerHeight;\n    width = window.innerWidth;\n  }\n  if ((relativeToContainingBlock || relativeToNonStaticParent) && el !== window) {\n    // Adjust for translate()\n    container = container || el.parentNode;\n\n    // solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n    // Not needed on <= IE11\n    if (!IE11OrLess) {\n      do {\n        if (container && container.getBoundingClientRect && (css(container, 'transform') !== 'none' || relativeToNonStaticParent && css(container, 'position') !== 'static')) {\n          var containerRect = container.getBoundingClientRect();\n\n          // Set relative to edges of padding box of container\n          top -= containerRect.top + parseInt(css(container, 'border-top-width'));\n          left -= containerRect.left + parseInt(css(container, 'border-left-width'));\n          bottom = top + elRect.height;\n          right = left + elRect.width;\n          break;\n        }\n        /* jshint boss:true */\n      } while (container = container.parentNode);\n    }\n  }\n  if (undoScale && el !== window) {\n    // Adjust for scale()\n    var elMatrix = matrix(container || el),\n      scaleX = elMatrix && elMatrix.a,\n      scaleY = elMatrix && elMatrix.d;\n    if (elMatrix) {\n      top /= scaleY;\n      left /= scaleX;\n      width /= scaleX;\n      height /= scaleY;\n      bottom = top + height;\n      right = left + width;\n    }\n  }\n  return {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n\n/**\r\n * Checks if a side of an element is scrolled past a side of its parents\r\n * @param  {HTMLElement}  el           The element who's side being scrolled out of view is in question\r\n * @param  {String}       elSide       Side of the element in question ('top', 'left', 'right', 'bottom')\r\n * @param  {String}       parentSide   Side of the parent in question ('top', 'left', 'right', 'bottom')\r\n * @return {HTMLElement}               The parent scroll element that the el's side is scrolled past, or null if there is no such element\r\n */\nfunction isScrolledPast(el, elSide, parentSide) {\n  var parent = getParentAutoScrollElement(el, true),\n    elSideVal = getRect(el)[elSide];\n\n  /* jshint boss:true */\n  while (parent) {\n    var parentSideVal = getRect(parent)[parentSide],\n      visible = void 0;\n    if (parentSide === 'top' || parentSide === 'left') {\n      visible = elSideVal >= parentSideVal;\n    } else {\n      visible = elSideVal <= parentSideVal;\n    }\n    if (!visible) return parent;\n    if (parent === getWindowScrollingElement()) break;\n    parent = getParentAutoScrollElement(parent, false);\n  }\n  return false;\n}\n\n/**\r\n * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\r\n * and non-draggable elements\r\n * @param  {HTMLElement} el       The parent element\r\n * @param  {Number} childNum      The index of the child\r\n * @param  {Object} options       Parent Sortable's options\r\n * @return {HTMLElement}          The child at index childNum, or null if not found\r\n */\nfunction getChild(el, childNum, options, includeDragEl) {\n  var currentChild = 0,\n    i = 0,\n    children = el.children;\n  while (i < children.length) {\n    if (children[i].style.display !== 'none' && children[i] !== Sortable.ghost && (includeDragEl || children[i] !== Sortable.dragged) && closest(children[i], options.draggable, el, false)) {\n      if (currentChild === childNum) {\n        return children[i];\n      }\n      currentChild++;\n    }\n    i++;\n  }\n  return null;\n}\n\n/**\r\n * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\r\n * @param  {HTMLElement} el       Parent element\r\n * @param  {selector} selector    Any other elements that should be ignored\r\n * @return {HTMLElement}          The last child, ignoring ghostEl\r\n */\nfunction lastChild(el, selector) {\n  var last = el.lastElementChild;\n  while (last && (last === Sortable.ghost || css(last, 'display') === 'none' || selector && !matches(last, selector))) {\n    last = last.previousElementSibling;\n  }\n  return last || null;\n}\n\n/**\r\n * Returns the index of an element within its parent for a selected set of\r\n * elements\r\n * @param  {HTMLElement} el\r\n * @param  {selector} selector\r\n * @return {number}\r\n */\nfunction index(el, selector) {\n  var index = 0;\n  if (!el || !el.parentNode) {\n    return -1;\n  }\n\n  /* jshint boss:true */\n  while (el = el.previousElementSibling) {\n    if (el.nodeName.toUpperCase() !== 'TEMPLATE' && el !== Sortable.clone && (!selector || matches(el, selector))) {\n      index++;\n    }\n  }\n  return index;\n}\n\n/**\r\n * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\r\n * The value is returned in real pixels.\r\n * @param  {HTMLElement} el\r\n * @return {Array}             Offsets in the format of [left, top]\r\n */\nfunction getRelativeScrollOffset(el) {\n  var offsetLeft = 0,\n    offsetTop = 0,\n    winScroller = getWindowScrollingElement();\n  if (el) {\n    do {\n      var elMatrix = matrix(el),\n        scaleX = elMatrix.a,\n        scaleY = elMatrix.d;\n      offsetLeft += el.scrollLeft * scaleX;\n      offsetTop += el.scrollTop * scaleY;\n    } while (el !== winScroller && (el = el.parentNode));\n  }\n  return [offsetLeft, offsetTop];\n}\n\n/**\r\n * Returns the index of the object within the given array\r\n * @param  {Array} arr   Array that may or may not hold the object\r\n * @param  {Object} obj  An object that has a key-value pair unique to and identical to a key-value pair in the object you want to find\r\n * @return {Number}      The index of the object in the array, or -1\r\n */\nfunction indexOfObject(arr, obj) {\n  for (var i in arr) {\n    if (!arr.hasOwnProperty(i)) continue;\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key) && obj[key] === arr[i][key]) return Number(i);\n    }\n  }\n  return -1;\n}\nfunction getParentAutoScrollElement(el, includeSelf) {\n  // skip to window\n  if (!el || !el.getBoundingClientRect) return getWindowScrollingElement();\n  var elem = el;\n  var gotSelf = false;\n  do {\n    // we don't need to get elem css if it isn't even overflowing in the first place (performance)\n    if (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n      var elemCSS = css(elem);\n      if (elem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') || elem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')) {\n        if (!elem.getBoundingClientRect || elem === document.body) return getWindowScrollingElement();\n        if (gotSelf || includeSelf) return elem;\n        gotSelf = true;\n      }\n    }\n    /* jshint boss:true */\n  } while (elem = elem.parentNode);\n  return getWindowScrollingElement();\n}\nfunction extend(dst, src) {\n  if (dst && src) {\n    for (var key in src) {\n      if (src.hasOwnProperty(key)) {\n        dst[key] = src[key];\n      }\n    }\n  }\n  return dst;\n}\nfunction isRectEqual(rect1, rect2) {\n  return Math.round(rect1.top) === Math.round(rect2.top) && Math.round(rect1.left) === Math.round(rect2.left) && Math.round(rect1.height) === Math.round(rect2.height) && Math.round(rect1.width) === Math.round(rect2.width);\n}\nvar _throttleTimeout;\nfunction throttle(callback, ms) {\n  return function () {\n    if (!_throttleTimeout) {\n      var args = arguments,\n        _this = this;\n      if (args.length === 1) {\n        callback.call(_this, args[0]);\n      } else {\n        callback.apply(_this, args);\n      }\n      _throttleTimeout = setTimeout(function () {\n        _throttleTimeout = void 0;\n      }, ms);\n    }\n  };\n}\nfunction cancelThrottle() {\n  clearTimeout(_throttleTimeout);\n  _throttleTimeout = void 0;\n}\nfunction scrollBy(el, x, y) {\n  el.scrollLeft += x;\n  el.scrollTop += y;\n}\nfunction clone(el) {\n  var Polymer = window.Polymer;\n  var $ = window.jQuery || window.Zepto;\n  if (Polymer && Polymer.dom) {\n    return Polymer.dom(el).cloneNode(true);\n  } else if ($) {\n    return $(el).clone(true)[0];\n  } else {\n    return el.cloneNode(true);\n  }\n}\nfunction setRect(el, rect) {\n  css(el, 'position', 'absolute');\n  css(el, 'top', rect.top);\n  css(el, 'left', rect.left);\n  css(el, 'width', rect.width);\n  css(el, 'height', rect.height);\n}\nfunction unsetRect(el) {\n  css(el, 'position', '');\n  css(el, 'top', '');\n  css(el, 'left', '');\n  css(el, 'width', '');\n  css(el, 'height', '');\n}\nfunction getChildContainingRectFromElement(container, options, ghostEl) {\n  var rect = {};\n  Array.from(container.children).forEach(function (child) {\n    var _rect$left, _rect$top, _rect$right, _rect$bottom;\n    if (!closest(child, options.draggable, container, false) || child.animated || child === ghostEl) return;\n    var childRect = getRect(child);\n    rect.left = Math.min((_rect$left = rect.left) !== null && _rect$left !== void 0 ? _rect$left : Infinity, childRect.left);\n    rect.top = Math.min((_rect$top = rect.top) !== null && _rect$top !== void 0 ? _rect$top : Infinity, childRect.top);\n    rect.right = Math.max((_rect$right = rect.right) !== null && _rect$right !== void 0 ? _rect$right : -Infinity, childRect.right);\n    rect.bottom = Math.max((_rect$bottom = rect.bottom) !== null && _rect$bottom !== void 0 ? _rect$bottom : -Infinity, childRect.bottom);\n  });\n  rect.width = rect.right - rect.left;\n  rect.height = rect.bottom - rect.top;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\nvar expando = 'Sortable' + new Date().getTime();\n\nfunction AnimationStateManager() {\n  var animationStates = [],\n    animationCallbackId;\n  return {\n    captureAnimationState: function captureAnimationState() {\n      animationStates = [];\n      if (!this.options.animation) return;\n      var children = [].slice.call(this.el.children);\n      children.forEach(function (child) {\n        if (css(child, 'display') === 'none' || child === Sortable.ghost) return;\n        animationStates.push({\n          target: child,\n          rect: getRect(child)\n        });\n        var fromRect = _objectSpread2({}, animationStates[animationStates.length - 1].rect);\n\n        // If animating: compensate for current animation\n        if (child.thisAnimationDuration) {\n          var childMatrix = matrix(child, true);\n          if (childMatrix) {\n            fromRect.top -= childMatrix.f;\n            fromRect.left -= childMatrix.e;\n          }\n        }\n        child.fromRect = fromRect;\n      });\n    },\n    addAnimationState: function addAnimationState(state) {\n      animationStates.push(state);\n    },\n    removeAnimationState: function removeAnimationState(target) {\n      animationStates.splice(indexOfObject(animationStates, {\n        target: target\n      }), 1);\n    },\n    animateAll: function animateAll(callback) {\n      var _this = this;\n      if (!this.options.animation) {\n        clearTimeout(animationCallbackId);\n        if (typeof callback === 'function') callback();\n        return;\n      }\n      var animating = false,\n        animationTime = 0;\n      animationStates.forEach(function (state) {\n        var time = 0,\n          target = state.target,\n          fromRect = target.fromRect,\n          toRect = getRect(target),\n          prevFromRect = target.prevFromRect,\n          prevToRect = target.prevToRect,\n          animatingRect = state.rect,\n          targetMatrix = matrix(target, true);\n        if (targetMatrix) {\n          // Compensate for current animation\n          toRect.top -= targetMatrix.f;\n          toRect.left -= targetMatrix.e;\n        }\n        target.toRect = toRect;\n        if (target.thisAnimationDuration) {\n          // Could also check if animatingRect is between fromRect and toRect\n          if (isRectEqual(prevFromRect, toRect) && !isRectEqual(fromRect, toRect) &&\n          // Make sure animatingRect is on line between toRect & fromRect\n          (animatingRect.top - toRect.top) / (animatingRect.left - toRect.left) === (fromRect.top - toRect.top) / (fromRect.left - toRect.left)) {\n            // If returning to same place as started from animation and on same axis\n            time = calculateRealTime(animatingRect, prevFromRect, prevToRect, _this.options);\n          }\n        }\n\n        // if fromRect != toRect: animate\n        if (!isRectEqual(toRect, fromRect)) {\n          target.prevFromRect = fromRect;\n          target.prevToRect = toRect;\n          if (!time) {\n            time = _this.options.animation;\n          }\n          _this.animate(target, animatingRect, toRect, time);\n        }\n        if (time) {\n          animating = true;\n          animationTime = Math.max(animationTime, time);\n          clearTimeout(target.animationResetTimer);\n          target.animationResetTimer = setTimeout(function () {\n            target.animationTime = 0;\n            target.prevFromRect = null;\n            target.fromRect = null;\n            target.prevToRect = null;\n            target.thisAnimationDuration = null;\n          }, time);\n          target.thisAnimationDuration = time;\n        }\n      });\n      clearTimeout(animationCallbackId);\n      if (!animating) {\n        if (typeof callback === 'function') callback();\n      } else {\n        animationCallbackId = setTimeout(function () {\n          if (typeof callback === 'function') callback();\n        }, animationTime);\n      }\n      animationStates = [];\n    },\n    animate: function animate(target, currentRect, toRect, duration) {\n      if (duration) {\n        css(target, 'transition', '');\n        css(target, 'transform', '');\n        var elMatrix = matrix(this.el),\n          scaleX = elMatrix && elMatrix.a,\n          scaleY = elMatrix && elMatrix.d,\n          translateX = (currentRect.left - toRect.left) / (scaleX || 1),\n          translateY = (currentRect.top - toRect.top) / (scaleY || 1);\n        target.animatingX = !!translateX;\n        target.animatingY = !!translateY;\n        css(target, 'transform', 'translate3d(' + translateX + 'px,' + translateY + 'px,0)');\n        this.forRepaintDummy = repaint(target); // repaint\n\n        css(target, 'transition', 'transform ' + duration + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n        css(target, 'transform', 'translate3d(0,0,0)');\n        typeof target.animated === 'number' && clearTimeout(target.animated);\n        target.animated = setTimeout(function () {\n          css(target, 'transition', '');\n          css(target, 'transform', '');\n          target.animated = false;\n          target.animatingX = false;\n          target.animatingY = false;\n        }, duration);\n      }\n    }\n  };\n}\nfunction repaint(target) {\n  return target.offsetWidth;\n}\nfunction calculateRealTime(animatingRect, fromRect, toRect, options) {\n  return Math.sqrt(Math.pow(fromRect.top - animatingRect.top, 2) + Math.pow(fromRect.left - animatingRect.left, 2)) / Math.sqrt(Math.pow(fromRect.top - toRect.top, 2) + Math.pow(fromRect.left - toRect.left, 2)) * options.animation;\n}\n\nvar plugins = [];\nvar defaults = {\n  initializeByDefault: true\n};\nvar PluginManager = {\n  mount: function mount(plugin) {\n    // Set default static properties\n    for (var option in defaults) {\n      if (defaults.hasOwnProperty(option) && !(option in plugin)) {\n        plugin[option] = defaults[option];\n      }\n    }\n    plugins.forEach(function (p) {\n      if (p.pluginName === plugin.pluginName) {\n        throw \"Sortable: Cannot mount plugin \".concat(plugin.pluginName, \" more than once\");\n      }\n    });\n    plugins.push(plugin);\n  },\n  pluginEvent: function pluginEvent(eventName, sortable, evt) {\n    var _this = this;\n    this.eventCanceled = false;\n    evt.cancel = function () {\n      _this.eventCanceled = true;\n    };\n    var eventNameGlobal = eventName + 'Global';\n    plugins.forEach(function (plugin) {\n      if (!sortable[plugin.pluginName]) return;\n      // Fire global events if it exists in this sortable\n      if (sortable[plugin.pluginName][eventNameGlobal]) {\n        sortable[plugin.pluginName][eventNameGlobal](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n\n      // Only fire plugin event if plugin is enabled in this sortable,\n      // and plugin has event defined\n      if (sortable.options[plugin.pluginName] && sortable[plugin.pluginName][eventName]) {\n        sortable[plugin.pluginName][eventName](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n    });\n  },\n  initializePlugins: function initializePlugins(sortable, el, defaults, options) {\n    plugins.forEach(function (plugin) {\n      var pluginName = plugin.pluginName;\n      if (!sortable.options[pluginName] && !plugin.initializeByDefault) return;\n      var initialized = new plugin(sortable, el, sortable.options);\n      initialized.sortable = sortable;\n      initialized.options = sortable.options;\n      sortable[pluginName] = initialized;\n\n      // Add default options from plugin\n      _extends(defaults, initialized.defaults);\n    });\n    for (var option in sortable.options) {\n      if (!sortable.options.hasOwnProperty(option)) continue;\n      var modified = this.modifyOption(sortable, option, sortable.options[option]);\n      if (typeof modified !== 'undefined') {\n        sortable.options[option] = modified;\n      }\n    }\n  },\n  getEventProperties: function getEventProperties(name, sortable) {\n    var eventProperties = {};\n    plugins.forEach(function (plugin) {\n      if (typeof plugin.eventProperties !== 'function') return;\n      _extends(eventProperties, plugin.eventProperties.call(sortable[plugin.pluginName], name));\n    });\n    return eventProperties;\n  },\n  modifyOption: function modifyOption(sortable, name, value) {\n    var modifiedValue;\n    plugins.forEach(function (plugin) {\n      // Plugin must exist on the Sortable\n      if (!sortable[plugin.pluginName]) return;\n\n      // If static option listener exists for this option, call in the context of the Sortable's instance of this plugin\n      if (plugin.optionListeners && typeof plugin.optionListeners[name] === 'function') {\n        modifiedValue = plugin.optionListeners[name].call(sortable[plugin.pluginName], value);\n      }\n    });\n    return modifiedValue;\n  }\n};\n\nfunction dispatchEvent(_ref) {\n  var sortable = _ref.sortable,\n    rootEl = _ref.rootEl,\n    name = _ref.name,\n    targetEl = _ref.targetEl,\n    cloneEl = _ref.cloneEl,\n    toEl = _ref.toEl,\n    fromEl = _ref.fromEl,\n    oldIndex = _ref.oldIndex,\n    newIndex = _ref.newIndex,\n    oldDraggableIndex = _ref.oldDraggableIndex,\n    newDraggableIndex = _ref.newDraggableIndex,\n    originalEvent = _ref.originalEvent,\n    putSortable = _ref.putSortable,\n    extraEventProperties = _ref.extraEventProperties;\n  sortable = sortable || rootEl && rootEl[expando];\n  if (!sortable) return;\n  var evt,\n    options = sortable.options,\n    onName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n  // Support for new CustomEvent feature\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent(name, {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent(name, true, true);\n  }\n  evt.to = toEl || rootEl;\n  evt.from = fromEl || rootEl;\n  evt.item = targetEl || rootEl;\n  evt.clone = cloneEl;\n  evt.oldIndex = oldIndex;\n  evt.newIndex = newIndex;\n  evt.oldDraggableIndex = oldDraggableIndex;\n  evt.newDraggableIndex = newDraggableIndex;\n  evt.originalEvent = originalEvent;\n  evt.pullMode = putSortable ? putSortable.lastPutMode : undefined;\n  var allEventProperties = _objectSpread2(_objectSpread2({}, extraEventProperties), PluginManager.getEventProperties(name, sortable));\n  for (var option in allEventProperties) {\n    evt[option] = allEventProperties[option];\n  }\n  if (rootEl) {\n    rootEl.dispatchEvent(evt);\n  }\n  if (options[onName]) {\n    options[onName].call(sortable, evt);\n  }\n}\n\nvar _excluded = [\"evt\"];\nvar pluginEvent = function pluginEvent(eventName, sortable) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n    originalEvent = _ref.evt,\n    data = _objectWithoutProperties(_ref, _excluded);\n  PluginManager.pluginEvent.bind(Sortable)(eventName, sortable, _objectSpread2({\n    dragEl: dragEl,\n    parentEl: parentEl,\n    ghostEl: ghostEl,\n    rootEl: rootEl,\n    nextEl: nextEl,\n    lastDownEl: lastDownEl,\n    cloneEl: cloneEl,\n    cloneHidden: cloneHidden,\n    dragStarted: moved,\n    putSortable: putSortable,\n    activeSortable: Sortable.active,\n    originalEvent: originalEvent,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex,\n    hideGhostForTarget: _hideGhostForTarget,\n    unhideGhostForTarget: _unhideGhostForTarget,\n    cloneNowHidden: function cloneNowHidden() {\n      cloneHidden = true;\n    },\n    cloneNowShown: function cloneNowShown() {\n      cloneHidden = false;\n    },\n    dispatchSortableEvent: function dispatchSortableEvent(name) {\n      _dispatchEvent({\n        sortable: sortable,\n        name: name,\n        originalEvent: originalEvent\n      });\n    }\n  }, data));\n};\nfunction _dispatchEvent(info) {\n  dispatchEvent(_objectSpread2({\n    putSortable: putSortable,\n    cloneEl: cloneEl,\n    targetEl: dragEl,\n    rootEl: rootEl,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex\n  }, info));\n}\nvar dragEl,\n  parentEl,\n  ghostEl,\n  rootEl,\n  nextEl,\n  lastDownEl,\n  cloneEl,\n  cloneHidden,\n  oldIndex,\n  newIndex,\n  oldDraggableIndex,\n  newDraggableIndex,\n  activeGroup,\n  putSortable,\n  awaitingDragStarted = false,\n  ignoreNextClick = false,\n  sortables = [],\n  tapEvt,\n  touchEvt,\n  lastDx,\n  lastDy,\n  tapDistanceLeft,\n  tapDistanceTop,\n  moved,\n  lastTarget,\n  lastDirection,\n  pastFirstInvertThresh = false,\n  isCircumstantialInvert = false,\n  targetMoveDistance,\n  // For positioning ghost absolutely\n  ghostRelativeParent,\n  ghostRelativeParentInitialScroll = [],\n  // (left, top)\n\n  _silent = false,\n  savedInputChecked = [];\n\n/** @const */\nvar documentExists = typeof document !== 'undefined',\n  PositionGhostAbsolutely = IOS,\n  CSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n  // This will not pass for IE9, because IE9 DnD only works on anchors\n  supportDraggable = documentExists && !ChromeForAndroid && !IOS && 'draggable' in document.createElement('div'),\n  supportCssPointerEvents = function () {\n    if (!documentExists) return;\n    // false when <= IE11\n    if (IE11OrLess) {\n      return false;\n    }\n    var el = document.createElement('x');\n    el.style.cssText = 'pointer-events:auto';\n    return el.style.pointerEvents === 'auto';\n  }(),\n  _detectDirection = function _detectDirection(el, options) {\n    var elCSS = css(el),\n      elWidth = parseInt(elCSS.width) - parseInt(elCSS.paddingLeft) - parseInt(elCSS.paddingRight) - parseInt(elCSS.borderLeftWidth) - parseInt(elCSS.borderRightWidth),\n      child1 = getChild(el, 0, options),\n      child2 = getChild(el, 1, options),\n      firstChildCSS = child1 && css(child1),\n      secondChildCSS = child2 && css(child2),\n      firstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + getRect(child1).width,\n      secondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + getRect(child2).width;\n    if (elCSS.display === 'flex') {\n      return elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse' ? 'vertical' : 'horizontal';\n    }\n    if (elCSS.display === 'grid') {\n      return elCSS.gridTemplateColumns.split(' ').length <= 1 ? 'vertical' : 'horizontal';\n    }\n    if (child1 && firstChildCSS[\"float\"] && firstChildCSS[\"float\"] !== 'none') {\n      var touchingSideChild2 = firstChildCSS[\"float\"] === 'left' ? 'left' : 'right';\n      return child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ? 'vertical' : 'horizontal';\n    }\n    return child1 && (firstChildCSS.display === 'block' || firstChildCSS.display === 'flex' || firstChildCSS.display === 'table' || firstChildCSS.display === 'grid' || firstChildWidth >= elWidth && elCSS[CSSFloatProperty] === 'none' || child2 && elCSS[CSSFloatProperty] === 'none' && firstChildWidth + secondChildWidth > elWidth) ? 'vertical' : 'horizontal';\n  },\n  _dragElInRowColumn = function _dragElInRowColumn(dragRect, targetRect, vertical) {\n    var dragElS1Opp = vertical ? dragRect.left : dragRect.top,\n      dragElS2Opp = vertical ? dragRect.right : dragRect.bottom,\n      dragElOppLength = vertical ? dragRect.width : dragRect.height,\n      targetS1Opp = vertical ? targetRect.left : targetRect.top,\n      targetS2Opp = vertical ? targetRect.right : targetRect.bottom,\n      targetOppLength = vertical ? targetRect.width : targetRect.height;\n    return dragElS1Opp === targetS1Opp || dragElS2Opp === targetS2Opp || dragElS1Opp + dragElOppLength / 2 === targetS1Opp + targetOppLength / 2;\n  },\n  /**\r\n   * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\r\n   * @param  {Number} x      X position\r\n   * @param  {Number} y      Y position\r\n   * @return {HTMLElement}   Element of the first found nearest Sortable\r\n   */\n  _detectNearestEmptySortable = function _detectNearestEmptySortable(x, y) {\n    var ret;\n    sortables.some(function (sortable) {\n      var threshold = sortable[expando].options.emptyInsertThreshold;\n      if (!threshold || lastChild(sortable)) return;\n      var rect = getRect(sortable),\n        insideHorizontally = x >= rect.left - threshold && x <= rect.right + threshold,\n        insideVertically = y >= rect.top - threshold && y <= rect.bottom + threshold;\n      if (insideHorizontally && insideVertically) {\n        return ret = sortable;\n      }\n    });\n    return ret;\n  },\n  _prepareGroup = function _prepareGroup(options) {\n    function toFn(value, pull) {\n      return function (to, from, dragEl, evt) {\n        var sameGroup = to.options.group.name && from.options.group.name && to.options.group.name === from.options.group.name;\n        if (value == null && (pull || sameGroup)) {\n          // Default pull value\n          // Default pull and put value if same group\n          return true;\n        } else if (value == null || value === false) {\n          return false;\n        } else if (pull && value === 'clone') {\n          return value;\n        } else if (typeof value === 'function') {\n          return toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n        } else {\n          var otherGroup = (pull ? to : from).options.group.name;\n          return value === true || typeof value === 'string' && value === otherGroup || value.join && value.indexOf(otherGroup) > -1;\n        }\n      };\n    }\n    var group = {};\n    var originalGroup = options.group;\n    if (!originalGroup || _typeof(originalGroup) != 'object') {\n      originalGroup = {\n        name: originalGroup\n      };\n    }\n    group.name = originalGroup.name;\n    group.checkPull = toFn(originalGroup.pull, true);\n    group.checkPut = toFn(originalGroup.put);\n    group.revertClone = originalGroup.revertClone;\n    options.group = group;\n  },\n  _hideGhostForTarget = function _hideGhostForTarget() {\n    if (!supportCssPointerEvents && ghostEl) {\n      css(ghostEl, 'display', 'none');\n    }\n  },\n  _unhideGhostForTarget = function _unhideGhostForTarget() {\n    if (!supportCssPointerEvents && ghostEl) {\n      css(ghostEl, 'display', '');\n    }\n  };\n\n// #1184 fix - Prevent click event on fallback if dragged but item not changed position\nif (documentExists && !ChromeForAndroid) {\n  document.addEventListener('click', function (evt) {\n    if (ignoreNextClick) {\n      evt.preventDefault();\n      evt.stopPropagation && evt.stopPropagation();\n      evt.stopImmediatePropagation && evt.stopImmediatePropagation();\n      ignoreNextClick = false;\n      return false;\n    }\n  }, true);\n}\nvar nearestEmptyInsertDetectEvent = function nearestEmptyInsertDetectEvent(evt) {\n  if (dragEl) {\n    evt = evt.touches ? evt.touches[0] : evt;\n    var nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n    if (nearest) {\n      // Create imitation event\n      var event = {};\n      for (var i in evt) {\n        if (evt.hasOwnProperty(i)) {\n          event[i] = evt[i];\n        }\n      }\n      event.target = event.rootEl = nearest;\n      event.preventDefault = void 0;\n      event.stopPropagation = void 0;\n      nearest[expando]._onDragOver(event);\n    }\n  }\n};\nvar _checkOutsideTargetEl = function _checkOutsideTargetEl(evt) {\n  if (dragEl) {\n    dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n  }\n};\n\n/**\r\n * @class  Sortable\r\n * @param  {HTMLElement}  el\r\n * @param  {Object}       [options]\r\n */\nfunction Sortable(el, options) {\n  if (!(el && el.nodeType && el.nodeType === 1)) {\n    throw \"Sortable: `el` must be an HTMLElement, not \".concat({}.toString.call(el));\n  }\n  this.el = el; // root element\n  this.options = options = _extends({}, options);\n\n  // Export instance\n  el[expando] = this;\n  var defaults = {\n    group: null,\n    sort: true,\n    disabled: false,\n    store: null,\n    handle: null,\n    draggable: /^[uo]l$/i.test(el.nodeName) ? '>li' : '>*',\n    swapThreshold: 1,\n    // percentage; 0 <= x <= 1\n    invertSwap: false,\n    // invert always\n    invertedSwapThreshold: null,\n    // will be set to same as swapThreshold if default\n    removeCloneOnHide: true,\n    direction: function direction() {\n      return _detectDirection(el, this.options);\n    },\n    ghostClass: 'sortable-ghost',\n    chosenClass: 'sortable-chosen',\n    dragClass: 'sortable-drag',\n    ignore: 'a, img',\n    filter: null,\n    preventOnFilter: true,\n    animation: 0,\n    easing: null,\n    setData: function setData(dataTransfer, dragEl) {\n      dataTransfer.setData('Text', dragEl.textContent);\n    },\n    dropBubble: false,\n    dragoverBubble: false,\n    dataIdAttr: 'data-id',\n    delay: 0,\n    delayOnTouchOnly: false,\n    touchStartThreshold: (Number.parseInt ? Number : window).parseInt(window.devicePixelRatio, 10) || 1,\n    forceFallback: false,\n    fallbackClass: 'sortable-fallback',\n    fallbackOnBody: false,\n    fallbackTolerance: 0,\n    fallbackOffset: {\n      x: 0,\n      y: 0\n    },\n    // Disabled on Safari: #1571; Enabled on Safari IOS: #2244\n    supportPointer: Sortable.supportPointer !== false && 'PointerEvent' in window && (!Safari || IOS),\n    emptyInsertThreshold: 5\n  };\n  PluginManager.initializePlugins(this, el, defaults);\n\n  // Set default options\n  for (var name in defaults) {\n    !(name in options) && (options[name] = defaults[name]);\n  }\n  _prepareGroup(options);\n\n  // Bind all private methods\n  for (var fn in this) {\n    if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n      this[fn] = this[fn].bind(this);\n    }\n  }\n\n  // Setup drag mode\n  this.nativeDraggable = options.forceFallback ? false : supportDraggable;\n  if (this.nativeDraggable) {\n    // Touch start threshold cannot be greater than the native dragstart threshold\n    this.options.touchStartThreshold = 1;\n  }\n\n  // Bind events\n  if (options.supportPointer) {\n    on(el, 'pointerdown', this._onTapStart);\n  } else {\n    on(el, 'mousedown', this._onTapStart);\n    on(el, 'touchstart', this._onTapStart);\n  }\n  if (this.nativeDraggable) {\n    on(el, 'dragover', this);\n    on(el, 'dragenter', this);\n  }\n  sortables.push(this.el);\n\n  // Restore sorting\n  options.store && options.store.get && this.sort(options.store.get(this) || []);\n\n  // Add animation state manager\n  _extends(this, AnimationStateManager());\n}\nSortable.prototype = /** @lends Sortable.prototype */{\n  constructor: Sortable,\n  _isOutsideThisEl: function _isOutsideThisEl(target) {\n    if (!this.el.contains(target) && target !== this.el) {\n      lastTarget = null;\n    }\n  },\n  _getDirection: function _getDirection(evt, target) {\n    return typeof this.options.direction === 'function' ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n  },\n  _onTapStart: function _onTapStart( /** Event|TouchEvent */evt) {\n    if (!evt.cancelable) return;\n    var _this = this,\n      el = this.el,\n      options = this.options,\n      preventOnFilter = options.preventOnFilter,\n      type = evt.type,\n      touch = evt.touches && evt.touches[0] || evt.pointerType && evt.pointerType === 'touch' && evt,\n      target = (touch || evt).target,\n      originalTarget = evt.target.shadowRoot && (evt.path && evt.path[0] || evt.composedPath && evt.composedPath()[0]) || target,\n      filter = options.filter;\n    _saveInputCheckedState(el);\n\n    // Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n    if (dragEl) {\n      return;\n    }\n    if (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n      return; // only left button and enabled\n    }\n\n    // cancel dnd if original target is content editable\n    if (originalTarget.isContentEditable) {\n      return;\n    }\n\n    // Safari ignores further event handling after mousedown\n    if (!this.nativeDraggable && Safari && target && target.tagName.toUpperCase() === 'SELECT') {\n      return;\n    }\n    target = closest(target, options.draggable, el, false);\n    if (target && target.animated) {\n      return;\n    }\n    if (lastDownEl === target) {\n      // Ignoring duplicate `down`\n      return;\n    }\n\n    // Get the index of the dragged element within its parent\n    oldIndex = index(target);\n    oldDraggableIndex = index(target, options.draggable);\n\n    // Check filter\n    if (typeof filter === 'function') {\n      if (filter.call(this, evt, target, this)) {\n        _dispatchEvent({\n          sortable: _this,\n          rootEl: originalTarget,\n          name: 'filter',\n          targetEl: target,\n          toEl: el,\n          fromEl: el\n        });\n        pluginEvent('filter', _this, {\n          evt: evt\n        });\n        preventOnFilter && evt.preventDefault();\n        return; // cancel dnd\n      }\n    } else if (filter) {\n      filter = filter.split(',').some(function (criteria) {\n        criteria = closest(originalTarget, criteria.trim(), el, false);\n        if (criteria) {\n          _dispatchEvent({\n            sortable: _this,\n            rootEl: criteria,\n            name: 'filter',\n            targetEl: target,\n            fromEl: el,\n            toEl: el\n          });\n          pluginEvent('filter', _this, {\n            evt: evt\n          });\n          return true;\n        }\n      });\n      if (filter) {\n        preventOnFilter && evt.preventDefault();\n        return; // cancel dnd\n      }\n    }\n    if (options.handle && !closest(originalTarget, options.handle, el, false)) {\n      return;\n    }\n\n    // Prepare `dragstart`\n    this._prepareDragStart(evt, touch, target);\n  },\n  _prepareDragStart: function _prepareDragStart( /** Event */evt, /** Touch */touch, /** HTMLElement */target) {\n    var _this = this,\n      el = _this.el,\n      options = _this.options,\n      ownerDocument = el.ownerDocument,\n      dragStartFn;\n    if (target && !dragEl && target.parentNode === el) {\n      var dragRect = getRect(target);\n      rootEl = el;\n      dragEl = target;\n      parentEl = dragEl.parentNode;\n      nextEl = dragEl.nextSibling;\n      lastDownEl = target;\n      activeGroup = options.group;\n      Sortable.dragged = dragEl;\n      tapEvt = {\n        target: dragEl,\n        clientX: (touch || evt).clientX,\n        clientY: (touch || evt).clientY\n      };\n      tapDistanceLeft = tapEvt.clientX - dragRect.left;\n      tapDistanceTop = tapEvt.clientY - dragRect.top;\n      this._lastX = (touch || evt).clientX;\n      this._lastY = (touch || evt).clientY;\n      dragEl.style['will-change'] = 'all';\n      dragStartFn = function dragStartFn() {\n        pluginEvent('delayEnded', _this, {\n          evt: evt\n        });\n        if (Sortable.eventCanceled) {\n          _this._onDrop();\n          return;\n        }\n        // Delayed drag has been triggered\n        // we can re-enable the events: touchmove/mousemove\n        _this._disableDelayedDragEvents();\n        if (!FireFox && _this.nativeDraggable) {\n          dragEl.draggable = true;\n        }\n\n        // Bind the events: dragstart/dragend\n        _this._triggerDragStart(evt, touch);\n\n        // Drag start event\n        _dispatchEvent({\n          sortable: _this,\n          name: 'choose',\n          originalEvent: evt\n        });\n\n        // Chosen item\n        toggleClass(dragEl, options.chosenClass, true);\n      };\n\n      // Disable \"draggable\"\n      options.ignore.split(',').forEach(function (criteria) {\n        find(dragEl, criteria.trim(), _disableDraggable);\n      });\n      on(ownerDocument, 'dragover', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mousemove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'touchmove', nearestEmptyInsertDetectEvent);\n      if (options.supportPointer) {\n        on(ownerDocument, 'pointerup', _this._onDrop);\n        // Native D&D triggers pointercancel\n        !this.nativeDraggable && on(ownerDocument, 'pointercancel', _this._onDrop);\n      } else {\n        on(ownerDocument, 'mouseup', _this._onDrop);\n        on(ownerDocument, 'touchend', _this._onDrop);\n        on(ownerDocument, 'touchcancel', _this._onDrop);\n      }\n\n      // Make dragEl draggable (must be before delay for FireFox)\n      if (FireFox && this.nativeDraggable) {\n        this.options.touchStartThreshold = 4;\n        dragEl.draggable = true;\n      }\n      pluginEvent('delayStart', this, {\n        evt: evt\n      });\n\n      // Delay is impossible for native DnD in Edge or IE\n      if (options.delay && (!options.delayOnTouchOnly || touch) && (!this.nativeDraggable || !(Edge || IE11OrLess))) {\n        if (Sortable.eventCanceled) {\n          this._onDrop();\n          return;\n        }\n        // If the user moves the pointer or let go the click or touch\n        // before the delay has been reached:\n        // disable the delayed drag\n        if (options.supportPointer) {\n          on(ownerDocument, 'pointerup', _this._disableDelayedDrag);\n          on(ownerDocument, 'pointercancel', _this._disableDelayedDrag);\n        } else {\n          on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n          on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n          on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n        }\n        on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n        on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n        options.supportPointer && on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n        _this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n      } else {\n        dragStartFn();\n      }\n    }\n  },\n  _delayedDragTouchMoveHandler: function _delayedDragTouchMoveHandler( /** TouchEvent|PointerEvent **/e) {\n    var touch = e.touches ? e.touches[0] : e;\n    if (Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) >= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1))) {\n      this._disableDelayedDrag();\n    }\n  },\n  _disableDelayedDrag: function _disableDelayedDrag() {\n    dragEl && _disableDraggable(dragEl);\n    clearTimeout(this._dragStartTimer);\n    this._disableDelayedDragEvents();\n  },\n  _disableDelayedDragEvents: function _disableDelayedDragEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n    off(ownerDocument, 'touchend', this._disableDelayedDrag);\n    off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n    off(ownerDocument, 'pointerup', this._disableDelayedDrag);\n    off(ownerDocument, 'pointercancel', this._disableDelayedDrag);\n    off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n  },\n  _triggerDragStart: function _triggerDragStart( /** Event */evt, /** Touch */touch) {\n    touch = touch || evt.pointerType == 'touch' && evt;\n    if (!this.nativeDraggable || touch) {\n      if (this.options.supportPointer) {\n        on(document, 'pointermove', this._onTouchMove);\n      } else if (touch) {\n        on(document, 'touchmove', this._onTouchMove);\n      } else {\n        on(document, 'mousemove', this._onTouchMove);\n      }\n    } else {\n      on(dragEl, 'dragend', this);\n      on(rootEl, 'dragstart', this._onDragStart);\n    }\n    try {\n      if (document.selection) {\n        _nextTick(function () {\n          document.selection.empty();\n        });\n      } else {\n        window.getSelection().removeAllRanges();\n      }\n    } catch (err) {}\n  },\n  _dragStarted: function _dragStarted(fallback, evt) {\n    awaitingDragStarted = false;\n    if (rootEl && dragEl) {\n      pluginEvent('dragStarted', this, {\n        evt: evt\n      });\n      if (this.nativeDraggable) {\n        on(document, 'dragover', _checkOutsideTargetEl);\n      }\n      var options = this.options;\n\n      // Apply effect\n      !fallback && toggleClass(dragEl, options.dragClass, false);\n      toggleClass(dragEl, options.ghostClass, true);\n      Sortable.active = this;\n      fallback && this._appendGhost();\n\n      // Drag start event\n      _dispatchEvent({\n        sortable: this,\n        name: 'start',\n        originalEvent: evt\n      });\n    } else {\n      this._nulling();\n    }\n  },\n  _emulateDragOver: function _emulateDragOver() {\n    if (touchEvt) {\n      this._lastX = touchEvt.clientX;\n      this._lastY = touchEvt.clientY;\n      _hideGhostForTarget();\n      var target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n      var parent = target;\n      while (target && target.shadowRoot) {\n        target = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n        if (target === parent) break;\n        parent = target;\n      }\n      dragEl.parentNode[expando]._isOutsideThisEl(target);\n      if (parent) {\n        do {\n          if (parent[expando]) {\n            var inserted = void 0;\n            inserted = parent[expando]._onDragOver({\n              clientX: touchEvt.clientX,\n              clientY: touchEvt.clientY,\n              target: target,\n              rootEl: parent\n            });\n            if (inserted && !this.options.dragoverBubble) {\n              break;\n            }\n          }\n          target = parent; // store last element\n        }\n        /* jshint boss:true */ while (parent = getParentOrHost(parent));\n      }\n      _unhideGhostForTarget();\n    }\n  },\n  _onTouchMove: function _onTouchMove( /**TouchEvent*/evt) {\n    if (tapEvt) {\n      var options = this.options,\n        fallbackTolerance = options.fallbackTolerance,\n        fallbackOffset = options.fallbackOffset,\n        touch = evt.touches ? evt.touches[0] : evt,\n        ghostMatrix = ghostEl && matrix(ghostEl, true),\n        scaleX = ghostEl && ghostMatrix && ghostMatrix.a,\n        scaleY = ghostEl && ghostMatrix && ghostMatrix.d,\n        relativeScrollOffset = PositionGhostAbsolutely && ghostRelativeParent && getRelativeScrollOffset(ghostRelativeParent),\n        dx = (touch.clientX - tapEvt.clientX + fallbackOffset.x) / (scaleX || 1) + (relativeScrollOffset ? relativeScrollOffset[0] - ghostRelativeParentInitialScroll[0] : 0) / (scaleX || 1),\n        dy = (touch.clientY - tapEvt.clientY + fallbackOffset.y) / (scaleY || 1) + (relativeScrollOffset ? relativeScrollOffset[1] - ghostRelativeParentInitialScroll[1] : 0) / (scaleY || 1);\n\n      // only set the status to dragging, when we are actually dragging\n      if (!Sortable.active && !awaitingDragStarted) {\n        if (fallbackTolerance && Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) < fallbackTolerance) {\n          return;\n        }\n        this._onDragStart(evt, true);\n      }\n      if (ghostEl) {\n        if (ghostMatrix) {\n          ghostMatrix.e += dx - (lastDx || 0);\n          ghostMatrix.f += dy - (lastDy || 0);\n        } else {\n          ghostMatrix = {\n            a: 1,\n            b: 0,\n            c: 0,\n            d: 1,\n            e: dx,\n            f: dy\n          };\n        }\n        var cssMatrix = \"matrix(\".concat(ghostMatrix.a, \",\").concat(ghostMatrix.b, \",\").concat(ghostMatrix.c, \",\").concat(ghostMatrix.d, \",\").concat(ghostMatrix.e, \",\").concat(ghostMatrix.f, \")\");\n        css(ghostEl, 'webkitTransform', cssMatrix);\n        css(ghostEl, 'mozTransform', cssMatrix);\n        css(ghostEl, 'msTransform', cssMatrix);\n        css(ghostEl, 'transform', cssMatrix);\n        lastDx = dx;\n        lastDy = dy;\n        touchEvt = touch;\n      }\n      evt.cancelable && evt.preventDefault();\n    }\n  },\n  _appendGhost: function _appendGhost() {\n    // Bug if using scale(): https://stackoverflow.com/questions/2637058\n    // Not being adjusted for\n    if (!ghostEl) {\n      var container = this.options.fallbackOnBody ? document.body : rootEl,\n        rect = getRect(dragEl, true, PositionGhostAbsolutely, true, container),\n        options = this.options;\n\n      // Position absolutely\n      if (PositionGhostAbsolutely) {\n        // Get relatively positioned parent\n        ghostRelativeParent = container;\n        while (css(ghostRelativeParent, 'position') === 'static' && css(ghostRelativeParent, 'transform') === 'none' && ghostRelativeParent !== document) {\n          ghostRelativeParent = ghostRelativeParent.parentNode;\n        }\n        if (ghostRelativeParent !== document.body && ghostRelativeParent !== document.documentElement) {\n          if (ghostRelativeParent === document) ghostRelativeParent = getWindowScrollingElement();\n          rect.top += ghostRelativeParent.scrollTop;\n          rect.left += ghostRelativeParent.scrollLeft;\n        } else {\n          ghostRelativeParent = getWindowScrollingElement();\n        }\n        ghostRelativeParentInitialScroll = getRelativeScrollOffset(ghostRelativeParent);\n      }\n      ghostEl = dragEl.cloneNode(true);\n      toggleClass(ghostEl, options.ghostClass, false);\n      toggleClass(ghostEl, options.fallbackClass, true);\n      toggleClass(ghostEl, options.dragClass, true);\n      css(ghostEl, 'transition', '');\n      css(ghostEl, 'transform', '');\n      css(ghostEl, 'box-sizing', 'border-box');\n      css(ghostEl, 'margin', 0);\n      css(ghostEl, 'top', rect.top);\n      css(ghostEl, 'left', rect.left);\n      css(ghostEl, 'width', rect.width);\n      css(ghostEl, 'height', rect.height);\n      css(ghostEl, 'opacity', '0.8');\n      css(ghostEl, 'position', PositionGhostAbsolutely ? 'absolute' : 'fixed');\n      css(ghostEl, 'zIndex', '100000');\n      css(ghostEl, 'pointerEvents', 'none');\n      Sortable.ghost = ghostEl;\n      container.appendChild(ghostEl);\n\n      // Set transform-origin\n      css(ghostEl, 'transform-origin', tapDistanceLeft / parseInt(ghostEl.style.width) * 100 + '% ' + tapDistanceTop / parseInt(ghostEl.style.height) * 100 + '%');\n    }\n  },\n  _onDragStart: function _onDragStart( /**Event*/evt, /**boolean*/fallback) {\n    var _this = this;\n    var dataTransfer = evt.dataTransfer;\n    var options = _this.options;\n    pluginEvent('dragStart', this, {\n      evt: evt\n    });\n    if (Sortable.eventCanceled) {\n      this._onDrop();\n      return;\n    }\n    pluginEvent('setupClone', this);\n    if (!Sortable.eventCanceled) {\n      cloneEl = clone(dragEl);\n      cloneEl.removeAttribute(\"id\");\n      cloneEl.draggable = false;\n      cloneEl.style['will-change'] = '';\n      this._hideClone();\n      toggleClass(cloneEl, this.options.chosenClass, false);\n      Sortable.clone = cloneEl;\n    }\n\n    // #1143: IFrame support workaround\n    _this.cloneId = _nextTick(function () {\n      pluginEvent('clone', _this);\n      if (Sortable.eventCanceled) return;\n      if (!_this.options.removeCloneOnHide) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      }\n      _this._hideClone();\n      _dispatchEvent({\n        sortable: _this,\n        name: 'clone'\n      });\n    });\n    !fallback && toggleClass(dragEl, options.dragClass, true);\n\n    // Set proper drop events\n    if (fallback) {\n      ignoreNextClick = true;\n      _this._loopId = setInterval(_this._emulateDragOver, 50);\n    } else {\n      // Undo what was set in _prepareDragStart before drag started\n      off(document, 'mouseup', _this._onDrop);\n      off(document, 'touchend', _this._onDrop);\n      off(document, 'touchcancel', _this._onDrop);\n      if (dataTransfer) {\n        dataTransfer.effectAllowed = 'move';\n        options.setData && options.setData.call(_this, dataTransfer, dragEl);\n      }\n      on(document, 'drop', _this);\n\n      // #1276 fix:\n      css(dragEl, 'transform', 'translateZ(0)');\n    }\n    awaitingDragStarted = true;\n    _this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback, evt));\n    on(document, 'selectstart', _this);\n    moved = true;\n    window.getSelection().removeAllRanges();\n    if (Safari) {\n      css(document.body, 'user-select', 'none');\n    }\n  },\n  // Returns true - if no further action is needed (either inserted or another condition)\n  _onDragOver: function _onDragOver( /**Event*/evt) {\n    var el = this.el,\n      target = evt.target,\n      dragRect,\n      targetRect,\n      revert,\n      options = this.options,\n      group = options.group,\n      activeSortable = Sortable.active,\n      isOwner = activeGroup === group,\n      canSort = options.sort,\n      fromSortable = putSortable || activeSortable,\n      vertical,\n      _this = this,\n      completedFired = false;\n    if (_silent) return;\n    function dragOverEvent(name, extra) {\n      pluginEvent(name, _this, _objectSpread2({\n        evt: evt,\n        isOwner: isOwner,\n        axis: vertical ? 'vertical' : 'horizontal',\n        revert: revert,\n        dragRect: dragRect,\n        targetRect: targetRect,\n        canSort: canSort,\n        fromSortable: fromSortable,\n        target: target,\n        completed: completed,\n        onMove: function onMove(target, after) {\n          return _onMove(rootEl, el, dragEl, dragRect, target, getRect(target), evt, after);\n        },\n        changed: changed\n      }, extra));\n    }\n\n    // Capture animation state\n    function capture() {\n      dragOverEvent('dragOverAnimationCapture');\n      _this.captureAnimationState();\n      if (_this !== fromSortable) {\n        fromSortable.captureAnimationState();\n      }\n    }\n\n    // Return invocation when dragEl is inserted (or completed)\n    function completed(insertion) {\n      dragOverEvent('dragOverCompleted', {\n        insertion: insertion\n      });\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        } else {\n          activeSortable._showClone(_this);\n        }\n        if (_this !== fromSortable) {\n          // Set ghost class to new sortable's ghost class\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n          toggleClass(dragEl, options.ghostClass, true);\n        }\n        if (putSortable !== _this && _this !== Sortable.active) {\n          putSortable = _this;\n        } else if (_this === Sortable.active && putSortable) {\n          putSortable = null;\n        }\n\n        // Animation\n        if (fromSortable === _this) {\n          _this._ignoreWhileAnimating = target;\n        }\n        _this.animateAll(function () {\n          dragOverEvent('dragOverAnimationComplete');\n          _this._ignoreWhileAnimating = null;\n        });\n        if (_this !== fromSortable) {\n          fromSortable.animateAll();\n          fromSortable._ignoreWhileAnimating = null;\n        }\n      }\n\n      // Null lastTarget if it is not inside a previously swapped element\n      if (target === dragEl && !dragEl.animated || target === el && !target.animated) {\n        lastTarget = null;\n      }\n\n      // no bubbling and not fallback\n      if (!options.dragoverBubble && !evt.rootEl && target !== document) {\n        dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n\n        // Do not detect for empty insert if already inserted\n        !insertion && nearestEmptyInsertDetectEvent(evt);\n      }\n      !options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n      return completedFired = true;\n    }\n\n    // Call when dragEl has been inserted\n    function changed() {\n      newIndex = index(dragEl);\n      newDraggableIndex = index(dragEl, options.draggable);\n      _dispatchEvent({\n        sortable: _this,\n        name: 'change',\n        toEl: el,\n        newIndex: newIndex,\n        newDraggableIndex: newDraggableIndex,\n        originalEvent: evt\n      });\n    }\n    if (evt.preventDefault !== void 0) {\n      evt.cancelable && evt.preventDefault();\n    }\n    target = closest(target, options.draggable, el, true);\n    dragOverEvent('dragOver');\n    if (Sortable.eventCanceled) return completedFired;\n    if (dragEl.contains(evt.target) || target.animated && target.animatingX && target.animatingY || _this._ignoreWhileAnimating === target) {\n      return completed(false);\n    }\n    ignoreNextClick = false;\n    if (activeSortable && !options.disabled && (isOwner ? canSort || (revert = parentEl !== rootEl) // Reverting item into the original list\n    : putSortable === this || (this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) && group.checkPut(this, activeSortable, dragEl, evt))) {\n      vertical = this._getDirection(evt, target) === 'vertical';\n      dragRect = getRect(dragEl);\n      dragOverEvent('dragOverValid');\n      if (Sortable.eventCanceled) return completedFired;\n      if (revert) {\n        parentEl = rootEl; // actualization\n        capture();\n        this._hideClone();\n        dragOverEvent('revert');\n        if (!Sortable.eventCanceled) {\n          if (nextEl) {\n            rootEl.insertBefore(dragEl, nextEl);\n          } else {\n            rootEl.appendChild(dragEl);\n          }\n        }\n        return completed(true);\n      }\n      var elLastChild = lastChild(el, options.draggable);\n      if (!elLastChild || _ghostIsLast(evt, vertical, this) && !elLastChild.animated) {\n        // Insert to end of list\n\n        // If already at end of list: Do not insert\n        if (elLastChild === dragEl) {\n          return completed(false);\n        }\n\n        // if there is a last element, it is the target\n        if (elLastChild && el === evt.target) {\n          target = elLastChild;\n        }\n        if (target) {\n          targetRect = getRect(target);\n        }\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n          capture();\n          if (elLastChild && elLastChild.nextSibling) {\n            // the last draggable element is not the last node\n            el.insertBefore(dragEl, elLastChild.nextSibling);\n          } else {\n            el.appendChild(dragEl);\n          }\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (elLastChild && _ghostIsFirst(evt, vertical, this)) {\n        // Insert to start of list\n        var firstChild = getChild(el, 0, options, true);\n        if (firstChild === dragEl) {\n          return completed(false);\n        }\n        target = firstChild;\n        targetRect = getRect(target);\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, false) !== false) {\n          capture();\n          el.insertBefore(dragEl, firstChild);\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (target.parentNode === el) {\n        targetRect = getRect(target);\n        var direction = 0,\n          targetBeforeFirstSwap,\n          differentLevel = dragEl.parentNode !== el,\n          differentRowCol = !_dragElInRowColumn(dragEl.animated && dragEl.toRect || dragRect, target.animated && target.toRect || targetRect, vertical),\n          side1 = vertical ? 'top' : 'left',\n          scrolledPastTop = isScrolledPast(target, 'top', 'top') || isScrolledPast(dragEl, 'top', 'top'),\n          scrollBefore = scrolledPastTop ? scrolledPastTop.scrollTop : void 0;\n        if (lastTarget !== target) {\n          targetBeforeFirstSwap = targetRect[side1];\n          pastFirstInvertThresh = false;\n          isCircumstantialInvert = !differentRowCol && options.invertSwap || differentLevel;\n        }\n        direction = _getSwapDirection(evt, target, targetRect, vertical, differentRowCol ? 1 : options.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold, isCircumstantialInvert, lastTarget === target);\n        var sibling;\n        if (direction !== 0) {\n          // Check if target is beside dragEl in respective direction (ignoring hidden elements)\n          var dragIndex = index(dragEl);\n          do {\n            dragIndex -= direction;\n            sibling = parentEl.children[dragIndex];\n          } while (sibling && (css(sibling, 'display') === 'none' || sibling === ghostEl));\n        }\n        // If dragEl is already beside target: Do not insert\n        if (direction === 0 || sibling === target) {\n          return completed(false);\n        }\n        lastTarget = target;\n        lastDirection = direction;\n        var nextSibling = target.nextElementSibling,\n          after = false;\n        after = direction === 1;\n        var moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n        if (moveVector !== false) {\n          if (moveVector === 1 || moveVector === -1) {\n            after = moveVector === 1;\n          }\n          _silent = true;\n          setTimeout(_unsilent, 30);\n          capture();\n          if (after && !nextSibling) {\n            el.appendChild(dragEl);\n          } else {\n            target.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n          }\n\n          // Undo chrome's scroll adjustment (has no effect on other browsers)\n          if (scrolledPastTop) {\n            scrollBy(scrolledPastTop, 0, scrollBefore - scrolledPastTop.scrollTop);\n          }\n          parentEl = dragEl.parentNode; // actualization\n\n          // must be done before animation\n          if (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n            targetMoveDistance = Math.abs(targetBeforeFirstSwap - getRect(target)[side1]);\n          }\n          changed();\n          return completed(true);\n        }\n      }\n      if (el.contains(dragEl)) {\n        return completed(false);\n      }\n    }\n    return false;\n  },\n  _ignoreWhileAnimating: null,\n  _offMoveEvents: function _offMoveEvents() {\n    off(document, 'mousemove', this._onTouchMove);\n    off(document, 'touchmove', this._onTouchMove);\n    off(document, 'pointermove', this._onTouchMove);\n    off(document, 'dragover', nearestEmptyInsertDetectEvent);\n    off(document, 'mousemove', nearestEmptyInsertDetectEvent);\n    off(document, 'touchmove', nearestEmptyInsertDetectEvent);\n  },\n  _offUpEvents: function _offUpEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._onDrop);\n    off(ownerDocument, 'touchend', this._onDrop);\n    off(ownerDocument, 'pointerup', this._onDrop);\n    off(ownerDocument, 'pointercancel', this._onDrop);\n    off(ownerDocument, 'touchcancel', this._onDrop);\n    off(document, 'selectstart', this);\n  },\n  _onDrop: function _onDrop( /**Event*/evt) {\n    var el = this.el,\n      options = this.options;\n\n    // Get the index of the dragged element within its parent\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    pluginEvent('drop', this, {\n      evt: evt\n    });\n    parentEl = dragEl && dragEl.parentNode;\n\n    // Get again after plugin event\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    if (Sortable.eventCanceled) {\n      this._nulling();\n      return;\n    }\n    awaitingDragStarted = false;\n    isCircumstantialInvert = false;\n    pastFirstInvertThresh = false;\n    clearInterval(this._loopId);\n    clearTimeout(this._dragStartTimer);\n    _cancelNextTick(this.cloneId);\n    _cancelNextTick(this._dragStartId);\n\n    // Unbind events\n    if (this.nativeDraggable) {\n      off(document, 'drop', this);\n      off(el, 'dragstart', this._onDragStart);\n    }\n    this._offMoveEvents();\n    this._offUpEvents();\n    if (Safari) {\n      css(document.body, 'user-select', '');\n    }\n    css(dragEl, 'transform', '');\n    if (evt) {\n      if (moved) {\n        evt.cancelable && evt.preventDefault();\n        !options.dropBubble && evt.stopPropagation();\n      }\n      ghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        // Remove clone(s)\n        cloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n      }\n      if (dragEl) {\n        if (this.nativeDraggable) {\n          off(dragEl, 'dragend', this);\n        }\n        _disableDraggable(dragEl);\n        dragEl.style['will-change'] = '';\n\n        // Remove classes\n        // ghostClass is added in dragStarted\n        if (moved && !awaitingDragStarted) {\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n        }\n        toggleClass(dragEl, this.options.chosenClass, false);\n\n        // Drag stop event\n        _dispatchEvent({\n          sortable: this,\n          name: 'unchoose',\n          toEl: parentEl,\n          newIndex: null,\n          newDraggableIndex: null,\n          originalEvent: evt\n        });\n        if (rootEl !== parentEl) {\n          if (newIndex >= 0) {\n            // Add event\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'add',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n\n            // Remove event\n            _dispatchEvent({\n              sortable: this,\n              name: 'remove',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n\n            // drag from one list and drop into another\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'sort',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n            _dispatchEvent({\n              sortable: this,\n              name: 'sort',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n          }\n          putSortable && putSortable.save();\n        } else {\n          if (newIndex !== oldIndex) {\n            if (newIndex >= 0) {\n              // drag & drop within the same list\n              _dispatchEvent({\n                sortable: this,\n                name: 'update',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n              _dispatchEvent({\n                sortable: this,\n                name: 'sort',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n            }\n          }\n        }\n        if (Sortable.active) {\n          /* jshint eqnull:true */\n          if (newIndex == null || newIndex === -1) {\n            newIndex = oldIndex;\n            newDraggableIndex = oldDraggableIndex;\n          }\n          _dispatchEvent({\n            sortable: this,\n            name: 'end',\n            toEl: parentEl,\n            originalEvent: evt\n          });\n\n          // Save sorting\n          this.save();\n        }\n      }\n    }\n    this._nulling();\n  },\n  _nulling: function _nulling() {\n    pluginEvent('nulling', this);\n    rootEl = dragEl = parentEl = ghostEl = nextEl = cloneEl = lastDownEl = cloneHidden = tapEvt = touchEvt = moved = newIndex = newDraggableIndex = oldIndex = oldDraggableIndex = lastTarget = lastDirection = putSortable = activeGroup = Sortable.dragged = Sortable.ghost = Sortable.clone = Sortable.active = null;\n    savedInputChecked.forEach(function (el) {\n      el.checked = true;\n    });\n    savedInputChecked.length = lastDx = lastDy = 0;\n  },\n  handleEvent: function handleEvent( /**Event*/evt) {\n    switch (evt.type) {\n      case 'drop':\n      case 'dragend':\n        this._onDrop(evt);\n        break;\n      case 'dragenter':\n      case 'dragover':\n        if (dragEl) {\n          this._onDragOver(evt);\n          _globalDragOver(evt);\n        }\n        break;\n      case 'selectstart':\n        evt.preventDefault();\n        break;\n    }\n  },\n  /**\r\n   * Serializes the item into an array of string.\r\n   * @returns {String[]}\r\n   */\n  toArray: function toArray() {\n    var order = [],\n      el,\n      children = this.el.children,\n      i = 0,\n      n = children.length,\n      options = this.options;\n    for (; i < n; i++) {\n      el = children[i];\n      if (closest(el, options.draggable, this.el, false)) {\n        order.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n      }\n    }\n    return order;\n  },\n  /**\r\n   * Sorts the elements according to the array.\r\n   * @param  {String[]}  order  order of the items\r\n   */\n  sort: function sort(order, useAnimation) {\n    var items = {},\n      rootEl = this.el;\n    this.toArray().forEach(function (id, i) {\n      var el = rootEl.children[i];\n      if (closest(el, this.options.draggable, rootEl, false)) {\n        items[id] = el;\n      }\n    }, this);\n    useAnimation && this.captureAnimationState();\n    order.forEach(function (id) {\n      if (items[id]) {\n        rootEl.removeChild(items[id]);\n        rootEl.appendChild(items[id]);\n      }\n    });\n    useAnimation && this.animateAll();\n  },\n  /**\r\n   * Save the current sorting\r\n   */\n  save: function save() {\n    var store = this.options.store;\n    store && store.set && store.set(this);\n  },\n  /**\r\n   * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\r\n   * @param   {HTMLElement}  el\r\n   * @param   {String}       [selector]  default: `options.draggable`\r\n   * @returns {HTMLElement|null}\r\n   */\n  closest: function closest$1(el, selector) {\n    return closest(el, selector || this.options.draggable, this.el, false);\n  },\n  /**\r\n   * Set/get option\r\n   * @param   {string} name\r\n   * @param   {*}      [value]\r\n   * @returns {*}\r\n   */\n  option: function option(name, value) {\n    var options = this.options;\n    if (value === void 0) {\n      return options[name];\n    } else {\n      var modifiedValue = PluginManager.modifyOption(this, name, value);\n      if (typeof modifiedValue !== 'undefined') {\n        options[name] = modifiedValue;\n      } else {\n        options[name] = value;\n      }\n      if (name === 'group') {\n        _prepareGroup(options);\n      }\n    }\n  },\n  /**\r\n   * Destroy\r\n   */\n  destroy: function destroy() {\n    pluginEvent('destroy', this);\n    var el = this.el;\n    el[expando] = null;\n    off(el, 'mousedown', this._onTapStart);\n    off(el, 'touchstart', this._onTapStart);\n    off(el, 'pointerdown', this._onTapStart);\n    if (this.nativeDraggable) {\n      off(el, 'dragover', this);\n      off(el, 'dragenter', this);\n    }\n    // Remove draggable attributes\n    Array.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n      el.removeAttribute('draggable');\n    });\n    this._onDrop();\n    this._disableDelayedDragEvents();\n    sortables.splice(sortables.indexOf(this.el), 1);\n    this.el = el = null;\n  },\n  _hideClone: function _hideClone() {\n    if (!cloneHidden) {\n      pluginEvent('hideClone', this);\n      if (Sortable.eventCanceled) return;\n      css(cloneEl, 'display', 'none');\n      if (this.options.removeCloneOnHide && cloneEl.parentNode) {\n        cloneEl.parentNode.removeChild(cloneEl);\n      }\n      cloneHidden = true;\n    }\n  },\n  _showClone: function _showClone(putSortable) {\n    if (putSortable.lastPutMode !== 'clone') {\n      this._hideClone();\n      return;\n    }\n    if (cloneHidden) {\n      pluginEvent('showClone', this);\n      if (Sortable.eventCanceled) return;\n\n      // show clone at dragEl or original position\n      if (dragEl.parentNode == rootEl && !this.options.group.revertClone) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      } else if (nextEl) {\n        rootEl.insertBefore(cloneEl, nextEl);\n      } else {\n        rootEl.appendChild(cloneEl);\n      }\n      if (this.options.group.revertClone) {\n        this.animate(dragEl, cloneEl);\n      }\n      css(cloneEl, 'display', '');\n      cloneHidden = false;\n    }\n  }\n};\nfunction _globalDragOver( /**Event*/evt) {\n  if (evt.dataTransfer) {\n    evt.dataTransfer.dropEffect = 'move';\n  }\n  evt.cancelable && evt.preventDefault();\n}\nfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvent, willInsertAfter) {\n  var evt,\n    sortable = fromEl[expando],\n    onMoveFn = sortable.options.onMove,\n    retVal;\n  // Support for new CustomEvent feature\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent('move', {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent('move', true, true);\n  }\n  evt.to = toEl;\n  evt.from = fromEl;\n  evt.dragged = dragEl;\n  evt.draggedRect = dragRect;\n  evt.related = targetEl || toEl;\n  evt.relatedRect = targetRect || getRect(toEl);\n  evt.willInsertAfter = willInsertAfter;\n  evt.originalEvent = originalEvent;\n  fromEl.dispatchEvent(evt);\n  if (onMoveFn) {\n    retVal = onMoveFn.call(sortable, evt, originalEvent);\n  }\n  return retVal;\n}\nfunction _disableDraggable(el) {\n  el.draggable = false;\n}\nfunction _unsilent() {\n  _silent = false;\n}\nfunction _ghostIsFirst(evt, vertical, sortable) {\n  var firstElRect = getRect(getChild(sortable.el, 0, sortable.options, true));\n  var childContainingRect = getChildContainingRectFromElement(sortable.el, sortable.options, ghostEl);\n  var spacer = 10;\n  return vertical ? evt.clientX < childContainingRect.left - spacer || evt.clientY < firstElRect.top && evt.clientX < firstElRect.right : evt.clientY < childContainingRect.top - spacer || evt.clientY < firstElRect.bottom && evt.clientX < firstElRect.left;\n}\nfunction _ghostIsLast(evt, vertical, sortable) {\n  var lastElRect = getRect(lastChild(sortable.el, sortable.options.draggable));\n  var childContainingRect = getChildContainingRectFromElement(sortable.el, sortable.options, ghostEl);\n  var spacer = 10;\n  return vertical ? evt.clientX > childContainingRect.right + spacer || evt.clientY > lastElRect.bottom && evt.clientX > lastElRect.left : evt.clientY > childContainingRect.bottom + spacer || evt.clientX > lastElRect.right && evt.clientY > lastElRect.top;\n}\nfunction _getSwapDirection(evt, target, targetRect, vertical, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n  var mouseOnAxis = vertical ? evt.clientY : evt.clientX,\n    targetLength = vertical ? targetRect.height : targetRect.width,\n    targetS1 = vertical ? targetRect.top : targetRect.left,\n    targetS2 = vertical ? targetRect.bottom : targetRect.right,\n    invert = false;\n  if (!invertSwap) {\n    // Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n    if (isLastTarget && targetMoveDistance < targetLength * swapThreshold) {\n      // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n      // check if past first invert threshold on side opposite of lastDirection\n      if (!pastFirstInvertThresh && (lastDirection === 1 ? mouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2 : mouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2)) {\n        // past first invert threshold, do not restrict inverted threshold to dragEl shadow\n        pastFirstInvertThresh = true;\n      }\n      if (!pastFirstInvertThresh) {\n        // dragEl shadow (target move distance shadow)\n        if (lastDirection === 1 ? mouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n        : mouseOnAxis > targetS2 - targetMoveDistance) {\n          return -lastDirection;\n        }\n      } else {\n        invert = true;\n      }\n    } else {\n      // Regular\n      if (mouseOnAxis > targetS1 + targetLength * (1 - swapThreshold) / 2 && mouseOnAxis < targetS2 - targetLength * (1 - swapThreshold) / 2) {\n        return _getInsertDirection(target);\n      }\n    }\n  }\n  invert = invert || invertSwap;\n  if (invert) {\n    // Invert of regular\n    if (mouseOnAxis < targetS1 + targetLength * invertedSwapThreshold / 2 || mouseOnAxis > targetS2 - targetLength * invertedSwapThreshold / 2) {\n      return mouseOnAxis > targetS1 + targetLength / 2 ? 1 : -1;\n    }\n  }\n  return 0;\n}\n\n/**\r\n * Gets the direction dragEl must be swapped relative to target in order to make it\r\n * seem that dragEl has been \"inserted\" into that element's position\r\n * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\r\n * @return {Number}                   Direction dragEl must be swapped\r\n */\nfunction _getInsertDirection(target) {\n  if (index(dragEl) < index(target)) {\n    return 1;\n  } else {\n    return -1;\n  }\n}\n\n/**\r\n * Generate id\r\n * @param   {HTMLElement} el\r\n * @returns {String}\r\n * @private\r\n */\nfunction _generateId(el) {\n  var str = el.tagName + el.className + el.src + el.href + el.textContent,\n    i = str.length,\n    sum = 0;\n  while (i--) {\n    sum += str.charCodeAt(i);\n  }\n  return sum.toString(36);\n}\nfunction _saveInputCheckedState(root) {\n  savedInputChecked.length = 0;\n  var inputs = root.getElementsByTagName('input');\n  var idx = inputs.length;\n  while (idx--) {\n    var el = inputs[idx];\n    el.checked && savedInputChecked.push(el);\n  }\n}\nfunction _nextTick(fn) {\n  return setTimeout(fn, 0);\n}\nfunction _cancelNextTick(id) {\n  return clearTimeout(id);\n}\n\n// Fixed #973:\nif (documentExists) {\n  on(document, 'touchmove', function (evt) {\n    if ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n      evt.preventDefault();\n    }\n  });\n}\n\n// Export utils\nSortable.utils = {\n  on: on,\n  off: off,\n  css: css,\n  find: find,\n  is: function is(el, selector) {\n    return !!closest(el, selector, el, false);\n  },\n  extend: extend,\n  throttle: throttle,\n  closest: closest,\n  toggleClass: toggleClass,\n  clone: clone,\n  index: index,\n  nextTick: _nextTick,\n  cancelNextTick: _cancelNextTick,\n  detectDirection: _detectDirection,\n  getChild: getChild,\n  expando: expando\n};\n\n/**\r\n * Get the Sortable instance of an element\r\n * @param  {HTMLElement} element The element\r\n * @return {Sortable|undefined}         The instance of Sortable\r\n */\nSortable.get = function (element) {\n  return element[expando];\n};\n\n/**\r\n * Mount a plugin to Sortable\r\n * @param  {...SortablePlugin|SortablePlugin[]} plugins       Plugins being mounted\r\n */\nSortable.mount = function () {\n  for (var _len = arguments.length, plugins = new Array(_len), _key = 0; _key < _len; _key++) {\n    plugins[_key] = arguments[_key];\n  }\n  if (plugins[0].constructor === Array) plugins = plugins[0];\n  plugins.forEach(function (plugin) {\n    if (!plugin.prototype || !plugin.prototype.constructor) {\n      throw \"Sortable: Mounted plugin must be a constructor function, not \".concat({}.toString.call(plugin));\n    }\n    if (plugin.utils) Sortable.utils = _objectSpread2(_objectSpread2({}, Sortable.utils), plugin.utils);\n    PluginManager.mount(plugin);\n  });\n};\n\n/**\r\n * Create sortable instance\r\n * @param {HTMLElement}  el\r\n * @param {Object}      [options]\r\n */\nSortable.create = function (el, options) {\n  return new Sortable(el, options);\n};\n\n// Export\nSortable.version = version;\n\nvar autoScrolls = [],\n  scrollEl,\n  scrollRootEl,\n  scrolling = false,\n  lastAutoScrollX,\n  lastAutoScrollY,\n  touchEvt$1,\n  pointerElemChangedInterval;\nfunction AutoScrollPlugin() {\n  function AutoScroll() {\n    this.defaults = {\n      scroll: true,\n      forceAutoScrollFallback: false,\n      scrollSensitivity: 30,\n      scrollSpeed: 10,\n      bubbleScroll: true\n    };\n\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n  }\n  AutoScroll.prototype = {\n    dragStarted: function dragStarted(_ref) {\n      var originalEvent = _ref.originalEvent;\n      if (this.sortable.nativeDraggable) {\n        on(document, 'dragover', this._handleAutoScroll);\n      } else {\n        if (this.options.supportPointer) {\n          on(document, 'pointermove', this._handleFallbackAutoScroll);\n        } else if (originalEvent.touches) {\n          on(document, 'touchmove', this._handleFallbackAutoScroll);\n        } else {\n          on(document, 'mousemove', this._handleFallbackAutoScroll);\n        }\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref2) {\n      var originalEvent = _ref2.originalEvent;\n      // For when bubbling is canceled and using fallback (fallback 'touchmove' always reached)\n      if (!this.options.dragOverBubble && !originalEvent.rootEl) {\n        this._handleAutoScroll(originalEvent);\n      }\n    },\n    drop: function drop() {\n      if (this.sortable.nativeDraggable) {\n        off(document, 'dragover', this._handleAutoScroll);\n      } else {\n        off(document, 'pointermove', this._handleFallbackAutoScroll);\n        off(document, 'touchmove', this._handleFallbackAutoScroll);\n        off(document, 'mousemove', this._handleFallbackAutoScroll);\n      }\n      clearPointerElemChangedInterval();\n      clearAutoScrolls();\n      cancelThrottle();\n    },\n    nulling: function nulling() {\n      touchEvt$1 = scrollRootEl = scrollEl = scrolling = pointerElemChangedInterval = lastAutoScrollX = lastAutoScrollY = null;\n      autoScrolls.length = 0;\n    },\n    _handleFallbackAutoScroll: function _handleFallbackAutoScroll(evt) {\n      this._handleAutoScroll(evt, true);\n    },\n    _handleAutoScroll: function _handleAutoScroll(evt, fallback) {\n      var _this = this;\n      var x = (evt.touches ? evt.touches[0] : evt).clientX,\n        y = (evt.touches ? evt.touches[0] : evt).clientY,\n        elem = document.elementFromPoint(x, y);\n      touchEvt$1 = evt;\n\n      // IE does not seem to have native autoscroll,\n      // Edge's autoscroll seems too conditional,\n      // MACOS Safari does not have autoscroll,\n      // Firefox and Chrome are good\n      if (fallback || this.options.forceAutoScrollFallback || Edge || IE11OrLess || Safari) {\n        autoScroll(evt, this.options, elem, fallback);\n\n        // Listener for pointer element change\n        var ogElemScroller = getParentAutoScrollElement(elem, true);\n        if (scrolling && (!pointerElemChangedInterval || x !== lastAutoScrollX || y !== lastAutoScrollY)) {\n          pointerElemChangedInterval && clearPointerElemChangedInterval();\n          // Detect for pointer elem change, emulating native DnD behaviour\n          pointerElemChangedInterval = setInterval(function () {\n            var newElem = getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n            if (newElem !== ogElemScroller) {\n              ogElemScroller = newElem;\n              clearAutoScrolls();\n            }\n            autoScroll(evt, _this.options, newElem, fallback);\n          }, 10);\n          lastAutoScrollX = x;\n          lastAutoScrollY = y;\n        }\n      } else {\n        // if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n        if (!this.options.bubbleScroll || getParentAutoScrollElement(elem, true) === getWindowScrollingElement()) {\n          clearAutoScrolls();\n          return;\n        }\n        autoScroll(evt, this.options, getParentAutoScrollElement(elem, false), false);\n      }\n    }\n  };\n  return _extends(AutoScroll, {\n    pluginName: 'scroll',\n    initializeByDefault: true\n  });\n}\nfunction clearAutoScrolls() {\n  autoScrolls.forEach(function (autoScroll) {\n    clearInterval(autoScroll.pid);\n  });\n  autoScrolls = [];\n}\nfunction clearPointerElemChangedInterval() {\n  clearInterval(pointerElemChangedInterval);\n}\nvar autoScroll = throttle(function (evt, options, rootEl, isFallback) {\n  // Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n  if (!options.scroll) return;\n  var x = (evt.touches ? evt.touches[0] : evt).clientX,\n    y = (evt.touches ? evt.touches[0] : evt).clientY,\n    sens = options.scrollSensitivity,\n    speed = options.scrollSpeed,\n    winScroller = getWindowScrollingElement();\n  var scrollThisInstance = false,\n    scrollCustomFn;\n\n  // New scroll root, set scrollEl\n  if (scrollRootEl !== rootEl) {\n    scrollRootEl = rootEl;\n    clearAutoScrolls();\n    scrollEl = options.scroll;\n    scrollCustomFn = options.scrollFn;\n    if (scrollEl === true) {\n      scrollEl = getParentAutoScrollElement(rootEl, true);\n    }\n  }\n  var layersOut = 0;\n  var currentParent = scrollEl;\n  do {\n    var el = currentParent,\n      rect = getRect(el),\n      top = rect.top,\n      bottom = rect.bottom,\n      left = rect.left,\n      right = rect.right,\n      width = rect.width,\n      height = rect.height,\n      canScrollX = void 0,\n      canScrollY = void 0,\n      scrollWidth = el.scrollWidth,\n      scrollHeight = el.scrollHeight,\n      elCSS = css(el),\n      scrollPosX = el.scrollLeft,\n      scrollPosY = el.scrollTop;\n    if (el === winScroller) {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll' || elCSS.overflowX === 'visible');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll' || elCSS.overflowY === 'visible');\n    } else {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll');\n    }\n    var vx = canScrollX && (Math.abs(right - x) <= sens && scrollPosX + width < scrollWidth) - (Math.abs(left - x) <= sens && !!scrollPosX);\n    var vy = canScrollY && (Math.abs(bottom - y) <= sens && scrollPosY + height < scrollHeight) - (Math.abs(top - y) <= sens && !!scrollPosY);\n    if (!autoScrolls[layersOut]) {\n      for (var i = 0; i <= layersOut; i++) {\n        if (!autoScrolls[i]) {\n          autoScrolls[i] = {};\n        }\n      }\n    }\n    if (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n      autoScrolls[layersOut].el = el;\n      autoScrolls[layersOut].vx = vx;\n      autoScrolls[layersOut].vy = vy;\n      clearInterval(autoScrolls[layersOut].pid);\n      if (vx != 0 || vy != 0) {\n        scrollThisInstance = true;\n        /* jshint loopfunc:true */\n        autoScrolls[layersOut].pid = setInterval(function () {\n          // emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n          if (isFallback && this.layer === 0) {\n            Sortable.active._onTouchMove(touchEvt$1); // To move ghost if it is positioned absolutely\n          }\n          var scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n          var scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n          if (typeof scrollCustomFn === 'function') {\n            if (scrollCustomFn.call(Sortable.dragged.parentNode[expando], scrollOffsetX, scrollOffsetY, evt, touchEvt$1, autoScrolls[this.layer].el) !== 'continue') {\n              return;\n            }\n          }\n          scrollBy(autoScrolls[this.layer].el, scrollOffsetX, scrollOffsetY);\n        }.bind({\n          layer: layersOut\n        }), 24);\n      }\n    }\n    layersOut++;\n  } while (options.bubbleScroll && currentParent !== winScroller && (currentParent = getParentAutoScrollElement(currentParent, false)));\n  scrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n}, 30);\n\nvar drop = function drop(_ref) {\n  var originalEvent = _ref.originalEvent,\n    putSortable = _ref.putSortable,\n    dragEl = _ref.dragEl,\n    activeSortable = _ref.activeSortable,\n    dispatchSortableEvent = _ref.dispatchSortableEvent,\n    hideGhostForTarget = _ref.hideGhostForTarget,\n    unhideGhostForTarget = _ref.unhideGhostForTarget;\n  if (!originalEvent) return;\n  var toSortable = putSortable || activeSortable;\n  hideGhostForTarget();\n  var touch = originalEvent.changedTouches && originalEvent.changedTouches.length ? originalEvent.changedTouches[0] : originalEvent;\n  var target = document.elementFromPoint(touch.clientX, touch.clientY);\n  unhideGhostForTarget();\n  if (toSortable && !toSortable.el.contains(target)) {\n    dispatchSortableEvent('spill');\n    this.onSpill({\n      dragEl: dragEl,\n      putSortable: putSortable\n    });\n  }\n};\nfunction Revert() {}\nRevert.prototype = {\n  startIndex: null,\n  dragStart: function dragStart(_ref2) {\n    var oldDraggableIndex = _ref2.oldDraggableIndex;\n    this.startIndex = oldDraggableIndex;\n  },\n  onSpill: function onSpill(_ref3) {\n    var dragEl = _ref3.dragEl,\n      putSortable = _ref3.putSortable;\n    this.sortable.captureAnimationState();\n    if (putSortable) {\n      putSortable.captureAnimationState();\n    }\n    var nextSibling = getChild(this.sortable.el, this.startIndex, this.options);\n    if (nextSibling) {\n      this.sortable.el.insertBefore(dragEl, nextSibling);\n    } else {\n      this.sortable.el.appendChild(dragEl);\n    }\n    this.sortable.animateAll();\n    if (putSortable) {\n      putSortable.animateAll();\n    }\n  },\n  drop: drop\n};\n_extends(Revert, {\n  pluginName: 'revertOnSpill'\n});\nfunction Remove() {}\nRemove.prototype = {\n  onSpill: function onSpill(_ref4) {\n    var dragEl = _ref4.dragEl,\n      putSortable = _ref4.putSortable;\n    var parentSortable = putSortable || this.sortable;\n    parentSortable.captureAnimationState();\n    dragEl.parentNode && dragEl.parentNode.removeChild(dragEl);\n    parentSortable.animateAll();\n  },\n  drop: drop\n};\n_extends(Remove, {\n  pluginName: 'removeOnSpill'\n});\n\nvar lastSwapEl;\nfunction SwapPlugin() {\n  function Swap() {\n    this.defaults = {\n      swapClass: 'sortable-swap-highlight'\n    };\n  }\n  Swap.prototype = {\n    dragStart: function dragStart(_ref) {\n      var dragEl = _ref.dragEl;\n      lastSwapEl = dragEl;\n    },\n    dragOverValid: function dragOverValid(_ref2) {\n      var completed = _ref2.completed,\n        target = _ref2.target,\n        onMove = _ref2.onMove,\n        activeSortable = _ref2.activeSortable,\n        changed = _ref2.changed,\n        cancel = _ref2.cancel;\n      if (!activeSortable.options.swap) return;\n      var el = this.sortable.el,\n        options = this.options;\n      if (target && target !== el) {\n        var prevSwapEl = lastSwapEl;\n        if (onMove(target) !== false) {\n          toggleClass(target, options.swapClass, true);\n          lastSwapEl = target;\n        } else {\n          lastSwapEl = null;\n        }\n        if (prevSwapEl && prevSwapEl !== lastSwapEl) {\n          toggleClass(prevSwapEl, options.swapClass, false);\n        }\n      }\n      changed();\n      completed(true);\n      cancel();\n    },\n    drop: function drop(_ref3) {\n      var activeSortable = _ref3.activeSortable,\n        putSortable = _ref3.putSortable,\n        dragEl = _ref3.dragEl;\n      var toSortable = putSortable || this.sortable;\n      var options = this.options;\n      lastSwapEl && toggleClass(lastSwapEl, options.swapClass, false);\n      if (lastSwapEl && (options.swap || putSortable && putSortable.options.swap)) {\n        if (dragEl !== lastSwapEl) {\n          toSortable.captureAnimationState();\n          if (toSortable !== activeSortable) activeSortable.captureAnimationState();\n          swapNodes(dragEl, lastSwapEl);\n          toSortable.animateAll();\n          if (toSortable !== activeSortable) activeSortable.animateAll();\n        }\n      }\n    },\n    nulling: function nulling() {\n      lastSwapEl = null;\n    }\n  };\n  return _extends(Swap, {\n    pluginName: 'swap',\n    eventProperties: function eventProperties() {\n      return {\n        swapItem: lastSwapEl\n      };\n    }\n  });\n}\nfunction swapNodes(n1, n2) {\n  var p1 = n1.parentNode,\n    p2 = n2.parentNode,\n    i1,\n    i2;\n  if (!p1 || !p2 || p1.isEqualNode(n2) || p2.isEqualNode(n1)) return;\n  i1 = index(n1);\n  i2 = index(n2);\n  if (p1.isEqualNode(p2) && i1 < i2) {\n    i2++;\n  }\n  p1.insertBefore(n2, p1.children[i1]);\n  p2.insertBefore(n1, p2.children[i2]);\n}\n\nvar multiDragElements = [],\n  multiDragClones = [],\n  lastMultiDragSelect,\n  // for selection with modifier key down (SHIFT)\n  multiDragSortable,\n  initialFolding = false,\n  // Initial multi-drag fold when drag started\n  folding = false,\n  // Folding any other time\n  dragStarted = false,\n  dragEl$1,\n  clonesFromRect,\n  clonesHidden;\nfunction MultiDragPlugin() {\n  function MultiDrag(sortable) {\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n    if (!sortable.options.avoidImplicitDeselect) {\n      if (sortable.options.supportPointer) {\n        on(document, 'pointerup', this._deselectMultiDrag);\n      } else {\n        on(document, 'mouseup', this._deselectMultiDrag);\n        on(document, 'touchend', this._deselectMultiDrag);\n      }\n    }\n    on(document, 'keydown', this._checkKeyDown);\n    on(document, 'keyup', this._checkKeyUp);\n    this.defaults = {\n      selectedClass: 'sortable-selected',\n      multiDragKey: null,\n      avoidImplicitDeselect: false,\n      setData: function setData(dataTransfer, dragEl) {\n        var data = '';\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          multiDragElements.forEach(function (multiDragElement, i) {\n            data += (!i ? '' : ', ') + multiDragElement.textContent;\n          });\n        } else {\n          data = dragEl.textContent;\n        }\n        dataTransfer.setData('Text', data);\n      }\n    };\n  }\n  MultiDrag.prototype = {\n    multiDragKeyDown: false,\n    isMultiDrag: false,\n    delayStartGlobal: function delayStartGlobal(_ref) {\n      var dragged = _ref.dragEl;\n      dragEl$1 = dragged;\n    },\n    delayEnded: function delayEnded() {\n      this.isMultiDrag = ~multiDragElements.indexOf(dragEl$1);\n    },\n    setupClone: function setupClone(_ref2) {\n      var sortable = _ref2.sortable,\n        cancel = _ref2.cancel;\n      if (!this.isMultiDrag) return;\n      for (var i = 0; i < multiDragElements.length; i++) {\n        multiDragClones.push(clone(multiDragElements[i]));\n        multiDragClones[i].sortableIndex = multiDragElements[i].sortableIndex;\n        multiDragClones[i].draggable = false;\n        multiDragClones[i].style['will-change'] = '';\n        toggleClass(multiDragClones[i], this.options.selectedClass, false);\n        multiDragElements[i] === dragEl$1 && toggleClass(multiDragClones[i], this.options.chosenClass, false);\n      }\n      sortable._hideClone();\n      cancel();\n    },\n    clone: function clone(_ref3) {\n      var sortable = _ref3.sortable,\n        rootEl = _ref3.rootEl,\n        dispatchSortableEvent = _ref3.dispatchSortableEvent,\n        cancel = _ref3.cancel;\n      if (!this.isMultiDrag) return;\n      if (!this.options.removeCloneOnHide) {\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          insertMultiDragClones(true, rootEl);\n          dispatchSortableEvent('clone');\n          cancel();\n        }\n      }\n    },\n    showClone: function showClone(_ref4) {\n      var cloneNowShown = _ref4.cloneNowShown,\n        rootEl = _ref4.rootEl,\n        cancel = _ref4.cancel;\n      if (!this.isMultiDrag) return;\n      insertMultiDragClones(false, rootEl);\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', '');\n      });\n      cloneNowShown();\n      clonesHidden = false;\n      cancel();\n    },\n    hideClone: function hideClone(_ref5) {\n      var _this = this;\n      var sortable = _ref5.sortable,\n        cloneNowHidden = _ref5.cloneNowHidden,\n        cancel = _ref5.cancel;\n      if (!this.isMultiDrag) return;\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', 'none');\n        if (_this.options.removeCloneOnHide && clone.parentNode) {\n          clone.parentNode.removeChild(clone);\n        }\n      });\n      cloneNowHidden();\n      clonesHidden = true;\n      cancel();\n    },\n    dragStartGlobal: function dragStartGlobal(_ref6) {\n      var sortable = _ref6.sortable;\n      if (!this.isMultiDrag && multiDragSortable) {\n        multiDragSortable.multiDrag._deselectMultiDrag();\n      }\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.sortableIndex = index(multiDragElement);\n      });\n\n      // Sort multi-drag elements\n      multiDragElements = multiDragElements.sort(function (a, b) {\n        return a.sortableIndex - b.sortableIndex;\n      });\n      dragStarted = true;\n    },\n    dragStarted: function dragStarted(_ref7) {\n      var _this2 = this;\n      var sortable = _ref7.sortable;\n      if (!this.isMultiDrag) return;\n      if (this.options.sort) {\n        // Capture rects,\n        // hide multi drag elements (by positioning them absolute),\n        // set multi drag elements rects to dragRect,\n        // show multi drag elements,\n        // animate to rects,\n        // unset rects & remove from DOM\n\n        sortable.captureAnimationState();\n        if (this.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            css(multiDragElement, 'position', 'absolute');\n          });\n          var dragRect = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRect);\n          });\n          folding = true;\n          initialFolding = true;\n        }\n      }\n      sortable.animateAll(function () {\n        folding = false;\n        initialFolding = false;\n        if (_this2.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n        }\n\n        // Remove all auxiliary multidrag items from el, if sorting enabled\n        if (_this2.options.sort) {\n          removeMultiDragElements();\n        }\n      });\n    },\n    dragOver: function dragOver(_ref8) {\n      var target = _ref8.target,\n        completed = _ref8.completed,\n        cancel = _ref8.cancel;\n      if (folding && ~multiDragElements.indexOf(target)) {\n        completed(false);\n        cancel();\n      }\n    },\n    revert: function revert(_ref9) {\n      var fromSortable = _ref9.fromSortable,\n        rootEl = _ref9.rootEl,\n        sortable = _ref9.sortable,\n        dragRect = _ref9.dragRect;\n      if (multiDragElements.length > 1) {\n        // Setup unfold animation\n        multiDragElements.forEach(function (multiDragElement) {\n          sortable.addAnimationState({\n            target: multiDragElement,\n            rect: folding ? getRect(multiDragElement) : dragRect\n          });\n          unsetRect(multiDragElement);\n          multiDragElement.fromRect = dragRect;\n          fromSortable.removeAnimationState(multiDragElement);\n        });\n        folding = false;\n        insertMultiDragElements(!this.options.removeCloneOnHide, rootEl);\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref10) {\n      var sortable = _ref10.sortable,\n        isOwner = _ref10.isOwner,\n        insertion = _ref10.insertion,\n        activeSortable = _ref10.activeSortable,\n        parentEl = _ref10.parentEl,\n        putSortable = _ref10.putSortable;\n      var options = this.options;\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        }\n        initialFolding = false;\n        // If leaving sort:false root, or already folding - Fold to new location\n        if (options.animation && multiDragElements.length > 1 && (folding || !isOwner && !activeSortable.options.sort && !putSortable)) {\n          // Fold: Set all multi drag elements's rects to dragEl's rect when multi-drag elements are invisible\n          var dragRectAbsolute = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRectAbsolute);\n\n            // Move element(s) to end of parentEl so that it does not interfere with multi-drag clones insertion if they are inserted\n            // while folding, and so that we can capture them again because old sortable will no longer be fromSortable\n            parentEl.appendChild(multiDragElement);\n          });\n          folding = true;\n        }\n\n        // Clones must be shown (and check to remove multi drags) after folding when interfering multiDragElements are moved out\n        if (!isOwner) {\n          // Only remove if not folding (folding will remove them anyways)\n          if (!folding) {\n            removeMultiDragElements();\n          }\n          if (multiDragElements.length > 1) {\n            var clonesHiddenBefore = clonesHidden;\n            activeSortable._showClone(sortable);\n\n            // Unfold animation for clones if showing from hidden\n            if (activeSortable.options.animation && !clonesHidden && clonesHiddenBefore) {\n              multiDragClones.forEach(function (clone) {\n                activeSortable.addAnimationState({\n                  target: clone,\n                  rect: clonesFromRect\n                });\n                clone.fromRect = clonesFromRect;\n                clone.thisAnimationDuration = null;\n              });\n            }\n          } else {\n            activeSortable._showClone(sortable);\n          }\n        }\n      }\n    },\n    dragOverAnimationCapture: function dragOverAnimationCapture(_ref11) {\n      var dragRect = _ref11.dragRect,\n        isOwner = _ref11.isOwner,\n        activeSortable = _ref11.activeSortable;\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.thisAnimationDuration = null;\n      });\n      if (activeSortable.options.animation && !isOwner && activeSortable.multiDrag.isMultiDrag) {\n        clonesFromRect = _extends({}, dragRect);\n        var dragMatrix = matrix(dragEl$1, true);\n        clonesFromRect.top -= dragMatrix.f;\n        clonesFromRect.left -= dragMatrix.e;\n      }\n    },\n    dragOverAnimationComplete: function dragOverAnimationComplete() {\n      if (folding) {\n        folding = false;\n        removeMultiDragElements();\n      }\n    },\n    drop: function drop(_ref12) {\n      var evt = _ref12.originalEvent,\n        rootEl = _ref12.rootEl,\n        parentEl = _ref12.parentEl,\n        sortable = _ref12.sortable,\n        dispatchSortableEvent = _ref12.dispatchSortableEvent,\n        oldIndex = _ref12.oldIndex,\n        putSortable = _ref12.putSortable;\n      var toSortable = putSortable || this.sortable;\n      if (!evt) return;\n      var options = this.options,\n        children = parentEl.children;\n\n      // Multi-drag selection\n      if (!dragStarted) {\n        if (options.multiDragKey && !this.multiDragKeyDown) {\n          this._deselectMultiDrag();\n        }\n        toggleClass(dragEl$1, options.selectedClass, !~multiDragElements.indexOf(dragEl$1));\n        if (!~multiDragElements.indexOf(dragEl$1)) {\n          multiDragElements.push(dragEl$1);\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'select',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          });\n\n          // Modifier activated, select from last to dragEl\n          if (evt.shiftKey && lastMultiDragSelect && sortable.el.contains(lastMultiDragSelect)) {\n            var lastIndex = index(lastMultiDragSelect),\n              currentIndex = index(dragEl$1);\n            if (~lastIndex && ~currentIndex && lastIndex !== currentIndex) {\n              (function () {\n                // Must include lastMultiDragSelect (select it), in case modified selection from no selection\n                // (but previous selection existed)\n                var n, i;\n                if (currentIndex > lastIndex) {\n                  i = lastIndex;\n                  n = currentIndex;\n                } else {\n                  i = currentIndex;\n                  n = lastIndex + 1;\n                }\n                var filter = options.filter;\n                for (; i < n; i++) {\n                  if (~multiDragElements.indexOf(children[i])) continue;\n                  // Check if element is draggable\n                  if (!closest(children[i], options.draggable, parentEl, false)) continue;\n                  // Check if element is filtered\n                  var filtered = filter && (typeof filter === 'function' ? filter.call(sortable, evt, children[i], sortable) : filter.split(',').some(function (criteria) {\n                    return closest(children[i], criteria.trim(), parentEl, false);\n                  }));\n                  if (filtered) continue;\n                  toggleClass(children[i], options.selectedClass, true);\n                  multiDragElements.push(children[i]);\n                  dispatchEvent({\n                    sortable: sortable,\n                    rootEl: rootEl,\n                    name: 'select',\n                    targetEl: children[i],\n                    originalEvent: evt\n                  });\n                }\n              })();\n            }\n          } else {\n            lastMultiDragSelect = dragEl$1;\n          }\n          multiDragSortable = toSortable;\n        } else {\n          multiDragElements.splice(multiDragElements.indexOf(dragEl$1), 1);\n          lastMultiDragSelect = null;\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'deselect',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          });\n        }\n      }\n\n      // Multi-drag drop\n      if (dragStarted && this.isMultiDrag) {\n        folding = false;\n        // Do not \"unfold\" after around dragEl if reverted\n        if ((parentEl[expando].options.sort || parentEl !== rootEl) && multiDragElements.length > 1) {\n          var dragRect = getRect(dragEl$1),\n            multiDragIndex = index(dragEl$1, ':not(.' + this.options.selectedClass + ')');\n          if (!initialFolding && options.animation) dragEl$1.thisAnimationDuration = null;\n          toSortable.captureAnimationState();\n          if (!initialFolding) {\n            if (options.animation) {\n              dragEl$1.fromRect = dragRect;\n              multiDragElements.forEach(function (multiDragElement) {\n                multiDragElement.thisAnimationDuration = null;\n                if (multiDragElement !== dragEl$1) {\n                  var rect = folding ? getRect(multiDragElement) : dragRect;\n                  multiDragElement.fromRect = rect;\n\n                  // Prepare unfold animation\n                  toSortable.addAnimationState({\n                    target: multiDragElement,\n                    rect: rect\n                  });\n                }\n              });\n            }\n\n            // Multi drag elements are not necessarily removed from the DOM on drop, so to reinsert\n            // properly they must all be removed\n            removeMultiDragElements();\n            multiDragElements.forEach(function (multiDragElement) {\n              if (children[multiDragIndex]) {\n                parentEl.insertBefore(multiDragElement, children[multiDragIndex]);\n              } else {\n                parentEl.appendChild(multiDragElement);\n              }\n              multiDragIndex++;\n            });\n\n            // If initial folding is done, the elements may have changed position because they are now\n            // unfolding around dragEl, even though dragEl may not have his index changed, so update event\n            // must be fired here as Sortable will not.\n            if (oldIndex === index(dragEl$1)) {\n              var update = false;\n              multiDragElements.forEach(function (multiDragElement) {\n                if (multiDragElement.sortableIndex !== index(multiDragElement)) {\n                  update = true;\n                  return;\n                }\n              });\n              if (update) {\n                dispatchSortableEvent('update');\n                dispatchSortableEvent('sort');\n              }\n            }\n          }\n\n          // Must be done after capturing individual rects (scroll bar)\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n          toSortable.animateAll();\n        }\n        multiDragSortable = toSortable;\n      }\n\n      // Remove clones if necessary\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        multiDragClones.forEach(function (clone) {\n          clone.parentNode && clone.parentNode.removeChild(clone);\n        });\n      }\n    },\n    nullingGlobal: function nullingGlobal() {\n      this.isMultiDrag = dragStarted = false;\n      multiDragClones.length = 0;\n    },\n    destroyGlobal: function destroyGlobal() {\n      this._deselectMultiDrag();\n      off(document, 'pointerup', this._deselectMultiDrag);\n      off(document, 'mouseup', this._deselectMultiDrag);\n      off(document, 'touchend', this._deselectMultiDrag);\n      off(document, 'keydown', this._checkKeyDown);\n      off(document, 'keyup', this._checkKeyUp);\n    },\n    _deselectMultiDrag: function _deselectMultiDrag(evt) {\n      if (typeof dragStarted !== \"undefined\" && dragStarted) return;\n\n      // Only deselect if selection is in this sortable\n      if (multiDragSortable !== this.sortable) return;\n\n      // Only deselect if target is not item in this sortable\n      if (evt && closest(evt.target, this.options.draggable, this.sortable.el, false)) return;\n\n      // Only deselect if left click\n      if (evt && evt.button !== 0) return;\n      while (multiDragElements.length) {\n        var el = multiDragElements[0];\n        toggleClass(el, this.options.selectedClass, false);\n        multiDragElements.shift();\n        dispatchEvent({\n          sortable: this.sortable,\n          rootEl: this.sortable.el,\n          name: 'deselect',\n          targetEl: el,\n          originalEvent: evt\n        });\n      }\n    },\n    _checkKeyDown: function _checkKeyDown(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = true;\n      }\n    },\n    _checkKeyUp: function _checkKeyUp(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = false;\n      }\n    }\n  };\n  return _extends(MultiDrag, {\n    // Static methods & properties\n    pluginName: 'multiDrag',\n    utils: {\n      /**\r\n       * Selects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be selected\r\n       */\n      select: function select(el) {\n        var sortable = el.parentNode[expando];\n        if (!sortable || !sortable.options.multiDrag || ~multiDragElements.indexOf(el)) return;\n        if (multiDragSortable && multiDragSortable !== sortable) {\n          multiDragSortable.multiDrag._deselectMultiDrag();\n          multiDragSortable = sortable;\n        }\n        toggleClass(el, sortable.options.selectedClass, true);\n        multiDragElements.push(el);\n      },\n      /**\r\n       * Deselects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be deselected\r\n       */\n      deselect: function deselect(el) {\n        var sortable = el.parentNode[expando],\n          index = multiDragElements.indexOf(el);\n        if (!sortable || !sortable.options.multiDrag || !~index) return;\n        toggleClass(el, sortable.options.selectedClass, false);\n        multiDragElements.splice(index, 1);\n      }\n    },\n    eventProperties: function eventProperties() {\n      var _this3 = this;\n      var oldIndicies = [],\n        newIndicies = [];\n      multiDragElements.forEach(function (multiDragElement) {\n        oldIndicies.push({\n          multiDragElement: multiDragElement,\n          index: multiDragElement.sortableIndex\n        });\n\n        // multiDragElements will already be sorted if folding\n        var newIndex;\n        if (folding && multiDragElement !== dragEl$1) {\n          newIndex = -1;\n        } else if (folding) {\n          newIndex = index(multiDragElement, ':not(.' + _this3.options.selectedClass + ')');\n        } else {\n          newIndex = index(multiDragElement);\n        }\n        newIndicies.push({\n          multiDragElement: multiDragElement,\n          index: newIndex\n        });\n      });\n      return {\n        items: _toConsumableArray(multiDragElements),\n        clones: [].concat(multiDragClones),\n        oldIndicies: oldIndicies,\n        newIndicies: newIndicies\n      };\n    },\n    optionListeners: {\n      multiDragKey: function multiDragKey(key) {\n        key = key.toLowerCase();\n        if (key === 'ctrl') {\n          key = 'Control';\n        } else if (key.length > 1) {\n          key = key.charAt(0).toUpperCase() + key.substr(1);\n        }\n        return key;\n      }\n    }\n  });\n}\nfunction insertMultiDragElements(clonesInserted, rootEl) {\n  multiDragElements.forEach(function (multiDragElement, i) {\n    var target = rootEl.children[multiDragElement.sortableIndex + (clonesInserted ? Number(i) : 0)];\n    if (target) {\n      rootEl.insertBefore(multiDragElement, target);\n    } else {\n      rootEl.appendChild(multiDragElement);\n    }\n  });\n}\n\n/**\r\n * Insert multi-drag clones\r\n * @param  {[Boolean]} elementsInserted  Whether the multi-drag elements are inserted\r\n * @param  {HTMLElement} rootEl\r\n */\nfunction insertMultiDragClones(elementsInserted, rootEl) {\n  multiDragClones.forEach(function (clone, i) {\n    var target = rootEl.children[clone.sortableIndex + (elementsInserted ? Number(i) : 0)];\n    if (target) {\n      rootEl.insertBefore(clone, target);\n    } else {\n      rootEl.appendChild(clone);\n    }\n  });\n}\nfunction removeMultiDragElements() {\n  multiDragElements.forEach(function (multiDragElement) {\n    if (multiDragElement === dragEl$1) return;\n    multiDragElement.parentNode && multiDragElement.parentNode.removeChild(multiDragElement);\n  });\n}\n\nSortable.mount(new AutoScrollPlugin());\nSortable.mount(Remove, Revert);\n\nexport default Sortable;\nexport { MultiDragPlugin as MultiDrag, Sortable, SwapPlugin as Swap };\n", "import { Controller } from '@hotwired/stimulus'\nimport Sortable from 'sortablejs'\n\nexport default class extends Controller {\n    static values = {\n        groupId: String,\n        restaurantId: String,\n    }\n\n    connect() {\n        console.log('\uD83D\uDD25 Sortable controller connected!', this.element)\n        console.log('\uD83D\uDD25 Element class:', this.element.className)\n        console.log('\uD83D\uDD25 Child elements:', this.element.children.length)\n\n        // \u5217\u51FA\u6240\u6709\u53EF\u62D6\u66F3\u7684\u5143\u7D20\n        const draggableRows = this.element.querySelectorAll('[data-sortable-id]')\n        console.log('\uD83D\uDD25 Found draggable rows:', draggableRows.length)\n\n        draggableRows.forEach((row, index) => {\n            console.log(`\uD83D\uDD25 Row ${index}:`, row.dataset.sortableId, row.dataset.groupId)\n        })\n\n        this.initializeSortable()\n    }\n\n    disconnect() {\n        console.log('\uD83D\uDD25 Sortable controller disconnected')\n        if (this.sortable) {\n            this.sortable.destroy()\n        }\n    }\n\n    initializeSortable() {\n        console.log('\uD83D\uDD25 Initializing Sortable...')\n\n        try {\n            this.sortable = Sortable.create(this.element, {\n                group: 'table-rows',\n                animation: 150,\n                ghostClass: 'sortable-ghost',\n                chosenClass: 'sortable-chosen',\n                dragClass: 'sortable-drag',\n                handle: '.drag-handle, .group-drag-handle',\n                // \u79FB\u9664 filter\uFF0C\u5141\u8A31\u62D6\u66F3\u7FA4\u7D44\u6A19\u984C\u884C\n                preventOnFilter: false,\n\n                onStart: (evt) => {\n                    console.log('\uD83D\uDD25 Drag started!', evt.item)\n                    evt.item.style.opacity = '0.5'\n\n                    // \u5982\u679C\u62D6\u66F3\u7684\u662F\u7FA4\u7D44\u6A19\u984C\u884C\uFF0C\u6E96\u5099\u79FB\u52D5\u6574\u500B\u7FA4\u7D44\n                    if (evt.item.classList.contains('group-header')) {\n                        this.prepareGroupMove(evt.item)\n                    }\n                },\n\n                onEnd: (evt) => {\n                    console.log('\uD83D\uDD25 Drag ended!', evt.item)\n                    evt.item.style.opacity = '1'\n\n                    // \u5982\u679C\u62D6\u66F3\u7684\u662F\u7FA4\u7D44\u6A19\u984C\u884C\uFF0C\u5B8C\u6210\u7FA4\u7D44\u79FB\u52D5\n                    if (evt.item.classList.contains('group-header')) {\n                        this.completeGroupMove(evt.item)\n                    }\n\n                    this.handleDragEnd(evt)\n                },\n            })\n\n            console.log('\uD83D\uDD25 Sortable created successfully:', this.sortable)\n        } catch (error) {\n            console.error('\uD83D\uDD25 Error creating Sortable:', error)\n        }\n    }\n\n    handleDragEnd(evt) {\n        // \u6AA2\u67E5\u662F\u5426\u62D6\u66F3\u7684\u662F\u7FA4\u7D44\u6A19\u984C\u884C\n        if (evt.item.classList.contains('group-header')) {\n            console.log('\uD83D\uDD25 Group header drag detected')\n            this.handleGroupReorder()\n            return\n        }\n\n        // \u8655\u7406\u684C\u4F4D\u62D6\u66F3\n        const itemId = evt.item.dataset.sortableId\n        const oldGroupId = evt.item.dataset.groupId\n\n        console.log('\uD83D\uDD25 Handling drag end for item:', itemId, 'from group:', oldGroupId)\n\n        if (!itemId) {\n            console.error('\uD83D\uDD25 No item ID found!')\n            return\n        }\n\n        // \u627E\u5230\u76EE\u6A19\u7FA4\u7D44\n        const newGroupRow = this.findGroupForRow(evt.item)\n        const newGroupId = newGroupRow ? newGroupRow.id.replace('group_', '') : oldGroupId\n\n        console.log('\uD83D\uDD25 Moving from group:', oldGroupId, 'to group:', newGroupId)\n\n        if (oldGroupId !== newGroupId) {\n            console.log('\uD83D\uDD25 Cross-group move detected')\n            this.moveToGroup(itemId, newGroupId)\n            evt.item.dataset.groupId = newGroupId\n        } else {\n            console.log('\uD83D\uDD25 Same-group reorder detected')\n            this.updateOrder(newGroupId)\n        }\n    }\n\n    findGroupForRow(row) {\n        let currentElement = row.previousElementSibling\n\n        while (currentElement) {\n            if (currentElement.classList.contains('group-header')) {\n                console.log('\uD83D\uDD25 Found group header:', currentElement.id)\n                return currentElement\n            }\n            currentElement = currentElement.previousElementSibling\n        }\n\n        console.log('\uD83D\uDD25 No group header found for row')\n        return null\n    }\n\n    moveToGroup(itemId, newGroupId) {\n        console.log('\uD83D\uDD25 Moving item', itemId, 'to group', newGroupId)\n\n        const csrfToken = document.querySelector('[name=\"csrf-token\"]').content\n        const restaurantId = this.restaurantIdValue || document.body.dataset.restaurantId\n\n        fetch(`/admin/restaurants/${restaurantId}/tables/${itemId}/move_to_group`, {\n            method: 'PATCH',\n            headers: {\n                'Content-Type': 'application/json',\n                'X-CSRF-Token': csrfToken,\n            },\n            body: JSON.stringify({\n                table_group_id: newGroupId,\n            }),\n        })\n            .then((response) => {\n                console.log('\uD83D\uDD25 Move response:', response.status)\n                return response.json()\n            })\n            .then((data) => {\n                console.log('\uD83D\uDD25 Move result:', data)\n                if (data.success) {\n                    this.showFlash(data.message, 'success')\n                    // \u91CD\u65B0\u8A08\u7B97\u5169\u500B\u7FA4\u7D44\u7684\u512A\u5148\u9806\u5E8F\u6578\u5B57\n                    this.updatePriorityNumbers(data.old_group_id)\n                    this.updatePriorityNumbers(newGroupId)\n                } else {\n                    console.error('\uD83D\uDD25 Move failed:', data.message)\n                    this.showFlash('\u79FB\u52D5\u684C\u4F4D\u5931\u6557', 'error')\n                }\n            })\n            .catch((error) => {\n                console.error('\uD83D\uDD25 Move error:', error)\n                this.showFlash('\u7DB2\u8DEF\u932F\u8AA4\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66', 'error')\n            })\n    }\n\n    updateOrder(groupId) {\n        console.log('\uD83D\uDD25 Updating order for group:', groupId)\n\n        const groupRows = Array.from(this.element.querySelectorAll(`[data-group-id=\"${groupId}\"]`))\n        const orderedIds = groupRows.map((row) => row.dataset.sortableId)\n\n        console.log('\uD83D\uDD25 New order:', orderedIds)\n\n        if (!groupId || orderedIds.length === 0) {\n            console.log('\uD83D\uDD25 No group ID or empty order, skipping update')\n            return\n        }\n\n        const csrfToken = document.querySelector('[name=\"csrf-token\"]').content\n        const restaurantId = this.restaurantIdValue || document.body.dataset.restaurantId\n\n        fetch(`/admin/restaurants/${restaurantId}/table_groups/${groupId}/reorder_tables`, {\n            method: 'PATCH',\n            headers: {\n                'Content-Type': 'application/json',\n                'X-CSRF-Token': csrfToken,\n            },\n            body: JSON.stringify({\n                ordered_ids: orderedIds,\n            }),\n        })\n            .then((response) => {\n                console.log('\uD83D\uDD25 Reorder response:', response.status)\n                return response.json()\n            })\n            .then((data) => {\n                console.log('\uD83D\uDD25 Reorder result:', data)\n                if (data.success) {\n                    this.showFlash(data.message, 'success')\n                    this.updatePriorityNumbers(groupId)\n                } else {\n                    console.error('\uD83D\uDD25 Reorder failed:', data.message)\n                    this.showFlash('\u6392\u5E8F\u66F4\u65B0\u5931\u6557', 'error')\n                }\n            })\n            .catch((error) => {\n                console.error('\uD83D\uDD25 Reorder error:', error)\n                this.showFlash('\u7DB2\u8DEF\u932F\u8AA4\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66', 'error')\n            })\n    }\n\n    updatePriorityNumbers(groupId) {\n        // \u5148\u66F4\u65B0\u7FA4\u7D44\u5167\u7684\u9806\u5E8F\uFF0C\u7136\u5F8C\u91CD\u7B97\u5168\u57DF\u512A\u5148\u9806\u5E8F\n        this.updateGlobalPriorities()\n    }\n\n    handleGroupReorder() {\n        console.log('\uD83D\uDD25 Handling group reorder...')\n\n        // \u7372\u53D6\u7FA4\u7D44\u6A19\u984C\u884C\u7684\u65B0\u9806\u5E8F\n        const groupRows = Array.from(this.element.querySelectorAll('.group-header'))\n        const orderedGroupIds = groupRows.map((row) => row.dataset.groupSortableId)\n\n        console.log('\uD83D\uDD25 New group order:', orderedGroupIds)\n\n        if (orderedGroupIds.length === 0) {\n            console.log('\uD83D\uDD25 No groups found, skipping reorder')\n            return\n        }\n\n        this.updateGroupOrder(orderedGroupIds)\n    }\n\n    updateGroupOrder(orderedGroupIds) {\n        console.log('\uD83D\uDD25 Updating group order:', orderedGroupIds)\n\n        const csrfToken = document.querySelector('[name=\"csrf-token\"]').content\n        const restaurantId = this.restaurantIdValue\n\n        fetch(`/admin/restaurants/${restaurantId}/table_groups/reorder`, {\n            method: 'PATCH',\n            headers: {\n                'Content-Type': 'application/json',\n                'X-CSRF-Token': csrfToken,\n            },\n            body: JSON.stringify({\n                ordered_ids: orderedGroupIds,\n            }),\n        })\n            .then((response) => {\n                console.log('\uD83D\uDD25 Group reorder response:', response.status)\n                return response.json()\n            })\n            .then((data) => {\n                console.log('\uD83D\uDD25 Group reorder result:', data)\n                if (data.success) {\n                    this.showFlash(data.message, 'success')\n                    this.updateGlobalPriorities()\n                } else {\n                    console.error('\uD83D\uDD25 Group reorder failed:', data.message)\n                    this.showFlash('\u7FA4\u7D44\u6392\u5E8F\u66F4\u65B0\u5931\u6557', 'error')\n                }\n            })\n            .catch((error) => {\n                console.error('\uD83D\uDD25 Group reorder error:', error)\n                this.showFlash('\u7DB2\u8DEF\u932F\u8AA4\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66', 'error')\n            })\n    }\n\n    prepareGroupMove(groupRow) {\n        // \u6E96\u5099\u79FB\u52D5\u7FA4\u7D44\uFF1A\u6536\u96C6\u8A72\u7FA4\u7D44\u7684\u6240\u6709\u684C\u4F4D\u884C\n        const groupId = groupRow.id.replace('group_', '')\n        const tableRows = Array.from(this.element.querySelectorAll(`[data-group-id=\"${groupId}\"]`))\n\n        // \u5132\u5B58\u684C\u4F4D\u884C\u7684\u53C3\u8003\uFF0C\u4EE5\u4FBF\u5F8C\u7E8C\u79FB\u52D5\n        this.movingTableRows = tableRows\n\n        console.log('\uD83D\uDD25 Preparing to move group with', tableRows.length, 'tables')\n    }\n\n    completeGroupMove(groupRow) {\n        // \u5B8C\u6210\u7FA4\u7D44\u79FB\u52D5\uFF1A\u5C07\u684C\u4F4D\u884C\u79FB\u52D5\u5230\u7FA4\u7D44\u6A19\u984C\u884C\u4E4B\u5F8C\n        if (this.movingTableRows && this.movingTableRows.length > 0) {\n            const groupId = groupRow.id.replace('group_', '')\n            let insertAfter = groupRow\n\n            // \u5C07\u6BCF\u500B\u684C\u4F4D\u884C\u63D2\u5165\u5230\u6B63\u78BA\u4F4D\u7F6E\n            this.movingTableRows.forEach((tableRow) => {\n                // \u5C07\u684C\u4F4D\u884C\u79FB\u52D5\u5230\u7FA4\u7D44\u6A19\u984C\u884C\u4E4B\u5F8C\n                insertAfter.parentNode.insertBefore(tableRow, insertAfter.nextSibling)\n                insertAfter = tableRow\n            })\n\n            console.log('\uD83D\uDD25 Completed group move for', this.movingTableRows.length, 'tables')\n        }\n\n        // \u6E05\u7406\n        this.movingTableRows = null\n    }\n\n    updateGlobalPriorities() {\n        console.log('\uD83D\uDD25 Updating global priorities...')\n\n        // \u4F7F\u7528 Turbo Stream \u66F4\u65B0\u512A\u5148\u9806\u5E8F\u986F\u793A\uFF0C\u800C\u4E0D\u662F\u91CD\u65B0\u8F09\u5165\u9801\u9762\n        const csrfToken = document.querySelector('[name=\"csrf-token\"]').content\n        const restaurantId = this.restaurantIdValue\n\n        fetch(`/admin/restaurants/${restaurantId}/table_groups/refresh_priorities`, {\n            method: 'GET',\n            headers: {\n                'Accept': 'text/vnd.turbo-stream.html',\n                'X-CSRF-Token': csrfToken,\n            },\n        })\n        .then(response => response.text())\n        .then(html => {\n            // \u8B93 Turbo \u8655\u7406 Stream \u97FF\u61C9\n            Turbo.renderStreamMessage(html)\n        })\n        .catch(error => {\n            console.error('\uD83D\uDD25 Error refreshing priorities:', error)\n            // \u5982\u679C Turbo Stream \u5931\u6557\uFF0C\u624D\u4F7F\u7528\u91CD\u65B0\u8F09\u5165\u4F5C\u70BA\u5F8C\u5099\n            setTimeout(() => {\n                window.location.reload()\n            }, 500)\n        })\n    }\n\n    showFlash(message, type) {\n        const flashContainer = document.getElementById('flash_messages')\n        if (flashContainer) {\n            const alertClass =\n                type === 'success'\n                    ? 'bg-green-50 text-green-800 border border-green-200'\n                    : 'bg-red-50 text-red-800 border border-red-200'\n\n            const icon =\n                type === 'success'\n                    ? '<svg class=\"h-5 w-5 text-green-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clip-rule=\"evenodd\" /></svg>'\n                    : '<svg class=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clip-rule=\"evenodd\" /></svg>'\n\n            flashContainer.innerHTML = `\n                <div class=\"rounded-md p-4 mb-4 ${alertClass}\">\n                    <div class=\"flex\">\n                        <div class=\"flex-shrink-0\">${icon}</div>\n                        <div class=\"ml-3\">\n                            <p class=\"text-sm font-medium\">${message}</p>\n                        </div>\n                    </div>\n                </div>\n            `\n\n            setTimeout(() => {\n                flashContainer.innerHTML = ''\n            }, 3000)\n        }\n    }\n}\n", "import { Controller } from '@hotwired/stimulus'\n\nexport default class extends Controller {\n    static targets = [\n        'customHoursSection',\n        'periods',\n        'periodsContainer',\n        'period'\n    ]\n\n    static identifier = 'special-date-form'\n\n    connect() {\n        console.log('SpecialDateForm controller connected')\n        this.periodIndex = this.periodTargets.length\n    }\n\n    // \u5207\u63DB\u71DF\u696D\u6A21\u5F0F\u6642\u986F\u793A/\u96B1\u85CF\u81EA\u8A02\u6642\u6BB5\u5340\u584A\n    toggleMode(event) {\n        const operationMode = event.target.value\n        const customHoursSection = this.customHoursSectionTarget\n        \n        if (operationMode === 'custom_hours') {\n            customHoursSection.classList.remove('hidden')\n        } else {\n            customHoursSection.classList.add('hidden')\n        }\n    }\n\n    // \u65B0\u589E\u6642\u6BB5\n    addPeriod(event) {\n        event.preventDefault()\n        \n        const newPeriodHTML = this.generatePeriodHTML(this.periodIndex)\n        this.periodsTarget.insertAdjacentHTML('beforeend', newPeriodHTML)\n        this.periodIndex++\n    }\n\n    // \u79FB\u9664\u6642\u6BB5\n    removePeriod(event) {\n        event.preventDefault()\n        \n        const periodElement = event.target.closest('[data-special-date-form-target=\"period\"]')\n        \n        // \u78BA\u4FDD\u81F3\u5C11\u4FDD\u7559\u4E00\u500B\u6642\u6BB5\n        if (this.periodTargets.length > 1) {\n            periodElement.remove()\n        } else {\n            alert('\u81F3\u5C11\u9700\u8981\u4FDD\u7559\u4E00\u500B\u71DF\u696D\u6642\u6BB5')\n        }\n    }\n\n    // \u751F\u6210\u6642\u6BB5 HTML\n    generatePeriodHTML(index) {\n        return `\n            <div class=\"flex items-center space-x-3 mb-3 p-3 border border-gray-200 rounded-lg bg-gray-50\" \n                 data-special-date-form-target=\"period\">\n                <div class=\"flex-1 grid grid-cols-3 gap-3\">\n                    <div>\n                        <label class=\"block text-xs font-medium text-gray-600 mb-1\">\u958B\u59CB\u6642\u9593</label>\n                        <input type=\"time\" \n                               name=\"special_reservation_date[custom_periods][${index}][start_time]\" \n                               value=\"18:00\"\n                               class=\"block w-full text-sm border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500\">\n                    </div>\n                    \n                    <div>\n                        <label class=\"block text-xs font-medium text-gray-600 mb-1\">\u7D50\u675F\u6642\u9593</label>\n                        <input type=\"time\" \n                               name=\"special_reservation_date[custom_periods][${index}][end_time]\" \n                               value=\"21:00\"\n                               class=\"block w-full text-sm border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500\">\n                    </div>\n                    \n                    <div>\n                        <label class=\"block text-xs font-medium text-gray-600 mb-1\">\u9593\u9694 (\u5206\u9418)</label>\n                        <select name=\"special_reservation_date[custom_periods][${index}][interval_minutes]\" \n                                class=\"block w-full text-sm border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500\">\n                            <option value=\"30\">30\u5206\u9418</option>\n                            <option value=\"60\">60\u5206\u9418</option>\n                            <option value=\"90\">90\u5206\u9418</option>\n                            <option value=\"120\" selected>120\u5206\u9418</option>\n                            <option value=\"180\">180\u5206\u9418</option>\n                        </select>\n                    </div>\n                </div>\n                \n                <button type=\"button\" \n                        data-action=\"click->special-date-form#removePeriod\"\n                        class=\"flex-shrink-0 p-2 text-red-600 hover:text-red-800\"\n                        title=\"\u79FB\u9664\u6B64\u6642\u6BB5\">\n                    <svg class=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"></path>\n                    </svg>\n                </button>\n            </div>\n        `\n    }\n\n    // \u8868\u55AE\u9A57\u8B49\n    validateForm(event) {\n        const form = event.target\n        const operationMode = form.querySelector('select[name=\"special_reservation_date[operation_mode]\"]').value\n        const startDate = form.querySelector('input[name=\"special_reservation_date[start_date]\"]').value\n        const endDate = form.querySelector('input[name=\"special_reservation_date[end_date]\"]').value\n        \n        // \u57FA\u672C\u9A57\u8B49\n        if (!startDate || !endDate) {\n            alert('\u8ACB\u8A2D\u5B9A\u958B\u59CB\u548C\u7D50\u675F\u65E5\u671F')\n            event.preventDefault()\n            return false\n        }\n        \n        if (new Date(startDate) > new Date(endDate)) {\n            alert('\u7D50\u675F\u65E5\u671F\u4E0D\u80FD\u65E9\u65BC\u958B\u59CB\u65E5\u671F')\n            event.preventDefault()\n            return false\n        }\n        \n        // \u81EA\u8A02\u6642\u6BB5\u9A57\u8B49\n        if (operationMode === 'custom_hours') {\n            const periods = this.periodTargets\n            let hasValidPeriod = false\n            \n            periods.forEach(period => {\n                const startTimeInput = period.querySelector('input[name*=\"[start_time]\"]')\n                const endTimeInput = period.querySelector('input[name*=\"[end_time]\"]')\n\n                if (startTimeInput && endTimeInput) {\n                    const startTime = startTimeInput.value\n                    const endTime = endTimeInput.value\n\n                    if (startTime && endTime && startTime < endTime) {\n                        hasValidPeriod = true\n                    }\n                }\n            })\n            \n            if (!hasValidPeriod) {\n                alert('\u81EA\u8A02\u6642\u6BB5\u6A21\u5F0F\u4E0B\uFF0C\u81F3\u5C11\u9700\u8981\u8A2D\u5B9A\u4E00\u500B\u6709\u6548\u7684\u71DF\u696D\u6642\u6BB5')\n                event.preventDefault()\n                return false\n            }\n        }\n        \n        return true\n    }\n}", "import { Controller } from '@hotwired/stimulus'\n\nexport default class extends Controller {\n    static targets = []\n    static values = {\n        restaurantSlug: String\n    }\n\n    static identifier = 'special-dates'\n\n    connect() {\n        console.log('SpecialDates controller connected')\n        \n        // \u7D81\u5B9A\u4E8B\u4EF6\u76E3\u807D\u5668\n        this.boundTurboFrameLoad = this.handleTurboFrameLoad.bind(this)\n        this.boundBeforeStreamAction = this.handleBeforeStreamAction.bind(this)\n\n        // \u76E3\u807D Turbo Stream \u66F4\u65B0\u4E8B\u4EF6\n        document.addEventListener('turbo:frame-load', this.boundTurboFrameLoad)\n        document.addEventListener('turbo:before-stream-action', this.boundBeforeStreamAction)\n    }\n\n    disconnect() {\n        // \u79FB\u9664\u4E8B\u4EF6\u76E3\u807D\u5668\n        if (this.boundTurboFrameLoad) {\n            document.removeEventListener('turbo:frame-load', this.boundTurboFrameLoad)\n        }\n        if (this.boundBeforeStreamAction) {\n            document.removeEventListener('turbo:before-stream-action', this.boundBeforeStreamAction)\n        }\n    }\n\n    handleTurboFrameLoad(event) {\n        // \u7576 modal \u8F09\u5165\u5F8C\u7684\u8655\u7406\n        if (event.target.id === 'modal') {\n            console.log('Modal loaded for special dates')\n        }\n    }\n\n    handleBeforeStreamAction(event) {\n        // Turbo Stream \u52D5\u4F5C\u57F7\u884C\u524D\u7684\u8655\u7406\n        console.log('Turbo stream action:', event.detail.action)\n    }\n}", "import { Controller } from '@hotwired/stimulus'\n\nexport default class extends Controller {\n    static targets = ['container', 'frame']\n\n    connect() {\n        this.boundFrameLoad = this.frameLoad.bind(this)\n        this.boundFrameBeforeLoad = this.frameBeforeLoad.bind(this)\n\n        // \u76E3\u807D turbo-frame \u7684\u8F09\u5165\u4E8B\u4EF6\n        if (this.hasFrameTarget) {\n            this.frameTarget.addEventListener('turbo:frame-load', this.boundFrameLoad)\n            this.frameTarget.addEventListener('turbo:before-frame-render', this.boundFrameBeforeLoad)\n        }\n    }\n\n    disconnect() {\n        if (this.hasFrameTarget && this.boundFrameLoad) {\n            this.frameTarget.removeEventListener('turbo:frame-load', this.boundFrameLoad)\n            this.frameTarget.removeEventListener('turbo:before-frame-render', this.boundFrameBeforeLoad)\n        }\n    }\n\n    frameBeforeLoad(event) {\n        // \u5728\u8F09\u5165\u524D\u986F\u793A loading \u72C0\u614B\n        this.showLoading()\n    }\n\n    frameLoad(event) {\n        // \u7576 frame \u8F09\u5165\u5167\u5BB9\u6642\n        if (this.frameTarget.innerHTML.trim()) {\n            this.show()\n        } else {\n            this.hide()\n        }\n    }\n\n    show() {\n        if (this.hasContainerTarget) {\n            this.containerTarget.classList.remove('hidden')\n            // \u6DFB\u52A0\u52D5\u756B\u6548\u679C\n            requestAnimationFrame(() => {\n                this.containerTarget.classList.add('opacity-100')\n            })\n        }\n    }\n\n    hide() {\n        if (this.hasContainerTarget) {\n            this.containerTarget.classList.add('hidden')\n            this.containerTarget.classList.remove('opacity-100')\n        }\n    }\n\n    close() {\n        // \u6E05\u7A7A frame \u5167\u5BB9\u4E26\u96B1\u85CF modal\n        if (this.hasFrameTarget) {\n            this.frameTarget.innerHTML = ''\n        }\n        this.hide()\n    }\n\n    showLoading() {\n        if (this.hasFrameTarget) {\n            this.frameTarget.innerHTML = `\n        <div class=\"px-4 pt-5 pb-4 sm:p-6\">\n          <div class=\"text-center\">\n            <svg class=\"animate-spin h-8 w-8 text-gray-400 mx-auto\" fill=\"none\" viewBox=\"0 0 24 24\">\n              <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n              <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n            </svg>\n            <p class=\"mt-2 text-gray-500\">\u8F09\u5165\u4E2D...</p>\n          </div>\n        </div>\n      `\n        }\n        this.show()\n    }\n\n    // \u76E3\u807D\u9375\u76E4\u4E8B\u4EF6\n    keydown(event) {\n        if (event.key === 'Escape') {\n            this.close()\n        }\n    }\n\n    // \u8655\u7406\u80CC\u666F\u9EDE\u64CA\n    backgroundClick(event) {\n        if (event.target === event.currentTarget) {\n            this.close()\n        }\n    }\n}\n", "import { Controller } from \"@hotwired/stimulus\"\n\nexport default class extends Controller {\n  static values = { \n    restaurantSlug: String\n  }\n\n  connect() {\n    console.log(\"Weekly Business Periods Controller connected\")\n  }\n\n  editDay(event) {\n    const weekday = event.currentTarget.dataset.weekday\n    const url = `/admin/restaurant_settings/restaurants/${this.restaurantSlugValue}/weekly_day/${weekday}/edit`\n    \n    this.loadModal(url)\n  }\n\n  copyDay(event) {\n    const sourceWeekday = event.currentTarget.dataset.weekday\n    \n    // \u986F\u793A\u8907\u88FD\u9078\u9805\u5C0D\u8A71\u6846\n    this.showCopyDialog(sourceWeekday)\n  }\n\n  showCopyDialog(sourceWeekday) {\n    const targetOptions = [\n      { value: 0, label: '\u661F\u671F\u65E5' },\n      { value: 1, label: '\u661F\u671F\u4E00' },\n      { value: 2, label: '\u661F\u671F\u4E8C' },\n      { value: 3, label: '\u661F\u671F\u4E09' },\n      { value: 4, label: '\u661F\u671F\u56DB' },\n      { value: 5, label: '\u661F\u671F\u4E94' },\n      { value: 6, label: '\u661F\u671F\u516D' }\n    ].filter(option => option.value != sourceWeekday)\n\n    const checkboxes = targetOptions.map(option => \n      `<label class=\"flex items-center\">\n        <input type=\"checkbox\" name=\"target_weekdays\" value=\"${option.value}\" class=\"mr-2\">\n        ${option.label}\n      </label>`\n    ).join('')\n\n    const content = `\n      <div class=\"p-6\">\n        <h3 class=\"text-lg font-medium mb-4\">\u8907\u88FD\u71DF\u696D\u6642\u6BB5\u5230\u5176\u4ED6\u661F\u671F</h3>\n        <div class=\"space-y-2 mb-6\">\n          ${checkboxes}\n        </div>\n        <div class=\"flex justify-end space-x-3\">\n          <button type=\"button\" class=\"px-4 py-2 border border-gray-300 rounded text-sm\" onclick=\"this.closest('.modal').style.display='none'\">\u53D6\u6D88</button>\n          <button type=\"button\" class=\"px-4 py-2 bg-blue-600 text-white rounded text-sm\" onclick=\"this.submitCopy(${sourceWeekday})\">\u8907\u88FD</button>\n        </div>\n      </div>\n    `\n\n    this.showModal(content)\n  }\n\n  submitCopy(sourceWeekday) {\n    const selectedTargets = document.querySelectorAll('input[name=\"target_weekdays\"]:checked')\n    \n    if (selectedTargets.length === 0) {\n      alert('\u8ACB\u9078\u64C7\u8981\u8907\u88FD\u5230\u7684\u661F\u671F')\n      return\n    }\n\n    const form = document.createElement('form')\n    form.method = 'POST'\n    form.action = `/admin/restaurant_settings/restaurants/${this.restaurantSlugValue}/weekly_day/copy`\n    \n    const csrfToken = document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content')\n    form.innerHTML = `\n      <input type=\"hidden\" name=\"authenticity_token\" value=\"${csrfToken}\">\n      <input type=\"hidden\" name=\"source_weekday\" value=\"${sourceWeekday}\">\n    `\n\n    selectedTargets.forEach(checkbox => {\n      const input = document.createElement('input')\n      input.type = 'hidden'\n      input.name = 'target_weekdays[]'\n      input.value = checkbox.value\n      form.appendChild(input)\n    })\n\n    // \u95DC\u9589\u8907\u88FD\u6A21\u614B\u6846\n    this.closeModal()\n    \n    document.body.appendChild(form)\n    form.submit()\n  }\n\n  loadModal(url) {\n    fetch(url, {\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest',\n        'Accept': 'text/html'\n      }\n    })\n    .then(response => response.text())\n    .then(html => {\n      this.showModal(html)\n    })\n    .catch(error => {\n      console.error('Error loading modal:', error)\n    })\n  }\n\n  showModal(content) {\n    const modalContainer = document.getElementById('weekly-modal-container')\n    const modalContent = document.getElementById('weekly-modal-content')\n    \n    modalContent.innerHTML = content\n    modalContainer.classList.remove('hidden')\n    \n    // \u78BA\u4FDD PeriodEditorController \u5DF2\u8A3B\u518A\n    if (window.Stimulus && !window.Stimulus.router.modules.find(m => m.identifier === 'period-editor')) {\n      window.Stimulus.register(\"period-editor\", PeriodEditorController)\n    }\n    \n    // \u624B\u52D5\u9023\u63A5\u671F\u9593\u7DE8\u8F2F\u5668\u63A7\u5236\u5668\n    const periodEditorElement = modalContent.querySelector('[data-controller*=\"period-editor\"]')\n    if (periodEditorElement && window.Stimulus) {\n      window.Stimulus.application.start()\n    }\n  }\n\n  closeModal() {\n    const modalContainer = document.getElementById('weekly-modal-container')\n    modalContainer.classList.add('hidden')\n  }\n\n  saveWeeklyPeriods(event) {\n    const weekday = event.target.dataset.weekday\n    const operationMode = document.querySelector('input[name=\"operation_mode\"]:checked').value\n    \n    const form = document.createElement('form')\n    form.method = 'POST'\n    form.action = `/admin/restaurant_settings/restaurants/${this.restaurantSlugValue}/weekly_day/${weekday}`\n    \n    const csrfToken = document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content')\n    \n    // Add hidden method field for PATCH\n    form.innerHTML = `\n      <input type=\"hidden\" name=\"_method\" value=\"patch\">\n      <input type=\"hidden\" name=\"authenticity_token\" value=\"${csrfToken}\">\n      <input type=\"hidden\" name=\"operation_mode\" value=\"${operationMode}\">\n    `\n\n    if (operationMode === 'custom_hours') {\n      const periods = document.querySelectorAll('.period-item')\n      periods.forEach((period, index) => {\n        const startTime = period.querySelector('input[type=\"time\"]:first-of-type').value\n        const endTime = period.querySelector('input[type=\"time\"]:last-of-type').value\n        const interval = period.querySelector('select').value\n        \n        form.innerHTML += `\n          <input type=\"hidden\" name=\"periods[${index}][start_time]\" value=\"${startTime}\">\n          <input type=\"hidden\" name=\"periods[${index}][end_time]\" value=\"${endTime}\">\n          <input type=\"hidden\" name=\"periods[${index}][interval]\" value=\"${interval}\">\n        `\n      })\n    }\n\n    document.body.appendChild(form)\n    form.submit()\n  }\n}\n\n// \u671F\u9593\u7DE8\u8F2F\u5668\u63A7\u5236\u5668\nclass PeriodEditorController extends Controller {\n  modeChanged(event) {\n    const mode = event.target.value\n    const customSection = document.getElementById('custom-periods-section')\n    \n    if (mode === 'custom_hours') {\n      customSection.classList.remove('hidden')\n    } else {\n      customSection.classList.add('hidden')\n    }\n  }\n\n  timeChanged(event) {\n    this.updateTimeSlots(event.target.closest('.period-item'))\n  }\n\n  intervalChanged(event) {\n    this.updateTimeSlots(event.target.closest('.period-item'))\n  }\n\n  updateTimeSlots(periodItem) {\n    const startTime = periodItem.querySelector('input[type=\"time\"]:first-of-type').value\n    const endTime = periodItem.querySelector('input[type=\"time\"]:last-of-type').value\n    const interval = parseInt(periodItem.querySelector('select').value)\n    \n    if (startTime && endTime && interval) {\n      const slots = this.generateTimeSlots(startTime, endTime, interval)\n      const slotCount = periodItem.querySelector('.slot-count')\n      const slotPreview = periodItem.querySelector('.time-slots-preview')\n      \n      slotCount.textContent = slots.length\n      slotPreview.textContent = slots.join(', ')\n    }\n  }\n\n  generateTimeSlots(startTime, endTime, intervalMinutes) {\n    const slots = []\n    const start = new Date(`2000-01-01T${startTime}:00`)\n    const end = new Date(`2000-01-01T${endTime}:00`)\n    \n    let current = new Date(start)\n    while (current < end) {\n      slots.push(current.toLocaleTimeString('zh-TW', { hour: '2-digit', minute: '2-digit', hour12: false }))\n      current.setMinutes(current.getMinutes() + intervalMinutes)\n    }\n    \n    return slots\n  }\n\n  addPeriod() {\n    const periodsList = document.getElementById('periods-list')\n    const newIndex = periodsList.children.length\n    \n    const newPeriod = document.createElement('div')\n    newPeriod.className = 'period-item bg-gray-50 p-4 rounded-lg'\n    newPeriod.dataset.periodIndex = newIndex\n    newPeriod.innerHTML = `\n      <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <div class=\"md:col-span-2\">\n          <div class=\"flex items-center space-x-2\">\n            <input type=\"time\" name=\"periods[${newIndex}][start_time]\" value=\"18:00\" class=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\" data-action=\"change->period-editor#timeChanged\" />\n            <span class=\"text-gray-500\">\u81F3</span>\n            <input type=\"time\" name=\"periods[${newIndex}][end_time]\" value=\"20:00\" class=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\" data-action=\"change->period-editor#timeChanged\" />\n          </div>\n        </div>\n        <div>\n          <select name=\"periods[${newIndex}][interval]\" class=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\" data-action=\"change->period-editor#intervalChanged\">\n            <option value=\"15\">15 \u5206\u9418</option>\n            <option value=\"30\" selected>30 \u5206\u9418</option>\n            <option value=\"60\">60 \u5206\u9418</option>\n            <option value=\"90\">90 \u5206\u9418</option>\n            <option value=\"120\">120 \u5206\u9418</option>\n            <option value=\"150\">150 \u5206\u9418</option>\n            <option value=\"180\">180 \u5206\u9418</option>\n            <option value=\"210\">210 \u5206\u9418</option>\n            <option value=\"240\">240 \u5206\u9418</option>\n          </select>\n        </div>\n      </div>\n      <div class=\"mt-3\">\n        <div class=\"text-sm text-gray-600\">\u8A02\u4F4D\u6642\u9593\u9078\u9805\uFF1A\u5171 <span class=\"slot-count\">5</span> \u500B</div>\n        <div class=\"time-slots-preview mt-1 text-sm text-gray-500\">18:00, 18:30, 19:00, 19:30, 20:00</div>\n      </div>\n      <div class=\"mt-3 flex justify-end\">\n        <button type=\"button\" class=\"text-red-600 hover:text-red-800 text-sm\" data-action=\"click->period-editor#removePeriod\" data-period-index=\"${newIndex}\">\u79FB\u9664\u6B64\u6642\u6BB5</button>\n      </div>\n    `\n    \n    periodsList.appendChild(newPeriod)\n    this.updateTimeSlots(newPeriod)\n  }\n\n  removePeriod(event) {\n    const periodItem = event.target.closest('.period-item')\n    periodItem.remove()\n  }\n}\n\n// \u8A3B\u518A\u671F\u9593\u7DE8\u8F2F\u5668\u63A7\u5236\u5668\nif (window.Stimulus) {\n  window.Stimulus.register(\"period-editor\", PeriodEditorController)\n}", "import { Controller } from '@hotwired/stimulus'\n\n// This controller used to handle all the logic for adding, removing, and toggling operating hours.\n// This logic has been refactored to use Turbo Streams and server-side rendering,\n// following the Hotwire paradigm.\n//\n// - Adding a period is now a `button_to` that triggers a `create` action.\n// - Removing a period is now a `button_to` that triggers a `destroy` action.\n// - Toggling a day's status is a `button_to` that triggers a `toggle_day_status` action.\n// - Editing a period is handled by the `operating-hour-row-controller`.\n//\n// This controller is kept for now in case we need to add back any client-side\n// interactions that are not easily handled by Turbo Streams.\nexport default class extends Controller {\n  connect() {\n    console.log('OperatingHours controller connected (now simplified).')\n  }\n}", "import { Controller } from '@hotwired/stimulus'\n\nexport default class extends Controller {\n  static targets = ['timeDisplay', 'editForm']\n\n  connect() {\n    console.log('Operating Hour Row controller connected')\n  }\n\n  // \u986F\u793A\u7DE8\u8F2F\u8868\u55AE\n  showForm() {\n    const timeDisplay = this.element.querySelector('.text-gray-700')\n    const editForm = this.element.querySelector('form')\n    \n    if (timeDisplay && editForm) {\n      timeDisplay.classList.add('hidden')\n      editForm.classList.remove('hidden')\n      editForm.classList.add('flex')\n      \n      // \u805A\u7126\u5230\u7B2C\u4E00\u500B\u6642\u9593\u8F38\u5165\u6846\n      const firstTimeInput = editForm.querySelector('input[type=\"time\"]')\n      if (firstTimeInput) {\n        firstTimeInput.focus()\n      }\n    }\n  }\n\n  // \u53D6\u6D88\u7DE8\u8F2F\n  cancel() {\n    const timeDisplay = this.element.querySelector('.text-gray-700')\n    const editForm = this.element.querySelector('form')\n    \n    if (timeDisplay && editForm) {\n      timeDisplay.classList.remove('hidden')\n      editForm.classList.add('hidden')\n      editForm.classList.remove('flex')\n    }\n  }\n\n  // \u8868\u55AE\u63D0\u4EA4\u6210\u529F\u5F8C\u7684\u8655\u7406\n  formSuccess() {\n    // Turbo Stream \u6703\u81EA\u52D5\u8655\u7406\u66F4\u65B0\uFF0C\u9019\u88E1\u4E0D\u9700\u8981\u505A\u4EFB\u4F55\u4E8B\n    console.log('Form submitted successfully')\n  }\n}", "import { Controller } from '@hotwired/stimulus'\n\nexport default class extends Controller {\n  connect() {\n    console.log('Admin Operating Hours controller connected')\n  }\n\n  // \u65B0\u589E\u71DF\u696D\u6642\u9593 (\u901A\u7528)\n  addNew(event) {\n    console.log('Adding new operating hour')\n    // \u8868\u55AE\u6703\u81EA\u52D5\u63D0\u4EA4\uFF0CTurbo Stream \u6703\u8655\u7406\u56DE\u61C9\n  }\n\n  // \u65B0\u589E\u7279\u5B9A\u661F\u671F\u7684\u71DF\u696D\u6642\u9593\n  addNewForWeekday(event) {\n    const weekday = event.currentTarget.dataset.weekday\n    console.log(`Adding new operating hour for weekday: ${weekday}`)\n    // \u8868\u55AE\u6703\u81EA\u52D5\u63D0\u4EA4\uFF0CTurbo Stream \u6703\u8655\u7406\u56DE\u61C9\n  }\n}", "import { Controller } from '@hotwired/stimulus'\n\nexport default class extends Controller {\n  static values = { editMode: Boolean }\n\n  connect() {\n    console.log('Admin Operating Hour Row controller connected')\n    console.log('Edit mode:', this.editModeValue)\n    \n    // \u5982\u679C\u662F\u7DE8\u8F2F\u6A21\u5F0F\uFF0C\u81EA\u52D5\u805A\u7126\u5230\u7B2C\u4E00\u500B\u6642\u9593\u8F38\u5165\u6846\n    if (this.editModeValue) {\n      this.focusFirstTimeInput()\n    }\n  }\n\n  // \u9032\u5165\u7DE8\u8F2F\u6A21\u5F0F\n  enterEditMode(event) {\n    event.preventDefault()\n    console.log('Entering edit mode')\n    \n    // \u89F8\u767C Turbo \u8ACB\u6C42\u4F86\u7372\u53D6\u7DE8\u8F2F\u8868\u55AE\n    // \u9019\u5C07\u91CD\u65B0\u6E32\u67D3\u9019\u500B turbo_frame \u70BA\u7DE8\u8F2F\u6A21\u5F0F\n    const operatingHourId = this.getOperatingHourId()\n    if (operatingHourId) {\n      const editUrl = `/admin/restaurants/${this.getRestaurantId()}/operating_hours/${operatingHourId}/edit`\n      Turbo.visit(editUrl, { frame: this.getFrameId() })\n    }\n  }\n\n  // \u53D6\u6D88\u7DE8\u8F2F\n  cancelEdit(event) {\n    event.preventDefault()\n    console.log('Canceling edit')\n    \n    const operatingHourId = this.getOperatingHourId()\n    if (operatingHourId) {\n      // \u91CD\u65B0\u8F09\u5165\u986F\u793A\u6A21\u5F0F\n      const showUrl = `/admin/restaurants/${this.getRestaurantId()}/operating_hours/${operatingHourId}`\n      Turbo.visit(showUrl, { frame: this.getFrameId() })\n    } else {\n      // \u5982\u679C\u662F\u65B0\u7684\u8A18\u9304\uFF0C\u76F4\u63A5\u79FB\u9664\n      this.element.remove()\n    }\n  }\n\n  // \u8655\u7406\u8868\u55AE\u63D0\u4EA4\n  handleFormSubmit(event) {\n    console.log('Handling form submit')\n    // Turbo \u6703\u81EA\u52D5\u8655\u7406\u8868\u55AE\u63D0\u4EA4\u548C\u56DE\u61C9\n  }\n\n  // \u79C1\u6709\u65B9\u6CD5\uFF1A\u805A\u7126\u5230\u7B2C\u4E00\u500B\u6642\u9593\u8F38\u5165\u6846\n  focusFirstTimeInput() {\n    const firstTimeInput = this.element.querySelector('input[type=\"time\"]')\n    if (firstTimeInput) {\n      setTimeout(() => {\n        firstTimeInput.focus()\n      }, 100)\n    }\n  }\n\n  // \u79C1\u6709\u65B9\u6CD5\uFF1A\u7372\u53D6\u71DF\u696D\u6642\u9593 ID\n  getOperatingHourId() {\n    const frameElement = this.element.closest('turbo-frame')\n    if (frameElement && frameElement.id.startsWith('operating_hour_')) {\n      const match = frameElement.id.match(/operating_hour_(\\d+)/)\n      return match ? match[1] : null\n    }\n    return null\n  }\n\n  // \u79C1\u6709\u65B9\u6CD5\uFF1A\u7372\u53D6\u9910\u5EF3 ID (\u5F9E URL \u6216 data \u5C6C\u6027)\n  getRestaurantId() {\n    // \u5617\u8A66\u5F9E URL \u8DEF\u5F91\u4E2D\u63D0\u53D6\u9910\u5EF3 slug\n    const pathMatch = window.location.pathname.match(/\\/restaurants\\/([^\\/]+)/)\n    return pathMatch ? pathMatch[1] : null\n  }\n\n  // \u79C1\u6709\u65B9\u6CD5\uFF1A\u7372\u53D6 frame ID\n  getFrameId() {\n    const frameElement = this.element.closest('turbo-frame')\n    return frameElement ? frameElement.id : null\n  }\n}", "// This file is auto-generated by ./bin/rails stimulus:manifest:update\n// Run that command whenever you add a new controller or create them with\n// ./bin/rails generate stimulus controllerName\n\nimport { application } from './application'\n\nimport AdminReservationController from './admin_reservation_controller'\napplication.register('admin-reservation', AdminReservationController)\n\nimport CalendarController from './calendar_controller'\napplication.register('calendar', CalendarController)\n\nimport ClosureDatesController from './closure_dates_controller'\napplication.register('closure-dates', ClosureDatesController)\n\nimport ConfirmationController from './confirmation_controller'\napplication.register('confirmation', ConfirmationController)\n\nimport DailyReservationPeriodsController from './daily_reservation_periods_controller'\napplication.register('daily-reservation-periods', DailyReservationPeriodsController)\n\nimport DiningSettingsController from './dining_settings_controller'\napplication.register('dining-settings', DiningSettingsController)\n\nimport DropdownController from './dropdown_controller'\napplication.register('dropdown', DropdownController)\n\nimport FlashController from './flash_controller'\napplication.register('flash', FlashController)\n\nimport FormValidationController from './form_validation_controller'\napplication.register('form-validation', FormValidationController)\n\nimport HelloController from './hello_controller'\napplication.register('hello', HelloController)\n\nimport ModalController from './modal_controller'\napplication.register('modal', ModalController)\n\nimport PeriodEditorController from './period_editor_controller'\napplication.register('period-editor', PeriodEditorController)\n\nimport ReservationCalendarController from './reservation_calendar_controller'\napplication.register('reservation-calendar', ReservationCalendarController)\n\nimport ReservationController from './reservation_controller'\napplication.register('reservation', ReservationController)\n\nimport ReservationFormController from './reservation_form_controller'\napplication.register('reservation-form', ReservationFormController)\n\nimport ReservationPolicyController from './reservation_policy_controller'\napplication.register('reservation-policy', ReservationPolicyController)\n\nimport RestaurantInfoController from './restaurant_info_controller'\napplication.register('restaurant-info', RestaurantInfoController)\n\nimport RestaurantManagementController from './restaurant_management_controller'\napplication.register('restaurant-management', RestaurantManagementController)\n\nimport SidebarController from './sidebar_controller'\napplication.register('sidebar', SidebarController)\n\nimport SortableController from './sortable_controller'\napplication.register('sortable', SortableController)\n\nimport SpecialDateFormController from './special_date_form_controller'\napplication.register('special-date-form', SpecialDateFormController)\n\nimport SpecialDatesController from './special_dates_controller'\napplication.register('special-dates', SpecialDatesController)\n\nimport TurboModalController from './turbo_modal_controller'\napplication.register('turbo-modal', TurboModalController)\n\nimport WeeklyReservationPeriodsController from './weekly_reservation_periods_controller'\napplication.register('weekly-reservation-periods', WeeklyReservationPeriodsController)\n\nimport OperatingHoursController from './operating_hours_controller'\napplication.register('operating-hours', OperatingHoursController)\n\nimport OperatingHourRowController from './operating_hour_row_controller'\napplication.register('operating-hour-row', OperatingHourRowController)\n\nimport AdminOperatingHoursController from './admin_operating_hours_controller'\napplication.register('admin-operating-hours', AdminOperatingHoursController)\n\nimport AdminOperatingHourRowController from './admin_operating_hour_row_controller'\napplication.register('admin-operating-hour-row', AdminOperatingHourRowController)\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAO;AAAP;AAAA;AAAA,IAAO,mBAAQ;AAAA,MACb,QAAQ,OAAO,YAAY,cAAc,UAAU;AAAA,MACnD,WAAW,OAAO,cAAc,cAAc,YAAY;AAAA,IAC5D;AAAA;AAAA;;;ACHA,IAcO;AAdP;AAAA;AAAA;AAcA,IAAO,iBAAQ;AAAA,MACb,OAAO,UAAU;AACf,YAAI,KAAK,SAAS;AAChB,mBAAS,KAAK,KAAK,IAAI,CAAC;AACxB,2BAAS,OAAO,IAAI,iBAAiB,GAAG,QAAQ;AAAA,QAClD;AAAA,MACF;AAAA,IACF;AAAA;AAAA;;;ACrBA,IAKM,KAEA,cAEA,mBAkHC;AA3HP;AAAA;AAAA;AAKA,IAAM,MAAM,OAAM,oBAAI,KAAK,GAAE,QAAQ;AAErC,IAAM,eAAe,WAAS,IAAI,IAAI,QAAQ;AAE9C,IAAM,oBAAN,MAAwB;AAAA,MACtB,YAAY,YAAY;AACtB,aAAK,sBAAsB,KAAK,oBAAoB,KAAK,IAAI;AAC7D,aAAK,aAAa;AAClB,aAAK,oBAAoB;AAAA,MAC3B;AAAA,MAEA,QAAQ;AACN,YAAI,CAAC,KAAK,UAAU,GAAG;AACrB,eAAK,YAAY,IAAI;AACrB,iBAAO,KAAK;AACZ,eAAK,aAAa;AAClB,2BAAiB,oBAAoB,KAAK,mBAAmB;AAC7D,yBAAO,IAAI,gDAAgD,KAAK,YAAY,cAAc,IAAI;AAAA,QAChG;AAAA,MACF;AAAA,MAEA,OAAO;AACL,YAAI,KAAK,UAAU,GAAG;AACpB,eAAK,YAAY,IAAI;AACrB,eAAK,YAAY;AACjB,8BAAoB,oBAAoB,KAAK,mBAAmB;AAChE,yBAAO,IAAI,2BAA2B;AAAA,QACxC;AAAA,MACF;AAAA,MAEA,YAAY;AACV,eAAO,KAAK,aAAa,CAAC,KAAK;AAAA,MACjC;AAAA,MAEA,gBAAgB;AACd,aAAK,WAAW,IAAI;AAAA,MACtB;AAAA,MAEA,gBAAgB;AACd,aAAK,oBAAoB;AACzB,eAAO,KAAK;AACZ,uBAAO,IAAI,oCAAoC;AAAA,MACjD;AAAA,MAEA,mBAAmB;AACjB,aAAK,iBAAiB,IAAI;AAC1B,uBAAO,IAAI,uCAAuC;AAAA,MACpD;AAAA;AAAA,MAIA,eAAe;AACb,aAAK,YAAY;AACjB,aAAK,KAAK;AAAA,MACZ;AAAA,MAEA,cAAc;AACZ,qBAAa,KAAK,WAAW;AAAA,MAC/B;AAAA,MAEA,OAAO;AACL,aAAK,cAAc;AAAA,UAAW,MAAM;AAClC,iBAAK,iBAAiB;AACtB,iBAAK,KAAK;AAAA,UACZ;AAAA,UACE,KAAK,gBAAgB;AAAA,QAAC;AAAA,MAC1B;AAAA,MAEA,kBAAkB;AAChB,cAAM,EAAE,gBAAgB,wBAAwB,IAAI,KAAK;AACzD,cAAM,UAAU,KAAK,IAAI,IAAI,yBAAyB,KAAK,IAAI,KAAK,mBAAmB,EAAE,CAAC;AAC1F,cAAM,YAAY,KAAK,sBAAsB,IAAI,IAAM;AACvD,cAAM,SAAS,YAAY,KAAK,OAAO;AACvC,eAAO,iBAAiB,MAAO,WAAW,IAAI;AAAA,MAChD;AAAA,MAEA,mBAAmB;AACjB,YAAI,KAAK,kBAAkB,GAAG;AAC5B,yBAAO,IAAI,oEAAoE,KAAK,iBAAiB,kBAAkB,aAAa,KAAK,WAAW,CAAC,yBAAyB,KAAK,YAAY,cAAc,IAAI;AACjN,eAAK;AACL,cAAI,KAAK,qBAAqB,GAAG;AAC/B,2BAAO,IAAI,+EAA+E,aAAa,KAAK,cAAc,CAAC,IAAI;AAAA,UACjI,OAAO;AACL,2BAAO,IAAI,6BAA6B;AACxC,iBAAK,WAAW,OAAO;AAAA,UACzB;AAAA,QACF;AAAA,MACF;AAAA,MAEA,IAAI,cAAc;AAChB,eAAO,KAAK,WAAW,KAAK,WAAW,KAAK;AAAA,MAC9C;AAAA,MAEA,oBAAoB;AAClB,eAAO,aAAa,KAAK,WAAW,IAAI,KAAK,YAAY;AAAA,MAC3D;AAAA,MAEA,uBAAuB;AACrB,eAAO,KAAK,kBAAmB,aAAa,KAAK,cAAc,IAAI,KAAK,YAAY;AAAA,MACtF;AAAA,MAEA,sBAAsB;AACpB,YAAI,SAAS,oBAAoB,WAAW;AAC1C;AAAA,YAAW,MAAM;AACf,kBAAI,KAAK,kBAAkB,KAAK,CAAC,KAAK,WAAW,OAAO,GAAG;AACzD,+BAAO,IAAI,uFAAuF,SAAS,eAAe,EAAE;AAC5H,qBAAK,WAAW,OAAO;AAAA,cACzB;AAAA,YACF;AAAA,YACE;AAAA,UAAG;AAAA,QACP;AAAA,MACF;AAAA,IAEF;AAEA,sBAAkB,iBAAiB;AACnC,sBAAkB,0BAA0B;AAE5C,IAAO,6BAAQ;AAAA;AAAA;;;AC3Hf,IAAO;AAAP;AAAA;AAAA,IAAO,mBAAQ;AAAA,MACb,iBAAiB;AAAA,QACf,WAAW;AAAA,QACX,cAAc;AAAA,QACd,QAAQ;AAAA,QACR,gBAAgB;AAAA,QAChB,aAAa;AAAA,MACf;AAAA,MACA,sBAAsB;AAAA,QACpB,gBAAgB;AAAA,QAChB,mBAAmB;AAAA,QACnB,kBAAkB;AAAA,QAClB,UAAU;AAAA,MACZ;AAAA,MACA,sBAAsB;AAAA,MACtB,aAAa;AAAA,QACX;AAAA,QACA;AAAA,MACF;AAAA,IACF;AAAA;AAAA;;;ACnBA,IAOO,eAAe,WAChB,oBAEA,SAEA,YAwKC;AApLP;AAAA;AAAA;AACA;AACA;AACA;AAIA,KAAM,EAAC,eAAe,cAAa;AACnC,IAAM,qBAAqB,UAAU,MAAM,GAAG,UAAU,SAAS,CAAC;AAElE,IAAM,UAAU,CAAC,EAAE;AAEnB,IAAM,aAAN,MAAiB;AAAA,MACf,YAAYA,WAAU;AACpB,aAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAC/B,aAAK,WAAWA;AAChB,aAAK,gBAAgB,KAAK,SAAS;AACnC,aAAK,UAAU,IAAI,2BAAkB,IAAI;AACzC,aAAK,eAAe;AAAA,MACtB;AAAA,MAEA,KAAK,MAAM;AACT,YAAI,KAAK,OAAO,GAAG;AACjB,eAAK,UAAU,KAAK,KAAK,UAAU,IAAI,CAAC;AACxC,iBAAO;AAAA,QACT,OAAO;AACL,iBAAO;AAAA,QACT;AAAA,MACF;AAAA,MAEA,OAAO;AACL,YAAI,KAAK,SAAS,GAAG;AACnB,yBAAO,IAAI,uDAAuD,KAAK,SAAS,CAAC,EAAE;AACnF,iBAAO;AAAA,QACT,OAAO;AACL,gBAAM,kBAAkB,CAAC,GAAG,WAAW,GAAG,KAAK,SAAS,gBAAgB,CAAC,CAAC;AAC1E,yBAAO,IAAI,uCAAuC,KAAK,SAAS,CAAC,mBAAmB,eAAe,EAAE;AACrG,cAAI,KAAK,WAAW;AAAE,iBAAK,uBAAuB;AAAA,UAAE;AACpD,eAAK,YAAY,IAAI,iBAAS,UAAU,KAAK,SAAS,KAAK,eAAe;AAC1E,eAAK,qBAAqB;AAC1B,eAAK,QAAQ,MAAM;AACnB,iBAAO;AAAA,QACT;AAAA,MACF;AAAA,MAEA,MAAM,EAAC,eAAc,IAAI,EAAC,gBAAgB,KAAI,GAAG;AAC/C,YAAI,CAAC,gBAAgB;AAAE,eAAK,QAAQ,KAAK;AAAA,QAAE;AAE3C,YAAI,KAAK,OAAO,GAAG;AACjB,iBAAO,KAAK,UAAU,MAAM;AAAA,QAC9B;AAAA,MACF;AAAA,MAEA,SAAS;AACP,uBAAO,IAAI,yCAAyC,KAAK,SAAS,CAAC,EAAE;AACrE,YAAI,KAAK,SAAS,GAAG;AACnB,cAAI;AACF,mBAAO,KAAK,MAAM;AAAA,UACpB,SAASC,QAAO;AACd,2BAAO,IAAI,8BAA8BA,MAAK;AAAA,UAChD,UACA;AACE,2BAAO,IAAI,0BAA0B,KAAK,YAAY,WAAW,IAAI;AACrE,uBAAW,KAAK,MAAM,KAAK,YAAY,WAAW;AAAA,UACpD;AAAA,QACF,OAAO;AACL,iBAAO,KAAK,KAAK;AAAA,QACnB;AAAA,MACF;AAAA,MAEA,cAAc;AACZ,YAAI,KAAK,WAAW;AAClB,iBAAO,KAAK,UAAU;AAAA,QACxB;AAAA,MACF;AAAA,MAEA,SAAS;AACP,eAAO,KAAK,QAAQ,MAAM;AAAA,MAC5B;AAAA,MAEA,WAAW;AACT,eAAO,KAAK,QAAQ,QAAQ,YAAY;AAAA,MAC1C;AAAA,MAEA,mBAAmB;AACjB,eAAO,KAAK,QAAQ,oBAAoB;AAAA,MAC1C;AAAA;AAAA,MAIA,sBAAsB;AACpB,eAAO,QAAQ,KAAK,oBAAoB,KAAK,YAAY,CAAC,KAAK;AAAA,MACjE;AAAA,MAEA,WAAW,QAAQ;AACjB,eAAO,QAAQ,KAAK,QAAQ,KAAK,SAAS,CAAC,KAAK;AAAA,MAClD;AAAA,MAEA,WAAW;AACT,YAAI,KAAK,WAAW;AAClB,mBAAS,SAAS,iBAAS,WAAW;AACpC,gBAAI,iBAAS,UAAU,KAAK,MAAM,KAAK,UAAU,YAAY;AAC3D,qBAAO,MAAM,YAAY;AAAA,YAC3B;AAAA,UACF;AAAA,QACF;AACA,eAAO;AAAA,MACT;AAAA,MAEA,uBAAuB;AACrB,iBAAS,aAAa,KAAK,QAAQ;AACjC,gBAAM,UAAU,KAAK,OAAO,SAAS,EAAE,KAAK,IAAI;AAChD,eAAK,UAAU,KAAK,SAAS,EAAE,IAAI;AAAA,QACrC;AAAA,MACF;AAAA,MAEA,yBAAyB;AACvB,iBAAS,aAAa,KAAK,QAAQ;AACjC,eAAK,UAAU,KAAK,SAAS,EAAE,IAAI,WAAW;AAAA,UAAC;AAAA,QACjD;AAAA,MACF;AAAA,IAEF;AAEA,eAAW,cAAc;AAEzB,eAAW,UAAU,SAAS;AAAA,MAC5B,QAAQ,OAAO;AACb,YAAI,CAAC,KAAK,oBAAoB,GAAG;AAAE;AAAA,QAAO;AAC1C,cAAM,EAAC,YAAY,SAAS,QAAQ,WAAW,KAAI,IAAI,KAAK,MAAM,MAAM,IAAI;AAC5E,aAAK,QAAQ,cAAc;AAC3B,gBAAQ,MAAM;AAAA,UACZ,KAAK,cAAc;AACjB,gBAAI,KAAK,iBAAiB,GAAG;AAC3B,mBAAK,qBAAqB;AAAA,YAC5B;AACA,iBAAK,QAAQ,cAAc;AAC3B,mBAAO,KAAK,cAAc,OAAO;AAAA,UACnC,KAAK,cAAc;AACjB,2BAAO,IAAI,0BAA0B,MAAM,EAAE;AAC7C,mBAAO,KAAK,MAAM,EAAC,gBAAgB,UAAS,CAAC;AAAA,UAC/C,KAAK,cAAc;AACjB,mBAAO;AAAA,UACT,KAAK,cAAc;AACjB,iBAAK,cAAc,oBAAoB,UAAU;AACjD,gBAAI,KAAK,oBAAoB;AAC3B,mBAAK,qBAAqB;AAC1B,qBAAO,KAAK,cAAc,OAAO,YAAY,aAAa,EAAC,aAAa,KAAI,CAAC;AAAA,YAC/E,OAAO;AACL,qBAAO,KAAK,cAAc,OAAO,YAAY,aAAa,EAAC,aAAa,MAAK,CAAC;AAAA,YAChF;AAAA,UACF,KAAK,cAAc;AACjB,mBAAO,KAAK,cAAc,OAAO,UAAU;AAAA,UAC7C;AACE,mBAAO,KAAK,cAAc,OAAO,YAAY,YAAY,OAAO;AAAA,QACpE;AAAA,MACF;AAAA,MAEA,OAAO;AACL,uBAAO,IAAI,kCAAkC,KAAK,YAAY,CAAC,eAAe;AAC9E,aAAK,eAAe;AACpB,YAAI,CAAC,KAAK,oBAAoB,GAAG;AAC/B,yBAAO,IAAI,8DAA8D;AACzE,iBAAO,KAAK,MAAM,EAAC,gBAAgB,MAAK,CAAC;AAAA,QAC3C;AAAA,MACF;AAAA,MAEA,MAAM,OAAO;AACX,uBAAO,IAAI,yBAAyB;AACpC,YAAI,KAAK,cAAc;AAAE;AAAA,QAAO;AAChC,aAAK,eAAe;AACpB,aAAK,QAAQ,iBAAiB;AAC9B,eAAO,KAAK,cAAc,UAAU,gBAAgB,EAAC,sBAAsB,KAAK,QAAQ,UAAU,EAAC,CAAC;AAAA,MACtG;AAAA,MAEA,QAAQ;AACN,uBAAO,IAAI,yBAAyB;AAAA,MACtC;AAAA,IACF;AAEA,IAAO,qBAAQ;AAAA;AAAA;;;ACpLf,IA0DM,QAUe;AApErB;AAAA;AA0DA,IAAM,SAAS,SAAS,QAAQ,YAAY;AAC1C,UAAI,cAAc,MAAM;AACtB,iBAAS,OAAO,YAAY;AAC1B,gBAAM,QAAQ,WAAW,GAAG;AAC5B,iBAAO,GAAG,IAAI;AAAA,QAChB;AAAA,MACF;AACA,aAAO;AAAA,IACT;AAEA,IAAqB,eAArB,MAAkC;AAAA,MAChC,YAAYC,WAAU,SAAS,CAAC,GAAG,OAAO;AACxC,aAAK,WAAWA;AAChB,aAAK,aAAa,KAAK,UAAU,MAAM;AACvC,eAAO,MAAM,KAAK;AAAA,MACpB;AAAA;AAAA,MAGA,QAAQ,QAAQ,OAAO,CAAC,GAAG;AACzB,aAAK,SAAS;AACd,eAAO,KAAK,KAAK,IAAI;AAAA,MACvB;AAAA,MAEA,KAAK,MAAM;AACT,eAAO,KAAK,SAAS,KAAK,EAAC,SAAS,WAAW,YAAY,KAAK,YAAY,MAAM,KAAK,UAAU,IAAI,EAAC,CAAC;AAAA,MACzG;AAAA,MAEA,cAAc;AACZ,eAAO,KAAK,SAAS,cAAc,OAAO,IAAI;AAAA,MAChD;AAAA,IACF;AAAA;AAAA;;;ACxFA,IAKM,uBA4CC;AAjDP;AAAA;AAAA;AAKA,IAAM,wBAAN,MAA4B;AAAA,MAC1B,YAAY,eAAe;AACzB,aAAK,gBAAgB;AACrB,aAAK,uBAAuB,CAAC;AAAA,MAC/B;AAAA,MAEA,UAAU,cAAc;AACtB,YAAG,KAAK,qBAAqB,QAAQ,YAAY,KAAK,IAAG;AACvD,yBAAO,IAAI,sCAAsC,aAAa,UAAU,EAAE;AAC1E,eAAK,qBAAqB,KAAK,YAAY;AAAA,QAC7C,OACK;AACH,yBAAO,IAAI,8CAA8C,aAAa,UAAU,EAAE;AAAA,QACpF;AACA,aAAK,kBAAkB;AAAA,MACzB;AAAA,MAEA,OAAO,cAAc;AACnB,uBAAO,IAAI,oCAAoC,aAAa,UAAU,EAAE;AACxE,aAAK,uBAAwB,KAAK,qBAAqB,OAAO,CAAC,MAAM,MAAM,YAAY;AAAA,MACzF;AAAA,MAEA,oBAAoB;AAClB,aAAK,iBAAiB;AACtB,aAAK,iBAAiB;AAAA,MACxB;AAAA,MAEA,mBAAmB;AACjB,qBAAa,KAAK,YAAY;AAAA,MAChC;AAAA,MAEA,mBAAmB;AACjB,aAAK,eAAe;AAAA,UAAW,MAAM;AACnC,gBAAI,KAAK,iBAAiB,OAAO,KAAK,cAAc,cAAe,YAAY;AAC7E,mBAAK,qBAAqB,IAAI,CAAC,iBAAiB;AAC9C,+BAAO,IAAI,uCAAuC,aAAa,UAAU,EAAE;AAC3E,qBAAK,cAAc,UAAU,YAAY;AAAA,cAC3C,CAAC;AAAA,YACH;AAAA,UACF;AAAA,UACE;AAAA,QAAG;AAAA,MACP;AAAA,IACF;AAEA,IAAO,iCAAQ;AAAA;AAAA;;;ACjDf,IAcqB;AAdrB;AAAA;AAAA;AACA;AACA;AAYA,IAAqB,gBAArB,MAAmC;AAAA,MACjC,YAAYC,WAAU;AACpB,aAAK,WAAWA;AAChB,aAAK,YAAY,IAAI,+BAAsB,IAAI;AAC/C,aAAK,gBAAgB,CAAC;AAAA,MACxB;AAAA,MAEA,OAAO,aAAa,OAAO;AACzB,cAAM,UAAU;AAChB,cAAM,SAAS,OAAO,YAAY,WAAW,UAAU,EAAC,QAAO;AAC/D,cAAM,eAAe,IAAI,aAAa,KAAK,UAAU,QAAQ,KAAK;AAClE,eAAO,KAAK,IAAI,YAAY;AAAA,MAC9B;AAAA;AAAA,MAIA,IAAI,cAAc;AAChB,aAAK,cAAc,KAAK,YAAY;AACpC,aAAK,SAAS,uBAAuB;AACrC,aAAK,OAAO,cAAc,aAAa;AACvC,aAAK,UAAU,YAAY;AAC3B,eAAO;AAAA,MACT;AAAA,MAEA,OAAO,cAAc;AACnB,aAAK,OAAO,YAAY;AACxB,YAAI,CAAC,KAAK,QAAQ,aAAa,UAAU,EAAE,QAAQ;AACjD,eAAK,YAAY,cAAc,aAAa;AAAA,QAC9C;AACA,eAAO;AAAA,MACT;AAAA,MAEA,OAAO,YAAY;AACjB,eAAO,KAAK,QAAQ,UAAU,EAAE,IAAI,CAAC,iBAAiB;AACpD,eAAK,OAAO,YAAY;AACxB,eAAK,OAAO,cAAc,UAAU;AACpC,iBAAO;AAAA,QACT,CAAC;AAAA,MACH;AAAA,MAEA,OAAO,cAAc;AACnB,aAAK,UAAU,OAAO,YAAY;AAClC,aAAK,gBAAiB,KAAK,cAAc,OAAO,CAAC,MAAM,MAAM,YAAY;AACzE,eAAO;AAAA,MACT;AAAA,MAEA,QAAQ,YAAY;AAClB,eAAO,KAAK,cAAc,OAAO,CAAC,MAAM,EAAE,eAAe,UAAU;AAAA,MACrE;AAAA,MAEA,SAAS;AACP,eAAO,KAAK,cAAc,IAAI,CAAC,iBAC7B,KAAK,UAAU,YAAY,CAAC;AAAA,MAChC;AAAA,MAEA,UAAU,iBAAiB,MAAM;AAC/B,eAAO,KAAK,cAAc,IAAI,CAAC,iBAC7B,KAAK,OAAO,cAAc,cAAc,GAAG,IAAI,CAAC;AAAA,MACpD;AAAA,MAEA,OAAO,cAAc,iBAAiB,MAAM;AAC1C,YAAI;AACJ,YAAI,OAAO,iBAAiB,UAAU;AACpC,0BAAgB,KAAK,QAAQ,YAAY;AAAA,QAC3C,OAAO;AACL,0BAAgB,CAAC,YAAY;AAAA,QAC/B;AAEA,eAAO,cAAc,IAAI,CAACC,kBACvB,OAAOA,cAAa,YAAY,MAAM,aAAaA,cAAa,YAAY,EAAE,GAAG,IAAI,IAAI,MAAU;AAAA,MACxG;AAAA,MAEA,UAAU,cAAc;AACtB,YAAI,KAAK,YAAY,cAAc,WAAW,GAAG;AAC/C,eAAK,UAAU,UAAU,YAAY;AAAA,QACvC;AAAA,MACF;AAAA,MAEA,oBAAoB,YAAY;AAC9B,uBAAO,IAAI,0BAA0B,UAAU,EAAE;AACjD,aAAK,QAAQ,UAAU,EAAE,IAAI,CAAC,iBAC5B,KAAK,UAAU,OAAO,YAAY,CAAC;AAAA,MACvC;AAAA,MAEA,YAAY,cAAc,SAAS;AACjC,cAAM,EAAC,WAAU,IAAI;AACrB,eAAO,KAAK,SAAS,KAAK,EAAC,SAAS,WAAU,CAAC;AAAA,MACjD;AAAA,IACF;AAAA;AAAA;;;ACtCO,SAAS,mBAAmB,KAAK;AACtC,MAAI,OAAO,QAAQ,YAAY;AAC7B,UAAM,IAAI;AAAA,EACZ;AAEA,MAAI,OAAO,CAAC,UAAU,KAAK,GAAG,GAAG;AAC/B,UAAM,IAAI,SAAS,cAAc,GAAG;AACpC,MAAE,OAAO;AAET,MAAE,OAAO,EAAE;AACX,MAAE,WAAW,EAAE,SAAS,QAAQ,QAAQ,IAAI;AAC5C,WAAO,EAAE;AAAA,EACX,OAAO;AACL,WAAO;AAAA,EACT;AACF;AA/EA,IA6BqB;AA7BrB;AAAA;AAAA;AACA;AA4BA,IAAqB,WAArB,MAA8B;AAAA,MAC5B,YAAY,KAAK;AACf,aAAK,OAAO;AACZ,aAAK,gBAAgB,IAAI,cAAc,IAAI;AAC3C,aAAK,aAAa,IAAI,mBAAW,IAAI;AACrC,aAAK,eAAe,CAAC;AAAA,MACvB;AAAA,MAEA,IAAI,MAAM;AACR,eAAO,mBAAmB,KAAK,IAAI;AAAA,MACrC;AAAA,MAEA,KAAK,MAAM;AACT,eAAO,KAAK,WAAW,KAAK,IAAI;AAAA,MAClC;AAAA,MAEA,UAAU;AACR,eAAO,KAAK,WAAW,KAAK;AAAA,MAC9B;AAAA,MAEA,aAAa;AACX,eAAO,KAAK,WAAW,MAAM,EAAC,gBAAgB,MAAK,CAAC;AAAA,MACtD;AAAA,MAEA,yBAAyB;AACvB,YAAI,CAAC,KAAK,WAAW,SAAS,GAAG;AAC/B,iBAAO,KAAK,WAAW,KAAK;AAAA,QAC9B;AAAA,MACF;AAAA,MAEA,eAAe,aAAa;AAC1B,aAAK,eAAe,CAAC,GAAG,KAAK,cAAc,WAAW;AAAA,MACxD;AAAA,IACF;AAAA;AAAA;;;AC9DA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuBO,SAAS,eAAe,MAAM,UAAU,KAAK,KAAK,iBAAS,oBAAoB;AACpF,SAAO,IAAI,SAAS,GAAG;AACzB;AAEO,SAAS,UAAU,MAAM;AAC9B,QAAM,UAAU,SAAS,KAAK,cAAc,2BAA2B,IAAI,IAAI;AAC/E,MAAI,SAAS;AACX,WAAO,QAAQ,aAAa,SAAS;AAAA,EACvC;AACF;AAhCA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;ACRA;AAAA;AAAA,KAAC,SAAU,QAAQ,SAAS;AAC1B,aAAO,YAAY,YAAY,OAAO,WAAW,cAAc,QAAQ,OAAO,IAC9E,OAAO,WAAW,cAAc,OAAO,MAAM,OAAO,CAAC,SAAS,GAAG,OAAO,KACvE,SAAS,OAAO,eAAe,cAAc,aAAa,UAAU,MAAM,QAAQ,OAAO,OAAO,IAAI,CAAC,CAAC;AAAA,IACzG,GAAE,SAAO,SAAUC,UAAS;AAAE;AAE5B,UAAI,KAAK,OAAO,WAAW,eAAe,OAAO,cAAc,SACzD,OAAO,YACP;AAAA,QACE,OAAO,CAAC;AAAA,MACZ;AACJ,UAAI,sBAAsB;AAAA,QACtB,UAAU;AAAA,UACN,WAAW,CAAC,gBAAM,gBAAM,gBAAM,gBAAM,gBAAM,gBAAM,cAAI;AAAA,UACpD,UAAU;AAAA,YACN;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,UACJ;AAAA,QACJ;AAAA,QACA,QAAQ;AAAA,UACJ,WAAW;AAAA,YACP;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,UACJ;AAAA,UACA,UAAU;AAAA,YACN;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,UACJ;AAAA,QACJ;AAAA,QACA,gBAAgB;AAAA,QAChB,kBAAkB;AAAA,QAClB,aAAa;AAAA,QACb,aAAa;AAAA,MACjB;AACA,SAAG,MAAM,QAAQ;AACjB,UAAIC,QAAO,GAAG;AAEd,MAAAD,SAAQ,sBAAsB;AAC9B,MAAAA,SAAQ,UAAUC;AAElB,aAAO,eAAeD,UAAS,cAAc,EAAE,OAAO,KAAK,CAAC;AAAA,IAE9D,CAAE;AAAA;AAAA;;;ACnEF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CA4BC,SAAU,WAAW;AACpB,MAAI,OAAO,UAAU,iBAAiB,WAAY;AAElD,YAAU,gBAAgB,SAAUE,YAAW;AAC7C,QAAIA,YAAW;AACb,wBAAkBA,YAAW,IAAI;AACjC,MAAAA,WAAU,MAAM;AAAA,IAClB,OAAO;AACL,MAAAA,aAAY,SAAS,cAAc,OAAO;AAC1C,MAAAA,WAAU,OAAO;AACjB,MAAAA,WAAU,SAAS;AACnB,WAAK,YAAYA,UAAS;AAC1B,MAAAA,WAAU,MAAM;AAChB,WAAK,YAAYA,UAAS;AAAA,IAC5B;AAAA,EACF;AAEA,WAAS,kBAAkBA,YAAW,MAAM;AAC1C,IAAAA,sBAAqB,eAAe,MAAM,WAAW,0CAA0C;AAC/F,IAAAA,WAAU,QAAQ,YAAY,MAAM,WAAW,8CAA8C;AAC7F,IAAAA,WAAU,QAAQ,QAChB,MAAM,cAAc,2DAA2D,eAAe;AAAA,EAClG;AAEA,WAAS,MAAM,kBAAkB,SAAS,MAAM;AAC9C,UAAM,IAAI,iBAAiB,6DAA6D,UAAU,KAAK,IAAI;AAAA,EAC7G;AACF,GAAG,gBAAgB,SAAS;AAE5B,IAAM,mBAAmB,oBAAI,QAAQ;AAErC,SAAS,6BAA6B,QAAQ;AAC5C,QAAM,UAAU,kBAAkB,UAAU,SAAS,kBAAkB,OAAO,OAAO,gBAAgB;AACrG,QAAM,YAAY,UAAU,QAAQ,QAAQ,eAAe,IAAI;AAC/D,SAAO,WAAW,QAAQ,WAAW,YAAY;AACnD;AAEA,SAAS,cAAc,OAAO;AAC5B,QAAMA,aAAY,6BAA6B,MAAM,MAAM;AAE3D,MAAIA,cAAaA,WAAU,MAAM;AAC/B,qBAAiB,IAAIA,WAAU,MAAMA,UAAS;AAAA,EAChD;AACF;AAAA,CAEC,WAAY;AACX,MAAI,eAAe,MAAM,UAAW;AAEpC,MAAI,YAAY,OAAO,MAAM;AAI7B,MAAI,iBAAiB,QAAQ;AAC3B,UAAM,yBAAyB,OAAO,YAAY;AAElD,QAAI,iBAAiB,KAAK,UAAU,MAAM,KAAK,EAAE,eAAe,yBAAyB;AACvF,kBAAY;AAAA,IACd,OAAO;AACL;AAAA,IACF;AAAA,EACF;AAEA,mBAAiB,SAAS,eAAe,IAAI;AAE7C,SAAO,eAAe,WAAW,aAAa;AAAA,IAC5C,MAAM;AACJ,UAAI,KAAK,QAAQ,YAAY,KAAK,kBAAkB,iBAAiB;AACnE,eAAO,iBAAiB,IAAI,KAAK,MAAM;AAAA,MACzC;AAAA,IACF;AAAA,EACF,CAAC;AACH,GAAG;AAEH,IAAM,oBAAoB;AAAA,EACxB,OAAO;AAAA,EACP,MAAM;AACR;AAkBA,IAAM,eAAN,MAAM,sBAAqB,YAAY;AAAA,EACrC,OAAO,sBAAsB;AAAA,EAE7B,SAAS,QAAQ,QAAQ;AAAA,EAEzB,WAAW,qBAAqB;AAC9B,WAAO,CAAC,YAAY,WAAW,KAAK;AAAA,EACtC;AAAA,EAEA,cAAc;AACZ,UAAM;AACN,SAAK,WAAW,IAAI,cAAa,oBAAoB,IAAI;AAAA,EAC3D;AAAA,EAEA,oBAAoB;AAClB,SAAK,SAAS,QAAQ;AAAA,EACxB;AAAA,EAEA,uBAAuB;AACrB,SAAK,SAAS,WAAW;AAAA,EAC3B;AAAA,EAEA,SAAS;AACP,WAAO,KAAK,SAAS,kBAAkB;AAAA,EACzC;AAAA,EAEA,yBAAyB,MAAM;AAC7B,QAAI,QAAQ,WAAW;AACrB,WAAK,SAAS,oBAAoB;AAAA,IACpC,WAAW,QAAQ,OAAO;AACxB,WAAK,SAAS,iBAAiB;AAAA,IACjC,WAAW,QAAQ,YAAY;AAC7B,WAAK,SAAS,gBAAgB;AAAA,IAChC;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,IAAI,MAAM;AACR,WAAO,KAAK,aAAa,KAAK;AAAA,EAChC;AAAA;AAAA;AAAA;AAAA,EAKA,IAAI,IAAI,OAAO;AACb,QAAI,OAAO;AACT,WAAK,aAAa,OAAO,KAAK;AAAA,IAChC,OAAO;AACL,WAAK,gBAAgB,KAAK;AAAA,IAC5B;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,IAAI,UAAU;AACZ,WAAO,KAAK,aAAa,SAAS;AAAA,EACpC;AAAA;AAAA;AAAA;AAAA,EAKA,IAAI,QAAQ,OAAO;AACjB,QAAI,OAAO;AACT,WAAK,aAAa,WAAW,KAAK;AAAA,IACpC,OAAO;AACL,WAAK,gBAAgB,SAAS;AAAA,IAChC;AAAA,EACF;AAAA,EAEA,IAAI,wBAAwB;AAC1B,WAAO,KAAK,OAAO,KAAK,YAAY;AAAA,EACtC;AAAA;AAAA;AAAA;AAAA,EAKA,IAAI,UAAU;AACZ,WAAO,4BAA4B,KAAK,aAAa,SAAS,KAAK,EAAE;AAAA,EACvE;AAAA;AAAA;AAAA;AAAA,EAKA,IAAI,QAAQ,OAAO;AACjB,QAAI,OAAO;AACT,WAAK,aAAa,WAAW,KAAK;AAAA,IACpC,OAAO;AACL,WAAK,gBAAgB,SAAS;AAAA,IAChC;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,IAAI,WAAW;AACb,WAAO,KAAK,aAAa,UAAU;AAAA,EACrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,IAAI,SAAS,OAAO;AAClB,QAAI,OAAO;AACT,WAAK,aAAa,YAAY,EAAE;AAAA,IAClC,OAAO;AACL,WAAK,gBAAgB,UAAU;AAAA,IACjC;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,IAAI,aAAa;AACf,WAAO,KAAK,aAAa,YAAY;AAAA,EACvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,IAAI,WAAW,OAAO;AACpB,QAAI,OAAO;AACT,WAAK,aAAa,cAAc,EAAE;AAAA,IACpC,OAAO;AACL,WAAK,gBAAgB,YAAY;AAAA,IACnC;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,IAAI,WAAW;AACb,WAAO,CAAC,KAAK,SAAS;AAAA,EACxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,IAAI,WAAW;AACb,WAAO,KAAK,kBAAkB,YAAY,CAAC,KAAK;AAAA,EAClD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,IAAI,YAAY;AACd,WAAO,KAAK,eAAe,iBAAiB,aAAa,oBAAoB;AAAA,EAC/E;AACF;AAEA,SAAS,4BAA4B,OAAO;AAC1C,UAAQ,MAAM,YAAY,GAAG;AAAA,IAC3B,KAAK;AACH,aAAO,kBAAkB;AAAA,IAC3B;AACE,aAAO,kBAAkB;AAAA,EAC7B;AACF;AAEA,IAAM,QAAQ;AAAA,EACZ,SAAS;AAAA,EACT,kBAAkB;AAAA,EAClB,uBAAuB,oBAAI;AAAA,IACzB;AAAA,MACE;AAAA,MAAO;AAAA,MAAQ;AAAA,MAAQ;AAAA,MAAQ;AAAA,MAAQ;AAAA,MAAQ;AAAA,MAAQ;AAAA,MAAQ;AAAA,MAAQ;AAAA,MAAQ;AAAA,MAC/E;AAAA,MAAS;AAAA,MAAQ;AAAA,MAAQ;AAAA,MAAO;AAAA,MAAS;AAAA,MAAS;AAAA,MAAQ;AAAA,MAAQ;AAAA,MAAS;AAAA,MAC3E;AAAA,MAAO;AAAA,MAAS;AAAA,MAAQ;AAAA,MAAQ;AAAA,MAAQ;AAAA,MAAQ;AAAA,MAAQ;AAAA,MAAS;AAAA,MAAQ;AAAA,MACzE;AAAA,MAAQ;AAAA,MAAQ;AAAA,MAAQ;AAAA,MAAQ;AAAA,MAAQ;AAAA,MAAQ;AAAA,MAAS;AAAA,MAAQ;AAAA,MACjE;AAAA,MAAQ;AAAA,MAAQ;AAAA,MAAQ;AAAA,MAAS;AAAA,MAAQ;AAAA,MAAQ;AAAA,MAAS;AAAA,MAAS;AAAA,MAAQ;AAAA,MAC3E;AAAA,MAAQ;AAAA,MAAS;AAAA,MAAQ;AAAA,IAC3B;AAAA,EACF;AACF;AAEA,SAAS,sBAAsB,SAAS;AACtC,MAAI,QAAQ,aAAa,iBAAiB,KAAK,SAAS;AACtD,WAAO;AAAA,EACT,OAAO;AACL,UAAM,uBAAuB,SAAS,cAAc,QAAQ;AAC5D,UAAM,WAAW,YAAY;AAC7B,QAAI,UAAU;AACZ,2BAAqB,QAAQ;AAAA,IAC/B;AACA,yBAAqB,cAAc,QAAQ;AAC3C,yBAAqB,QAAQ;AAC7B,0BAAsB,sBAAsB,OAAO;AACnD,WAAO;AAAA,EACT;AACF;AAEA,SAAS,sBAAsB,oBAAoB,eAAe;AAChE,aAAW,EAAE,MAAM,MAAM,KAAK,cAAc,YAAY;AACtD,uBAAmB,aAAa,MAAM,KAAK;AAAA,EAC7C;AACF;AAEA,SAAS,uBAAuB,MAAM;AACpC,QAAM,WAAW,SAAS,cAAc,UAAU;AAClD,WAAS,YAAY;AACrB,SAAO,SAAS;AAClB;AAEA,SAAS,SAAS,WAAW,EAAE,QAAQ,YAAY,OAAO,IAAI,CAAC,GAAG;AAChE,QAAM,QAAQ,IAAI,YAAY,WAAW;AAAA,IACvC;AAAA,IACA,SAAS;AAAA,IACT,UAAU;AAAA,IACV;AAAA,EACF,CAAC;AAED,MAAI,UAAU,OAAO,aAAa;AAChC,WAAO,cAAc,KAAK;AAAA,EAC5B,OAAO;AACL,aAAS,gBAAgB,cAAc,KAAK;AAAA,EAC9C;AAEA,SAAO;AACT;AAEA,SAAS,YAAY,OAAO;AAC1B,QAAM,eAAe;AACrB,QAAM,yBAAyB;AACjC;AAEA,SAAS,cAAc;AACrB,MAAI,SAAS,oBAAoB,UAAU;AACzC,WAAO,kBAAkB;AAAA,EAC3B,OAAO;AACL,WAAO,mBAAmB;AAAA,EAC5B;AACF;AAEA,SAAS,qBAAqB;AAC5B,SAAO,IAAI,QAAQ,CAAC,YAAY,sBAAsB,MAAM,QAAQ,CAAC,CAAC;AACxE;AAEA,SAAS,oBAAoB;AAC3B,SAAO,IAAI,QAAQ,CAAC,YAAY,WAAW,MAAM,QAAQ,GAAG,CAAC,CAAC;AAChE;AAEA,SAAS,gBAAgB;AACvB,SAAO,QAAQ,QAAQ;AACzB;AAEA,SAAS,kBAAkB,OAAO,IAAI;AACpC,SAAO,IAAI,UAAU,EAAE,gBAAgB,MAAM,WAAW;AAC1D;AAEA,SAAS,SAAS,YAAY,QAAQ;AACpC,QAAM,QAAQ,YAAY,SAAS,MAAM,EAAE,QAAQ,OAAO,EAAE,EAAE,MAAM,IAAI;AACxE,QAAM,QAAQ,MAAM,CAAC,EAAE,MAAM,MAAM;AACnC,QAAM,SAAS,QAAQ,MAAM,CAAC,EAAE,SAAS;AACzC,SAAO,MAAM,IAAI,CAAC,SAAS,KAAK,MAAM,MAAM,CAAC,EAAE,KAAK,IAAI;AAC1D;AAEA,SAAS,YAAY,SAAS,QAAQ;AACpC,SAAO,QAAQ,OAAO,CAAC,QAAQ,QAAQ,MAAM;AAC3C,UAAM,QAAQ,OAAO,CAAC,KAAK,SAAY,KAAK,OAAO,CAAC;AACpD,WAAO,SAAS,SAAS;AAAA,EAC3B,GAAG,EAAE;AACP;AAEA,SAAS,OAAO;AACd,SAAO,MAAM,KAAK,EAAE,QAAQ,GAAG,CAAC,EAC7B,IAAI,CAAC,GAAG,MAAM;AACb,QAAI,KAAK,KAAK,KAAK,MAAM,KAAK,MAAM,KAAK,IAAI;AAC3C,aAAO;AAAA,IACT,WAAW,KAAK,IAAI;AAClB,aAAO;AAAA,IACT,WAAW,KAAK,IAAI;AAClB,cAAQ,KAAK,MAAM,KAAK,OAAO,IAAI,CAAC,IAAI,GAAG,SAAS,EAAE;AAAA,IACxD,OAAO;AACL,aAAO,KAAK,MAAM,KAAK,OAAO,IAAI,EAAE,EAAE,SAAS,EAAE;AAAA,IACnD;AAAA,EACF,CAAC,EACA,KAAK,EAAE;AACZ;AAEA,SAAS,aAAa,kBAAkB,UAAU;AAChD,aAAW,SAAS,SAAS,IAAI,CAAC,YAAY,SAAS,aAAa,aAAa,CAAC,GAAG;AACnF,QAAI,OAAO,SAAS,SAAU,QAAO;AAAA,EACvC;AAEA,SAAO;AACT;AAEA,SAAS,aAAa,kBAAkB,UAAU;AAChD,SAAO,SAAS,KAAK,CAAC,YAAY,WAAW,QAAQ,aAAa,aAAa,CAAC;AAClF;AAEA,SAAS,cAAc,UAAU;AAC/B,aAAW,WAAW,UAAU;AAC9B,QAAI,QAAQ,aAAa,eAAe;AACtC,cAAQ,aAAa,QAAQ,EAAE;AAAA,IACjC;AACA,YAAQ,aAAa,aAAa,MAAM;AAAA,EAC1C;AACF;AAEA,SAAS,kBAAkB,UAAU;AACnC,aAAW,WAAW,UAAU;AAC9B,QAAI,QAAQ,aAAa,eAAe;AACtC,cAAQ,gBAAgB,MAAM;AAAA,IAChC;AAEA,YAAQ,gBAAgB,WAAW;AAAA,EACrC;AACF;AAEA,SAAS,YAAY,SAAS,wBAAwB,KAAM;AAC1D,SAAO,IAAI,QAAQ,CAAC,YAAY;AAC9B,UAAM,aAAa,MAAM;AACvB,cAAQ,oBAAoB,SAAS,UAAU;AAC/C,cAAQ,oBAAoB,QAAQ,UAAU;AAC9C,cAAQ;AAAA,IACV;AAEA,YAAQ,iBAAiB,QAAQ,YAAY,EAAE,MAAM,KAAK,CAAC;AAC3D,YAAQ,iBAAiB,SAAS,YAAY,EAAE,MAAM,KAAK,CAAC;AAC5D,eAAW,SAAS,qBAAqB;AAAA,EAC3C,CAAC;AACH;AAEA,SAAS,0BAA0B,QAAQ;AACzC,UAAQ,QAAQ;AAAA,IACd,KAAK;AACH,aAAO,QAAQ;AAAA,IACjB,KAAK;AAAA,IACL,KAAK;AACH,aAAO,QAAQ;AAAA,EACnB;AACF;AAEA,SAAS,SAAS,QAAQ;AACxB,SAAO,UAAU,aAAa,UAAU,aAAa,UAAU;AACjE;AAEA,SAAS,kBAAkB,UAAU;AACnC,QAAM,SAAS,aAAa,qBAAqB,GAAG,QAAQ;AAE5D,SAAO,SAAS,MAAM,IAAI,SAAS;AACrC;AAEA,SAAS,eAAe,MAAM;AAC5B,SAAO,SAAS,cAAc,cAAc,IAAI,IAAI;AACtD;AAEA,SAAS,eAAe,MAAM;AAC5B,QAAM,UAAU,eAAe,IAAI;AACnC,SAAO,WAAW,QAAQ;AAC5B;AAEA,SAAS,cAAc;AACrB,QAAM,UAAU,eAAe,WAAW;AAE1C,MAAI,SAAS;AACX,UAAM,EAAE,OAAO,QAAQ,IAAI;AAC3B,WAAO,SAAS,KAAK,UAAU;AAAA,EACjC;AACF;AAEA,SAAS,eAAe,MAAM,SAAS;AACrC,MAAI,UAAU,eAAe,IAAI;AAEjC,MAAI,CAAC,SAAS;AACZ,cAAU,SAAS,cAAc,MAAM;AACvC,YAAQ,aAAa,QAAQ,IAAI;AAEjC,aAAS,KAAK,YAAY,OAAO;AAAA,EACnC;AAEA,UAAQ,aAAa,WAAW,OAAO;AAEvC,SAAO;AACT;AAEA,SAAS,uBAAuB,SAAS,UAAU;AACjD,MAAI,mBAAmB,SAAS;AAC9B,WACE,QAAQ,QAAQ,QAAQ,KAAK,uBAAuB,QAAQ,gBAAgB,QAAQ,YAAY,GAAG,MAAM,QAAQ;AAAA,EAErH;AACF;AAEA,SAAS,mBAAmB,SAAS;AACnC,QAAM,wBAAwB;AAE9B,SAAO,CAAC,CAAC,WAAW,QAAQ,QAAQ,qBAAqB,KAAK,QAAQ,OAAO,QAAQ,SAAS;AAChG;AAEA,SAAS,0BAA0B,2BAA2B;AAC5D,SAAO,MAAM,KAAK,0BAA0B,iBAAiB,aAAa,CAAC,EAAE,KAAK,kBAAkB;AACtG;AAEA,eAAe,OAAO,UAAU,QAAQ;AACtC,QAAM,SAAS,OAAO;AAEtB,WAAS;AAET,QAAM,mBAAmB;AAEzB,QAAM,QAAQ,OAAO;AAErB,SAAO,CAAC,QAAQ,KAAK;AACvB;AAEA,SAAS,oBAAoB,MAAM;AACjC,MAAI,SAAS,UAAU;AACrB,WAAO;AAAA,EACT,WAAW,MAAM;AACf,eAAW,WAAW,SAAS,kBAAkB,IAAI,GAAG;AACtD,UAAI,mBAAmB,kBAAmB,QAAO;AAAA,IACnD;AAEA,WAAO;AAAA,EACT,OAAO;AACL,WAAO;AAAA,EACT;AACF;AAEA,SAAS,wBAAwB,QAAQ;AACvC,SAAO,uBAAuB,QAAQ,0CAA0C;AAClF;AAEA,SAAS,mBAAmB,MAAM;AAChC,SAAO,UAAU,KAAK,aAAa,MAAM,KAAK,EAAE;AAClD;AAEA,SAAS,SAAS,IAAI,OAAO;AAC3B,MAAI,YAAY;AAEhB,SAAO,IAAI,SAAS;AAClB,UAAM,WAAW,MAAM,GAAG,MAAM,MAAM,IAAI;AAC1C,iBAAa,SAAS;AACtB,gBAAY,WAAW,UAAU,KAAK;AAAA,EACxC;AACF;AAEA,IAAM,YAAY;AAAA,EAChB,iBAAiB;AAAA,IACf,cAAc,CAAAA,eAAa;AACzB,MAAAA,WAAU,aAAa,iBAAiB,MAAM;AAC9C,MAAAA,WAAU,iBAAiB,SAAS,WAAW;AAAA,IACjD;AAAA,IAEA,aAAa,CAAAA,eAAa;AACxB,MAAAA,WAAU,gBAAgB,eAAe;AACzC,MAAAA,WAAU,oBAAoB,SAAS,WAAW;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,YAAY;AAAA,IACV,cAAc,CAAAA,eAAaA,WAAU,WAAW;AAAA,IAChD,aAAa,CAAAA,eAAaA,WAAU,WAAW;AAAA,EACjD;AACF;AAEA,IAAM,SAAN,MAAa;AAAA,EACX,aAAa;AAAA,EAEb,YAAYC,SAAQ;AAClB,WAAO,OAAO,MAAMA,OAAM;AAAA,EAC5B;AAAA,EAEA,IAAI,YAAY;AACd,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,UAAU,OAAO;AACnB,SAAK,aAAa,UAAU,KAAK,KAAK;AAAA,EACxC;AACF;AAEA,IAAM,QAAQ,IAAI,OAAO;AAAA,EACvB,MAAM;AAAA,EACN,WAAW;AACb,CAAC;AAED,IAAM,SAAS;AAAA,EACb;AAAA,EACA;AACF;AAEA,SAAS,UAAU,WAAW;AAC5B,SAAO,IAAI,IAAI,UAAU,SAAS,GAAG,SAAS,OAAO;AACvD;AAEA,SAAS,UAAU,KAAK;AACtB,MAAI;AACJ,MAAI,IAAI,MAAM;AACZ,WAAO,IAAI,KAAK,MAAM,CAAC;AAAA,EAEzB,WAAY,cAAc,IAAI,KAAK,MAAM,QAAQ,GAAI;AACnD,WAAO,YAAY,CAAC;AAAA,EACtB;AACF;AAEA,SAAS,YAAY,MAAMD,YAAW;AACpC,QAAM,SAASA,YAAW,aAAa,YAAY,KAAK,KAAK,aAAa,QAAQ,KAAK,KAAK;AAE5F,SAAO,UAAU,MAAM;AACzB;AAEA,SAAS,aAAa,KAAK;AACzB,UAAQ,qBAAqB,GAAG,EAAE,MAAM,UAAU,KAAK,CAAC,GAAG,CAAC,KAAK;AACnE;AAEA,SAAS,aAAa,SAAS,KAAK;AAClC,QAAM,SAAS,UAAU,GAAG;AAC5B,SAAO,QAAQ,SAAS,UAAU,MAAM,EAAE,QAAQ,QAAQ,KAAK,WAAW,MAAM;AAClF;AAEA,SAAS,oBAAoBE,WAAU,cAAc;AACnD,SAAO,aAAaA,WAAU,YAAY,KAAK,CAAC,OAAO,MAAM,sBAAsB,IAAI,aAAaA,SAAQ,CAAC;AAC/G;AAEA,SAAS,cAAc,KAAK;AAC1B,QAAM,SAAS,UAAU,GAAG;AAC5B,SAAO,UAAU,OAAO,IAAI,KAAK,MAAM,GAAG,EAAE,OAAO,SAAS,EAAE,IAAI,IAAI;AACxE;AAEA,SAAS,WAAW,KAAK;AACvB,SAAO,cAAc,GAAG;AAC1B;AAEA,SAAS,aAAa,MAAM,OAAO;AACjC,SAAO,UAAU,IAAI,EAAE,QAAQ,UAAU,KAAK,EAAE;AAClD;AAEA,SAAS,kBAAkB,KAAK;AAC9B,SAAO,IAAI,SAAS,MAAM,GAAG,EAAE,MAAM,CAAC;AACxC;AAEA,SAAS,qBAAqB,KAAK;AACjC,SAAO,kBAAkB,GAAG,EAAE,MAAM,EAAE,EAAE,CAAC;AAC3C;AAEA,SAAS,UAAU,KAAK;AACtB,SAAO,iBAAiB,IAAI,SAAS,IAAI,QAAQ;AACnD;AAEA,SAAS,iBAAiB,OAAO;AAC/B,SAAO,MAAM,SAAS,GAAG,IAAI,QAAQ,QAAQ;AAC/C;AAEA,IAAM,gBAAN,MAAoB;AAAA,EAClB,YAAY,UAAU;AACpB,SAAK,WAAW;AAAA,EAClB;AAAA,EAEA,IAAI,YAAY;AACd,WAAO,KAAK,SAAS;AAAA,EACvB;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,CAAC,KAAK;AAAA,EACf;AAAA,EAEA,IAAI,cAAc;AAChB,WAAO,KAAK,cAAc,OAAO,KAAK,cAAc;AAAA,EACtD;AAAA,EAEA,IAAI,cAAc;AAChB,WAAO,KAAK,cAAc,OAAO,KAAK,cAAc;AAAA,EACtD;AAAA,EAEA,IAAI,aAAa;AACf,WAAO,KAAK,SAAS;AAAA,EACvB;AAAA,EAEA,IAAI,WAAW;AACb,WAAO,UAAU,KAAK,SAAS,GAAG;AAAA,EACpC;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,eAAe,KAAK,YAAY,MAAM,wDAAwD;AAAA,EAC5G;AAAA,EAEA,IAAI,aAAa;AACf,WAAO,KAAK,SAAS;AAAA,EACvB;AAAA,EAEA,IAAI,cAAc;AAChB,WAAO,KAAK,OAAO,cAAc;AAAA,EACnC;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK,SAAS,MAAM,EAAE,KAAK;AAAA,EACpC;AAAA,EAEA,IAAI,eAAe;AACjB,QAAI,KAAK,QAAQ;AACf,aAAO,KAAK,SAAS,MAAM,EAAE,KAAK;AAAA,IACpC,OAAO;AACL,aAAO,QAAQ,QAAQ,MAAS;AAAA,IAClC;AAAA,EACF;AAAA,EAEA,OAAO,MAAM;AACX,WAAO,KAAK,SAAS,QAAQ,IAAI,IAAI;AAAA,EACvC;AACF;AAEA,IAAM,aAAN,cAAyB,IAAI;AAAA,EAC3B,YAAY,SAAS;AACnB,UAAM;AACN,SAAK,UAAU;AAAA,EACjB;AAAA,EAEA,IAAI,OAAO;AACT,QAAI,KAAK,QAAQ,KAAK,SAAS;AAC7B,YAAM,WAAW,KAAK,OAAO;AAC7B,YAAM,cAAc,SAAS,KAAK,EAAE;AACpC,WAAK,OAAO,WAAW;AAAA,IACzB;AACA,UAAM,IAAI,KAAK;AAAA,EACjB;AACF;AAEA,IAAM,iBAAiB,IAAI,WAAW,EAAE;AAExC,IAAM,cAAc,OAAO;AAE3B,SAAS,sBAAsB,KAAK,UAAU,CAAC,GAAG;AAChD,QAAM,kBAAkB,IAAI,QAAQ,QAAQ,WAAW,CAAC,CAAC;AACzD,QAAM,aAAa,KAAK;AACxB,iBAAe,IAAI,UAAU;AAC7B,kBAAgB,OAAO,sBAAsB,UAAU;AAEvD,SAAO,YAAY,KAAK;AAAA,IACtB,GAAG;AAAA,IACH,SAAS;AAAA,EACX,CAAC;AACH;AAEA,SAAS,sBAAsB,QAAQ;AACrC,UAAQ,OAAO,YAAY,GAAG;AAAA,IAC5B,KAAK;AACH,aAAO,YAAY;AAAA,IACrB,KAAK;AACH,aAAO,YAAY;AAAA,IACrB,KAAK;AACH,aAAO,YAAY;AAAA,IACrB,KAAK;AACH,aAAO,YAAY;AAAA,IACrB,KAAK;AACH,aAAO,YAAY;AAAA,EACvB;AACF;AAEA,IAAM,cAAc;AAAA,EAClB,KAAK;AAAA,EACL,MAAM;AAAA,EACN,KAAK;AAAA,EACL,OAAO;AAAA,EACP,QAAQ;AACV;AAEA,SAAS,uBAAuB,UAAU;AACxC,UAAQ,SAAS,YAAY,GAAG;AAAA,IAC9B,KAAK,aAAa;AAChB,aAAO,aAAa;AAAA,IACtB,KAAK,aAAa;AAChB,aAAO,aAAa;AAAA,IACtB;AACE,aAAO,aAAa;AAAA,EACxB;AACF;AAEA,IAAM,eAAe;AAAA,EACnB,YAAY;AAAA,EACZ,WAAW;AAAA,EACX,OAAO;AACT;AAEA,IAAM,eAAN,MAAmB;AAAA,EACjB,kBAAkB,IAAI,gBAAgB;AAAA,EACtC,yBAAyB,CAAC,WAAW;AAAA,EAAC;AAAA,EAEtC,YAAY,UAAU,QAAQA,WAAU,cAAc,IAAI,gBAAgB,GAAG,SAAS,MAAM,UAAU,aAAa,YAAY;AAC7H,UAAM,CAAC,KAAK,IAAI,IAAI,qBAAqB,UAAUA,SAAQ,GAAG,QAAQ,aAAa,OAAO;AAE1F,SAAK,WAAW;AAChB,SAAK,MAAM;AACX,SAAK,SAAS;AACd,SAAK,eAAe;AAAA,MAClB,aAAa;AAAA,MACb,UAAU;AAAA,MACV,QAAQ,OAAO,YAAY;AAAA,MAC3B,SAAS,EAAE,GAAG,KAAK,eAAe;AAAA,MAClC;AAAA,MACA,QAAQ,KAAK;AAAA,MACb,UAAU,KAAK,SAAS,UAAU;AAAA,IACpC;AACA,SAAK,UAAU;AAAA,EACjB;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,aAAa;AAAA,EAC3B;AAAA,EAEA,IAAI,OAAO,OAAO;AAChB,UAAM,YAAY,KAAK,SAAS,KAAK,IAAI,eAAe,KAAK,aAAa,QAAQ,IAAI,SAAS;AAC/F,UAAM,cAAc,sBAAsB,KAAK,KAAK,YAAY;AAEhE,SAAK,IAAI,SAAS;AAElB,UAAM,CAAC,KAAK,IAAI,IAAI,qBAAqB,KAAK,KAAK,aAAa,WAAW,KAAK,OAAO;AAEvF,SAAK,MAAM;AACX,SAAK,aAAa,OAAO;AACzB,SAAK,aAAa,SAAS,YAAY,YAAY;AAAA,EACrD;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,aAAa;AAAA,EAC3B;AAAA,EAEA,IAAI,QAAQ,OAAO;AACjB,SAAK,aAAa,UAAU;AAAA,EAC9B;AAAA,EAEA,IAAI,OAAO;AACT,QAAI,KAAK,QAAQ;AACf,aAAO,KAAK,IAAI;AAAA,IAClB,OAAO;AACL,aAAO,KAAK,aAAa;AAAA,IAC3B;AAAA,EACF;AAAA,EAEA,IAAI,KAAK,OAAO;AACd,SAAK,aAAa,OAAO;AAAA,EAC3B;AAAA,EAEA,IAAI,WAAW;AACb,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,IAAI;AAAA,EAClB;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,OAAO,MAAM,KAAK,KAAK,KAAK,QAAQ,CAAC,IAAI,CAAC;AAAA,EACxD;AAAA,EAEA,SAAS;AACP,SAAK,gBAAgB,MAAM;AAAA,EAC7B;AAAA,EAEA,MAAM,UAAU;AACd,UAAM,EAAE,aAAa,IAAI;AACzB,SAAK,SAAS,eAAe,IAAI;AACjC,UAAM,QAAQ,MAAM,KAAK,6BAA6B,YAAY;AAClE,QAAI;AACF,WAAK,SAAS,eAAe,IAAI;AAEjC,UAAI,MAAM,OAAO,cAAc;AAC7B,aAAK,WAAW,MAAM,OAAO,aAAa;AAAA,MAC5C,OAAO;AACL,aAAK,WAAW,sBAAsB,KAAK,IAAI,MAAM,YAAY;AAAA,MACnE;AAEA,YAAM,WAAW,MAAM,KAAK;AAC5B,aAAO,MAAM,KAAK,QAAQ,QAAQ;AAAA,IACpC,SAASC,QAAO;AACd,UAAIA,OAAM,SAAS,cAAc;AAC/B,YAAI,KAAK,2BAA2BA,MAAK,GAAG;AAC1C,eAAK,SAAS,eAAe,MAAMA,MAAK;AAAA,QAC1C;AACA,cAAMA;AAAA,MACR;AAAA,IACF,UAAE;AACA,WAAK,SAAS,gBAAgB,IAAI;AAAA,IACpC;AAAA,EACF;AAAA,EAEA,MAAM,QAAQ,UAAU;AACtB,UAAM,gBAAgB,IAAI,cAAc,QAAQ;AAChD,UAAM,QAAQ,SAAS,+BAA+B;AAAA,MACpD,YAAY;AAAA,MACZ,QAAQ,EAAE,cAAc;AAAA,MACxB,QAAQ,KAAK;AAAA,IACf,CAAC;AACD,QAAI,MAAM,kBAAkB;AAC1B,WAAK,SAAS,iCAAiC,MAAM,aAAa;AAAA,IACpE,WAAW,cAAc,WAAW;AAClC,WAAK,SAAS,6BAA6B,MAAM,aAAa;AAAA,IAChE,OAAO;AACL,WAAK,SAAS,0BAA0B,MAAM,aAAa;AAAA,IAC7D;AACA,WAAO;AAAA,EACT;AAAA,EAEA,IAAI,iBAAiB;AACnB,WAAO;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,EACF;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,OAAO,KAAK,MAAM;AAAA,EAC3B;AAAA,EAEA,IAAI,cAAc;AAChB,WAAO,KAAK,gBAAgB;AAAA,EAC9B;AAAA,EAEA,mBAAmB,UAAU;AAC3B,SAAK,QAAQ,QAAQ,IAAI,CAAC,UAAU,KAAK,QAAQ,QAAQ,CAAC,EAAE,KAAK,IAAI;AAAA,EACvE;AAAA,EAEA,MAAM,6BAA6B,cAAc;AAC/C,UAAM,sBAAsB,IAAI,QAAQ,CAAC,YAAa,KAAK,yBAAyB,OAAQ;AAC5F,UAAM,QAAQ,SAAS,8BAA8B;AAAA,MACnD,YAAY;AAAA,MACZ,QAAQ;AAAA,QACN;AAAA,QACA,KAAK,KAAK;AAAA,QACV,QAAQ,KAAK;AAAA,MACf;AAAA,MACA,QAAQ,KAAK;AAAA,IACf,CAAC;AACD,SAAK,MAAM,MAAM,OAAO;AACxB,QAAI,MAAM,iBAAkB,OAAM;AAElC,WAAO;AAAA,EACT;AAAA,EAEA,2BAA2BA,QAAO;AAChC,UAAM,QAAQ,SAAS,6BAA6B;AAAA,MAClD,QAAQ,KAAK;AAAA,MACb,YAAY;AAAA,MACZ,QAAQ,EAAE,SAAS,MAAM,OAAOA,OAAM;AAAA,IACxC,CAAC;AAED,WAAO,CAAC,MAAM;AAAA,EAChB;AACF;AAEA,SAAS,OAAO,aAAa;AAC3B,SAAO,sBAAsB,WAAW,KAAK,YAAY;AAC3D;AAEA,SAAS,qBAAqB,UAAU,QAAQ,aAAa,SAAS;AACpE,QAAM,eACJ,MAAM,KAAK,WAAW,EAAE,SAAS,IAAI,IAAI,gBAAgB,sBAAsB,WAAW,CAAC,IAAI,SAAS;AAE1G,MAAI,OAAO,MAAM,GAAG;AAClB,WAAO,CAAC,yBAAyB,UAAU,YAAY,GAAG,IAAI;AAAA,EAChE,WAAW,WAAW,aAAa,YAAY;AAC7C,WAAO,CAAC,UAAU,YAAY;AAAA,EAChC,OAAO;AACL,WAAO,CAAC,UAAU,WAAW;AAAA,EAC/B;AACF;AAEA,SAAS,sBAAsB,aAAa;AAC1C,QAAM,UAAU,CAAC;AAEjB,aAAW,CAAC,MAAM,KAAK,KAAK,aAAa;AACvC,QAAI,iBAAiB,KAAM;AAAA,QACtB,SAAQ,KAAK,CAAC,MAAM,KAAK,CAAC;AAAA,EACjC;AAEA,SAAO;AACT;AAEA,SAAS,yBAAyB,KAAK,aAAa;AAClD,QAAM,eAAe,IAAI,gBAAgB,sBAAsB,WAAW,CAAC;AAE3E,MAAI,SAAS,aAAa,SAAS;AAEnC,SAAO;AACT;AAEA,IAAM,qBAAN,MAAyB;AAAA,EACvB,UAAU;AAAA,EAEV,YAAY,UAAU,SAAS;AAC7B,SAAK,WAAW;AAChB,SAAK,UAAU;AACf,SAAK,uBAAuB,IAAI,qBAAqB,KAAK,SAAS;AAAA,EACrE;AAAA,EAEA,QAAQ;AACN,QAAI,CAAC,KAAK,SAAS;AACjB,WAAK,UAAU;AACf,WAAK,qBAAqB,QAAQ,KAAK,OAAO;AAAA,IAChD;AAAA,EACF;AAAA,EAEA,OAAO;AACL,QAAI,KAAK,SAAS;AAChB,WAAK,UAAU;AACf,WAAK,qBAAqB,UAAU,KAAK,OAAO;AAAA,IAClD;AAAA,EACF;AAAA,EAEA,YAAY,CAAC,YAAY;AACvB,UAAM,YAAY,QAAQ,MAAM,EAAE,EAAE,CAAC;AACrC,QAAI,WAAW,gBAAgB;AAC7B,WAAK,SAAS,0BAA0B,KAAK,OAAO;AAAA,IACtD;AAAA,EACF;AACF;AAEA,IAAM,gBAAN,MAAoB;AAAA,EAClB,OAAO,cAAc;AAAA,EAErB,OAAO,KAAK,SAAS;AACnB,QAAI,OAAO,WAAW,UAAU;AAC9B,aAAO,IAAI,KAAK,uBAAuB,OAAO,CAAC;AAAA,IACjD,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,YAAY,UAAU;AACpB,SAAK,WAAW,qBAAqB,QAAQ;AAAA,EAC/C;AACF;AAEA,SAAS,qBAAqB,UAAU;AACtC,aAAW,WAAW,SAAS,iBAAiB,cAAc,GAAG;AAC/D,UAAM,gBAAgB,SAAS,WAAW,SAAS,IAAI;AAEvD,eAAW,sBAAsB,cAAc,gBAAgB,QAAQ,iBAAiB,QAAQ,GAAG;AACjG,yBAAmB,YAAY,sBAAsB,kBAAkB,CAAC;AAAA,IAC1E;AAEA,YAAQ,YAAY,aAAa;AAAA,EACnC;AAEA,SAAO;AACT;AAEA,IAAM,iBAAiB;AAEvB,IAAM,gBAAN,MAAoB;AAAA,EAClB,mBAAmB;AAAA,EACnB,cAAc;AAAA,EAEd,IAAI,KAAK;AACP,QAAI,KAAK,eAAe,KAAK,YAAY,QAAQ,OAAO,KAAK,YAAY,SAAS,KAAK,IAAI,GAAG;AAC5F,aAAO,KAAK,YAAY;AAAA,IAC1B;AAAA,EACF;AAAA,EAEA,SAAS,KAAK,SAAS,KAAK;AAC1B,SAAK,MAAM;AAEX,SAAK,mBAAmB,WAAW,MAAM;AACvC,cAAQ,QAAQ;AAChB,WAAK,IAAI,KAAK,SAAS,GAAG;AAC1B,WAAK,mBAAmB;AAAA,IAC1B,GAAG,cAAc;AAAA,EACnB;AAAA,EAEA,IAAI,KAAK,SAAS,KAAK;AACrB,SAAK,cAAc,EAAE,KAAK,SAAS,QAAQ,IAAI,MAAK,oBAAI,KAAK,GAAE,QAAQ,IAAI,GAAG,EAAE;AAAA,EAClF;AAAA,EAEA,QAAQ;AACN,QAAI,KAAK,iBAAkB,cAAa,KAAK,gBAAgB;AAC7D,SAAK,cAAc;AAAA,EACrB;AACF;AAEA,IAAM,WAAW,KAAK;AACtB,IAAM,gBAAgB,IAAI,cAAc;AAExC,IAAM,sBAAsB;AAAA,EAC1B,aAAa;AAAA,EACb,YAAY;AAAA,EACZ,SAAS;AAAA,EACT,WAAW;AAAA,EACX,UAAU;AAAA,EACV,SAAS;AACX;AAEA,IAAM,iBAAN,MAAM,gBAAe;AAAA,EACnB,QAAQ,oBAAoB;AAAA,EAE5B,OAAO,cAAc,SAAS;AAC5B,WAAO,QAAQ,QAAQ,QAAQ,OAAO,CAAC;AAAA,EACzC;AAAA,EAEA,YAAY,UAAU,aAAaH,YAAW,eAAe,OAAO;AAClE,UAAM,SAAS,UAAU,aAAaA,UAAS;AAC/C,UAAM,SAAS,UAAU,cAAc,aAAaA,UAAS,GAAG,MAAM;AACtE,UAAM,OAAO,cAAc,aAAaA,UAAS;AACjD,UAAM,UAAU,WAAW,aAAaA,UAAS;AAEjD,SAAK,WAAW;AAChB,SAAK,cAAc;AACnB,SAAK,YAAYA;AACjB,SAAK,eAAe,IAAI,aAAa,MAAM,QAAQ,QAAQ,MAAM,aAAa,OAAO;AACrF,SAAK,eAAe;AAAA,EACtB;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,aAAa;AAAA,EAC3B;AAAA,EAEA,IAAI,OAAO,OAAO;AAChB,SAAK,aAAa,SAAS;AAAA,EAC7B;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,aAAa,IAAI,SAAS;AAAA,EACxC;AAAA,EAEA,IAAI,OAAO,OAAO;AAChB,SAAK,aAAa,MAAM,UAAU,KAAK;AAAA,EACzC;AAAA,EAEA,IAAI,OAAO;AACT,WAAO,KAAK,aAAa;AAAA,EAC3B;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,aAAa;AAAA,EAC3B;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,aAAa;AAAA,EAC3B;AAAA,EAEA,IAAI,WAAW;AACb,WAAO,KAAK,aAAa;AAAA,EAC3B;AAAA;AAAA,EAIA,MAAM,QAAQ;AACZ,UAAM,EAAE,aAAa,WAAW,IAAI;AACpC,UAAM,sBAAsB,aAAa,sBAAsB,KAAK,WAAW,KAAK,WAAW;AAE/F,QAAI,OAAO,wBAAwB,UAAU;AAC3C,YAAM,gBAAgB,OAAO,OAAO,MAAM,YAAY,aACpD,OAAO,MAAM,UACb,gBAAe;AAEjB,YAAM,SAAS,MAAM,cAAc,qBAAqB,KAAK,aAAa,KAAK,SAAS;AACxF,UAAI,CAAC,QAAQ;AACX;AAAA,MACF;AAAA,IACF;AAEA,QAAI,KAAK,SAAS,aAAa;AAC7B,WAAK,QAAQ;AACb,aAAO,KAAK,aAAa,QAAQ;AAAA,IACnC;AAAA,EACF;AAAA,EAEA,OAAO;AACL,UAAM,EAAE,UAAU,QAAQ,IAAI;AAC9B,QAAI,KAAK,SAAS,YAAY,KAAK,SAAS,SAAS;AACnD,WAAK,QAAQ;AACb,WAAK,aAAa,OAAO;AACzB,aAAO;AAAA,IACT;AAAA,EACF;AAAA;AAAA,EAIA,eAAe,SAAS;AACtB,QAAI,CAAC,QAAQ,QAAQ;AACnB,YAAM,QAAQ,eAAe,eAAe,YAAY,CAAC,KAAK,eAAe,YAAY;AACzF,UAAI,OAAO;AACT,gBAAQ,QAAQ,cAAc,IAAI;AAAA,MACpC;AAAA,IACF;AAEA,QAAI,KAAK,kCAAkC,OAAO,GAAG;AACnD,cAAQ,mBAAmB,cAAc,WAAW;AAAA,IACtD;AAAA,EACF;AAAA,EAEA,eAAe,UAAU;AACvB,SAAK,QAAQ,oBAAoB;AACjC,QAAI,KAAK,UAAW,QAAO,MAAM,UAAU,aAAa,KAAK,SAAS;AACtE,SAAK,eAAe;AACpB,eAAW,KAAK,WAAW;AAC3B,aAAS,sBAAsB;AAAA,MAC7B,QAAQ,KAAK;AAAA,MACb,QAAQ,EAAE,gBAAgB,KAAK;AAAA,IACjC,CAAC;AACD,SAAK,SAAS,sBAAsB,IAAI;AAAA,EAC1C;AAAA,EAEA,iCAAiC,SAAS,UAAU;AAClD,kBAAc,MAAM;AAEpB,SAAK,SAAS,EAAE,SAAS,SAAS,WAAW,eAAe,SAAS;AAAA,EACvE;AAAA,EAEA,6BAA6B,SAAS,UAAU;AAC9C,QAAI,SAAS,eAAe,SAAS,aAAa;AAChD,WAAK,SAAS,iCAAiC,MAAM,QAAQ;AAC7D;AAAA,IACF;AAEA,kBAAc,MAAM;AAEpB,QAAI,KAAK,oBAAoB,OAAO,KAAK,iCAAiC,QAAQ,GAAG;AACnF,YAAMG,SAAQ,IAAI,MAAM,kDAAkD;AAC1E,WAAK,SAAS,sBAAsB,MAAMA,MAAK;AAAA,IACjD,OAAO;AACL,WAAK,QAAQ,oBAAoB;AACjC,WAAK,SAAS,EAAE,SAAS,MAAM,eAAe,SAAS;AACvD,WAAK,SAAS,oCAAoC,MAAM,QAAQ;AAAA,IAClE;AAAA,EACF;AAAA,EAEA,0BAA0B,SAAS,UAAU;AAC3C,SAAK,SAAS,EAAE,SAAS,OAAO,eAAe,SAAS;AACxD,SAAK,SAAS,iCAAiC,MAAM,QAAQ;AAAA,EAC/D;AAAA,EAEA,eAAe,SAASA,QAAO;AAC7B,SAAK,SAAS,EAAE,SAAS,OAAO,OAAAA,OAAM;AACtC,SAAK,SAAS,sBAAsB,MAAMA,MAAK;AAAA,EACjD;AAAA,EAEA,gBAAgB,UAAU;AACxB,SAAK,QAAQ,oBAAoB;AACjC,QAAI,KAAK,UAAW,QAAO,MAAM,UAAU,YAAY,KAAK,SAAS;AACrE,SAAK,mBAAmB;AACxB,mBAAe,KAAK,WAAW;AAC/B,aAAS,oBAAoB;AAAA,MAC3B,QAAQ,KAAK;AAAA,MACb,QAAQ,EAAE,gBAAgB,MAAM,GAAG,KAAK,OAAO;AAAA,IACjD,CAAC;AACD,SAAK,SAAS,uBAAuB,IAAI;AAAA,EAC3C;AAAA;AAAA,EAIA,iBAAiB;AACf,QAAI,CAAC,KAAK,aAAa,CAAC,KAAK,YAAa;AAE1C,QAAI,KAAK,UAAU,QAAQ,QAAQ,GAAG;AACpC,WAAK,qBAAqB,KAAK,UAAU;AACzC,WAAK,UAAU,YAAY,KAAK;AAAA,IAClC,WAAW,KAAK,UAAU,QAAQ,OAAO,GAAG;AAC1C,YAAM,QAAQ,KAAK;AACnB,WAAK,qBAAqB,MAAM;AAChC,YAAM,QAAQ,KAAK;AAAA,IACrB;AAAA,EACF;AAAA,EAEA,qBAAqB;AACnB,QAAI,CAAC,KAAK,aAAa,CAAC,KAAK,mBAAoB;AAEjD,QAAI,KAAK,UAAU,QAAQ,QAAQ,GAAG;AACpC,WAAK,UAAU,YAAY,KAAK;AAAA,IAClC,WAAW,KAAK,UAAU,QAAQ,OAAO,GAAG;AAC1C,YAAM,QAAQ,KAAK;AACnB,YAAM,QAAQ,KAAK;AAAA,IACrB;AAAA,EACF;AAAA,EAEA,oBAAoB,SAAS;AAC3B,WAAO,CAAC,QAAQ,UAAU,KAAK;AAAA,EACjC;AAAA,EAEA,kCAAkC,SAAS;AACzC,WAAO,CAAC,QAAQ,UAAU,aAAa,qBAAqB,KAAK,WAAW,KAAK,WAAW;AAAA,EAC9F;AAAA,EAEA,IAAI,cAAc;AAChB,WAAO,KAAK,WAAW,aAAa,yBAAyB;AAAA,EAC/D;AACF;AAEA,SAAS,cAAc,aAAaH,YAAW;AAC7C,QAAM,WAAW,IAAI,SAAS,WAAW;AACzC,QAAM,OAAOA,YAAW,aAAa,MAAM;AAC3C,QAAM,QAAQA,YAAW,aAAa,OAAO;AAE7C,MAAI,MAAM;AACR,aAAS,OAAO,MAAM,SAAS,EAAE;AAAA,EACnC;AAEA,SAAO;AACT;AAEA,SAAS,eAAe,YAAY;AAClC,MAAI,cAAc,MAAM;AACtB,UAAM,UAAU,SAAS,SAAS,SAAS,OAAO,MAAM,IAAI,IAAI,CAAC;AACjE,UAAM,SAAS,QAAQ,KAAK,CAACI,YAAWA,QAAO,WAAW,UAAU,CAAC;AACrE,QAAI,QAAQ;AACV,YAAM,QAAQ,OAAO,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AACjD,aAAO,QAAQ,mBAAmB,KAAK,IAAI;AAAA,IAC7C;AAAA,EACF;AACF;AAEA,SAAS,iCAAiC,UAAU;AAClD,SAAO,SAAS,cAAc,OAAO,CAAC,SAAS;AACjD;AAEA,SAAS,cAAc,aAAaJ,YAAW;AAC7C,QAAM,oBAAoB,OAAO,YAAY,WAAW,WAAW,YAAY,SAAS;AAExF,MAAIA,YAAW,aAAa,YAAY,GAAG;AACzC,WAAOA,WAAU,aAAa,YAAY,KAAK;AAAA,EACjD,OAAO;AACL,WAAO,YAAY,aAAa,QAAQ,KAAK,qBAAqB;AAAA,EACpE;AACF;AAEA,SAAS,UAAU,YAAY,aAAa;AAC1C,QAAM,SAAS,UAAU,UAAU;AAEnC,MAAI,OAAO,WAAW,GAAG;AACvB,WAAO,SAAS;AAAA,EAClB;AAEA,SAAO;AACT;AAEA,SAAS,UAAU,aAAaA,YAAW;AACzC,QAAM,SAASA,YAAW,aAAa,YAAY,KAAK,YAAY,aAAa,QAAQ,KAAK;AAC9F,SAAO,sBAAsB,OAAO,YAAY,CAAC,KAAK,YAAY;AACpE;AAEA,SAAS,WAAW,aAAaA,YAAW;AAC1C,SAAO,uBAAuBA,YAAW,aAAa,aAAa,KAAK,YAAY,OAAO;AAC7F;AAEA,IAAM,WAAN,MAAe;AAAA,EACb,YAAY,SAAS;AACnB,SAAK,UAAU;AAAA,EACjB;AAAA,EAEA,IAAI,gBAAgB;AAClB,WAAO,KAAK,QAAQ,cAAc;AAAA,EACpC;AAAA,EAEA,IAAI,WAAW;AACb,WAAO,CAAC,GAAG,KAAK,QAAQ,QAAQ;AAAA,EAClC;AAAA,EAEA,UAAU,QAAQ;AAChB,WAAO,KAAK,oBAAoB,MAAM,KAAK;AAAA,EAC7C;AAAA,EAEA,oBAAoB,QAAQ;AAC1B,WAAO,SAAS,KAAK,QAAQ,cAAc,QAAQ,MAAM,eAAe,MAAM,IAAI,IAAI;AAAA,EACxF;AAAA,EAEA,IAAI,cAAc;AAChB,WAAO,KAAK,QAAQ;AAAA,EACtB;AAAA,EAEA,IAAI,4BAA4B;AAC9B,WAAO,0BAA0B,KAAK,OAAO;AAAA,EAC/C;AAAA,EAEA,IAAI,oBAAoB;AACtB,WAAO,0BAA0B,KAAK,OAAO;AAAA,EAC/C;AAAA,EAEA,wBAAwB,IAAI;AAC1B,WAAO,wBAAwB,KAAK,SAAS,EAAE;AAAA,EACjD;AAAA,EAEA,kCAAkC,UAAU;AAC1C,UAAM,sBAAsB,CAAC;AAE7B,eAAW,2BAA2B,KAAK,mBAAmB;AAC5D,YAAM,EAAE,GAAG,IAAI;AACf,YAAM,sBAAsB,SAAS,wBAAwB,EAAE;AAC/D,UAAI,qBAAqB;AACvB,4BAAoB,EAAE,IAAI,CAAC,yBAAyB,mBAAmB;AAAA,MACzE;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AACF;AAEA,SAAS,wBAAwB,MAAM,IAAI;AACzC,SAAO,KAAK,cAAc,IAAI,EAAE,wBAAwB;AAC1D;AAEA,SAAS,0BAA0B,MAAM;AACvC,SAAO,KAAK,iBAAiB,4BAA4B;AAC3D;AAEA,IAAM,qBAAN,MAAyB;AAAA,EACvB,UAAU;AAAA,EAEV,YAAY,UAAU,aAAa;AACjC,SAAK,WAAW;AAChB,SAAK,cAAc;AAAA,EACrB;AAAA,EAEA,QAAQ;AACN,QAAI,CAAC,KAAK,SAAS;AACjB,WAAK,YAAY,iBAAiB,UAAU,KAAK,gBAAgB,IAAI;AACrE,WAAK,UAAU;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,OAAO;AACL,QAAI,KAAK,SAAS;AAChB,WAAK,YAAY,oBAAoB,UAAU,KAAK,gBAAgB,IAAI;AACxE,WAAK,UAAU;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,iBAAiB,MAAM;AACrB,SAAK,YAAY,oBAAoB,UAAU,KAAK,eAAe,KAAK;AACxE,SAAK,YAAY,iBAAiB,UAAU,KAAK,eAAe,KAAK;AAAA,EACvE;AAAA,EAEA,gBAAgB,CAAC,UAAU;AACzB,QAAI,CAAC,MAAM,kBAAkB;AAC3B,YAAM,OAAO,MAAM,kBAAkB,kBAAkB,MAAM,SAAS;AACtE,YAAMA,aAAY,MAAM,aAAa;AAErC,UACE,QACA,+BAA+B,MAAMA,UAAS,KAC9C,8BAA8B,MAAMA,UAAS,KAC7C,KAAK,SAAS,eAAe,MAAMA,UAAS,GAC5C;AACA,cAAM,eAAe;AACrB,cAAM,yBAAyB;AAC/B,aAAK,SAAS,cAAc,MAAMA,UAAS;AAAA,MAC7C;AAAA,IACF;AAAA,EACF;AACF;AAEA,SAAS,+BAA+B,MAAMA,YAAW;AACvD,QAAM,SAASA,YAAW,aAAa,YAAY,KAAK,KAAK,aAAa,QAAQ;AAElF,SAAO,UAAU;AACnB;AAEA,SAAS,8BAA8B,MAAMA,YAAW;AACtD,QAAM,SAASA,YAAW,aAAa,YAAY,KAAK,KAAK,aAAa,QAAQ;AAElF,SAAO,oBAAoB,MAAM;AACnC;AAEA,IAAM,OAAN,MAAW;AAAA,EACT,wBAAwB,CAAC,WAAW;AAAA,EAAC;AAAA,EACrC,8BAA8B,CAAC,WAAW;AAAA,EAAC;AAAA,EAE3C,YAAY,UAAU,SAAS;AAC7B,SAAK,WAAW;AAChB,SAAK,UAAU;AAAA,EACjB;AAAA;AAAA,EAIA,eAAe,QAAQ;AACrB,UAAM,UAAU,KAAK,SAAS,oBAAoB,MAAM;AACxD,QAAI,SAAS;AACX,WAAK,gBAAgB,OAAO;AAC5B,WAAK,aAAa,OAAO;AAAA,IAC3B,OAAO;AACL,WAAK,iBAAiB,EAAE,GAAG,GAAG,GAAG,EAAE,CAAC;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,2BAA2BE,WAAU;AACnC,SAAK,eAAe,UAAUA,SAAQ,CAAC;AAAA,EACzC;AAAA,EAEA,gBAAgB,SAAS;AACvB,YAAQ,eAAe;AAAA,EACzB;AAAA,EAEA,aAAa,SAAS;AACpB,QAAI,mBAAmB,aAAa;AAClC,UAAI,QAAQ,aAAa,UAAU,GAAG;AACpC,gBAAQ,MAAM;AAAA,MAChB,OAAO;AACL,gBAAQ,aAAa,YAAY,IAAI;AACrC,gBAAQ,MAAM;AACd,gBAAQ,gBAAgB,UAAU;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,iBAAiB,EAAE,GAAG,EAAE,GAAG;AACzB,SAAK,WAAW,SAAS,GAAG,CAAC;AAAA,EAC/B;AAAA,EAEA,cAAc;AACZ,SAAK,iBAAiB,EAAE,GAAG,GAAG,GAAG,EAAE,CAAC;AAAA,EACtC;AAAA,EAEA,IAAI,aAAa;AACf,WAAO;AAAA,EACT;AAAA;AAAA,EAIA,MAAM,OAAO,UAAU;AACrB,UAAM,EAAE,WAAW,cAAc,YAAY,aAAa,SAAS,IAAI;AAIvE,UAAM,mBAAmB;AAEzB,QAAI,cAAc;AAChB,UAAI;AACF,aAAK,gBAAgB,IAAI,QAAQ,CAAC,YAAa,KAAK,wBAAwB,OAAQ;AACpF,aAAK,WAAW;AAChB,cAAM,KAAK,wBAAwB,QAAQ;AAE3C,cAAM,qBAAqB,IAAI,QAAQ,CAAC,YAAa,KAAK,8BAA8B,OAAQ;AAChG,cAAM,UAAU,EAAE,QAAQ,KAAK,6BAA6B,QAAQ,KAAK,SAAS,eAAe,cAAc,KAAK,SAAS,aAAa;AAC1I,cAAM,kBAAkB,KAAK,SAAS,sBAAsB,UAAU,OAAO;AAC7E,YAAI,CAAC,gBAAiB,OAAM;AAE5B,cAAM,KAAK,eAAe,QAAQ;AAClC,aAAK,SAAS,qBAAqB,UAAU,WAAW,KAAK,SAAS,YAAY;AAClF,aAAK,SAAS,0BAA0B,KAAK,OAAO;AACpD,aAAK,wBAAwB,QAAQ;AAAA,MACvC,UAAE;AACA,eAAO,KAAK;AACZ,aAAK,sBAAsB,MAAS;AACpC,eAAO,KAAK;AAAA,MACd;AAAA,IACF,WAAW,kBAAkB;AAC3B,WAAK,WAAW,SAAS,YAAY;AAAA,IACvC;AAAA,EACF;AAAA,EAEA,WAAW,QAAQ;AACjB,SAAK,SAAS,gBAAgB,MAAM;AAAA,EACtC;AAAA,EAEA,MAAM,wBAAwB,UAAU;AACtC,SAAK,cAAc,SAAS,SAAS;AACrC,UAAM,SAAS,gBAAgB;AAAA,EACjC;AAAA,EAEA,cAAc,WAAW;AACvB,QAAI,WAAW;AACb,WAAK,QAAQ,aAAa,sBAAsB,EAAE;AAAA,IACpD,OAAO;AACL,WAAK,QAAQ,gBAAgB,oBAAoB;AAAA,IACnD;AAAA,EACF;AAAA,EAEA,mBAAmB,WAAW;AAC5B,SAAK,QAAQ,aAAa,8BAA8B,SAAS;AAAA,EACnE;AAAA,EAEA,uBAAuB;AACrB,SAAK,QAAQ,gBAAgB,4BAA4B;AAAA,EAC3D;AAAA,EAEA,MAAM,eAAe,UAAU;AAC7B,UAAM,SAAS,OAAO;AAAA,EACxB;AAAA,EAEA,wBAAwB,UAAU;AAChC,aAAS,gBAAgB;AAAA,EAC3B;AACF;AAEA,IAAM,YAAN,cAAwB,KAAK;AAAA,EAC3B,UAAU;AACR,SAAK,QAAQ,YAAY;AAAA,EAC3B;AAAA,EAEA,IAAI,WAAW;AACb,WAAO,IAAI,SAAS,KAAK,OAAO;AAAA,EAClC;AACF;AAEA,IAAM,kBAAN,MAAsB;AAAA,EACpB,YAAY,UAAU,SAAS;AAC7B,SAAK,WAAW;AAChB,SAAK,UAAU;AAAA,EACjB;AAAA,EAEA,QAAQ;AACN,SAAK,QAAQ,iBAAiB,SAAS,KAAK,YAAY;AACxD,aAAS,iBAAiB,eAAe,KAAK,WAAW;AACzD,aAAS,iBAAiB,sBAAsB,KAAK,SAAS;AAAA,EAChE;AAAA,EAEA,OAAO;AACL,SAAK,QAAQ,oBAAoB,SAAS,KAAK,YAAY;AAC3D,aAAS,oBAAoB,eAAe,KAAK,WAAW;AAC5D,aAAS,oBAAoB,sBAAsB,KAAK,SAAS;AAAA,EACnE;AAAA,EAEA,eAAe,CAAC,UAAU;AACxB,QAAI,KAAK,wBAAwB,KAAK,GAAG;AACvC,WAAK,aAAa;AAAA,IACpB,OAAO;AACL,aAAO,KAAK;AAAA,IACd;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,UAAU;AACvB,QAAI,KAAK,cAAc,KAAK,wBAAwB,KAAK,GAAG;AAC1D,UAAI,KAAK,SAAS,yBAAyB,MAAM,QAAQ,MAAM,OAAO,KAAK,MAAM,OAAO,aAAa,GAAG;AACtG,aAAK,WAAW,eAAe;AAC/B,cAAM,eAAe;AACrB,aAAK,SAAS,qBAAqB,MAAM,QAAQ,MAAM,OAAO,KAAK,MAAM,OAAO,aAAa;AAAA,MAC/F;AAAA,IACF;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,YAAY,CAAC,WAAW;AACtB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,wBAAwB,OAAO;AAC7B,UAAM,SAAS,MAAM,WAAW,MAAM,QAAQ,gBAAgB,MAAM;AACpE,UAAM,UAAU,wBAAwB,MAAM,KAAK;AAEnD,WAAO,mBAAmB,WAAW,QAAQ,QAAQ,mBAAmB,KAAK,KAAK;AAAA,EACpF;AACF;AAEA,IAAM,oBAAN,MAAwB;AAAA,EACtB,UAAU;AAAA,EAEV,YAAY,UAAU,aAAa;AACjC,SAAK,WAAW;AAChB,SAAK,cAAc;AAAA,EACrB;AAAA,EAEA,QAAQ;AACN,QAAI,CAAC,KAAK,SAAS;AACjB,WAAK,YAAY,iBAAiB,SAAS,KAAK,eAAe,IAAI;AACnE,WAAK,UAAU;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,OAAO;AACL,QAAI,KAAK,SAAS;AAChB,WAAK,YAAY,oBAAoB,SAAS,KAAK,eAAe,IAAI;AACtE,WAAK,UAAU;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,gBAAgB,MAAM;AACpB,SAAK,YAAY,oBAAoB,SAAS,KAAK,cAAc,KAAK;AACtE,SAAK,YAAY,iBAAiB,SAAS,KAAK,cAAc,KAAK;AAAA,EACrE;AAAA,EAEA,eAAe,CAAC,UAAU;AACxB,QAAI,iBAAiB,cAAc,KAAK,wBAAwB,KAAK,GAAG;AACtE,YAAM,SAAU,MAAM,gBAAgB,MAAM,aAAa,EAAE,CAAC,KAAM,MAAM;AACxE,YAAM,OAAO,wBAAwB,MAAM;AAC3C,UAAI,QAAQ,oBAAoB,KAAK,MAAM,GAAG;AAC5C,cAAMA,YAAW,mBAAmB,IAAI;AACxC,YAAI,KAAK,SAAS,yBAAyB,MAAMA,WAAU,KAAK,GAAG;AACjE,gBAAM,eAAe;AACrB,eAAK,SAAS,uBAAuB,MAAMA,SAAQ;AAAA,QACrD;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAAA,EAEA,wBAAwB,OAAO;AAC7B,WAAO,EACJ,MAAM,UAAU,MAAM,OAAO,qBAC9B,MAAM,oBACN,MAAM,QAAQ,KACd,MAAM,UACN,MAAM,WACN,MAAM,WACN,MAAM;AAAA,EAEV;AACF;AAEA,IAAM,wBAAN,MAA4B;AAAA,EAC1B,YAAY,UAAU,SAAS;AAC7B,SAAK,WAAW;AAChB,SAAK,kBAAkB,IAAI,kBAAkB,MAAM,OAAO;AAAA,EAC5D;AAAA,EAEA,QAAQ;AACN,SAAK,gBAAgB,MAAM;AAAA,EAC7B;AAAA,EAEA,OAAO;AACL,SAAK,gBAAgB,KAAK;AAAA,EAC5B;AAAA;AAAA,EAIA,6BAA6B,MAAMA,WAAU;AAC3C,WAAO;AAAA,EACT;AAAA,EAEA,kCAAkC,MAAMA,WAAU;AAChD;AAAA,EACF;AAAA;AAAA,EAIA,yBAAyB,MAAMA,WAAU,eAAe;AACtD,WACE,KAAK,SAAS,6BAA6B,MAAMA,WAAU,aAAa,MACvE,KAAK,aAAa,mBAAmB,KAAK,KAAK,aAAa,mBAAmB;AAAA,EAEpF;AAAA,EAEA,uBAAuB,MAAMA,WAAU;AACrC,UAAM,OAAO,SAAS,cAAc,MAAM;AAE1C,UAAM,OAAO;AACb,eAAW,CAAC,MAAM,KAAK,KAAKA,UAAS,cAAc;AACjD,WAAK,OAAO,OAAO,OAAO,SAAS,cAAc,OAAO,GAAG,EAAE,MAAM,MAAM,MAAM,CAAC,CAAC;AAAA,IACnF;AAEA,UAAM,SAAS,OAAO,OAAOA,WAAU,EAAE,QAAQ,GAAG,CAAC;AACrD,SAAK,aAAa,cAAc,MAAM;AACtC,SAAK,aAAa,UAAU,OAAO,IAAI;AACvC,SAAK,aAAa,UAAU,EAAE;AAE9B,UAAM,SAAS,KAAK,aAAa,mBAAmB;AACpD,QAAI,OAAQ,MAAK,aAAa,UAAU,MAAM;AAE9C,UAAM,aAAa,KAAK,aAAa,kBAAkB;AACvD,QAAI,WAAY,MAAK,aAAa,oBAAoB,UAAU;AAEhE,UAAM,cAAc,eAAe,IAAI;AACvC,QAAI,YAAa,MAAK,aAAa,qBAAqB,WAAW;AAEnE,UAAM,eAAe,KAAK,aAAa,oBAAoB;AAC3D,QAAI,aAAc,MAAK,aAAa,sBAAsB,YAAY;AAEtE,UAAM,cAAc,KAAK,aAAa,mBAAmB;AACzD,QAAI,YAAa,MAAK,aAAa,qBAAqB,EAAE;AAE1D,SAAK,SAAS,4BAA4B,MAAMA,WAAU,IAAI;AAE9D,aAAS,KAAK,YAAY,IAAI;AAC9B,SAAK,iBAAiB,oBAAoB,MAAM,KAAK,OAAO,GAAG,EAAE,MAAM,KAAK,CAAC;AAC7E,0BAAsB,MAAM,KAAK,cAAc,CAAC;AAAA,EAClD;AACF;AAEA,IAAM,QAAN,MAAY;AAAA,EACV,aAAa,4BAA4B,UAAU,qBAAqB,UAAU;AAChF,UAAM,QAAQ,IAAI,KAAK,UAAU,mBAAmB;AACpD,UAAM,MAAM;AACZ,UAAM,SAAS;AACf,UAAM,MAAM;AAAA,EACd;AAAA,EAEA,YAAY,UAAU,qBAAqB;AACzC,SAAK,WAAW;AAChB,SAAK,sBAAsB;AAAA,EAC7B;AAAA,EAEA,QAAQ;AACN,eAAW,MAAM,KAAK,qBAAqB;AACzC,YAAM,CAAC,yBAAyB,mBAAmB,IAAI,KAAK,oBAAoB,EAAE;AAClF,WAAK,SAAS,cAAc,yBAAyB,mBAAmB;AACxE,WAAK,0CAA0C,mBAAmB;AAAA,IACpE;AAAA,EACF;AAAA,EAEA,QAAQ;AACN,eAAW,MAAM,KAAK,qBAAqB;AACzC,YAAM,CAAC,uBAAuB,IAAI,KAAK,oBAAoB,EAAE;AAC7D,WAAK,wCAAwC,uBAAuB;AACpE,WAAK,uCAAuC,uBAAuB;AACnE,WAAK,SAAS,aAAa,uBAAuB;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,0CAA0C,kBAAkB;AAC1D,UAAM,cAAc,qCAAqC,gBAAgB;AACzE,qBAAiB,YAAY,WAAW;AAAA,EAC1C;AAAA,EAEA,wCAAwC,kBAAkB;AACxD,UAAMG,SAAQ,iBAAiB,UAAU,IAAI;AAC7C,qBAAiB,YAAYA,MAAK;AAAA,EACpC;AAAA,EAEA,uCAAuC,kBAAkB;AACvD,UAAM,cAAc,KAAK,mBAAmB,iBAAiB,EAAE;AAC/D,iBAAa,YAAY,gBAAgB;AAAA,EAC3C;AAAA,EAEA,mBAAmB,IAAI;AACrB,WAAO,KAAK,aAAa,KAAK,CAAC,YAAY,QAAQ,WAAW,EAAE;AAAA,EAClE;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,CAAC,GAAG,SAAS,iBAAiB,iDAAiD,CAAC;AAAA,EACzF;AACF;AAEA,SAAS,qCAAqC,kBAAkB;AAC9D,QAAM,UAAU,SAAS,cAAc,MAAM;AAC7C,UAAQ,aAAa,QAAQ,6BAA6B;AAC1D,UAAQ,aAAa,WAAW,iBAAiB,EAAE;AACnD,SAAO;AACT;AAEA,IAAM,WAAN,MAAe;AAAA,EACb,iBAAiB;AAAA,EAEjB,OAAO,cAAc,gBAAgB,YAAY;AAAA,EAEjD;AAAA,EAEA,YAAY,iBAAiB,aAAa,WAAW,aAAa,MAAM;AACtE,SAAK,kBAAkB;AACvB,SAAK,cAAc;AACnB,SAAK,YAAY;AACjB,SAAK,aAAa;AAClB,SAAK,gBAAgB,KAAK,YAAY;AACtC,SAAK,UAAU,IAAI,QAAQ,CAAC,SAAS,WAAY,KAAK,qBAAqB,EAAE,SAAS,OAAO,CAAE;AAAA,EACjG;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO;AAAA,EACT;AAAA,EAEA,IAAI,kBAAkB;AACpB,WAAO;AAAA,EACT;AAAA,EAEA,IAAI,eAAe;AACjB;AAAA,EACF;AAAA,EAEA,kBAAkB;AAChB;AAAA,EACF;AAAA,EAEA,SAAS;AAAA,EAET;AAAA,EAEA,kBAAkB;AAChB,QAAI,KAAK,oBAAoB;AAC3B,WAAK,mBAAmB,QAAQ;AAChC,aAAO,KAAK;AAAA,IACd;AAAA,EACF;AAAA,EAEA,MAAM,4BAA4B,UAAU;AAC1C,UAAM,MAAM,4BAA4B,MAAM,KAAK,qBAAqB,QAAQ;AAAA,EAClF;AAAA,EAEA,iCAAiC;AAC/B,QAAI,KAAK,iBAAiB;AACxB,YAAM,UAAU,KAAK,kBAAkB;AACvC,UAAI,SAAS;AACX,gBAAQ,MAAM;AAAA,MAChB;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAIA,cAAc,yBAAyB;AACrC,QAAI,KAAK,eAAgB;AAEzB,QAAI,wBAAwB,SAAS,KAAK,gBAAgB,aAAa,GAAG;AACxE,WAAK,iBAAiB,KAAK,gBAAgB;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,aAAa,yBAAyB;AACpC,QAAI,wBAAwB,SAAS,KAAK,cAAc,KAAK,KAAK,0BAA0B,aAAa;AACvG,WAAK,eAAe,MAAM;AAE1B,WAAK,iBAAiB;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,IAAI,oBAAoB;AACtB,WAAO,KAAK,YAAY,cAAc,KAAK,cAAc,KAAK;AAAA,EAChE;AAAA,EAEA,IAAI,iBAAiB;AACnB,WAAO,KAAK,gBAAgB;AAAA,EAC9B;AAAA,EAEA,IAAI,aAAa;AACf,WAAO,KAAK,YAAY;AAAA,EAC1B;AAAA,EAEA,IAAI,sBAAsB;AACxB,WAAO,KAAK,gBAAgB,kCAAkC,KAAK,WAAW;AAAA,EAChF;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO;AAAA,EACT;AACF;AAEA,IAAM,gBAAN,cAA4B,SAAS;AAAA,EACnC,OAAO,cAAc,gBAAgB,YAAY;AAC/C,UAAM,mBAAmB,SAAS,YAAY;AAC9C,qBAAiB,mBAAmB,cAAc;AAClD,qBAAiB,eAAe;AAEhC,UAAM,eAAe;AACrB,UAAM,cAAc,aAAa,eAAe,YAAY;AAC5D,QAAI,aAAa;AACf,kBAAY,mBAAmB,YAAY;AAC3C,qBAAe,YAAY,YAAY,gBAAgB,CAAC;AAAA,IAC1D;AAAA,EACF;AAAA,EAEA,YAAY,UAAU,iBAAiB,aAAa,eAAe,WAAW,aAAa,MAAM;AAC/F,UAAM,iBAAiB,aAAa,eAAe,WAAW,UAAU;AACxE,SAAK,WAAW;AAAA,EAClB;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO;AAAA,EACT;AAAA,EAEA,MAAM,SAAS;AACb,UAAM,YAAY;AAClB,SAAK,4BAA4B,MAAM;AACrC,WAAK,iBAAiB;AAAA,IACxB,CAAC;AACD,SAAK,oBAAoB;AACzB,UAAM,YAAY;AAClB,SAAK,+BAA+B;AACpC,UAAM,YAAY;AAClB,SAAK,uBAAuB;AAAA,EAC9B;AAAA,EAEA,mBAAmB;AACjB,SAAK,SAAS,gBAAgB,KAAK,gBAAgB,KAAK,UAAU;AAClE,SAAK,cAAc,KAAK,gBAAgB,KAAK,UAAU;AAAA,EACzD;AAAA,EAEA,sBAAsB;AACpB,QAAI,KAAK,eAAe,cAAc,KAAK,WAAW,YAAY;AAChE,YAAM,UAAU,KAAK,eAAe;AACpC,YAAM,QAAQ,0BAA0B,KAAK,eAAe,aAAa,uBAAuB,GAAG,KAAK;AACxG,YAAM,WAAW,mBAAmB,KAAK,eAAe,aAAa,0BAA0B,GAAG,MAAM;AAExG,UAAI,SAAS;AACX,gBAAQ,eAAe,EAAE,OAAO,SAAS,CAAC;AAC1C,eAAO;AAAA,MACT;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,yBAAyB;AACvB,eAAW,sBAAsB,KAAK,mBAAmB;AACvD,YAAM,yBAAyB,sBAAsB,kBAAkB;AACvE,yBAAmB,YAAY,sBAAsB;AAAA,IACvD;AAAA,EACF;AAAA,EAEA,IAAI,oBAAoB;AACtB,WAAO,KAAK,eAAe,iBAAiB,QAAQ;AAAA,EACtD;AACF;AAEA,SAAS,0BAA0B,OAAO,cAAc;AACtD,MAAI,SAAS,SAAS,SAAS,WAAW,SAAS,YAAY,SAAS,WAAW;AACjF,WAAO;AAAA,EACT,OAAO;AACL,WAAO;AAAA,EACT;AACF;AAEA,SAAS,mBAAmB,OAAO,cAAc;AAC/C,MAAI,SAAS,UAAU,SAAS,UAAU;AACxC,WAAO;AAAA,EACT,OAAO;AACL,WAAO;AAAA,EACT;AACF;AAkGA,IAAI,YAAa,WAAY;AAuB3B,QAAM,OAAO,MAAM;AAAA,EAAC;AAKpB,QAAMC,YAAW;AAAA,IACf,YAAY;AAAA,IACZ,WAAW;AAAA,MACT,iBAAiB;AAAA,MACjB,gBAAgB;AAAA,MAChB,mBAAmB;AAAA,MACnB,kBAAkB;AAAA,MAClB,mBAAmB;AAAA,MACnB,kBAAkB;AAAA,MAClB,wBAAwB;AAAA,IAC1B;AAAA,IACA,MAAM;AAAA,MACJ,OAAO;AAAA,MACP,gBAAgB,CAAC,QAAQ,IAAI,aAAa,aAAa,MAAM;AAAA,MAC7D,gBAAgB,CAAC,QAAQ,IAAI,aAAa,cAAc,MAAM;AAAA,MAC9D,cAAc;AAAA,MACd,kBAAkB;AAAA,IACpB;AAAA,IACA,cAAc;AAAA,EAChB;AAUA,WAAS,MAAM,SAAS,YAAYL,UAAS,CAAC,GAAG;AAC/C,cAAU,iBAAiB,OAAO;AAClC,UAAM,UAAU,gBAAgB,UAAU;AAC1C,UAAM,MAAM,mBAAmB,SAAS,SAASA,OAAM;AAEvD,UAAM,eAAe,oBAAoB,KAAK,MAAM;AAClD,aAAO;AAAA,QACL;AAAA,QACA;AAAA,QACA;AAAA;AAAA,QACiC,CAACM,SAAQ;AACxC,cAAIA,KAAI,eAAe,aAAa;AAClC,YAAAC,eAAcD,MAAK,SAAS,OAAO;AACnC,mBAAO,MAAM,KAAK,QAAQ,UAAU;AAAA,UACtC,OAAO;AACL,mBAAO,eAAeA,MAAK,SAAS,OAAO;AAAA,UAC7C;AAAA,QACF;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,OAAO,OAAO;AAClB,WAAO;AAAA,EACT;AAUA,WAAS,eAAe,KAAK,SAAS,SAAS;AAC7C,UAAM,YAAY,gBAAgB,OAAO;AAIzC,QAAI,aAAa,MAAM,KAAK,UAAU,UAAU;AAChD,UAAME,SAAQ,WAAW,QAAQ,OAAO;AAExC,UAAM,cAAc,WAAW,UAAUA,SAAQ;AAEjD,IAAAD;AAAA,MACE;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA;AAAA,MACA,QAAQ;AAAA;AAAA,IACV;AAGA,iBAAa,MAAM,KAAK,UAAU,UAAU;AAC5C,WAAO,WAAW,MAAMC,QAAO,WAAW,SAAS,WAAW;AAAA,EAChE;AAOA,WAAS,oBAAoB,KAAK,IAAI;AACpC,QAAI,CAAC,IAAI,OAAO,aAAc,QAAO,GAAG;AACxC,QAAI;AAAA;AAAA,MAEA,SAAS;AAAA;AAIb,QACE,EACE,yBAAyB,oBACzB,yBAAyB,sBAE3B;AACA,aAAO,GAAG;AAAA,IACZ;AAEA,UAAM,EAAE,IAAI,iBAAiB,gBAAgB,aAAa,IAAI;AAE9D,UAAM,UAAU,GAAG;AAEnB,QAAI,mBAAmB,oBAAoB,SAAS,eAAe,IAAI;AACrE,sBAAgB,IAAI,OAAO,cAAc,IAAI,eAAe,EAAE;AAC9D,qBAAe,MAAM;AAAA,IACvB;AACA,QAAI,iBAAiB,CAAC,cAAc,gBAAgB,cAAc;AAChE,oBAAc,kBAAkB,gBAAgB,YAAY;AAAA,IAC9D;AAEA,WAAO;AAAA,EACT;AAEA,QAAMD,iBAAiB,2BAAY;AA2BjC,aAASA,eACP,KACA,WACA,WACA,iBAAiB,MACjB,WAAW,MACX;AAEA,UACE,qBAAqB,uBACrB,qBAAqB,qBACrB;AAEA,oBAAY,UAAU;AAEtB,oBAAY,UAAU;AAAA,MACxB;AACA,yBAAmB,UAAU;AAG7B,iBAAW,YAAY,UAAU,YAAY;AAE3C,YAAI,kBAAkB,kBAAkB,UAAU;AAChD,gBAAM,YAAY;AAAA,YAChB;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,UACF;AACA,cAAI,WAAW;AAEb,gBAAI,cAAc,gBAAgB;AAChC,iCAAmB,KAAK,gBAAgB,SAAS;AAAA,YACnD;AACA,sBAAU,WAAW,UAAU,GAAG;AAClC,6BAAiB,UAAU;AAC3B;AAAA,UACF;AAAA,QACF;AAGA,YAAI,oBAAoB,WAAW,IAAI,cAAc,IAAI,SAAS,EAAE,GAAG;AAErE,gBAAM,aAAa;AAAA,YACjB;AAAA,YACA,SAAS;AAAA,YACT;AAAA,YACA;AAAA,UACF;AACA,oBAAU,YAAY,UAAU,GAAG;AACnC,2BAAiB,WAAW;AAC5B;AAAA,QACF;AAGA,cAAM,eAAe;AAAA,UACnB;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACF;AAEA,YAAI,cAAc;AAChB,2BAAiB,aAAa;AAAA,QAChC;AAAA,MACF;AAGA,aAAO,kBAAkB,kBAAkB,UAAU;AACnD,cAAM,WAAW;AACjB,yBAAiB,eAAe;AAChC,mBAAW,KAAK,QAAQ;AAAA,MAC1B;AAAA,IACF;AAYA,aAAS,WAAW,WAAW,UAAU,gBAAgB,KAAK;AAC5D,UAAI,IAAI,UAAU,gBAAgB,QAAQ,MAAM,MAAO,QAAO;AAC9D,UAAI,IAAI,MAAM,IAAI,QAAQ,GAAG;AAE3B,cAAM,gBAAgB,SAAS;AAAA;AAAA,UACL,SAAU;AAAA,QACpC;AACA,kBAAU,aAAa,eAAe,cAAc;AACpD,kBAAU,eAAe,UAAU,GAAG;AACtC,YAAI,UAAU,eAAe,aAAa;AAC1C,eAAO;AAAA,MACT,OAAO;AAEL,cAAM,iBAAiB,SAAS,WAAW,UAAU,IAAI;AACzD,kBAAU,aAAa,gBAAgB,cAAc;AACrD,YAAI,UAAU,eAAe,cAAc;AAC3C,eAAO;AAAA,MACT;AAAA,IACF;AAKA,UAAM,gBAAiB,2BAAY;AAWjC,eAASE,eAAc,KAAK,MAAM,YAAY,UAAU;AACtD,YAAI,YAAY;AAChB,YAAI,cAAc,KAAK;AACvB,YAAI,wBAAwB;AAE5B,YAAI,SAAS;AACb,eAAO,UAAU,UAAU,UAAU;AAEnC,cAAI,YAAY,QAAQ,IAAI,GAAG;AAC7B,gBAAI,aAAa,KAAK,QAAQ,IAAI,GAAG;AACnC,qBAAO;AAAA,YACT;AAGA,gBAAI,cAAc,MAAM;AAEtB,kBAAI,CAAC,IAAI,MAAM,IAAI,MAAM,GAAG;AAE1B,4BAAY;AAAA,cACd;AAAA,YACF;AAAA,UACF;AACA,cACE,cAAc,QACd,eACA,YAAY,QAAQ,WAAW,GAC/B;AAGA;AACA,0BAAc,YAAY;AAK1B,gBAAI,yBAAyB,GAAG;AAC9B,0BAAY;AAAA,YACd;AAAA,UACF;AAIA,cAAI,OAAO,SAAS,SAAS,aAAa,EAAG;AAE7C,mBAAS,OAAO;AAAA,QAClB;AAEA,eAAO,aAAa;AAAA,MACtB;AASA,eAAS,aAAa,KAAK,SAAS,SAAS;AAC3C,YAAI,SAAS,IAAI,MAAM,IAAI,OAAO;AAClC,YAAI,SAAS,IAAI,MAAM,IAAI,OAAO;AAElC,YAAI,CAAC,UAAU,CAAC,OAAQ,QAAO;AAE/B,mBAAW,MAAM,QAAQ;AAKvB,cAAI,OAAO,IAAI,EAAE,GAAG;AAClB,mBAAO;AAAA,UACT;AAAA,QACF;AACA,eAAO;AAAA,MACT;AAQA,eAAS,YAAY,SAAS,SAAS;AAErC,cAAM;AAAA;AAAA,UAAiC;AAAA;AACvC,cAAM;AAAA;AAAA,UAAiC;AAAA;AAEvC,eACE,OAAO,aAAa,OAAO,YAC3B,OAAO,YAAY,OAAO;AAAA;AAAA;AAAA,SAIzB,CAAC,OAAO,MAAM,OAAO,OAAO,OAAO;AAAA,MAExC;AAEA,aAAOA;AAAA,IACT,EAAG;AAaH,aAAS,WAAW,KAAK,MAAM;AAE7B,UAAI,IAAI,MAAM,IAAI,IAAI,GAAG;AAEvB,mBAAW,IAAI,QAAQ,MAAM,IAAI;AAAA,MACnC,OAAO;AAEL,YAAI,IAAI,UAAU,kBAAkB,IAAI,MAAM,MAAO;AACrD,aAAK,YAAY,YAAY,IAAI;AACjC,YAAI,UAAU,iBAAiB,IAAI;AAAA,MACrC;AAAA,IACF;AASA,aAAS,mBAAmB,KAAK,gBAAgB,cAAc;AAE7D,UAAI,SAAS;AAEb,aAAO,UAAU,WAAW,cAAc;AACxC,YAAI;AAAA;AAAA,UAAgC;AAAA;AACpC,iBAAS,OAAO;AAChB,mBAAW,KAAK,QAAQ;AAAA,MAC1B;AACA,aAAO;AAAA,IACT;AAYA,aAAS,eAAe,YAAY,IAAI,OAAO,KAAK;AAClD,YAAM;AAAA;AAAA,QAGF,IAAI,OAAO,cAAc,IAAI,EAAE,EAAE,KAC/B,IAAI,OAAO,cAAc,IAAI,EAAE,EAAE;AAAA;AAEvC,uCAAiC,QAAQ,GAAG;AAC5C,iBAAW,YAAY,QAAQ,KAAK;AACpC,aAAO;AAAA,IACT;AAUA,aAAS,iCAAiC,SAAS,KAAK;AACtD,YAAM,KAAK,QAAQ;AAEnB,aAAQ,UAAU,QAAQ,YAAa;AACrC,YAAI,QAAQ,IAAI,MAAM,IAAI,OAAO;AACjC,YAAI,OAAO;AACT,gBAAM,OAAO,EAAE;AACf,cAAI,CAAC,MAAM,MAAM;AACf,gBAAI,MAAM,OAAO,OAAO;AAAA,UAC1B;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAYA,aAAS,WAAW,YAAY,SAAS,OAAO;AAE9C,UAAI,WAAW,YAAY;AACzB,YAAI;AAEF,qBAAW,WAAW,SAAS,KAAK;AAAA,QACtC,SAAS,GAAG;AAEV,qBAAW,aAAa,SAAS,KAAK;AAAA,QACxC;AAAA,MACF,OAAO;AACL,mBAAW,aAAa,SAAS,KAAK;AAAA,MACxC;AAAA,IACF;AAEA,WAAOF;AAAA,EACT,EAAG;AAKH,QAAM,YAAa,2BAAY;AAO7B,aAASG,WAAU,SAAS,YAAY,KAAK;AAC3C,UAAI,IAAI,gBAAgB,YAAY,SAAS,eAAe;AAE1D,eAAO;AAAA,MACT;AAEA,UAAI,IAAI,UAAU,kBAAkB,SAAS,UAAU,MAAM,OAAO;AAClE,eAAO;AAAA,MACT;AAEA,UAAI,mBAAmB,mBAAmB,IAAI,KAAK,OAAQ;AAAA,eACzD,mBAAmB,mBACnB,IAAI,KAAK,UAAU,SACnB;AAEA;AAAA,UACE;AAAA;AAAA,UACgC;AAAA,UAChC;AAAA,QACF;AAAA,MACF,OAAO;AACL,wBAAgB,SAAS,YAAY,GAAG;AACxC,YAAI,CAAC,2BAA2B,SAAS,GAAG,GAAG;AAE7C,UAAAH,eAAc,KAAK,SAAS,UAAU;AAAA,QACxC;AAAA,MACF;AACA,UAAI,UAAU,iBAAiB,SAAS,UAAU;AAClD,aAAO;AAAA,IACT;AAUA,aAAS,gBAAgB,SAAS,SAAS,KAAK;AAC9C,UAAI,OAAO,QAAQ;AAInB,UAAI,SAAS,GAAsB;AACjC,cAAM;AAAA;AAAA,UAAiC;AAAA;AACvC,cAAM;AAAA;AAAA,UAAiC;AAAA;AAEvC,cAAM,gBAAgB,OAAO;AAC7B,cAAM,gBAAgB,OAAO;AAC7B,mBAAW,gBAAgB,eAAe;AACxC,cAAI,gBAAgB,aAAa,MAAM,QAAQ,UAAU,GAAG,GAAG;AAC7D;AAAA,UACF;AACA,cAAI,OAAO,aAAa,aAAa,IAAI,MAAM,aAAa,OAAO;AACjE,mBAAO,aAAa,aAAa,MAAM,aAAa,KAAK;AAAA,UAC3D;AAAA,QACF;AAEA,iBAAS,IAAI,cAAc,SAAS,GAAG,KAAK,GAAG,KAAK;AAClD,gBAAM,eAAe,cAAc,CAAC;AAIpC,cAAI,CAAC,aAAc;AAEnB,cAAI,CAAC,OAAO,aAAa,aAAa,IAAI,GAAG;AAC3C,gBAAI,gBAAgB,aAAa,MAAM,QAAQ,UAAU,GAAG,GAAG;AAC7D;AAAA,YACF;AACA,mBAAO,gBAAgB,aAAa,IAAI;AAAA,UAC1C;AAAA,QACF;AAEA,YAAI,CAAC,2BAA2B,QAAQ,GAAG,GAAG;AAC5C,yBAAe,QAAQ,QAAQ,GAAG;AAAA,QACpC;AAAA,MACF;AAGA,UAAI,SAAS,KAAmB,SAAS,GAAc;AACrD,YAAI,QAAQ,cAAc,QAAQ,WAAW;AAC3C,kBAAQ,YAAY,QAAQ;AAAA,QAC9B;AAAA,MACF;AAAA,IACF;AAYA,aAAS,eAAe,YAAY,YAAY,KAAK;AACnD,UACE,sBAAsB,oBACtB,sBAAsB,oBACtB,WAAW,SAAS,QACpB;AACA,YAAI,WAAW,WAAW;AAC1B,YAAI,WAAW,WAAW;AAG1B,6BAAqB,YAAY,YAAY,WAAW,GAAG;AAC3D,6BAAqB,YAAY,YAAY,YAAY,GAAG;AAE5D,YAAI,CAAC,WAAW,aAAa,OAAO,GAAG;AACrC,cAAI,CAAC,gBAAgB,SAAS,YAAY,UAAU,GAAG,GAAG;AACxD,uBAAW,QAAQ;AACnB,uBAAW,gBAAgB,OAAO;AAAA,UACpC;AAAA,QACF,WAAW,aAAa,UAAU;AAChC,cAAI,CAAC,gBAAgB,SAAS,YAAY,UAAU,GAAG,GAAG;AACxD,uBAAW,aAAa,SAAS,QAAQ;AACzC,uBAAW,QAAQ;AAAA,UACrB;AAAA,QACF;AAAA,MAGF,WACE,sBAAsB,qBACtB,sBAAsB,mBACtB;AACA,6BAAqB,YAAY,YAAY,YAAY,GAAG;AAAA,MAC9D,WACE,sBAAsB,uBACtB,sBAAsB,qBACtB;AACA,YAAI,WAAW,WAAW;AAC1B,YAAI,WAAW,WAAW;AAC1B,YAAI,gBAAgB,SAAS,YAAY,UAAU,GAAG,GAAG;AACvD;AAAA,QACF;AACA,YAAI,aAAa,UAAU;AACzB,qBAAW,QAAQ;AAAA,QACrB;AACA,YACE,WAAW,cACX,WAAW,WAAW,cAAc,UACpC;AACA,qBAAW,WAAW,YAAY;AAAA,QACpC;AAAA,MACF;AAAA,IACF;AAQA,aAAS,qBAAqB,YAAY,YAAY,eAAe,KAAK;AAExE,YAAM,eAAe,WAAW,aAAa,GAE3C,eAAe,WAAW,aAAa;AACzC,UAAI,iBAAiB,cAAc;AACjC,cAAM,eAAe;AAAA,UACnB;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACF;AACA,YAAI,CAAC,cAAc;AAGjB,qBAAW,aAAa,IAAI,WAAW,aAAa;AAAA,QACtD;AACA,YAAI,cAAc;AAChB,cAAI,CAAC,cAAc;AAGjB,uBAAW,aAAa,eAAe,EAAE;AAAA,UAC3C;AAAA,QACF,OAAO;AACL,cAAI,CAAC,gBAAgB,eAAe,YAAY,UAAU,GAAG,GAAG;AAC9D,uBAAW,gBAAgB,aAAa;AAAA,UAC1C;AAAA,QACF;AAAA,MACF;AAAA,IACF;AASA,aAAS,gBAAgB,MAAM,SAAS,YAAY,KAAK;AACvD,UACE,SAAS,WACT,IAAI,qBACJ,YAAY,SAAS,eACrB;AACA,eAAO;AAAA,MACT;AACA,aACE,IAAI,UAAU,uBAAuB,MAAM,SAAS,UAAU,MAC9D;AAAA,IAEJ;AAOA,aAAS,2BAA2B,uBAAuB,KAAK;AAC9D,aACE,CAAC,CAAC,IAAI,qBACN,0BAA0B,SAAS,iBACnC,0BAA0B,SAAS;AAAA,IAEvC;AAEA,WAAOG;AAAA,EACT,EAAG;AAYH,WAAS,iBAAiB,KAAK,SAAS,SAAS,UAAU;AACzD,QAAI,IAAI,KAAK,OAAO;AAClB,YAAM,UAAU,QAAQ,cAAc,MAAM;AAC5C,YAAM,UAAU,QAAQ,cAAc,MAAM;AAC5C,UAAI,WAAW,SAAS;AACtB,cAAM,WAAW,kBAAkB,SAAS,SAAS,GAAG;AAExD,eAAO,QAAQ,IAAI,QAAQ,EAAE,KAAK,MAAM;AACtC,gBAAM,SAAS,OAAO,OAAO,KAAK;AAAA,YAChC,MAAM;AAAA,cACJ,OAAO;AAAA,cACP,QAAQ;AAAA,YACV;AAAA,UACF,CAAC;AACD,iBAAO,SAAS,MAAM;AAAA,QACxB,CAAC;AAAA,MACH;AAAA,IACF;AAEA,WAAO,SAAS,GAAG;AAAA,EACrB;AAUA,WAAS,kBAAkB,SAAS,SAAS,KAAK;AAChD,QAAI,QAAQ,CAAC;AACb,QAAI,UAAU,CAAC;AACf,QAAI,YAAY,CAAC;AACjB,QAAI,gBAAgB,CAAC;AAGrB,QAAI,oBAAoB,oBAAI,IAAI;AAChC,eAAW,gBAAgB,QAAQ,UAAU;AAC3C,wBAAkB,IAAI,aAAa,WAAW,YAAY;AAAA,IAC5D;AAGA,eAAW,kBAAkB,QAAQ,UAAU;AAE7C,UAAI,eAAe,kBAAkB,IAAI,eAAe,SAAS;AACjE,UAAI,eAAe,IAAI,KAAK,eAAe,cAAc;AACzD,UAAI,cAAc,IAAI,KAAK,eAAe,cAAc;AACxD,UAAI,gBAAgB,aAAa;AAC/B,YAAI,cAAc;AAEhB,kBAAQ,KAAK,cAAc;AAAA,QAC7B,OAAO;AAGL,4BAAkB,OAAO,eAAe,SAAS;AACjD,oBAAU,KAAK,cAAc;AAAA,QAC/B;AAAA,MACF,OAAO;AACL,YAAI,IAAI,KAAK,UAAU,UAAU;AAG/B,cAAI,cAAc;AAChB,oBAAQ,KAAK,cAAc;AAC3B,0BAAc,KAAK,cAAc;AAAA,UACnC;AAAA,QACF,OAAO;AAEL,cAAI,IAAI,KAAK,aAAa,cAAc,MAAM,OAAO;AACnD,oBAAQ,KAAK,cAAc;AAAA,UAC7B;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAIA,kBAAc,KAAK,GAAG,kBAAkB,OAAO,CAAC;AAEhD,QAAI,WAAW,CAAC;AAChB,eAAW,WAAW,eAAe;AAEnC,UAAI;AAAA;AAAA,QACF,SAAS,YAAY,EAAE,yBAAyB,QAAQ,SAAS,EAC9D;AAAA;AAEL,UAAI,IAAI,UAAU,gBAAgB,MAAM,MAAM,OAAO;AACnD,YACG,UAAU,UAAU,OAAO,QAC3B,SAAS,UAAU,OAAO,KAC3B;AACsC,cAAI;AAC1C,cAAI,UAAU,IAAI,QAAQ,SAAU,UAAU;AAC5C,sBAAU;AAAA,UACZ,CAAC;AACD,iBAAO,iBAAiB,QAAQ,WAAY;AAC1C,oBAAQ;AAAA,UACV,CAAC;AACD,mBAAS,KAAK,OAAO;AAAA,QACvB;AACA,gBAAQ,YAAY,MAAM;AAC1B,YAAI,UAAU,eAAe,MAAM;AACnC,cAAM,KAAK,MAAM;AAAA,MACnB;AAAA,IACF;AAIA,eAAW,kBAAkB,SAAS;AACpC,UAAI,IAAI,UAAU,kBAAkB,cAAc,MAAM,OAAO;AAC7D,gBAAQ,YAAY,cAAc;AAClC,YAAI,UAAU,iBAAiB,cAAc;AAAA,MAC/C;AAAA,IACF;AAEA,QAAI,KAAK,iBAAiB,SAAS;AAAA,MACjC;AAAA,MACA,MAAM;AAAA,MACN;AAAA,IACF,CAAC;AACD,WAAO;AAAA,EACT;AAKA,QAAM,qBAAsB,2BAAY;AAQtC,aAASC,oBAAmB,SAAS,YAAYX,SAAQ;AACvD,YAAM,EAAE,eAAe,MAAM,IAAI,aAAa,SAAS,UAAU;AAEjE,YAAM,eAAe,cAAcA,OAAM;AACzC,YAAM,aAAa,aAAa,cAAc;AAC9C,UAAI,CAAC,CAAC,aAAa,WAAW,EAAE,SAAS,UAAU,GAAG;AACpD,cAAM,wCAAwC,UAAU;AAAA,MAC1D;AAEA,aAAO;AAAA,QACL,QAAQ;AAAA,QACR;AAAA,QACA,QAAQ;AAAA,QACR;AAAA,QACA,cAAc,aAAa;AAAA,QAC3B,mBAAmB,aAAa;AAAA,QAChC,cAAc,aAAa;AAAA,QAC3B;AAAA,QACA;AAAA,QACA,QAAQ,aAAa;AAAA,QACrB,WAAW,aAAa;AAAA,QACxB,MAAM,aAAa;AAAA,MACrB;AAAA,IACF;AAQA,aAAS,cAAcA,SAAQ;AAC7B,UAAI,cAAc,OAAO,OAAO,CAAC,GAAGK,SAAQ;AAG5C,aAAO,OAAO,aAAaL,OAAM;AAGjC,kBAAY,YAAY,OAAO;AAAA,QAC7B,CAAC;AAAA,QACDK,UAAS;AAAA,QACTL,QAAO;AAAA,MACT;AAGA,kBAAY,OAAO,OAAO,OAAO,CAAC,GAAGK,UAAS,MAAML,QAAO,IAAI;AAE/D,aAAO;AAAA,IACT;AAKA,aAAS,eAAe;AACtB,YAAM,SAAS,SAAS,cAAc,KAAK;AAC3C,aAAO,SAAS;AAChB,eAAS,KAAK,sBAAsB,YAAY,MAAM;AACtD,aAAO;AAAA,IACT;AAQA,aAAS,eAAe,MAAM;AAC5B,UAAI,WAAW,MAAM,KAAK,KAAK,iBAAiB,MAAM,CAAC;AACvD,UAAI,KAAK,IAAI;AACX,iBAAS,KAAK,IAAI;AAAA,MACpB;AACA,aAAO;AAAA,IACT;AAaA,aAAS,sBAAsB,OAAO,eAAe,MAAM,UAAU;AACnE,iBAAW,OAAO,UAAU;AAC1B,YAAI,cAAc,IAAI,IAAI,EAAE,GAAG;AAE7B,cAAI,UAAU;AAGd,iBAAO,SAAS;AACd,gBAAI,QAAQ,MAAM,IAAI,OAAO;AAE7B,gBAAI,SAAS,MAAM;AACjB,sBAAQ,oBAAI,IAAI;AAChB,oBAAM,IAAI,SAAS,KAAK;AAAA,YAC1B;AACA,kBAAM,IAAI,IAAI,EAAE;AAEhB,gBAAI,YAAY,KAAM;AACtB,sBAAU,QAAQ;AAAA,UACpB;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAYA,aAAS,aAAa,YAAY,YAAY;AAC5C,YAAM,gBAAgB,eAAe,UAAU;AAC/C,YAAM,gBAAgB,eAAe,UAAU;AAE/C,YAAM,gBAAgB,oBAAoB,eAAe,aAAa;AAGtE,UAAI,QAAQ,oBAAI,IAAI;AACpB,4BAAsB,OAAO,eAAe,YAAY,aAAa;AAGrE,YAAM,UAAU,WAAW,mBAAmB;AAC9C,4BAAsB,OAAO,eAAe,SAAS,aAAa;AAElE,aAAO,EAAE,eAAe,MAAM;AAAA,IAChC;AASA,aAAS,oBAAoB,eAAe,eAAe;AACzD,UAAI,eAAe,oBAAI,IAAI;AAG3B,UAAI,kBAAkB,oBAAI,IAAI;AAC9B,iBAAW,EAAE,IAAI,QAAQ,KAAK,eAAe;AAC3C,YAAI,gBAAgB,IAAI,EAAE,GAAG;AAC3B,uBAAa,IAAI,EAAE;AAAA,QACrB,OAAO;AACL,0BAAgB,IAAI,IAAI,OAAO;AAAA,QACjC;AAAA,MACF;AAEA,UAAI,gBAAgB,oBAAI,IAAI;AAC5B,iBAAW,EAAE,IAAI,QAAQ,KAAK,eAAe;AAC3C,YAAI,cAAc,IAAI,EAAE,GAAG;AACzB,uBAAa,IAAI,EAAE;AAAA,QACrB,WAAW,gBAAgB,IAAI,EAAE,MAAM,SAAS;AAC9C,wBAAc,IAAI,EAAE;AAAA,QACtB;AAAA,MAEF;AAEA,iBAAW,MAAM,cAAc;AAC7B,sBAAc,OAAO,EAAE;AAAA,MACzB;AACA,aAAO;AAAA,IACT;AAEA,WAAOW;AAAA,EACT,EAAG;AAKH,QAAM,EAAE,kBAAkB,gBAAgB,IAAK,2BAAY;AAEzD,UAAM,uBAAuB,oBAAI,QAAQ;AAOzC,aAASC,kBAAiB,SAAS;AACjC,UAAI,mBAAmB,UAAU;AAC/B,eAAO,QAAQ;AAAA,MACjB,OAAO;AACL,eAAO;AAAA,MACT;AAAA,IACF;AAOA,aAASC,iBAAgB,YAAY;AACnC,UAAI,cAAc,MAAM;AACtB,eAAO,SAAS,cAAc,KAAK;AAAA,MACrC,WAAW,OAAO,eAAe,UAAU;AACzC,eAAOA,iBAAgB,aAAa,UAAU,CAAC;AAAA,MACjD,WACE,qBAAqB;AAAA;AAAA,QAA4B;AAAA,MAAW,GAC5D;AAEA;AAAA;AAAA,UAA+B;AAAA;AAAA,MACjC,WAAW,sBAAsB,MAAM;AACrC,YAAI,WAAW,YAAY;AAIzB,iBAAO,sBAAsB,UAAU;AAAA,QACzC,OAAO;AAEL,gBAAM,cAAc,SAAS,cAAc,KAAK;AAChD,sBAAY,OAAO,UAAU;AAC7B,iBAAO;AAAA,QACT;AAAA,MACF,OAAO;AAGL,cAAM,cAAc,SAAS,cAAc,KAAK;AAChD,mBAAW,OAAO,CAAC,GAAG,UAAU,GAAG;AACjC,sBAAY,OAAO,GAAG;AAAA,QACxB;AACA,eAAO;AAAA,MACT;AAAA,IACF;AASA,aAAS,sBAAsB,YAAY;AACzC;AAAA;AAAA;AAAA,QAC0B;AAAA,UACtB,YAAY,CAAC,UAAU;AAAA;AAAA,UAEvB,kBAAkB,CAAC,MAAM;AAEvB,kBAAM,WAAW,WAAW,iBAAiB,CAAC;AAE9C,mBAAO,WAAW,QAAQ,CAAC,IAAI,CAAC,YAAY,GAAG,QAAQ,IAAI;AAAA,UAC7D;AAAA;AAAA,UAEA,cAAc,CAAC,GAAG,MAAM,WAAW,WAAW,aAAa,GAAG,CAAC;AAAA;AAAA,UAE/D,YAAY,CAAC,GAAG,MAAM,WAAW,WAAW,WAAW,GAAG,CAAC;AAAA;AAAA,UAE3D,IAAI,kBAAkB;AACpB,mBAAO;AAAA,UACT;AAAA,QACF;AAAA;AAAA,IAEJ;AAOA,aAAS,aAAa,YAAY;AAChC,UAAI,SAAS,IAAI,UAAU;AAG3B,UAAI,yBAAyB,WAAW;AAAA,QACtC;AAAA,QACA;AAAA,MACF;AAGA,UACE,uBAAuB,MAAM,UAAU,KACvC,uBAAuB,MAAM,UAAU,KACvC,uBAAuB,MAAM,UAAU,GACvC;AACA,YAAI,UAAU,OAAO,gBAAgB,YAAY,WAAW;AAE5D,YAAI,uBAAuB,MAAM,UAAU,GAAG;AAC5C,+BAAqB,IAAI,OAAO;AAChC,iBAAO;AAAA,QACT,OAAO;AAEL,cAAI,cAAc,QAAQ;AAC1B,cAAI,aAAa;AACf,iCAAqB,IAAI,WAAW;AAAA,UACtC;AACA,iBAAO;AAAA,QACT;AAAA,MACF,OAAO;AAGL,YAAI,cAAc,OAAO;AAAA,UACvB,qBAAqB,aAAa;AAAA,UAClC;AAAA,QACF;AACA,YAAI;AAAA;AAAA,UACF,YAAY,KAAK,cAAc,UAAU,EACzC;AAAA;AACF,6BAAqB,IAAI,OAAO;AAChC,eAAO;AAAA,MACT;AAAA,IACF;AAEA,WAAO,EAAE,kBAAAD,mBAAkB,iBAAAC,iBAAgB;AAAA,EAC7C,EAAG;AAKH,SAAO;AAAA,IACL;AAAA,IACA,UAAAR;AAAA,EACF;AACF,EAAG;AAEH,SAAS,cAAc,gBAAgB,YAAY,EAAE,WAAW,GAAG,QAAQ,IAAI,CAAC,GAAG;AACjF,YAAU,MAAM,gBAAgB,YAAY;AAAA,IAC1C,GAAG;AAAA,IACH,WAAW,IAAI,0BAA0B,SAAS;AAAA,EACpD,CAAC;AACH;AAEA,SAAS,cAAc,gBAAgB,YAAY;AACjD,gBAAc,gBAAgB,WAAW,YAAY;AAAA,IACnD,YAAY;AAAA,EACd,CAAC;AACH;AAEA,IAAM,4BAAN,MAAgC;AAAA,EAC9B;AAAA,EAEA,YAAY,EAAE,kBAAkB,IAAI,CAAC,GAAG;AACtC,SAAK,qBAAqB,sBAAsB,MAAM;AAAA,EACxD;AAAA,EAEA,kBAAkB,CAAC,SAAS;AAC1B,WAAO,EAAE,KAAK,MAAM,KAAK,aAAa,sBAAsB,KAAK,SAAS,eAAe,KAAK,EAAE;AAAA,EAClG;AAAA,EAEA,oBAAoB,CAAC,gBAAgB,eAAe;AAClD,QAAI,0BAA0B,SAAS;AACrC,UAAI,CAAC,eAAe,aAAa,sBAAsB,KAAK,KAAK,mBAAmB,gBAAgB,UAAU,GAAG;AAC/G,cAAM,QAAQ,SAAS,8BAA8B;AAAA,UACnD,YAAY;AAAA,UACZ,QAAQ;AAAA,UACR,QAAQ,EAAE,gBAAgB,WAAW;AAAA,QACvC,CAAC;AAED,eAAO,CAAC,MAAM;AAAA,MAChB,OAAO;AACL,eAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAAA,EAEA,yBAAyB,CAAC,eAAe,QAAQ,iBAAiB;AAChE,UAAM,QAAQ,SAAS,gCAAgC;AAAA,MACrD,YAAY;AAAA,MACZ;AAAA,MACA,QAAQ,EAAE,eAAe,aAAa;AAAA,IACxC,CAAC;AAED,WAAO,CAAC,MAAM;AAAA,EAChB;AAAA,EAEA,oBAAoB,CAAC,SAAS;AAC5B,WAAO,KAAK,kBAAkB,IAAI;AAAA,EACpC;AAAA,EAEA,mBAAmB,CAAC,gBAAgB,eAAe;AACjD,QAAI,0BAA0B,SAAS;AACrC,eAAS,uBAAuB;AAAA,QAC9B,QAAQ;AAAA,QACR,QAAQ,EAAE,gBAAgB,WAAW;AAAA,MACvC,CAAC;AAAA,IACH;AAAA,EACF;AACF;AAEA,IAAM,wBAAN,cAAoC,cAAc;AAAA,EAChD,OAAO,cAAc,gBAAgB,YAAY;AAC/C,aAAS,4BAA4B;AAAA,MACnC,QAAQ;AAAA,MACR,QAAQ,EAAE,gBAAgB,WAAW;AAAA,IACvC,CAAC;AAED,kBAAc,gBAAgB,UAAU;AAAA,EAC1C;AAAA,EAEA,MAAM,4BAA4B,UAAU;AAC1C,WAAO,MAAM,SAAS;AAAA,EACxB;AACF;AAEA,IAAM,cAAN,MAAM,aAAY;AAAA,EAChB,OAAO,oBAAoB;AAAA;AAAA,EAE3B,WAAW,aAAa;AACtB,WAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAUO,aAAY,iBAAiB;AAAA,oBAC3B,aAAY,oBAAoB,CAAC,MAAM,aAAY,oBAAoB,CAAC;AAAA;AAAA;AAAA;AAAA,EAI1F;AAAA,EAEA,SAAS;AAAA,EACT,QAAQ;AAAA,EACR,UAAU;AAAA,EAEV,cAAc;AACZ,SAAK,oBAAoB,KAAK,wBAAwB;AACtD,SAAK,kBAAkB,KAAK,sBAAsB;AAClD,SAAK,yBAAyB;AAC9B,SAAK,SAAS,CAAC;AAAA,EACjB;AAAA,EAEA,OAAO;AACL,QAAI,CAAC,KAAK,SAAS;AACjB,WAAK,UAAU;AACf,WAAK,uBAAuB;AAC5B,WAAK,eAAe;AAAA,IACtB;AAAA,EACF;AAAA,EAEA,OAAO;AACL,QAAI,KAAK,WAAW,CAAC,KAAK,QAAQ;AAChC,WAAK,SAAS;AACd,WAAK,oBAAoB,MAAM;AAC7B,aAAK,yBAAyB;AAC9B,aAAK,cAAc;AACnB,aAAK,UAAU;AACf,aAAK,SAAS;AAAA,MAChB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,SAAS,OAAO;AACd,SAAK,QAAQ;AACb,SAAK,QAAQ;AAAA,EACf;AAAA;AAAA,EAIA,2BAA2B;AACzB,aAAS,KAAK,aAAa,KAAK,mBAAmB,SAAS,KAAK,UAAU;AAAA,EAC7E;AAAA,EAEA,yBAAyB;AACvB,SAAK,gBAAgB,MAAM,QAAQ;AACnC,SAAK,gBAAgB,MAAM,UAAU;AACrC,aAAS,gBAAgB,aAAa,KAAK,iBAAiB,SAAS,IAAI;AACzE,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,oBAAoB,UAAU;AAC5B,SAAK,gBAAgB,MAAM,UAAU;AACrC,eAAW,UAAU,aAAY,oBAAoB,GAAG;AAAA,EAC1D;AAAA,EAEA,2BAA2B;AACzB,QAAI,KAAK,gBAAgB,YAAY;AACnC,eAAS,gBAAgB,YAAY,KAAK,eAAe;AAAA,IAC3D;AAAA,EACF;AAAA,EAEA,iBAAiB;AACf,QAAI,CAAC,KAAK,iBAAiB;AACzB,WAAK,kBAAkB,OAAO,YAAY,KAAK,SAAS,aAAY,iBAAiB;AAAA,IACvF;AAAA,EACF;AAAA,EAEA,gBAAgB;AACd,WAAO,cAAc,KAAK,eAAe;AACzC,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,UAAU,MAAM;AACd,SAAK,SAAS,KAAK,QAAQ,KAAK,OAAO,IAAI,GAAG;AAAA,EAChD;AAAA,EAEA,UAAU;AACR,0BAAsB,MAAM;AAC1B,WAAK,gBAAgB,MAAM,QAAQ,GAAG,KAAK,KAAK,QAAQ,EAAE;AAAA,IAC5D,CAAC;AAAA,EACH;AAAA,EAEA,0BAA0B;AACxB,UAAM,UAAU,SAAS,cAAc,OAAO;AAC9C,YAAQ,OAAO;AACf,YAAQ,cAAc,aAAY;AAClC,UAAM,WAAW,YAAY;AAC7B,QAAI,UAAU;AACZ,cAAQ,QAAQ;AAAA,IAClB;AACA,WAAO;AAAA,EACT;AAAA,EAEA,wBAAwB;AACtB,UAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,YAAQ,YAAY;AACpB,WAAO;AAAA,EACT;AACF;AAEA,IAAM,eAAN,cAA2B,SAAS;AAAA,EAClC,qBAAqB,KAAK,SACvB,OAAO,CAAC,YAAY,CAAC,kBAAkB,OAAO,CAAC,EAC/C,IAAI,CAAC,YAAY,oBAAoB,OAAO,CAAC,EAC7C,OAAO,CAAC,QAAQ,YAAY;AAC3B,UAAM,EAAE,UAAU,IAAI;AACtB,UAAM,UACJ,aAAa,SACT,OAAO,SAAS,IAChB;AAAA,MACE,MAAM,YAAY,OAAO;AAAA,MACzB,SAAS,iBAAiB,OAAO;AAAA,MACjC,UAAU,CAAC;AAAA,IACb;AACN,WAAO;AAAA,MACL,GAAG;AAAA,MACH,CAAC,SAAS,GAAG;AAAA,QACX,GAAG;AAAA,QACH,UAAU,CAAC,GAAG,QAAQ,UAAU,OAAO;AAAA,MACzC;AAAA,IACF;AAAA,EACF,GAAG,CAAC,CAAC;AAAA,EAEP,IAAI,0BAA0B;AAC5B,WAAO,OAAO,KAAK,KAAK,kBAAkB,EACvC,OAAO,CAAC,cAAc,KAAK,mBAAmB,SAAS,EAAE,OAAO,EAChE,KAAK,EAAE;AAAA,EACZ;AAAA,EAEA,+BAA+B,UAAU;AACvC,WAAO,KAAK,qCAAqC,UAAU,QAAQ;AAAA,EACrE;AAAA,EAEA,mCAAmC,UAAU;AAC3C,WAAO,KAAK,qCAAqC,cAAc,QAAQ;AAAA,EACzE;AAAA,EAEA,qCAAqC,aAAa,UAAU;AAC1D,WAAO,OAAO,KAAK,KAAK,kBAAkB,EACvC,OAAO,CAAC,cAAc,EAAE,aAAa,SAAS,mBAAmB,EACjE,IAAI,CAAC,cAAc,KAAK,mBAAmB,SAAS,CAAC,EACrD,OAAO,CAAC,EAAE,KAAK,MAAM,QAAQ,WAAW,EACxC,IAAI,CAAC,EAAE,UAAU,CAAC,OAAO,EAAE,MAAM,OAAO;AAAA,EAC7C;AAAA,EAEA,IAAI,sBAAsB;AACxB,WAAO,OAAO,KAAK,KAAK,kBAAkB,EAAE,OAAO,CAAC,QAAQ,cAAc;AACxE,YAAM,EAAE,MAAM,SAAS,SAAS,IAAI,KAAK,mBAAmB,SAAS;AACrE,UAAI,QAAQ,QAAQ,CAAC,SAAS;AAC5B,eAAO,CAAC,GAAG,QAAQ,GAAG,QAAQ;AAAA,MAChC,WAAW,SAAS,SAAS,GAAG;AAC9B,eAAO,CAAC,GAAG,QAAQ,GAAG,SAAS,MAAM,CAAC,CAAC;AAAA,MACzC,OAAO;AACL,eAAO;AAAA,MACT;AAAA,IACF,GAAG,CAAC,CAAC;AAAA,EACP;AAAA,EAEA,aAAa,MAAM;AACjB,UAAM,UAAU,KAAK,sBAAsB,IAAI;AAC/C,WAAO,UAAU,QAAQ,aAAa,SAAS,IAAI;AAAA,EACrD;AAAA,EAEA,sBAAsB,MAAM;AAC1B,WAAO,OAAO,KAAK,KAAK,kBAAkB,EAAE,OAAO,CAAC,QAAQ,cAAc;AACxE,YAAM;AAAA,QACJ,UAAU,CAAC,OAAO;AAAA,MACpB,IAAI,KAAK,mBAAmB,SAAS;AACrC,aAAO,6BAA6B,SAAS,IAAI,IAAI,UAAU;AAAA,IACjE,GAAG,SAAY,MAAS;AAAA,EAC1B;AACF;AAEA,SAAS,YAAY,SAAS;AAC5B,MAAI,gBAAgB,OAAO,GAAG;AAC5B,WAAO;AAAA,EACT,WAAW,oBAAoB,OAAO,GAAG;AACvC,WAAO;AAAA,EACT;AACF;AAEA,SAAS,iBAAiB,SAAS;AACjC,SAAO,QAAQ,aAAa,kBAAkB,KAAK;AACrD;AAEA,SAAS,gBAAgB,SAAS;AAChC,QAAM,UAAU,QAAQ;AACxB,SAAO,WAAW;AACpB;AAEA,SAAS,kBAAkB,SAAS;AAClC,QAAM,UAAU,QAAQ;AACxB,SAAO,WAAW;AACpB;AAEA,SAAS,oBAAoB,SAAS;AACpC,QAAM,UAAU,QAAQ;AACxB,SAAO,WAAW,WAAY,WAAW,UAAU,QAAQ,aAAa,KAAK,KAAK;AACpF;AAEA,SAAS,6BAA6B,SAAS,MAAM;AACnD,QAAM,UAAU,QAAQ;AACxB,SAAO,WAAW,UAAU,QAAQ,aAAa,MAAM,KAAK;AAC9D;AAEA,SAAS,oBAAoB,SAAS;AACpC,MAAI,QAAQ,aAAa,OAAO,GAAG;AACjC,YAAQ,aAAa,SAAS,EAAE;AAAA,EAClC;AAEA,SAAO;AACT;AAEA,IAAM,eAAN,MAAM,sBAAqB,SAAS;AAAA,EAClC,OAAO,eAAe,OAAO,IAAI;AAC/B,WAAO,KAAK,aAAa,kBAAkB,IAAI,CAAC;AAAA,EAClD;AAAA,EAEA,OAAO,YAAY,SAAS;AAC1B,WAAO,KAAK,aAAa,QAAQ,aAAa;AAAA,EAChD;AAAA,EAEA,OAAO,aAAa,EAAE,iBAAiB,MAAM,KAAK,GAAG;AACnD,WAAO,IAAI,KAAK,iBAAiB,MAAM,IAAI,aAAa,IAAI,CAAC;AAAA,EAC/D;AAAA,EAEA,YAAY,iBAAiB,MAAM,cAAc;AAC/C,UAAM,IAAI;AACV,SAAK,kBAAkB;AACvB,SAAK,eAAe;AAAA,EACtB;AAAA,EAEA,QAAQ;AACN,UAAM,gBAAgB,KAAK,QAAQ,UAAU,IAAI;AAEjD,UAAM,iBAAiB,KAAK,QAAQ,iBAAiB,QAAQ;AAC7D,UAAM,uBAAuB,cAAc,iBAAiB,QAAQ;AAEpE,eAAW,CAACG,QAAO,MAAM,KAAK,eAAe,QAAQ,GAAG;AACtD,YAAMJ,SAAQ,qBAAqBI,MAAK;AACxC,iBAAWM,WAAUV,OAAM,gBAAiB,CAAAU,QAAO,WAAW;AAC9D,iBAAWA,WAAU,OAAO,gBAAiB,CAAAV,OAAM,QAAQU,QAAO,KAAK,EAAE,WAAW;AAAA,IACtF;AAEA,eAAW,uBAAuB,cAAc,iBAAiB,wBAAwB,GAAG;AAC1F,0BAAoB,QAAQ;AAAA,IAC9B;AAEA,WAAO,IAAI,cAAa,KAAK,iBAAiB,eAAe,KAAK,YAAY;AAAA,EAChF;AAAA,EAEA,IAAI,OAAO;AACT,WAAO,KAAK,gBAAgB,aAAa,MAAM;AAAA,EACjD;AAAA,EAEA,IAAI,cAAc;AAChB,WAAO,KAAK,aAAa;AAAA,EAC3B;AAAA,EAEA,IAAI,eAAe;AACjB,UAAM,OAAO,KAAK,WAAW,MAAM,KAAK;AACxC,WAAO,UAAU,IAAI;AAAA,EACvB;AAAA,EAEA,IAAI,oBAAoB;AACtB,WAAO,KAAK,WAAW,eAAe;AAAA,EACxC;AAAA,EAEA,IAAI,gBAAgB;AAClB,WAAO,KAAK,qBAAqB;AAAA,EACnC;AAAA,EAEA,IAAI,cAAc;AAChB,WAAO,KAAK,qBAAqB;AAAA,EACnC;AAAA,EAEA,IAAI,cAAc;AAChB,WAAO,KAAK,WAAW,eAAe,KAAK;AAAA,EAC7C;AAAA,EAEA,IAAI,yBAAyB;AAC3B,WAAO,KAAK,aAAa,aAAa,iBAAiB,MAAM;AAAA,EAC/D;AAAA,EAEA,IAAI,kBAAkB;AACpB,WAAO,KAAK,WAAW,gBAAgB,MAAM;AAAA,EAC/C;AAAA,EAEA,IAAI,+BAA+B;AACjC,WAAO,KAAK,WAAW,gBAAgB,MAAM;AAAA,EAC/C;AAAA;AAAA,EAIA,WAAW,MAAM;AACf,WAAO,KAAK,aAAa,aAAa,SAAS,IAAI,EAAE;AAAA,EACvD;AACF;AAEA,IAAM,mBAAN,MAAuB;AAAA,EACrB,yBAAyB;AAAA,EACzB,iBAAiB,QAAQ,QAAQ;AAAA,EAEjC,aAAa,mBAAmB,QAAQ;AACtC,QAAI,qBAAqB,KAAK,4BAA4B,CAAC,KAAK,wBAAwB;AACtF,WAAK,yBAAyB;AAC9B,WAAK,iBAAiB,KAAK,eAAe,KAAK,YAAY;AACzD,cAAM,SAAS,oBAAoB,MAAM,EAAE;AAAA,MAC7C,CAAC;AAAA,IACH,OAAO;AACL,WAAK,iBAAiB,KAAK,eAAe,KAAK,MAAM;AAAA,IACvD;AAEA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,2BAA2B;AAC7B,WAAO,SAAS;AAAA,EAClB;AACF;AAEA,IAAM,iBAAiB;AAAA,EACrB,QAAQ;AAAA,EACR,gBAAgB;AAAA,EAChB,qBAAqB,MAAM;AAAA,EAAC;AAAA,EAC5B,YAAY;AAAA,EACZ,eAAe;AAAA,EACf,qBAAqB;AAAA,EACrB,uBAAuB;AACzB;AAEA,IAAM,eAAe;AAAA,EACnB,YAAY;AAAA,EACZ,cAAc;AAAA,EACd,YAAY;AAAA,EACZ,UAAU;AACZ;AAEA,IAAM,aAAa;AAAA,EACjB,aAAa;AAAA,EACb,SAAS;AAAA,EACT,UAAU;AAAA,EACV,QAAQ;AAAA,EACR,WAAW;AACb;AAEA,IAAM,mBAAmB;AAAA,EACvB,gBAAgB;AAAA,EAChB,gBAAgB;AAAA,EAChB,qBAAqB;AACvB;AAEA,IAAM,YAAY;AAAA,EAChB,SAAS;AAAA,EACT,SAAS;AAAA,EACT,SAAS;AACX;AAEA,IAAM,QAAN,MAAY;AAAA,EACV,aAAa,KAAK;AAAA;AAAA,EAClB,gBAAgB,CAAC;AAAA,EAEjB,mBAAmB;AAAA,EACnB,iBAAiB;AAAA,EACjB,WAAW;AAAA,EACX,sBAAsB;AAAA,EACtB,wBAAwB;AAAA,EACxB,iBAAiB;AAAA,EACjB,QAAQ,WAAW;AAAA,EACnB,mBAAmB,IAAI,iBAAiB;AAAA,EAExC,YAAY,UAAUb,WAAU,uBAAuB,UAAU,CAAC,GAAG;AACnE,SAAK,WAAW;AAChB,SAAK,WAAWA;AAChB,SAAK,wBAAwB,yBAAyB,KAAK;AAE3D,UAAM;AAAA,MACJ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,IAAI;AAAA,MACF,GAAG;AAAA,MACH,GAAG;AAAA,IACL;AACA,SAAK,SAAS;AACd,SAAK,iBAAiB;AACtB,SAAK,WAAW;AAChB,SAAK,WAAW;AAChB,SAAK,eAAe;AACpB,SAAK,WAAW;AAChB,SAAK,aAAa,KAAK,SAAS,6BAA6B,KAAK,UAAU,KAAK,MAAM;AACvF,SAAK,gBAAgB,KAAK,KAAK,cAAc,IAAI;AACjD,SAAK,sBAAsB;AAC3B,SAAK,aAAa;AAClB,SAAK,gBAAgB;AACrB,SAAK,WAAW,CAAC;AACjB,SAAK,sBAAsB;AAC3B,SAAK,wBAAwB;AAC7B,SAAK,YAAY,aAAa,UAAU,MAAM;AAAA,EAChD;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,SAAS;AAAA,EACvB;AAAA,EAEA,IAAI,OAAO;AACT,WAAO,KAAK,SAAS;AAAA,EACvB;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,SAAS;AAAA,EACvB;AAAA,EAEA,IAAI,kBAAkB;AACpB,WAAO,KAAK,QAAQ,gCAAgC,KAAK,qBAAqB;AAAA,EAChF;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,QAAQ;AACN,QAAI,KAAK,SAAS,WAAW,aAAa;AACxC,WAAK,mBAAmB,aAAa,UAAU;AAC/C,WAAK,QAAQ,WAAW;AACxB,WAAK,QAAQ,aAAa,IAAI;AAC9B,WAAK,SAAS,aAAa,IAAI;AAAA,IACjC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,QAAI,KAAK,SAAS,WAAW,SAAS;AACpC,UAAI,KAAK,SAAS;AAChB,aAAK,QAAQ,OAAO;AAAA,MACtB;AACA,WAAK,aAAa;AAClB,WAAK,QAAQ,WAAW;AAAA,IAC1B;AAAA,EACF;AAAA,EAEA,WAAW;AACT,QAAI,KAAK,SAAS,WAAW,SAAS;AACpC,WAAK,mBAAmB,aAAa,QAAQ;AAC7C,WAAK,QAAQ,eAAe,IAAI;AAChC,WAAK,QAAQ,WAAW;AACxB,WAAK,eAAe;AAEpB,UAAI,CAAC,KAAK,kBAAkB;AAC1B,aAAK,SAAS,eAAe,IAAI;AAAA,MACnC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,OAAO;AACL,QAAI,KAAK,SAAS,WAAW,SAAS;AACpC,WAAK,QAAQ,WAAW;AACxB,WAAK,QAAQ,YAAY,IAAI;AAC7B,WAAK,SAAS,eAAe,IAAI;AAAA,IACnC;AAAA,EACF;AAAA,EAEA,gBAAgB;AACd,QAAI,CAAC,KAAK,kBAAkB,KAAK,eAAe;AAC9C,YAAM,mBAAmB,KAAK,SAAS,SAAS,KAAK,UAAU,OAAO,YAAY,KAAK;AACvF,YAAM,SAAS,0BAA0B,gBAAgB;AACzD,WAAK,QAAQ,OAAO,QAAQ,KAAK,UAAU,KAAK,qBAAqB;AACrE,WAAK,iBAAiB;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,eAAe;AACb,QAAI,KAAK,qBAAqB,GAAG;AAC/B,WAAK,gBAAgB;AAAA,IACvB,WAAW,KAAK,mBAAmB,KAAK,CAAC,KAAK,SAAS;AACrD,WAAK,UAAU,IAAI,aAAa,MAAM,YAAY,KAAK,KAAK,QAAQ;AACpE,WAAK,QAAQ,QAAQ;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,kBAAkB;AAChB,QAAI,KAAK,UAAU;AACjB,WAAK,aAAa;AAClB,WAAK,eAAe;AACpB,WAAK,cAAc;AAAA,IACrB;AAAA,EACF;AAAA,EAEA,eAAe;AACb,SAAK,mBAAmB,aAAa,YAAY;AACjD,SAAK,QAAQ,oBAAoB,IAAI;AAAA,EACvC;AAAA,EAEA,eAAe,WAAW,KAAK,UAAU;AACvC,SAAK,WAAW;AAChB,QAAI,UAAU;AACZ,YAAM,EAAE,WAAW,IAAI;AACvB,UAAI,aAAa,UAAU,GAAG;AAC5B,aAAK,QAAQ,sBAAsB,IAAI;AAAA,MACzC,OAAO;AACL,aAAK,QAAQ,iCAAiC,MAAM,UAAU;AAAA,MAChE;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB;AACd,SAAK,mBAAmB,aAAa,UAAU;AAC/C,SAAK,QAAQ,qBAAqB,IAAI;AAAA,EACxC;AAAA,EAEA,eAAe;AACb,QAAI,KAAK,UAAU;AACjB,YAAM,EAAE,YAAY,aAAa,IAAI,KAAK;AAC1C,WAAK,OAAO,YAAY;AACtB,YAAI,KAAK,oBAAqB,MAAK,cAAc;AACjD,YAAI,KAAK,KAAK,cAAe,OAAM,KAAK,KAAK;AAE7C,YAAI,aAAa,UAAU,KAAK,gBAAgB,MAAM;AACpD,gBAAM,WAAW,aAAa,eAAe,YAAY;AACzD,gBAAM,KAAK,mBAAmB,UAAU,KAAK;AAE7C,eAAK,QAAQ,cAAc,IAAI;AAC/B,eAAK,SAAS;AAAA,QAChB,OAAO;AACL,gBAAM,KAAK,KAAK,YAAY,aAAa,eAAe,YAAY,GAAG,IAAI;AAC3E,eAAK,QAAQ,cAAc,IAAI;AAC/B,eAAK,KAAK;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,UAAM,WAAW,KAAK,KAAK,6BAA6B,KAAK,QAAQ,KAAK,KAAK,qBAAqB;AAEpG,QAAI,aAAa,CAAC,UAAU,KAAK,QAAQ,KAAK,SAAS,UAAU,UAAU,KAAK,QAAQ,CAAC,IAAI;AAC3F,UAAI,KAAK,UAAU,aAAa,SAAS,eAAe;AACtD,eAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAAA,EAEA,uBAAuB;AACrB,QAAI,KAAK,cAAc;AACrB,aAAO,aAAa,eAAe,KAAK,YAAY;AAAA,IACtD;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,WAAO,KAAK,kBAAkB,KAAK;AAAA,EACrC;AAAA,EAEA,qBAAqB;AACnB,UAAM,WAAW,KAAK,kBAAkB;AACxC,QAAI,UAAU;AACZ,YAAM,YAAY,KAAK,mBAAmB;AAC1C,WAAK,OAAO,YAAY;AACtB,aAAK,cAAc;AACnB,YAAI,KAAK,cAAc,KAAK,eAAe;AACzC,eAAK,QAAQ,cAAc,IAAI;AAAA,QACjC,OAAO;AACL,cAAI,KAAK,KAAK,cAAe,OAAM,KAAK,KAAK;AAE7C,gBAAM,KAAK,mBAAmB,UAAU,SAAS;AAEjD,eAAK,QAAQ,cAAc,IAAI;AAC/B,cAAI,CAAC,WAAW;AACd,iBAAK,SAAS;AAAA,UAChB;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,iBAAiB;AACf,QAAI,KAAK,wBAAwB,CAAC,KAAK,oBAAoB,KAAK,UAAU,YAAY;AACpF,WAAK,QAAQ,wBAAwB,KAAK,sBAAsB;AAAA,QAC9D,QAAQ;AAAA,QACR,UAAU,KAAK;AAAA,QACf,qBAAqB;AAAA,QACrB,YAAY;AAAA,MACd,CAAC;AACD,WAAK,mBAAmB;AAAA,IAC1B;AAAA,EACF;AAAA,EAEA,qBAAqB;AACnB,QAAI,KAAK,YAAY;AACnB,WAAK,OAAO,YAAY;AACtB,aAAK,cAAc;AACnB,aAAK,cAAc;AACnB,aAAK,cAAc;AACnB,aAAK,QAAQ,cAAc,IAAI;AAAA,MACjC,CAAC;AAAA,IACH;AAAA,EACF;AAAA;AAAA,EAIA,eAAe,SAAS;AACtB,QAAI,KAAK,uBAAuB;AAC9B,cAAQ,mBAAmB,cAAc,WAAW;AAAA,IACtD;AAAA,EACF;AAAA,EAEA,iBAAiB;AACf,SAAK,aAAa;AAAA,EACpB;AAAA,EAEA,iCAAiC,UAAU,WAAW;AAAA,EAAC;AAAA,EAEvD,MAAM,6BAA6B,SAAS,UAAU;AACpD,UAAM,eAAe,MAAM,SAAS;AACpC,UAAM,EAAE,YAAY,WAAW,IAAI;AACnC,QAAI,gBAAgB,QAAW;AAC7B,WAAK,eAAe;AAAA,QAClB,YAAY,iBAAiB;AAAA,QAC7B;AAAA,MACF,CAAC;AAAA,IACH,OAAO;AACL,WAAK,uBAAuB,SAAS,aAAa,SAAS,WAAW;AACtE,WAAK,eAAe,EAAE,YAAwB,cAAc,WAAW,CAAC;AAAA,IAC1E;AAAA,EACF;AAAA,EAEA,MAAM,0BAA0B,SAAS,UAAU;AACjD,UAAM,eAAe,MAAM,SAAS;AACpC,UAAM,EAAE,YAAY,WAAW,IAAI;AACnC,QAAI,gBAAgB,QAAW;AAC7B,WAAK,eAAe;AAAA,QAClB,YAAY,iBAAiB;AAAA,QAC7B;AAAA,MACF,CAAC;AAAA,IACH,OAAO;AACL,WAAK,eAAe,EAAE,YAAwB,cAAc,WAAW,CAAC;AAAA,IAC1E;AAAA,EACF;AAAA,EAEA,eAAe,UAAU,QAAQ;AAC/B,SAAK,eAAe;AAAA,MAClB,YAAY,iBAAiB;AAAA,MAC7B,YAAY;AAAA,IACd,CAAC;AAAA,EACH;AAAA,EAEA,kBAAkB;AAChB,SAAK,cAAc;AAAA,EACrB;AAAA;AAAA,EAIA,gBAAgB;AACd,QAAI,CAAC,KAAK,YAAY,CAAC,KAAK,KAAK,iBAAiB,CAAC,KAAK,KAAK,6BAA6B,IAAI,GAAG;AAC/F,UAAI,KAAK,UAAU,WAAW;AAC5B,aAAK,yBAAyB,KAAK,KAAK,eAAe,KAAK,KAAK,KAAK,YAAY;AAAA,MACpF,OAAO;AACL,aAAK,eAAe,KAAK,KAAK,KAAK,YAAY;AAAA,MACjD;AACA,UAAI,KAAK,YAAY;AACnB,aAAK,SAAS,gCAAgC,KAAK,KAAK,sBAAsB,KAAK,QAAQ;AAAA,MAC7F;AAEA,WAAK,WAAW;AAAA,IAClB;AAAA,EACF;AAAA,EAEA,2BAA2B;AACzB,UAAM,EAAE,eAAe,IAAI,KAAK;AAChC,QAAI,gBAAgB;AAClB,WAAK,KAAK,iBAAiB,cAAc;AACzC,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,iBAAiB;AACf,UAAM,SAAS,UAAU,KAAK,QAAQ;AACtC,QAAI,UAAU,MAAM;AAClB,WAAK,KAAK,eAAe,MAAM;AAC/B,aAAO;AAAA,IACT;AAAA,EACF;AAAA;AAAA,EAIA,mBAAmB,QAAQ;AACzB,SAAK,cAAc,MAAM,KAAI,oBAAI,KAAK,GAAE,QAAQ;AAAA,EAClD;AAAA,EAEA,mBAAmB;AACjB,WAAO,EAAE,GAAG,KAAK,cAAc;AAAA,EACjC;AAAA;AAAA,EAIA,uBAAuB;AACrB,WAAO,OAAO,KAAK,YAAY;AAAA,EACjC;AAAA,EAEA,qBAAqB;AACnB,QAAI,KAAK,YAAY;AACnB,aAAO;AAAA,IACT,WAAW,KAAK,UAAU,WAAW;AACnC,aAAO,CAAC,KAAK,kBAAkB;AAAA,IACjC,OAAO;AACL,aAAO,KAAK;AAAA,IACd;AAAA,EACF;AAAA,EAEA,gBAAgB;AACd,QAAI,CAAC,KAAK,gBAAgB;AACxB,WAAK,KAAK,cAAc,KAAK,QAAQ,EAAE,KAAK,CAAC,aAAa,YAAY,KAAK,oBAAoB,QAAQ,CAAC;AACxG,WAAK,iBAAiB;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,MAAM,OAAO,UAAU;AACrB,SAAK,aAAa;AAClB,UAAM,IAAI,QAAQ,CAAC,YAAY;AAC7B,WAAK,QACH,SAAS,oBAAoB,WAAW,WAAW,MAAM,QAAQ,GAAG,CAAC,IAAI,sBAAsB,MAAM,QAAQ,CAAC;AAAA,IAClH,CAAC;AACD,UAAM,SAAS;AACf,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,MAAM,mBAAmB,UAAU,WAAW;AAC5C,UAAM,KAAK,iBAAiB,aAAa,KAAK,KAAK,mBAAmB,QAAQ,GAAG,YAAY;AAC3F,YAAM,KAAK,KAAK,WAAW,UAAU,WAAW,KAAK,YAAY,IAAI;AACrE,WAAK,cAAc;AAAA,IACrB,CAAC;AAAA,EACH;AAAA,EAEA,eAAe;AACb,QAAI,KAAK,OAAO;AACd,2BAAqB,KAAK,KAAK;AAC/B,aAAO,KAAK;AAAA,IACd;AAAA,EACF;AACF;AAEA,SAAS,aAAa,YAAY;AAChC,SAAO,cAAc,OAAO,aAAa;AAC3C;AAEA,IAAM,iBAAN,MAAqB;AAAA,EACnB,cAAc,IAAI,YAAY;AAAA,EAE9B,YAAYc,UAAS;AACnB,SAAK,UAAUA;AAAA,EACjB;AAAA,EAEA,wBAAwBd,WAAU,SAAS;AACzC,QAAI,oBAAoBA,WAAU,KAAK,UAAU,YAAY,GAAG;AAC9D,WAAK,UAAU,WAAWA,WAAU,SAAS,yBAAyB,KAAK,GAAG,OAAO;AAAA,IACvF,OAAO;AACL,aAAO,SAAS,OAAOA,UAAS,SAAS;AAAA,IAC3C;AAAA,EACF;AAAA,EAEA,aAAae,QAAO;AAClB,SAAK,WAAWA,OAAM;AACtB,IAAAA,OAAM,mBAAmB;AACzB,IAAAA,OAAM,aAAa;AACnB,IAAAA,OAAM,mBAAmB;AAAA,EAC3B;AAAA,EAEA,oBAAoBA,QAAO;AACzB,SAAK,YAAY,SAAS,CAAC;AAC3B,QAAIA,OAAM,kBAAkB,KAAKA,OAAM,UAAU,WAAW;AAC1D,WAAK,+BAA+B;AAAA,IACtC,OAAO;AACL,WAAK,gBAAgB;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,sBAAsBA,QAAO;AAC3B,IAAAA,OAAM,aAAa;AAAA,EACrB;AAAA,EAEA,iCAAiCA,QAAO,YAAY;AAClD,YAAQ,YAAY;AAAA,MAClB,KAAK,iBAAiB;AAAA,MACtB,KAAK,iBAAiB;AAAA,MACtB,KAAK,iBAAiB;AACpB,eAAO,KAAK,OAAO;AAAA,UACjB,QAAQ;AAAA,UACR,SAAS;AAAA,YACP;AAAA,UACF;AAAA,QACF,CAAC;AAAA,MACH;AACE,eAAOA,OAAM,aAAa;AAAA,IAC9B;AAAA,EACF;AAAA,EAEA,qBAAqB,QAAQ;AAAA,EAAC;AAAA,EAE9B,eAAe,QAAQ;AACrB,SAAK,YAAY,SAAS,CAAC;AAC3B,SAAK,qBAAqB;AAAA,EAC5B;AAAA,EAEA,gBAAgB,QAAQ;AACtB,SAAK,OAAO,MAAM;AAAA,EACpB;AAAA,EAEA,YAAY,QAAQ;AAClB,SAAK,YAAY,SAAS,CAAC;AAC3B,SAAK,qBAAqB;AAAA,EAC5B;AAAA,EAEA,cAAc,QAAQ;AAAA,EAAC;AAAA;AAAA,EAIvB,oCAAoCf,WAAU;AAC5C,WAAO;AAAA,EACT;AAAA;AAAA,EAIA,sBAAsB,iBAAiB;AACrC,SAAK,YAAY,SAAS,CAAC;AAC3B,SAAK,8BAA8B;AAAA,EACrC;AAAA,EAEA,uBAAuB,iBAAiB;AACtC,SAAK,YAAY,SAAS,CAAC;AAC3B,SAAK,oBAAoB;AAAA,EAC3B;AAAA;AAAA,EAIA,iCAAiC;AAC/B,SAAK,0BAA0B,OAAO,WAAW,KAAK,iBAAiB,KAAK,QAAQ,gBAAgB;AAAA,EACtG;AAAA,EAEA,uBAAuB;AACrB,SAAK,YAAY,KAAK;AACtB,QAAI,KAAK,2BAA2B,MAAM;AACxC,aAAO,aAAa,KAAK,uBAAuB;AAChD,aAAO,KAAK;AAAA,IACd;AAAA,EACF;AAAA,EAEA,gCAAgC;AAC9B,QAAI,KAAK,0BAA0B,MAAM;AACvC,WAAK,yBAAyB,OAAO,WAAW,KAAK,iBAAiB,KAAK,QAAQ,gBAAgB;AAAA,IACrG;AAAA,EACF;AAAA,EAEA,sBAAsB;AACpB,SAAK,YAAY,KAAK;AACtB,QAAI,KAAK,0BAA0B,MAAM;AACvC,aAAO,aAAa,KAAK,sBAAsB;AAC/C,aAAO,KAAK;AAAA,IACd;AAAA,EACF;AAAA,EAEA,kBAAkB,MAAM;AACtB,SAAK,YAAY,KAAK;AAAA,EACxB;AAAA,EAEA,OAAO,QAAQ;AACb,aAAS,gBAAgB,EAAE,QAAQ,OAAO,CAAC;AAE3C,WAAO,SAAS,OAAO,KAAK,UAAU,SAAS,KAAK,OAAO,SAAS;AAAA,EACtE;AAAA,EAEA,IAAI,YAAY;AACd,WAAO,KAAK,QAAQ;AAAA,EACtB;AACF;AAEA,IAAM,gBAAN,MAAoB;AAAA,EAClB,WAAW;AAAA,EACX,qBAAqB;AAAA,EAErB,UAAU;AAAA,EAEV,QAAQ;AACN,QAAI,CAAC,KAAK,SAAS;AACjB,WAAK,UAAU;AACf,uBAAiB,sBAAsB,KAAK,yBAAyB,KAAK;AAAA,IAC5E;AAAA,EACF;AAAA,EAEA,OAAO;AACL,QAAI,KAAK,SAAS;AAChB,WAAK,UAAU;AACf,0BAAoB,sBAAsB,KAAK,yBAAyB,KAAK;AAAA,IAC/E;AAAA,EACF;AAAA,EAEA,0BAA0B,CAAC,WAAW;AACpC,eAAW,WAAW,KAAK,mBAAmB;AAC5C,cAAQ,OAAO;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,IAAI,oBAAoB;AACtB,WAAO,CAAC,GAAG,SAAS,iBAAiB,KAAK,QAAQ,GAAG,GAAG,KAAK,gCAAgC;AAAA,EAC/F;AAAA,EAEA,IAAI,mCAAmC;AACrC,UAAM,WAAW,SAAS,iBAAiB,KAAK,kBAAkB;AAElE,QAAI,SAAS,QAAQ;AACnB,cAAQ;AAAA,QACN,OAAO,KAAK,kBAAkB,wEAAwE,KAAK,QAAQ;AAAA,MACrH;AAAA,IACF;AAEA,WAAO,CAAC,GAAG,QAAQ;AAAA,EACrB;AACF;AAEA,IAAM,kBAAN,MAAsB;AAAA,EACpB,YAAYc,UAAS,SAAS;AAC5B,SAAK,UAAUA;AACf,SAAK,UAAU;AACf,SAAK,kBAAkB,IAAI,gBAAgB,MAAM,OAAO;AACxD,SAAK,qBAAqB,IAAI,mBAAmB,MAAM,OAAO;AAAA,EAChE;AAAA,EAEA,QAAQ;AACN,SAAK,gBAAgB,MAAM;AAC3B,SAAK,mBAAmB,MAAM;AAAA,EAChC;AAAA,EAEA,OAAO;AACL,SAAK,gBAAgB,KAAK;AAC1B,SAAK,mBAAmB,KAAK;AAAA,EAC/B;AAAA;AAAA,EAIA,yBAAyB,SAAS,WAAW,QAAQ;AACnD,WAAO,KAAK,gBAAgB,OAAO;AAAA,EACrC;AAAA,EAEA,qBAAqB,SAAS,KAAK,OAAO;AACxC,UAAM,QAAQ,KAAK,kBAAkB,OAAO;AAC5C,QAAI,OAAO;AACT,YAAM,SAAS,qBAAqB,SAAS,KAAK,KAAK;AAAA,IACzD;AAAA,EACF;AAAA;AAAA,EAIA,eAAe,SAAShB,YAAW;AACjC,WACE,QAAQ,QAAQ,aAAa,KAAK,QAClC,KAAK,cAAc,SAASA,UAAS,KACrC,KAAK,gBAAgB,SAASA,UAAS;AAAA,EAE3C;AAAA,EAEA,cAAc,SAASA,YAAW;AAChC,UAAM,QAAQ,KAAK,kBAAkB,SAASA,UAAS;AACvD,QAAI,OAAO;AACT,YAAM,SAAS,cAAc,SAASA,UAAS;AAAA,IACjD;AAAA,EACF;AAAA,EAEA,cAAc,MAAMA,YAAW;AAC7B,UAAM,SAAS,YAAY,MAAMA,UAAS;AAC1C,UAAM,OAAO,KAAK,QAAQ,cAAc,cAAc,yBAAyB;AAC/E,UAAM,eAAe,UAAU,MAAM,WAAW,GAAG;AAEnD,WAAO,KAAK,gBAAgB,MAAMA,UAAS,KAAK,oBAAoB,QAAQ,YAAY;AAAA,EAC1F;AAAA,EAEA,gBAAgB,SAASA,YAAW;AAClC,UAAM,gBACJ,mBAAmB,kBACf,KAAK,QAAQ,wBAAwB,SAASA,UAAS,IACvD,KAAK,QAAQ,qBAAqB,OAAO;AAE/C,QAAI,eAAe;AACjB,YAAM,QAAQ,KAAK,kBAAkB,SAASA,UAAS;AACvD,aAAO,QAAQ,SAAS,QAAQ,QAAQ,aAAa,IAAI;AAAA,IAC3D,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,kBAAkB,SAASA,YAAW;AACpC,UAAM,KAAKA,YAAW,aAAa,kBAAkB,KAAK,QAAQ,aAAa,kBAAkB;AACjG,QAAI,MAAM,MAAM,QAAQ;AACtB,YAAM,QAAQ,KAAK,QAAQ,cAAc,IAAI,EAAE,kBAAkB;AACjE,UAAI,iBAAiB,cAAc;AACjC,eAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AACF;AAEA,IAAM,UAAN,MAAc;AAAA,EACZ;AAAA,EACA,wBAAwB,KAAK;AAAA,EAC7B,kBAAkB,CAAC;AAAA,EACnB,UAAU;AAAA,EACV,aAAa;AAAA,EACb,eAAe;AAAA,EAEf,YAAY,UAAU;AACpB,SAAK,WAAW;AAAA,EAClB;AAAA,EAEA,QAAQ;AACN,QAAI,CAAC,KAAK,SAAS;AACjB,uBAAiB,YAAY,KAAK,YAAY,KAAK;AACnD,uBAAiB,QAAQ,KAAK,YAAY,KAAK;AAC/C,WAAK,eAAe,QAAQ,OAAO,OAAO,oBAAoB;AAC9D,WAAK,UAAU;AACf,WAAK,QAAQ,IAAI,IAAI,OAAO,SAAS,IAAI,CAAC;AAAA,IAC5C;AAAA,EACF;AAAA,EAEA,OAAO;AACL,QAAI,KAAK,SAAS;AAChB,0BAAoB,YAAY,KAAK,YAAY,KAAK;AACtD,0BAAoB,QAAQ,KAAK,YAAY,KAAK;AAClD,WAAK,UAAU;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,KAAKE,WAAU,uBAAuB;AACpC,SAAK,OAAO,QAAQ,WAAWA,WAAU,qBAAqB;AAAA,EAChE;AAAA,EAEA,QAAQA,WAAU,uBAAuB;AACvC,SAAK,OAAO,QAAQ,cAAcA,WAAU,qBAAqB;AAAA,EACnE;AAAA,EAEA,OAAO,QAAQA,WAAU,wBAAwB,KAAK,GAAG;AACvD,QAAI,WAAW,QAAQ,UAAW,GAAE,KAAK;AAEzC,UAAM,QAAQ,EAAE,OAAO,EAAE,uBAAuB,kBAAkB,KAAK,aAAa,EAAE;AACtF,WAAO,KAAK,SAAS,OAAO,IAAIA,UAAS,IAAI;AAC7C,SAAK,WAAWA;AAChB,SAAK,wBAAwB;AAAA,EAC/B;AAAA;AAAA,EAIA,gCAAgC,uBAAuB;AACrD,WAAO,KAAK,gBAAgB,qBAAqB,KAAK,CAAC;AAAA,EACzD;AAAA,EAEA,sBAAsB,gBAAgB;AACpC,UAAM,EAAE,sBAAsB,IAAI;AAClC,UAAM,kBAAkB,KAAK,gBAAgB,qBAAqB;AAClE,SAAK,gBAAgB,qBAAqB,IAAI;AAAA,MAC5C,GAAG;AAAA,MACH,GAAG;AAAA,IACL;AAAA,EACF;AAAA;AAAA,EAIA,mCAAmC;AACjC,QAAI,CAAC,KAAK,2BAA2B;AACnC,WAAK,4BAA4B,QAAQ,qBAAqB;AAC9D,cAAQ,oBAAoB;AAAA,IAC9B;AAAA,EACF;AAAA,EAEA,uCAAuC;AACrC,QAAI,KAAK,2BAA2B;AAClC,cAAQ,oBAAoB,KAAK;AACjC,aAAO,KAAK;AAAA,IACd;AAAA,EACF;AAAA;AAAA,EAIA,aAAa,CAAC,UAAU;AACtB,QAAI,KAAK,qBAAqB,GAAG;AAC/B,YAAM,EAAE,MAAM,IAAI,MAAM,SAAS,CAAC;AAClC,UAAI,OAAO;AACT,aAAK,WAAW,IAAI,IAAI,OAAO,SAAS,IAAI;AAC5C,cAAM,EAAE,uBAAuB,iBAAiB,IAAI;AACpD,aAAK,wBAAwB;AAC7B,cAAM,YAAY,mBAAmB,KAAK,eAAe,YAAY;AACrE,aAAK,SAAS,6DAA6D,KAAK,UAAU,uBAAuB,SAAS;AAC1H,aAAK,eAAe;AAAA,MACtB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa,OAAO,WAAW;AAC7B,UAAM,cAAc;AACpB,SAAK,aAAa;AAAA,EACpB;AAAA;AAAA,EAIA,uBAAuB;AAErB,WAAO,KAAK,aAAa;AAAA,EAC3B;AAAA,EAEA,eAAe;AACb,WAAO,KAAK,cAAc,SAAS,cAAc;AAAA,EACnD;AACF;AAEA,IAAM,uBAAN,MAA2B;AAAA,EACzB,UAAU;AAAA,EACV,kBAAkB;AAAA,EAElB,YAAY,UAAU,aAAa;AACjC,SAAK,WAAW;AAChB,SAAK,cAAc;AAAA,EACrB;AAAA,EAEA,QAAQ;AACN,QAAI,KAAK,QAAS;AAElB,QAAI,KAAK,YAAY,eAAe,WAAW;AAC7C,WAAK,YAAY,iBAAiB,oBAAoB,KAAK,SAAS,EAAE,MAAM,KAAK,CAAC;AAAA,IACpF,OAAO;AACL,WAAK,QAAQ;AAAA,IACf;AAAA,EACF;AAAA,EAEA,OAAO;AACL,QAAI,CAAC,KAAK,QAAS;AAEnB,SAAK,YAAY,oBAAoB,cAAc,KAAK,uBAAuB;AAAA,MAC7E,SAAS;AAAA,MACT,SAAS;AAAA,IACX,CAAC;AACD,SAAK,YAAY,oBAAoB,cAAc,KAAK,0BAA0B;AAAA,MAChF,SAAS;AAAA,MACT,SAAS;AAAA,IACX,CAAC;AAED,SAAK,YAAY,oBAAoB,8BAA8B,KAAK,4BAA4B,IAAI;AACxG,SAAK,UAAU;AAAA,EACjB;AAAA,EAEA,UAAU,MAAM;AACd,SAAK,YAAY,iBAAiB,cAAc,KAAK,uBAAuB;AAAA,MAC1E,SAAS;AAAA,MACT,SAAS;AAAA,IACX,CAAC;AACD,SAAK,YAAY,iBAAiB,cAAc,KAAK,0BAA0B;AAAA,MAC7E,SAAS;AAAA,MACT,SAAS;AAAA,IACX,CAAC;AAED,SAAK,YAAY,iBAAiB,8BAA8B,KAAK,4BAA4B,IAAI;AACrG,SAAK,UAAU;AAAA,EACjB;AAAA,EAEA,wBAAwB,CAAC,UAAU;AACjC,QAAI,eAAe,gBAAgB,MAAM,QAAS;AAElD,UAAM,SAAS,MAAM;AACrB,UAAM,SAAS,OAAO,WAAW,OAAO,QAAQ,0CAA0C;AAE1F,QAAI,UAAU,KAAK,gBAAgB,MAAM,GAAG;AAC1C,YAAM,OAAO;AACb,YAAMA,YAAW,mBAAmB,IAAI;AAExC,UAAI,KAAK,SAAS,6BAA6B,MAAMA,SAAQ,GAAG;AAC9D,aAAK,kBAAkB;AAEvB,cAAM,eAAe,IAAI;AAAA,UACvB;AAAA,UACA,YAAY;AAAA,UACZA;AAAA,UACA,IAAI,gBAAgB;AAAA,UACpB;AAAA,QACF;AAEA,sBAAc,SAASA,UAAS,SAAS,GAAG,cAAc,KAAK,SAAS;AAAA,MAC1E;AAAA,IACF;AAAA,EACF;AAAA,EAEA,2BAA2B,CAAC,UAAU;AACpC,QAAI,MAAM,WAAW,KAAK,gBAAiB,MAAK,uBAAuB;AAAA,EACzE;AAAA,EAEA,yBAAyB,MAAM;AAC7B,kBAAc,MAAM;AACpB,SAAK,kBAAkB;AAAA,EACzB;AAAA,EAEA,6BAA6B,CAAC,UAAU;AACtC,QAAI,MAAM,OAAO,YAAY,UAAU,MAAM,OAAO,aAAa,WAAW,OAAO;AACjF,YAAM,SAAS,cAAc,IAAI,MAAM,OAAO,IAAI,SAAS,CAAC;AAE5D,UAAI,QAAQ;AAEV,cAAM,OAAO,eAAe;AAAA,MAC9B;AAEA,oBAAc,MAAM;AAAA,IACtB;AAAA,EACF;AAAA,EAEA,eAAe,SAAS;AACtB,UAAM,OAAO,QAAQ;AAErB,YAAQ,QAAQ,eAAe,IAAI;AAEnC,UAAM,aAAa,KAAK,QAAQ,aAAa;AAC7C,UAAM,mBAAmB,KAAK,aAAa,kBAAkB,KAAK,YAAY,aAAa,QAAQ,KAAK,YAAY;AAEpH,QAAI,oBAAoB,qBAAqB,QAAQ;AACnD,cAAQ,QAAQ,aAAa,IAAI;AAAA,IACnC;AAAA,EACF;AAAA;AAAA,EAIA,+BAA+B;AAAA,EAAC;AAAA,EAEhC,eAAe,cAAc;AAAA,EAAC;AAAA,EAE9B,eAAe,cAAc;AAAA,EAAC;AAAA,EAE9B,gBAAgB,cAAc;AAAA,EAAC;AAAA,EAE/B,iCAAiC,cAAc,eAAe;AAAA,EAAC;AAAA,EAE/D,0BAA0B,cAAc,eAAe;AAAA,EAAC;AAAA,EAExD,IAAI,YAAY;AACd,WAAO,OAAO,eAAe,2BAA2B,CAAC,KAAK;AAAA,EAChE;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,OAAO,KAAK,aAAa,MAAM;AAErC,QAAI,CAAC,KAAM,QAAO;AAElB,QAAI,gBAAgB,IAAI,EAAG,QAAO;AAClC,QAAI,kBAAkB,IAAI,EAAG,QAAO;AACpC,QAAI,YAAY,IAAI,EAAG,QAAO;AAC9B,QAAI,YAAY,IAAI,EAAG,QAAO;AAC9B,QAAI,eAAe,IAAI,EAAG,QAAO;AAEjC,WAAO;AAAA,EACT;AACF;AAEA,IAAM,kBAAkB,CAAC,SAAS;AAChC,SAAO,KAAK,WAAW,SAAS,SAAS,UAAU,CAAC,CAAC,SAAS,QAAQ,EAAE,SAAS,KAAK,QAAQ,KAAK,KAAK,aAAa,QAAQ;AAC/H;AAEA,IAAM,oBAAoB,CAAC,SAAS;AAClC,SAAQ,KAAK,WAAW,KAAK,WAAW,SAAS,SAAS,WAAW,SAAS,SAAS,UAAW,KAAK,KAAK,WAAW,GAAG;AAC5H;AAEA,IAAM,cAAc,CAAC,SAAS;AAC5B,MAAI,KAAK,aAAa,qBAAqB,MAAM,QAAS,QAAO;AACjE,MAAI,KAAK,aAAa,YAAY,MAAM,QAAS,QAAO;AAExD,QAAM,sBAAsB,uBAAuB,MAAM,uBAAuB;AAChF,MAAI,uBAAuB,oBAAoB,aAAa,qBAAqB,MAAM,QAAS,QAAO;AAEvG,SAAO;AACT;AAEA,IAAM,cAAc,CAAC,SAAS;AAC5B,QAAM,cAAc,KAAK,aAAa,mBAAmB;AACzD,MAAI,eAAe,YAAY,YAAY,MAAM,MAAO,QAAO;AAE/D,MAAI,MAAM,IAAI,EAAG,QAAO;AACxB,MAAI,KAAK,aAAa,oBAAoB,EAAG,QAAO;AACpD,MAAI,KAAK,aAAa,mBAAmB,EAAG,QAAO;AAEnD,SAAO;AACT;AAEA,IAAM,QAAQ,CAAC,SAAS;AACtB,SAAO,KAAK,aAAa,aAAa,KAAK,KAAK,aAAa,eAAe,KAAK,KAAK,aAAa,cAAc,KAAK,KAAK,aAAa,aAAa;AACvJ;AAEA,IAAM,iBAAiB,CAAC,SAAS;AAC/B,QAAM,QAAQ,SAAS,yBAAyB,EAAE,QAAQ,MAAM,YAAY,KAAK,CAAC;AAClF,SAAO,MAAM;AACf;AAEA,IAAM,YAAN,MAAgB;AAAA,EACd,YAAY,UAAU;AACpB,SAAK,WAAW;AAAA,EAClB;AAAA,EAEA,aAAaA,WAAU,UAAU,CAAC,GAAG;AACnC,QAAI,KAAK,SAAS,iCAAiCA,WAAU,QAAQ,MAAM,GAAG;AAC5E,WAAK,SAAS,wBAAwBA,WAAU,OAAO;AAAA,IACzD;AAAA,EACF;AAAA,EAEA,WAAW,WAAW,uBAAuB,UAAU,CAAC,GAAG;AACzD,SAAK,KAAK;AACV,SAAK,eAAe,IAAI,MAAM,MAAM,UAAU,SAAS,GAAG,uBAAuB;AAAA,MAC/E,UAAU,KAAK;AAAA,MACf,GAAG;AAAA,IACL,CAAC;AACD,SAAK,aAAa,MAAM;AAAA,EAC1B;AAAA,EAEA,WAAW,MAAMF,YAAW;AAC1B,SAAK,KAAK;AACV,SAAK,iBAAiB,IAAI,eAAe,MAAM,MAAMA,YAAW,IAAI;AAEpE,SAAK,eAAe,MAAM;AAAA,EAC5B;AAAA,EAEA,OAAO;AACL,QAAI,KAAK,gBAAgB;AACvB,WAAK,eAAe,KAAK;AACzB,aAAO,KAAK;AAAA,IACd;AAEA,QAAI,KAAK,cAAc;AACrB,WAAK,aAAa,OAAO;AACzB,aAAO,KAAK;AAAA,IACd;AAAA,EACF;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,SAAS;AAAA,EACvB;AAAA,EAEA,IAAI,OAAO;AACT,WAAO,KAAK,SAAS;AAAA,EACvB;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK,KAAK,SAAS;AAAA,EAC5B;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,SAAS;AAAA,EACvB;AAAA;AAAA,EAIA,sBAAsB,gBAAgB;AAEpC,QAAI,OAAO,KAAK,QAAQ,0BAA0B,YAAY;AAC5D,WAAK,QAAQ,sBAAsB,cAAc;AAAA,IACnD;AAAA,EACF;AAAA,EAEA,MAAM,oCAAoC,gBAAgB,eAAe;AACvE,QAAI,kBAAkB,KAAK,gBAAgB;AACzC,YAAM,eAAe,MAAM,cAAc;AACzC,UAAI,cAAc;AAChB,cAAM,sBAAsB,eAAe;AAC3C,YAAI,CAAC,qBAAqB;AACxB,eAAK,KAAK,mBAAmB;AAAA,QAC/B;AAEA,cAAM,EAAE,YAAY,WAAW,IAAI;AACnC,cAAM,SAAS,KAAK,4BAA4B,gBAAgB,aAAa;AAC7E,cAAM,eAAe;AAAA,UACnB;AAAA,UACA;AAAA,UACA,UAAU,EAAE,YAAY,cAAc,WAAW;AAAA,QACnD;AACA,aAAK,aAAa,cAAc,UAAU,YAAY;AAAA,MACxD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,MAAM,iCAAiC,gBAAgB,eAAe;AACpE,UAAM,eAAe,MAAM,cAAc;AAEzC,QAAI,cAAc;AAChB,YAAM,WAAW,aAAa,eAAe,YAAY;AACzD,UAAI,cAAc,aAAa;AAC7B,cAAM,KAAK,KAAK,YAAY,UAAU,KAAK,YAAY;AAAA,MACzD,OAAO;AACL,cAAM,KAAK,KAAK,WAAW,UAAU,OAAO,MAAM,KAAK,YAAY;AAAA,MACrE;AACA,UAAG,CAAC,SAAS,8BAA8B;AACzC,aAAK,KAAK,YAAY;AAAA,MACxB;AACA,WAAK,KAAK,mBAAmB;AAAA,IAC/B;AAAA,EACF;AAAA,EAEA,sBAAsB,gBAAgBG,QAAO;AAC3C,YAAQ,MAAMA,MAAK;AAAA,EACrB;AAAA,EAEA,uBAAuB,gBAAgB;AAErC,QAAI,OAAO,KAAK,QAAQ,2BAA2B,YAAY;AAC7D,WAAK,QAAQ,uBAAuB,cAAc;AAAA,IACpD;AAAA,EACF;AAAA;AAAA,EAIA,oCAAoCD,WAAU;AAE5C,QAAI,OAAO,KAAK,QAAQ,wCAAwC,YAAY;AAC1E,aAAO,KAAK,QAAQ,oCAAoCA,SAAQ;AAAA,IAClE;AAEA,WAAO;AAAA,EACT;AAAA;AAAA,EAIA,aAAae,QAAO;AAClB,SAAK,SAAS,aAAaA,MAAK;AAAA,EAClC;AAAA,EAEA,eAAeA,QAAO;AACpB,SAAK,SAAS,eAAeA,MAAK;AAClC,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,6BAA6Bf,WAAU,QAAQ;AAC7C,UAAM,SAAS,UAAUA,SAAQ;AACjC,UAAM,gBAAgB,UAAU,KAAK,KAAK,oBAAoB;AAC9D,UAAM,qBAAqB,WAAW,aAAa,OAAO,WAAW;AAErE,WACE,WAAW,aACX,cAAcA,SAAQ,MAAM,cAAc,KAAK,KAAK,oBAAoB,MACvE,sBAAuB,UAAU,QAAQ,WAAW;AAAA,EAEzD;AAAA,EAEA,gCAAgC,QAAQ,QAAQ;AAC9C,SAAK,SAAS,gCAAgC,QAAQ,MAAM;AAAA,EAC9D;AAAA;AAAA,EAIA,IAAI,WAAW;AACb,WAAO,KAAK,QAAQ;AAAA,EACtB;AAAA,EAEA,IAAI,wBAAwB;AAC1B,WAAO,KAAK,QAAQ;AAAA,EACtB;AAAA,EAEA,4BAA4B,gBAAgB,eAAe;AACzD,UAAM,EAAE,WAAAF,YAAW,YAAY,IAAI;AACnC,WAAO,eAAeA,YAAW,WAAW,KAAK,KAAK,kBAAkB,aAAa;AAAA,EACvF;AAAA,EAEA,kBAAkB,eAAe;AAC/B,UAAM,uBAAuB,cAAc,cAAc,cAAc,SAAS,SAAS,KAAK,UAAU;AACxG,WAAO,uBAAuB,YAAY;AAAA,EAC5C;AACF;AAEA,IAAM,YAAY;AAAA,EAChB,SAAS;AAAA,EACT,SAAS;AAAA,EACT,aAAa;AAAA,EACb,UAAU;AACZ;AAEA,IAAM,eAAN,MAAmB;AAAA,EACjB,QAAQ,UAAU;AAAA,EAClB,UAAU;AAAA,EAEV,YAAY,UAAU;AACpB,SAAK,WAAW;AAAA,EAClB;AAAA,EAEA,QAAQ;AACN,QAAI,CAAC,KAAK,SAAS;AACjB,UAAI,KAAK,SAAS,UAAU,SAAS;AACnC,aAAK,QAAQ,UAAU;AAAA,MACzB;AACA,eAAS,iBAAiB,oBAAoB,KAAK,qBAAqB,KAAK;AAC7E,uBAAiB,YAAY,KAAK,gBAAgB,KAAK;AACvD,WAAK,UAAU;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,OAAO;AACL,QAAI,KAAK,SAAS;AAChB,eAAS,oBAAoB,oBAAoB,KAAK,qBAAqB,KAAK;AAChF,0BAAoB,YAAY,KAAK,gBAAgB,KAAK;AAC1D,WAAK,UAAU;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,sBAAsB,MAAM;AAC1B,UAAM,EAAE,WAAW,IAAI;AACvB,QAAI,cAAc,eAAe;AAC/B,WAAK,kBAAkB;AAAA,IACzB,WAAW,cAAc,YAAY;AACnC,WAAK,eAAe;AAAA,IACtB;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,QAAI,KAAK,SAAS,UAAU,SAAS;AACnC,WAAK,QAAQ,UAAU;AACvB,WAAK,SAAS,sBAAsB;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,iBAAiB;AACf,SAAK,kBAAkB;AACvB,QAAI,KAAK,SAAS,UAAU,aAAa;AACvC,WAAK,QAAQ,UAAU;AACvB,WAAK,SAAS,WAAW;AAAA,IAC3B;AAAA,EACF;AAAA,EAEA,iBAAiB,MAAM;AACrB,SAAK,SAAS,eAAe;AAAA,EAC/B;AAAA,EAEA,IAAI,aAAa;AACf,WAAO,SAAS;AAAA,EAClB;AACF;AAEA,IAAM,iBAAN,MAAqB;AAAA,EACnB,UAAU;AAAA,EAEV,YAAY,UAAU;AACpB,SAAK,WAAW;AAAA,EAClB;AAAA,EAEA,QAAQ;AACN,QAAI,CAAC,KAAK,SAAS;AACjB,uBAAiB,UAAU,KAAK,UAAU,KAAK;AAC/C,WAAK,SAAS;AACd,WAAK,UAAU;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,OAAO;AACL,QAAI,KAAK,SAAS;AAChB,0BAAoB,UAAU,KAAK,UAAU,KAAK;AAClD,WAAK,UAAU;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,WAAW,MAAM;AACf,SAAK,eAAe,EAAE,GAAG,OAAO,aAAa,GAAG,OAAO,YAAY,CAAC;AAAA,EACtE;AAAA;AAAA,EAIA,eAAe,UAAU;AACvB,SAAK,SAAS,sBAAsB,QAAQ;AAAA,EAC9C;AACF;AAEA,IAAM,wBAAN,MAA4B;AAAA,EAC1B,OAAO,EAAE,SAAS,GAAG;AACnB,UAAM,4BAA4B,MAAM,kCAAkC,QAAQ,GAAG,MAAM;AACzF,gCAA0B,UAAU,MAAM;AACxC,2BAAmB,MAAM;AACvB,mBAAS,gBAAgB,YAAY,QAAQ;AAAA,QAC/C,CAAC;AAAA,MACH,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AAAA;AAAA,EAIA,cAAc,yBAAyB,qBAAqB;AAC1D,wBAAoB,YAAY,wBAAwB,UAAU,IAAI,CAAC;AAAA,EACzE;AAAA,EAEA,eAAe;AAAA,EAAC;AAClB;AAEA,SAAS,kCAAkC,UAAU;AACnD,QAAM,8BAA8B,0BAA0B,SAAS,eAAe;AACtF,QAAM,sBAAsB,CAAC;AAC7B,aAAW,8BAA8B,6BAA6B;AACpE,UAAM,EAAE,GAAG,IAAI;AAEf,eAAW,iBAAiB,SAAS,iBAAiB,cAAc,GAAG;AACrE,YAAM,kBAAkB,wBAAwB,cAAc,gBAAgB,SAAS,EAAE;AAEzF,UAAI,iBAAiB;AACnB,4BAAoB,EAAE,IAAI,CAAC,4BAA4B,eAAe;AAAA,MACxE;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,eAAe,0BAA0B,UAAU,UAAU;AAC3D,QAAM,cAAc,0BAA0B,KAAK,CAAC;AACpD,QAAM,eAAe,SAAS,iBAAiB,cAAc;AAC7D,QAAM,uBAAuB,mCAAmC,YAAY;AAC5E,MAAI,kBAAkB;AAEtB,MAAI,sBAAsB;AACxB,QAAI,qBAAqB,IAAI;AAC3B,wBAAkB,qBAAqB;AAAA,IACzC,OAAO;AACL,wBAAkB;AAAA,IACpB;AAEA,yBAAqB,KAAK;AAAA,EAC5B;AAEA,WAAS;AACT,QAAM,YAAY;AAElB,QAAM,qBAAqB,SAAS,iBAAiB,QAAQ,SAAS,iBAAiB,SAAS;AAEhG,MAAI,sBAAsB,iBAAiB;AACzC,UAAM,qBAAqB,SAAS,eAAe,eAAe;AAElE,QAAI,mBAAmB,kBAAkB,GAAG;AAC1C,yBAAmB,MAAM;AAAA,IAC3B;AACA,QAAI,sBAAsB,mBAAmB,MAAM,aAAa;AAC9D,yBAAmB,gBAAgB,IAAI;AAAA,IACzC;AAAA,EACF;AACF;AAEA,eAAe,mBAAmB,UAAU;AAC1C,QAAM,CAAC,2BAA2B,wBAAwB,IAAI,MAAM,OAAO,UAAU,MAAM,SAAS,aAAa;AAEjH,QAAM,iBAAiB,6BAA6B,0BAA0B;AAE9E,MAAI,gBAAgB;AAClB,UAAM,iBAAiB,SAAS,eAAe,cAAc;AAE7D,QAAI,mBAAmB,cAAc,KAAK,kBAAkB,0BAA0B;AACpF,qBAAe,MAAM;AAAA,IACvB;AAAA,EACF;AACF;AAEA,SAAS,mCAAmC,0BAA0B;AACpE,aAAW,iBAAiB,0BAA0B;AACpD,UAAM,uBAAuB,0BAA0B,cAAc,gBAAgB,OAAO;AAE5F,QAAI,qBAAsB,QAAO;AAAA,EACnC;AAEA,SAAO;AACT;AAEA,IAAM,iBAAN,MAAqB;AAAA,EACnB,UAAU,oBAAI,IAAI;AAAA,EAClB,WAAW;AAAA,EAEX,YAAY,UAAU;AACpB,SAAK,WAAW;AAAA,EAClB;AAAA,EAEA,QAAQ;AACN,QAAI,CAAC,KAAK,UAAU;AAClB,WAAK,WAAW;AAChB,uBAAiB,+BAA+B,KAAK,sBAAsB,KAAK;AAAA,IAClF;AAAA,EACF;AAAA,EAEA,OAAO;AACL,QAAI,KAAK,UAAU;AACjB,WAAK,WAAW;AAChB,0BAAoB,+BAA+B,KAAK,sBAAsB,KAAK;AAAA,IACrF;AAAA,EACF;AAAA,EAEA,oBAAoB,QAAQ;AAC1B,QAAI,CAAC,KAAK,wBAAwB,MAAM,GAAG;AACzC,WAAK,QAAQ,IAAI,MAAM;AACvB,aAAO,iBAAiB,WAAW,KAAK,qBAAqB,KAAK;AAAA,IACpE;AAAA,EACF;AAAA,EAEA,uBAAuB,QAAQ;AAC7B,QAAI,KAAK,wBAAwB,MAAM,GAAG;AACxC,WAAK,QAAQ,OAAO,MAAM;AAC1B,aAAO,oBAAoB,WAAW,KAAK,qBAAqB,KAAK;AAAA,IACvE;AAAA,EACF;AAAA,EAEA,wBAAwB,QAAQ;AAC9B,WAAO,KAAK,QAAQ,IAAI,MAAM;AAAA,EAChC;AAAA,EAEA,uBAAuB,CAAC,UAAU;AAChC,UAAM,WAAW,uBAAuB,KAAK;AAC7C,QAAI,YAAY,sBAAsB,QAAQ,GAAG;AAC/C,YAAM,eAAe;AACrB,WAAK,uBAAuB,QAAQ;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,sBAAsB,CAAC,UAAU;AAC/B,QAAI,KAAK,YAAY,OAAO,MAAM,QAAQ,UAAU;AAClD,WAAK,mBAAmB,MAAM,IAAI;AAAA,IACpC;AAAA,EACF;AAAA,EAEA,MAAM,uBAAuB,UAAU;AACrC,UAAM,OAAO,MAAM,SAAS;AAC5B,QAAI,MAAM;AACR,WAAK,mBAAmB,IAAI;AAAA,IAC9B;AAAA,EACF;AAAA,EAEA,mBAAmB,MAAM;AACvB,SAAK,SAAS,0BAA0B,cAAc,KAAK,IAAI,CAAC;AAAA,EAClE;AACF;AAEA,SAAS,uBAAuB,OAAO;AACrC,QAAM,gBAAgB,MAAM,QAAQ;AACpC,MAAI,yBAAyB,eAAe;AAC1C,WAAO;AAAA,EACT;AACF;AAEA,SAAS,sBAAsB,UAAU;AACvC,QAAM,cAAc,SAAS,eAAe;AAC5C,SAAO,YAAY,WAAW,cAAc,WAAW;AACzD;AAEA,IAAM,gBAAN,cAA4B,SAAS;AAAA,EACnC,OAAO,cAAc,gBAAgB,YAAY;AAC/C,UAAM,EAAE,iBAAiB,KAAK,IAAI;AAElC,oBAAgB,aAAa,YAAY,IAAI;AAAA,EAC/C;AAAA,EAEA,MAAM,SAAS;AACb,SAAK,mBAAmB;AACxB,SAAK,uBAAuB;AAAA,EAC9B;AAAA,EAEA,qBAAqB;AACnB,UAAM,EAAE,iBAAiB,KAAK,IAAI;AAClC,oBAAgB,aAAa,KAAK,SAAS,IAAI;AAC/C,SAAK,cAAc,KAAK,gBAAgB,KAAK,UAAU;AAAA,EACzD;AAAA,EAEA,yBAAyB;AACvB,eAAW,sBAAsB,KAAK,gBAAgB;AACpD,YAAM,aAAa,mBAAmB;AACtC,UAAI,YAAY;AACd,cAAM,UAAU,sBAAsB,kBAAkB;AACxD,mBAAW,aAAa,SAAS,kBAAkB;AAAA,MACrD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,YAAY,aAAa;AAAA,EACvC;AAAA,EAEA,IAAI,iBAAiB;AACnB,WAAO,SAAS,gBAAgB,iBAAiB,QAAQ;AAAA,EAC3D;AACF;AAEA,IAAM,eAAN,cAA2B,SAAS;AAAA,EAClC,OAAO,cAAc,gBAAgB,YAAY;AAC/C,QAAI,SAAS,QAAQ,sBAAsB,iBAAiB;AAC1D,eAAS,KAAK,YAAY,UAAU;AAAA,IACtC,OAAO;AACL,eAAS,gBAAgB,YAAY,UAAU;AAAA,IACjD;AAAA,EACF;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK,YAAY,eAAe,KAAK;AAAA,EAC9C;AAAA,EAEA,IAAI,eAAe;AACjB,QAAI,CAAC,KAAK,YAAY,aAAa;AACjC,aAAO;AAAA,QACL,QAAQ;AAAA,MACV;AAAA,IACF;AAEA,QAAI,CAAC,KAAK,6BAA6B;AACrC,aAAO;AAAA,QACL,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACF;AAAA,EAEA,MAAM,kBAAkB;AACtB,SAAK,aAAa;AAClB,UAAM,KAAK,UAAU;AAAA,EACvB;AAAA,EAEA,MAAM,SAAS;AACb,QAAI,KAAK,YAAY;AACnB,YAAM,KAAK,YAAY;AAAA,IACzB;AAAA,EACF;AAAA,EAEA,kBAAkB;AAChB,UAAM,gBAAgB;AACtB,QAAI,CAAC,KAAK,WAAW;AACnB,WAAK,+BAA+B;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,IAAI,sBAAsB;AACxB,WAAO,KAAK,gBAAgB;AAAA,EAC9B;AAAA,EAEA,IAAI,kBAAkB;AACpB,WAAO,KAAK,YAAY;AAAA,EAC1B;AAAA,EAEA,IAAI,aAAa;AACf,WAAO,KAAK,YAAY;AAAA,EAC1B;AAAA,EAEA,eAAe;AACb,UAAM,EAAE,gBAAgB,IAAI,KAAK;AACjC,UAAM,EAAE,KAAK,IAAI,KAAK;AAEtB,QAAI,MAAM;AACR,sBAAgB,aAAa,QAAQ,IAAI;AAAA,IAC3C,OAAO;AACL,sBAAgB,gBAAgB,MAAM;AAAA,IACxC;AAAA,EACF;AAAA,EAEA,MAAM,YAAY;AAChB,UAAM,qBAAqB,KAAK,yBAAyB;AACzD,UAAM,wBAAwB,KAAK,8BAA8B;AACjE,SAAK,0BAA0B;AAE/B,UAAM;AACN,UAAM;AAEN,QAAI,KAAK,YAAY;AACnB,WAAK,sCAAsC;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,MAAM,cAAc;AAClB,UAAM,KAAK,4BAA4B,YAAY;AACjD,WAAK,gBAAgB;AACrB,YAAM,KAAK,cAAc;AAAA,IAC3B,CAAC;AAAA,EACH;AAAA,EAEA,IAAI,8BAA8B;AAChC,WAAO,KAAK,oBAAoB,2BAA2B,KAAK,gBAAgB;AAAA,EAClF;AAAA,EAEA,MAAM,gCAAgC;AACpC,UAAM,kBAAkB,CAAC;AAEzB,eAAW,WAAW,KAAK,2BAA2B;AACpD,sBAAgB,KAAK,YAAY,OAAO,CAAC;AAEzC,eAAS,KAAK,YAAY,OAAO;AAAA,IACnC;AAEA,UAAM,QAAQ,IAAI,eAAe;AAAA,EACnC;AAAA,EAEA,4BAA4B;AAC1B,eAAW,WAAW,KAAK,uBAAuB;AAChD,eAAS,KAAK,YAAY,sBAAsB,OAAO,CAAC;AAAA,IAC1D;AAAA,EACF;AAAA,EAEA,wCAAwC;AACtC,eAAW,WAAW,KAAK,iCAAiC;AAC1D,eAAS,KAAK,YAAY,OAAO;AAAA,IACnC;AAAA,EACF;AAAA,EAEA,MAAM,2BAA2B;AAC/B,UAAM,kBAAkB,CAAC,GAAG,KAAK,0BAA0B;AAE3D,eAAW,WAAW,KAAK,gCAAgC;AACzD,UAAI,CAAC,KAAK,8BAA8B,SAAS,eAAe,GAAG;AACjE,iBAAS,KAAK,YAAY,OAAO;AAAA,MACnC;AAAA,IACF;AAEA,eAAW,WAAW,iBAAiB;AACrC,eAAS,KAAK,YAAY,OAAO;AAAA,IACnC;AAAA,EACF;AAAA,EAEA,8BAA8B,SAAS,aAAa;AAClD,eAAW,CAACS,QAAO,UAAU,KAAK,YAAY,QAAQ,GAAG;AAEvD,UAAI,QAAQ,WAAW,SAAS;AAC9B,YAAI,WAAW,WAAW,SAAS;AACjC;AAAA,QACF;AACA,YAAI,QAAQ,aAAa,WAAW,WAAW;AAC7C,sBAAY,OAAOA,QAAO,CAAC;AAC3B,iBAAO;AAAA,QACT;AAAA,MACF;AAGA,UAAI,WAAW,YAAY,OAAO,GAAG;AACnC,oBAAY,OAAOA,QAAO,CAAC;AAC3B,eAAO;AAAA,MACT;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,uCAAuC;AACrC,eAAW,WAAW,KAAK,gCAAgC;AACzD,eAAS,KAAK,YAAY,OAAO;AAAA,IACnC;AAAA,EACF;AAAA,EAEA,iCAAiC;AAC/B,eAAW,WAAW,KAAK,4BAA4B;AACrD,eAAS,KAAK,YAAY,OAAO;AAAA,IACnC;AAAA,EACF;AAAA,EAEA,kBAAkB;AAChB,aAAS,UAAU,KAAK,UAAU;AAClC,SAAK,8BAA8B;AAAA,EACrC;AAAA,EAEA,gCAAgC;AAC9B,eAAW,sBAAsB,KAAK,uBAAuB;AAC3D,YAAM,yBAAyB,sBAAsB,kBAAkB;AACvE,yBAAmB,YAAY,sBAAsB;AAAA,IACvD;AAAA,EACF;AAAA,EAEA,MAAM,gBAAgB;AACpB,UAAM,KAAK,cAAc,KAAK,gBAAgB,KAAK,UAAU;AAAA,EAC/D;AAAA,EAEA,IAAI,kCAAkC;AACpC,WAAO,KAAK,0BAA0B,OAAO,CAAC,YAAY;AACxD,aAAO,QAAQ,aAAa,kBAAkB,MAAM;AAAA,IACtD,CAAC;AAAA,EACH;AAAA,EAEA,IAAI,4BAA4B;AAC9B,WAAO,KAAK,oBAAoB,mCAAmC,KAAK,eAAe;AAAA,EACzF;AAAA,EAEA,IAAI,4BAA4B;AAC9B,WAAO,KAAK,gBAAgB,mCAAmC,KAAK,mBAAmB;AAAA,EACzF;AAAA,EAEA,IAAI,wBAAwB;AAC1B,WAAO,KAAK,gBAAgB,+BAA+B,KAAK,mBAAmB;AAAA,EACrF;AAAA,EAEA,IAAI,iCAAiC;AACnC,WAAO,KAAK,oBAAoB;AAAA,EAClC;AAAA,EAEA,IAAI,6BAA6B;AAC/B,WAAO,KAAK,gBAAgB;AAAA,EAC9B;AAAA,EAEA,IAAI,wBAAwB;AAC1B,WAAO,KAAK,WAAW,iBAAiB,QAAQ;AAAA,EAClD;AACF;AAEA,IAAM,uBAAN,cAAmC,aAAa;AAAA,EAC9C,OAAO,cAAc,gBAAgB,YAAY;AAC/C,kBAAc,gBAAgB,YAAY;AAAA,MACxC,WAAW;AAAA,QACT,mBAAmB,aAAW,CAAC,gBAAgB,OAAO;AAAA,MACxD;AAAA,IACF,CAAC;AAED,eAAW,SAAS,eAAe,iBAAiB,aAAa,GAAG;AAClE,UAAI,gBAAgB,KAAK,EAAG,OAAM,OAAO;AAAA,IAC3C;AAEA,aAAS,eAAe,EAAE,QAAQ,EAAE,gBAAgB,WAAW,EAAE,CAAC;AAAA,EACpE;AAAA,EAEA,MAAM,4BAA4B,UAAU;AAC1C,WAAO,MAAM,SAAS;AAAA,EACxB;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO;AAAA,EACT;AAAA,EAEA,IAAI,kBAAkB;AACpB,WAAO;AAAA,EACT;AACF;AAEA,SAAS,gBAAgB,OAAO;AAC9B,SAAO,iBAAiB,gBACtB,MAAM,OACN,MAAM,YAAY,WAClB,CAAC,MAAM,QAAQ,wBAAwB;AAC3C;AAEA,IAAM,gBAAN,MAAoB;AAAA,EAClB,OAAO,CAAC;AAAA,EACR,YAAY,CAAC;AAAA,EAEb,YAAY,MAAM;AAChB,SAAK,OAAO;AAAA,EACd;AAAA,EAEA,IAAIP,WAAU;AACZ,WAAO,WAAWA,SAAQ,KAAK,KAAK;AAAA,EACtC;AAAA,EAEA,IAAIA,WAAU;AACZ,QAAI,KAAK,IAAIA,SAAQ,GAAG;AACtB,YAAM,WAAW,KAAK,KAAKA,SAAQ;AACnC,WAAK,MAAMA,SAAQ;AACnB,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,IAAIA,WAAU,UAAU;AACtB,SAAK,MAAMA,WAAU,QAAQ;AAC7B,SAAK,MAAMA,SAAQ;AACnB,WAAO;AAAA,EACT;AAAA,EAEA,QAAQ;AACN,SAAK,YAAY,CAAC;AAAA,EACpB;AAAA;AAAA,EAIA,KAAKA,WAAU;AACb,WAAO,KAAK,UAAU,WAAWA,SAAQ,CAAC;AAAA,EAC5C;AAAA,EAEA,MAAMA,WAAU,UAAU;AACxB,SAAK,UAAU,WAAWA,SAAQ,CAAC,IAAI;AAAA,EACzC;AAAA,EAEA,MAAMA,WAAU;AACd,UAAM,MAAM,WAAWA,SAAQ;AAC/B,UAAMO,SAAQ,KAAK,KAAK,QAAQ,GAAG;AACnC,QAAIA,SAAQ,GAAI,MAAK,KAAK,OAAOA,QAAO,CAAC;AACzC,SAAK,KAAK,QAAQ,GAAG;AACrB,SAAK,KAAK;AAAA,EACZ;AAAA,EAEA,OAAO;AACL,eAAW,OAAO,KAAK,KAAK,OAAO,KAAK,IAAI,GAAG;AAC7C,aAAO,KAAK,UAAU,GAAG;AAAA,IAC3B;AAAA,EACF;AACF;AAEA,IAAM,WAAN,cAAuB,KAAK;AAAA,EAC1B,gBAAgB,IAAI,cAAc,EAAE;AAAA,EACpC,uBAAuB,IAAI,IAAI,SAAS,IAAI;AAAA,EAC5C,gBAAgB;AAAA,EAEhB,mBAAmB,aAAa;AAC9B,WAAO,KAAK,SAAS,0BAA0B,YAAY;AAAA,EAC7D;AAAA,EAEA,WAAW,UAAU,YAAY,OAAO,aAAa,MAAMQ,QAAO;AAChE,UAAM,kBAAkB,KAAK,cAAcA,MAAK,KAAK,KAAK,SAAS;AACnE,UAAM,gBAAgB,kBAAkB,uBAAuB;AAE/D,UAAM,WAAW,IAAI,cAAc,KAAK,UAAU,UAAU,WAAW,UAAU;AAEjF,QAAI,CAAC,SAAS,cAAc;AAC1B,WAAK,gBAAgB;AAAA,IACvB,OAAO;AACL,MAAAA,QAAO,cAAc;AAAA,IACvB;AAEA,WAAO,KAAK,OAAO,QAAQ;AAAA,EAC7B;AAAA,EAEA,YAAY,UAAUA,QAAO;AAC3B,IAAAA,QAAO,cAAc;AACrB,UAAM,WAAW,IAAI,cAAc,KAAK,UAAU,UAAU,KAAK;AACjE,WAAO,KAAK,OAAO,QAAQ;AAAA,EAC7B;AAAA,EAEA,qBAAqB;AACnB,SAAK,cAAc,MAAM;AAAA,EAC3B;AAAA,EAEA,MAAM,cAAc,WAAW,KAAK,UAAU;AAC5C,QAAI,SAAS,aAAa;AACxB,WAAK,SAAS,sBAAsB;AACpC,YAAM,EAAE,sBAAsBf,UAAS,IAAI;AAC3C,YAAM,kBAAkB;AACxB,YAAM,iBAAiB,SAAS,MAAM;AACtC,WAAK,cAAc,IAAIA,WAAU,cAAc;AAC/C,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,6BAA6BA,WAAU;AACrC,WAAO,KAAK,cAAc,IAAIA,SAAQ;AAAA,EACxC;AAAA,EAEA,cAAce,QAAO;AACnB,WAAO,CAACA,UAAU,KAAK,qBAAqB,aAAaA,OAAM,SAAS,YAAYA,OAAM,WAAW;AAAA,EACvG;AAAA,EAEA,6BAA6BA,QAAO;AAClC,WAAO,KAAK,cAAcA,MAAK,KAAK,KAAK,SAAS;AAAA,EACpD;AAAA,EAEA,IAAI,WAAW;AACb,WAAO,aAAa,YAAY,KAAK,OAAO;AAAA,EAC9C;AACF;AAEA,IAAM,YAAN,MAAgB;AAAA,EACd,WAAW;AAAA,EAEX,YAAY,UAAU,eAAe;AACnC,SAAK,WAAW;AAChB,SAAK,gBAAgB;AAAA,EACvB;AAAA,EAEA,QAAQ;AACN,QAAI,SAAS,eAAe,WAAW;AACrC,eAAS,iBAAiB,oBAAoB,KAAK,WAAW;AAAA,IAChE,OAAO;AACL,WAAK,0BAA0B,SAAS,IAAI;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,OAAO;AACL,aAAS,oBAAoB,oBAAoB,KAAK,WAAW;AAAA,EACnE;AAAA,EAEA,0BAA0B,SAAS;AACjC,eAAW,QAAQ,QAAQ,iBAAiB,KAAK,QAAQ,GAAG;AAC1D,UAAI,KAAK,SAAS,kBAAkB,IAAI,GAAG;AACzC,aAAK,WAAW,IAAI;AAAA,MACtB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,MAAM,WAAW,MAAM;AACrB,UAAMf,YAAW,IAAI,IAAI,KAAK,IAAI;AAElC,QAAI,KAAK,cAAc,IAAIA,SAAQ,GAAG;AACpC;AAAA,IACF;AAEA,UAAM,eAAe,IAAI,aAAa,MAAM,YAAY,KAAKA,WAAU,IAAI,gBAAgB,GAAG,IAAI;AAClG,UAAM,aAAa,QAAQ;AAAA,EAC7B;AAAA;AAAA,EAIA,eAAe,cAAc;AAC3B,iBAAa,QAAQ,eAAe,IAAI;AAAA,EAC1C;AAAA,EAEA,MAAM,6BAA6B,cAAc,eAAe;AAC9D,QAAI;AACF,YAAM,eAAe,MAAM,cAAc;AACzC,YAAM,WAAW,aAAa,eAAe,YAAY;AAEzD,WAAK,cAAc,IAAI,aAAa,KAAK,QAAQ;AAAA,IACnD,SAAS,GAAG;AAAA,IAEZ;AAAA,EACF;AAAA,EAEA,eAAe,cAAc;AAAA,EAAC;AAAA,EAE9B,eAAe,cAAc;AAAA,EAAC;AAAA,EAE9B,gBAAgB,cAAc;AAAA,EAAC;AAAA,EAE/B,iCAAiC,cAAc,eAAe;AAAA,EAAC;AAAA,EAE/D,0BAA0B,cAAc,eAAe;AAAA,EAAC;AAAA,EAExD,cAAc,MAAM;AAClB,SAAK,0BAA0B,SAAS,IAAI;AAAA,EAC9C;AACF;AAEA,IAAM,QAAN,MAAY;AAAA,EACV,YAAYc,UAAS;AACnB,SAAK,UAAUA;AAAA,EACjB;AAAA,EAEA,QAAQ;AACN,SAAK,QAAQ,WAAW;AAAA,EAC1B;AAAA,EAEA,oBAAoB;AAClB,SAAK,iBAAiB,EAAE;AAAA,EAC1B;AAAA,EAEA,sBAAsB;AACpB,SAAK,iBAAiB,UAAU;AAAA,EAClC;AAAA,EAEA,wBAAwB;AACtB,SAAK,iBAAiB,YAAY;AAAA,EACpC;AAAA,EAEA,iBAAiB,OAAO;AACtB,mBAAe,uBAAuB,KAAK;AAAA,EAC7C;AACF;AAEA,IAAM,UAAN,MAAc;AAAA,EACZ,YAAY,IAAI,UAAU,IAAI;AAAA,EAC9B,UAAU,IAAI,QAAQ,IAAI;AAAA,EAC1B,OAAO,IAAI,SAAS,MAAM,SAAS,eAAe;AAAA,EAClD,UAAU,IAAI,eAAe,IAAI;AAAA,EAEjC,eAAe,IAAI,aAAa,IAAI;AAAA,EACpC,gBAAgB,IAAI,cAAc;AAAA,EAClC,uBAAuB,IAAI,qBAAqB,MAAM,QAAQ;AAAA,EAC9D,oBAAoB,IAAI,kBAAkB,MAAM,MAAM;AAAA,EACtD,qBAAqB,IAAI,mBAAmB,MAAM,QAAQ;AAAA,EAC1D,iBAAiB,IAAI,eAAe,IAAI;AAAA,EACxC,iBAAiB,IAAI,eAAe,IAAI;AAAA,EACxC,wBAAwB,IAAI,sBAAsB,MAAM,SAAS,eAAe;AAAA,EAChF,kBAAkB,IAAI,gBAAgB,MAAM,SAAS,eAAe;AAAA,EACpE,wBAAwB,IAAI,sBAAsB;AAAA,EAClD,QAAQ,IAAI,MAAM,IAAI;AAAA,EAEtB,UAAU;AAAA,EACV,UAAU;AAAA,EACV,6BAA6B;AAAA,EAE7B,YAAYE,iBAAgB;AAC1B,SAAK,iBAAiBA;AACtB,SAAK,YAAY,IAAI,UAAU,MAAM,KAAK,KAAK,aAAa;AAC5D,SAAK,mBAAmB,KAAK;AAC7B,SAAK,4BAA4B,KAAK;AAAA,EACxC;AAAA,EAEA,QAAQ;AACN,QAAI,CAAC,KAAK,SAAS;AACjB,WAAK,aAAa,MAAM;AACxB,WAAK,cAAc,MAAM;AACzB,WAAK,qBAAqB,MAAM;AAChC,WAAK,sBAAsB,MAAM;AACjC,WAAK,kBAAkB,MAAM;AAC7B,WAAK,mBAAmB,MAAM;AAC9B,WAAK,eAAe,MAAM;AAC1B,WAAK,eAAe,MAAM;AAC1B,WAAK,gBAAgB,MAAM;AAC3B,WAAK,QAAQ,MAAM;AACnB,WAAK,UAAU,MAAM;AACrB,WAAK,UAAU;AACf,WAAK,UAAU;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,UAAU;AACR,SAAK,UAAU;AAAA,EACjB;AAAA,EAEA,OAAO;AACL,QAAI,KAAK,SAAS;AAChB,WAAK,aAAa,KAAK;AACvB,WAAK,cAAc,KAAK;AACxB,WAAK,qBAAqB,KAAK;AAC/B,WAAK,sBAAsB,KAAK;AAChC,WAAK,kBAAkB,KAAK;AAC5B,WAAK,mBAAmB,KAAK;AAC7B,WAAK,eAAe,KAAK;AACzB,WAAK,eAAe,KAAK;AACzB,WAAK,gBAAgB,KAAK;AAC1B,WAAK,QAAQ,KAAK;AAClB,WAAK,UAAU,KAAK;AACpB,WAAK,UAAU;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,gBAAgB,SAAS;AACvB,SAAK,UAAU;AAAA,EACjB;AAAA,EAEA,MAAMhB,WAAU,UAAU,CAAC,GAAG;AAC5B,UAAM,eAAe,QAAQ,QAAQ,SAAS,eAAe,QAAQ,KAAK,IAAI;AAE9E,QAAI,wBAAwB,cAAc;AACxC,YAAM,SAAS,QAAQ,UAAU,eAAe,YAAY;AAE5D,mBAAa,SAAS,kCAAkC,cAAc,MAAM;AAC5E,mBAAa,MAAMA,UAAS,SAAS;AAAA,IACvC,OAAO;AACL,WAAK,UAAU,aAAa,UAAUA,SAAQ,GAAG,OAAO;AAAA,IAC1D;AAAA,EACF;AAAA,EAEA,QAAQ,KAAK,WAAW;AACtB,UAAM,kBAAkB,aAAa,KAAK,eAAe,IAAI,SAAS;AACtE,UAAM,eAAe,QAAQ,SAAS;AACtC,QAAI,CAAC,mBAAmB,CAAC,KAAK,UAAU,gBAAgB,cAAc;AACpE,WAAK,MAAM,KAAK,EAAE,QAAQ,WAAW,qBAAqB,MAAM,CAAC;AAAA,IACnE;AAAA,EACF;AAAA,EAEA,oBAAoB,QAAQ;AAC1B,SAAK,eAAe,oBAAoB,MAAM;AAAA,EAChD;AAAA,EAEA,uBAAuB,QAAQ;AAC7B,SAAK,eAAe,uBAAuB,MAAM;AAAA,EACnD;AAAA,EAEA,oBAAoB,SAAS;AAC3B,SAAK,sBAAsB,OAAO,cAAc,KAAK,OAAO,CAAC;AAAA,EAC/D;AAAA,EAEA,aAAa;AACX,SAAK,KAAK,mBAAmB;AAAA,EAC/B;AAAA,EAEA,oBAAoB,OAAO;AACzB,YAAQ;AAAA,MACN;AAAA,IACF;AAEA,SAAK,mBAAmB;AAAA,EAC1B;AAAA,EAEA,IAAI,iBAAiB,OAAO;AAC1B,WAAO,MAAM,mBAAmB;AAAA,EAClC;AAAA,EAEA,IAAI,mBAAmB;AACrB,WAAO,OAAO,MAAM;AAAA,EACtB;AAAA,EAEA,IAAI,MAAM,OAAO;AACf,WAAO,MAAM,UAAU;AAAA,EACzB;AAAA,EAEA,IAAI,QAAQ;AACV,WAAO,OAAO,MAAM;AAAA,EACtB;AAAA,EAEA,IAAI,SAAS,OAAO;AAClB,WAAO,MAAM,OAAO;AAAA,EACtB;AAAA,EAEA,IAAI,WAAW;AACb,WAAO,OAAO,MAAM;AAAA,EACtB;AAAA,EAEA,IAAI,WAAW;AACb,WAAO,KAAK,QAAQ;AAAA,EACtB;AAAA,EAEA,IAAI,wBAAwB;AAC1B,WAAO,KAAK,QAAQ;AAAA,EACtB;AAAA,EAEA,IAAI,4BAA4B;AAC9B,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,0BAA0B,OAAO;AACnC,SAAK,UAAU,SAAS,KAAK,iBAAiB,KAAK,IAAI,GAAG,KAAK;AAC/D,SAAK,6BAA6B;AAAA,EACpC;AAAA;AAAA,EAIA,kBAAkB,SAAS;AACzB,UAAM,WAAW,QAAQ,aAAa,mBAAmB;AACzD,UAAM,WAAW,QAAQ,aAAa,mBAAmB;AACzD,UAAM,cAAc,QAAQ,aAAa,kBAAkB;AAC3D,UAAM,QAAQ,eAAe,SAC3B,OACA,SAAS,eAAe,WAAW,KAAK,uBAAuB,SAAS,6BAA6B;AAEvG,QAAI,YAAY,YAAY,iBAAiB,cAAc;AACzD,aAAO;AAAA,IACT,OAAO;AACL,YAAMA,YAAW,IAAI,IAAI,QAAQ,IAAI;AAErC,aAAO,KAAK,qBAAqB,OAAO,KAAK,oBAAoBA,WAAU,KAAK,SAAS,YAAY;AAAA,IACvG;AAAA,EACF;AAAA;AAAA,EAIA,6DAA6DA,WAAU,uBAAuB,WAAW;AACvG,QAAI,KAAK,SAAS;AAChB,WAAK,UAAU,WAAWA,WAAU,uBAAuB;AAAA,QACzD,QAAQ;AAAA,QACR,gBAAgB;AAAA,QAChB;AAAA,MACF,CAAC;AAAA,IACH,OAAO;AACL,WAAK,QAAQ,gBAAgB;AAAA,QAC3B,QAAQ;AAAA,MACV,CAAC;AAAA,IACH;AAAA,EACF;AAAA;AAAA,EAIA,sBAAsB,UAAU;AAC9B,SAAK,QAAQ,sBAAsB,EAAE,gBAAgB,SAAS,CAAC;AAAA,EACjE;AAAA;AAAA,EAIA,6BAA6B,MAAMA,WAAU;AAC3C,WAAO,KAAK,qBAAqB,IAAI,KAAK,oBAAoBA,WAAU,KAAK,SAAS,YAAY;AAAA,EACpG;AAAA,EAEA,8BAA8B;AAAA,EAAC;AAAA;AAAA,EAI/B,6BAA6B,MAAMA,WAAU;AAC3C,WACE,KAAK,qBAAqB,IAAI,KAC9B,oBAAoBA,WAAU,KAAK,SAAS,YAAY,KACxD,KAAK,UAAU,oCAAoCA,SAAQ;AAAA,EAE/D;AAAA;AAAA,EAIA,yBAAyB,MAAMA,WAAU,OAAO;AAC9C,WACE,KAAK,qBAAqB,IAAI,KAC9B,oBAAoBA,WAAU,KAAK,SAAS,YAAY,KACxD,KAAK,yCAAyC,MAAMA,WAAU,KAAK;AAAA,EAEvE;AAAA,EAEA,uBAAuB,MAAMA,WAAU;AACrC,UAAM,SAAS,KAAK,iBAAiB,IAAI;AACzC,UAAM,wBAAwB,KAAK,aAAa,mBAAmB;AAEnE,SAAK,MAAMA,UAAS,MAAM,EAAE,QAAQ,sBAAsB,CAAC;AAAA,EAC7D;AAAA;AAAA,EAIA,iCAAiCA,WAAU,QAAQ;AACjD,WAAO,KAAK,6BAA6BA,WAAU,MAAM,KAAK,KAAK,kCAAkCA,SAAQ;AAAA,EAC/G;AAAA,EAEA,wBAAwBA,WAAU,SAAS;AACzC,sCAAkCA,SAAQ;AAC1C,SAAK,QAAQ,wBAAwBA,WAAU,OAAO;AAAA,EACxD;AAAA;AAAA,EAIA,aAAae,QAAO;AAClB,QAAI,CAACA,OAAM,uBAAuB;AAChC,iBAAW,SAAS,eAAe;AACnC,WAAK,KAAK,mBAAmBA,OAAM,SAAS;AAAA,IAC9C;AACA,sCAAkCA,OAAM,QAAQ;AAChD,QAAI,CAACA,OAAM,QAAQ;AACjB,WAAK,uCAAuCA,OAAM,UAAUA,OAAM,MAAM;AAAA,IAC1E;AAAA,EACF;AAAA,EAEA,eAAeA,QAAO;AACpB,SAAK,KAAK,qBAAqB;AAC/B,mBAAe,SAAS,eAAe;AACvC,SAAK,+BAA+BA,OAAM,iBAAiB,CAAC;AAAA,EAC9D;AAAA,EAEA,6BAA6Bf,WAAU,QAAQ;AAC7C,WAAO,KAAK,UAAU,6BAA6BA,WAAU,MAAM;AAAA,EACrE;AAAA,EAEA,gCAAgC,QAAQ,QAAQ;AAC9C,SAAK,+CAA+C,QAAQ,MAAM;AAAA,EACpE;AAAA;AAAA,EAIA,eAAe,MAAMF,YAAW;AAC9B,UAAM,SAAS,YAAY,MAAMA,UAAS;AAE1C,WACE,KAAK,wBAAwB,MAAMA,UAAS,KAC5C,oBAAoB,UAAU,MAAM,GAAG,KAAK,SAAS,YAAY;AAAA,EAErE;AAAA,EAEA,cAAc,MAAMA,YAAW;AAC7B,SAAK,UAAU,WAAW,MAAMA,UAAS;AAAA,EAC3C;AAAA;AAAA,EAIA,wBAAwB;AACtB,SAAK,KAAK,uBAAuB,KAAK;AACtC,SAAK,+BAA+B;AAAA,EACtC;AAAA,EAEA,aAAa;AACX,SAAK,QAAQ,iCAAiC;AAAA,EAChD;AAAA,EAEA,iBAAiB;AACf,SAAK,QAAQ,qCAAqC;AAAA,EACpD;AAAA;AAAA,EAIA,0BAA0B,SAAS;AACjC,SAAK,oBAAoB,OAAO;AAAA,EAClC;AAAA;AAAA,EAIA,wBAAwB;AACtB,QAAI,CAAC,KAAK,UAAU,cAAc,QAAQ;AACxC,WAAK,uCAAuC;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,sBAAsB,EAAE,QAAQ,GAAG,SAAS;AAC1C,UAAM,QAAQ,KAAK,8BAA8B,SAAS,OAAO;AACjE,UAAM;AAAA,MACJ;AAAA,MACA,QAAQ,EAAE,OAAO;AAAA,IACnB,IAAI;AAEJ,QAAI,KAAK,KAAK,YAAY,QAAQ;AAChC,WAAK,KAAK,SAAS,gBAAgB;AAAA,IACrC;AAEA,WAAO,CAAC;AAAA,EACV;AAAA,EAEA,qBAAqB,WAAW,YAAY,cAAc;AACxD,SAAK,KAAK,uBAAuB,KAAK,QAAQ;AAC9C,SAAK,6BAA6B,YAAY;AAAA,EAChD;AAAA,EAEA,0BAA0B,SAAS;AACjC,SAAK,UAAU,0BAA0B,OAAO;AAAA,EAClD;AAAA,EAEA,gBAAgB,QAAQ;AACtB,SAAK,QAAQ,gBAAgB,MAAM;AAAA,EACrC;AAAA;AAAA,EAIA,YAAY,OAAO;AACjB,SAAK,gCAAgC,KAAK;AAAA,EAC5C;AAAA,EAEA,cAAc,eAAe,OAAO;AAClC,SAAK,kCAAkC,eAAe,KAAK;AAAA,EAC7D;AAAA;AAAA,EAIA,yCAAyC,MAAME,WAAU,IAAI;AAC3D,UAAM,QAAQ,KAAK,6CAA6C,MAAMA,WAAU,EAAE;AAClF,WAAO,CAAC,MAAM;AAAA,EAChB;AAAA,EAEA,kCAAkCA,WAAU;AAC1C,UAAM,QAAQ,KAAK,wCAAwCA,SAAQ;AACnE,WAAO,CAAC,MAAM;AAAA,EAChB;AAAA,EAEA,6CAA6C,MAAMA,WAAU,OAAO;AAClE,WAAO,SAAS,eAAe;AAAA,MAC7B,QAAQ;AAAA,MACR,QAAQ,EAAE,KAAKA,UAAS,MAAM,eAAe,MAAM;AAAA,MACnD,YAAY;AAAA,IACd,CAAC;AAAA,EACH;AAAA,EAEA,wCAAwCA,WAAU;AAChD,WAAO,SAAS,sBAAsB;AAAA,MACpC,QAAQ,EAAE,KAAKA,UAAS,KAAK;AAAA,MAC7B,YAAY;AAAA,IACd,CAAC;AAAA,EACH;AAAA,EAEA,uCAAuCA,WAAU,QAAQ;AACvD,WAAO,SAAS,eAAe,EAAE,QAAQ,EAAE,KAAKA,UAAS,MAAM,OAAO,EAAE,CAAC;AAAA,EAC3E;AAAA,EAEA,yCAAyC;AACvC,WAAO,SAAS,oBAAoB;AAAA,EACtC;AAAA,EAEA,8BAA8B,SAAS,SAAS;AAC9C,WAAO,SAAS,uBAAuB;AAAA,MACrC,QAAQ,EAAE,SAAS,GAAG,QAAQ;AAAA,MAC9B,YAAY;AAAA,IACd,CAAC;AAAA,EACH;AAAA,EAEA,6BAA6B,cAAc;AACzC,WAAO,SAAS,gBAAgB,EAAE,QAAQ,EAAE,aAAa,EAAE,CAAC;AAAA,EAC9D;AAAA,EAEA,+BAA+B,SAAS,CAAC,GAAG;AAC1C,WAAO,SAAS,cAAc;AAAA,MAC5B,QAAQ,EAAE,KAAK,KAAK,SAAS,MAAM,OAAO;AAAA,IAC5C,CAAC;AAAA,EACH;AAAA,EAEA,+CAA+C,QAAQ,QAAQ;AAC7D;AAAA,MACE,IAAI,gBAAgB,cAAc;AAAA,QAChC,QAAQ,OAAO,SAAS;AAAA,QACxB,QAAQ,OAAO,SAAS;AAAA,MAC1B,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,gCAAgC,OAAO;AACrC,WAAO,SAAS,oBAAoB,EAAE,QAAQ,MAAM,CAAC;AAAA,EACvD;AAAA,EAEA,kCAAkC,eAAe,OAAO;AACtD,WAAO,SAAS,sBAAsB;AAAA,MACpC,QAAQ,EAAE,cAAc;AAAA,MACxB,QAAQ;AAAA,MACR,YAAY;AAAA,IACd,CAAC;AAAA,EACH;AAAA;AAAA,EAIA,wBAAwB,MAAMF,YAAW;AACvC,QAAI,OAAO,MAAM,QAAQ,OAAO;AAC9B,aAAO;AAAA,IACT,OAAO;AACL,YAAM,yBAAyBA,aAAY,KAAK,qBAAqBA,UAAS,IAAI;AAElF,UAAI,OAAO,MAAM,QAAQ,SAAS;AAChC,eAAO,0BAA0B,KAAK,QAAQ,qBAAqB,KAAK;AAAA,MAC1E,OAAO;AACL,eAAO,0BAA0B,KAAK,qBAAqB,IAAI;AAAA,MACjE;AAAA,IACF;AAAA,EACF;AAAA,EAEA,qBAAqB,SAAS;AAC5B,UAAM,YAAY,uBAAuB,SAAS,cAAc;AAChE,UAAM,cAAc,uBAAuB,SAAS,aAAa;AAGjE,QAAI,OAAO,MAAM,WAAW,aAAa;AAEvC,UAAI,WAAW;AACb,eAAO,UAAU,aAAa,YAAY,KAAK;AAAA,MACjD,OAAO;AACL,eAAO;AAAA,MACT;AAAA,IACF,OAAO;AAEL,UAAI,WAAW;AACb,eAAO,UAAU,aAAa,YAAY,KAAK;AAAA,MACjD,OAAO;AACL,eAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAIA,iBAAiB,MAAM;AACrB,WAAO,eAAe,IAAI,KAAK;AAAA,EACjC;AAAA,EAEA,IAAI,WAAW;AACb,WAAO,KAAK,KAAK;AAAA,EACnB;AACF;AAaA,SAAS,kCAAkC,KAAK;AAC9C,SAAO,iBAAiB,KAAK,qCAAqC;AACpE;AAEA,IAAM,wCAAwC;AAAA,EAC5C,aAAa;AAAA,IACX,MAAM;AACJ,aAAO,KAAK,SAAS;AAAA,IACvB;AAAA,EACF;AACF;AAEA,IAAM,UAAU,IAAI,QAAQ,cAAc;AAC1C,IAAM,EAAE,OAAO,WAAW,YAAY,IAAI;AAO1C,SAAS,QAAQ;AACf,UAAQ,MAAM;AAChB;AAOA,SAAS,gBAAgB,SAAS;AAChC,UAAQ,gBAAgB,OAAO;AACjC;AAgBA,SAAS,MAAME,WAAU,SAAS;AAChC,UAAQ,MAAMA,WAAU,OAAO;AACjC;AAOA,SAAS,oBAAoB,QAAQ;AACnC,UAAQ,oBAAoB,MAAM;AACpC;AAOA,SAAS,uBAAuB,QAAQ;AACtC,UAAQ,uBAAuB,MAAM;AACvC;AAQA,SAAS,oBAAoB,SAAS;AACpC,UAAQ,oBAAoB,OAAO;AACrC;AAQA,SAAS,aAAa;AACpB,UAAQ;AAAA,IACN;AAAA,EACF;AACA,UAAQ,WAAW;AACrB;AAYA,SAAS,oBAAoB,OAAO;AAClC,UAAQ;AAAA,IACN;AAAA,EACF;AACA,SAAO,MAAM,mBAAmB;AAClC;AAEA,SAAS,iBAAiB,eAAe;AACvC,UAAQ;AAAA,IACN;AAAA,EACF;AACA,SAAO,MAAM,UAAU;AACzB;AAEA,SAAS,YAAY,MAAM;AACzB,UAAQ;AAAA,IACN;AAAA,EACF;AACA,SAAO,MAAM,OAAO;AACtB;AAEA,IAAIiB,SAAqB,uBAAO,OAAO;AAAA,EACrC,WAAW;AAAA,EACX,WAAW;AAAA,EACX;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,OAAO;AAAA,EACP;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,CAAC;AAED,IAAM,yBAAN,cAAqC,MAAM;AAAC;AAE5C,IAAM,kBAAN,MAAsB;AAAA,EACpB,sBAAsB,CAAC,mBAAmB,QAAQ,QAAQ;AAAA,EAC1D,uBAAuB;AAAA,EACvB,uBAAuB,MAAM;AAAA,EAAC;AAAA,EAC9B,aAAa;AAAA,EACb,iBAAiB;AAAA,EACjB,qBAAqB,oBAAI,IAAI;AAAA,EAC7B,oBAAoB;AAAA,EACpB,SAAS;AAAA,EAET,YAAY,SAAS;AACnB,SAAK,UAAU;AACf,SAAK,OAAO,IAAI,UAAU,MAAM,KAAK,OAAO;AAC5C,SAAK,qBAAqB,IAAI,mBAAmB,MAAM,KAAK,OAAO;AACnE,SAAK,wBAAwB,IAAI,sBAAsB,MAAM,KAAK,OAAO;AACzE,SAAK,kBAAkB,IAAI,gBAAgB,MAAM,KAAK,OAAO;AAC7D,SAAK,wBAAwB,KAAK;AAClC,SAAK,qBAAqB,IAAI,mBAAmB,MAAM,KAAK,OAAO;AAAA,EACrE;AAAA;AAAA,EAIA,UAAU;AACR,QAAI,CAAC,KAAK,YAAY;AACpB,WAAK,aAAa;AAClB,UAAI,KAAK,gBAAgB,kBAAkB,MAAM;AAC/C,aAAK,mBAAmB,MAAM;AAAA,MAChC,OAAO;AACL,aAAK,eAAe;AAAA,MACtB;AACA,WAAK,sBAAsB,MAAM;AACjC,WAAK,gBAAgB,MAAM;AAC3B,WAAK,mBAAmB,MAAM;AAAA,IAChC;AAAA,EACF;AAAA,EAEA,aAAa;AACX,QAAI,KAAK,YAAY;AACnB,WAAK,aAAa;AAClB,WAAK,mBAAmB,KAAK;AAC7B,WAAK,sBAAsB,KAAK;AAChC,WAAK,gBAAgB,KAAK;AAC1B,WAAK,mBAAmB,KAAK;AAAA,IAC/B;AAAA,EACF;AAAA,EAEA,kBAAkB;AAChB,QAAI,KAAK,gBAAgB,kBAAkB,OAAO;AAChD,WAAK,eAAe;AAAA,IACtB;AAAA,EACF;AAAA,EAEA,mBAAmB;AACjB,QAAI,KAAK,qBAAqB,KAAK,EAAG;AAEtC,QAAI,KAAK,QAAQ,aAAa;AAC5B,WAAK,WAAW;AAAA,IAClB;AAEA,QAAI,KAAK,gBAAgB,kBAAkB,SAAS,KAAK,gBAAgB;AACvE,WAAK,eAAe;AAAA,IACtB;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,UAAM,EAAE,SAAS,IAAI,IAAI,KAAK;AAE9B,SAAK,oBAAoB,OAAO,YAAY;AAE5C,SAAK,QAAQ,gBAAgB,UAAU;AACvC,SAAK,QAAQ,MAAM;AACnB,SAAK,QAAQ,MAAM;AACnB,WAAO,KAAK,QAAQ;AAAA,EACtB;AAAA,EAEA,sBAAsB;AACpB,QAAI,KAAK,gBAAgB,kBAAkB,MAAM;AAC/C,WAAK,mBAAmB,MAAM;AAAA,IAChC,OAAO;AACL,WAAK,mBAAmB,KAAK;AAC7B,WAAK,eAAe;AAAA,IACtB;AAAA,EACF;AAAA,EAEA,MAAM,iBAAiB;AACrB,QAAI,KAAK,WAAW,KAAK,YAAY,CAAC,KAAK,YAAY,KAAK,WAAW;AACrE,WAAK,QAAQ,SAAS,KAAK,OAAO,UAAU,KAAK,SAAS,CAAC;AAC3D,WAAK,mBAAmB,KAAK;AAC7B,YAAM,KAAK,QAAQ;AACnB,WAAK,iBAAiB;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,MAAM,aAAa,eAAe;AAChC,QAAI,cAAc,cAAe,cAAc,aAAa,cAAc,QAAS;AACjF,WAAK,YAAY,cAAc,SAAS;AAAA,IAC1C;AAEA,QAAI;AACF,YAAM,OAAO,MAAM,cAAc;AACjC,UAAI,MAAM;AACR,cAAMC,YAAW,kBAAkB,IAAI;AACvC,cAAM,eAAe,aAAa,aAAaA,SAAQ;AAEvD,YAAI,aAAa,aAAa;AAC5B,gBAAM,KAAK,mBAAmB,eAAeA,SAAQ;AAAA,QACvD,OAAO;AACL,gBAAM,KAAK,gCAAgC,aAAa;AAAA,QAC1D;AAAA,MACF;AAAA,IACF,UAAE;AACA,WAAK,oBAAoB;AACzB,WAAK,sBAAsB,MAAM,QAAQ,QAAQ;AAAA,IACnD;AAAA,EACF;AAAA;AAAA,EAIA,0BAA0B,SAAS;AACjC,SAAK,kCAAkC,SAAS,eAAe,OAAO,CAAC;AACvE,SAAK,eAAe;AAAA,EACtB;AAAA;AAAA,EAIA,6BAA6B,MAAM;AACjC,WAAO,KAAK,2BAA2B,IAAI;AAAA,EAC7C;AAAA,EAEA,4BAA4B,MAAM,WAAW,MAAM;AACjD,UAAM,QAAQ,KAAK,kBAAkB,IAAI;AACzC,QAAI,MAAO,MAAK,aAAa,oBAAoB,MAAM,EAAE;AAAA,EAC3D;AAAA;AAAA,EAIA,yBAAyB,SAAS,WAAW,QAAQ;AACnD,WAAO,KAAK,2BAA2B,OAAO;AAAA,EAChD;AAAA,EAEA,qBAAqB,SAASlB,WAAU;AACtC,SAAK,eAAe,SAASA,SAAQ;AAAA,EACvC;AAAA;AAAA,EAIA,eAAe,SAASF,YAAW;AACjC,WAAO,QAAQ,QAAQ,aAAa,KAAK,KAAK,WAAW,KAAK,2BAA2B,SAASA,UAAS;AAAA,EAC7G;AAAA,EAEA,cAAc,SAASA,YAAW;AAChC,QAAI,KAAK,gBAAgB;AACvB,WAAK,eAAe,KAAK;AAAA,IAC3B;AAEA,SAAK,iBAAiB,IAAI,eAAe,MAAM,SAASA,UAAS;AACjE,UAAM,EAAE,aAAa,IAAI,KAAK;AAC9B,SAAK,eAAe,YAAY;AAChC,SAAK,eAAe,MAAM;AAAA,EAC5B;AAAA;AAAA,EAIA,eAAe,SAAS;AACtB,YAAQ,QAAQ,aAAa,IAAI,KAAK;AAEtC,QAAI,KAAK,0BAA0B,aAAa,mBAAmB,GAAG;AACpE,cAAQ,mBAAmB,cAAc,WAAW;AAAA,IACtD;AAAA,EACF;AAAA,EAEA,eAAe,UAAU;AACvB,eAAW,KAAK,OAAO;AAAA,EACzB;AAAA,EAEA,iCAAiC,UAAU,WAAW;AACpD,SAAK,qBAAqB;AAAA,EAC5B;AAAA,EAEA,MAAM,6BAA6B,SAAS,UAAU;AACpD,UAAM,KAAK,aAAa,QAAQ;AAChC,SAAK,qBAAqB;AAAA,EAC5B;AAAA,EAEA,MAAM,0BAA0B,SAAS,UAAU;AACjD,UAAM,KAAK,aAAa,QAAQ;AAChC,SAAK,qBAAqB;AAAA,EAC5B;AAAA,EAEA,eAAe,SAASG,QAAO;AAC7B,YAAQ,MAAMA,MAAK;AACnB,SAAK,qBAAqB;AAAA,EAC5B;AAAA,EAEA,gBAAgB,UAAU;AACxB,mBAAe,KAAK,OAAO;AAAA,EAC7B;AAAA;AAAA,EAIA,sBAAsB,EAAE,YAAY,GAAG;AACrC,eAAW,aAAa,KAAK,kBAAkB,WAAW,CAAC;AAAA,EAC7D;AAAA,EAEA,oCAAoC,gBAAgB,UAAU;AAC5D,UAAM,QAAQ,KAAK,kBAAkB,eAAe,aAAa,eAAe,SAAS;AAEzF,UAAM,SAAS,kCAAkC,OAAO,eAAe,eAAe,WAAW,eAAe,aAAa,KAAK,CAAC;AACnI,UAAM,SAAS,aAAa,QAAQ;AAEpC,QAAI,CAAC,eAAe,QAAQ;AAC1B,cAAQ,WAAW;AAAA,IACrB;AAAA,EACF;AAAA,EAEA,iCAAiC,gBAAgB,eAAe;AAC9D,SAAK,QAAQ,SAAS,aAAa,aAAa;AAChD,YAAQ,WAAW;AAAA,EACrB;AAAA,EAEA,sBAAsB,gBAAgBA,QAAO;AAC3C,YAAQ,MAAMA,MAAK;AAAA,EACrB;AAAA,EAEA,uBAAuB,EAAE,YAAY,GAAG;AACtC,mBAAe,aAAa,KAAK,kBAAkB,WAAW,CAAC;AAAA,EACjE;AAAA;AAAA,EAIA,sBAAsB,EAAE,SAAS,SAAS,GAAG,SAAS;AACpD,UAAM,QAAQ,SAAS,6BAA6B;AAAA,MAClD,QAAQ,KAAK;AAAA,MACb,QAAQ,EAAE,UAAU,GAAG,QAAQ;AAAA,MAC/B,YAAY;AAAA,IACd,CAAC;AAED,UAAM;AAAA,MACJ;AAAA,MACA,QAAQ,EAAE,OAAO;AAAA,IACnB,IAAI;AAEJ,QAAI,KAAK,KAAK,YAAY,QAAQ;AAChC,WAAK,KAAK,SAAS,gBAAgB;AAAA,IACrC;AAEA,WAAO,CAAC;AAAA,EACV;AAAA,EAEA,qBAAqB,WAAW,YAAY,eAAe;AAAA,EAAC;AAAA,EAE5D,0BAA0B,SAAS;AACjC,YAAQ,0BAA0B,OAAO;AAAA,EAC3C;AAAA,EAEA,kBAAkB;AAAA,EAAC;AAAA;AAAA,EAInB,gBAAgB,gBAAgB,aAAa;AAC3C,SAAK,uBAAuB,eAAe,UAAU,IAAI;AAAA,EAC3D;AAAA,EAEA,sBAAsB,CAAC,EAAE,QAAQ,MAAM;AACrC,UAAM,QAAQ,QAAQ,cAAc,MAAM,KAAK,QAAQ,EAAE;AAEzD,QAAI,SAAS,KAAK,sBAAsB;AACtC,YAAM,gBAAgB,GAAG,KAAK,qBAAqB,QAAQ;AAAA,IAC7D;AAEA,WAAO,KAAK;AAAA,EACd;AAAA;AAAA,EAIA,MAAM,mBAAmB,eAAeiB,WAAU;AAChD,UAAM,kBAAkB,MAAM,KAAK,2BAA2BA,UAAS,IAAI;AAC3E,UAAM,gBAAgB,KAAK,oBAAoB,wBAAwB;AAEvE,QAAI,iBAAiB;AACnB,YAAM,WAAW,IAAI,SAAS,eAAe;AAC7C,YAAM,WAAW,IAAI,cAAc,MAAM,KAAK,KAAK,UAAU,UAAU,OAAO,KAAK;AACnF,UAAI,KAAK,KAAK,cAAe,OAAM,KAAK,KAAK;AAC7C,WAAK,cAAc;AAEnB,YAAM,KAAK,KAAK,OAAO,QAAQ;AAC/B,WAAK,WAAW;AAChB,cAAQ,cAAc,eAAe,KAAK,OAAO;AACjD,cAAQ,YAAY,KAAK,OAAO;AAChC,YAAM,KAAK,oBAAoB,aAAa;AAAA,IAC9C,WAAW,KAAK,oCAAoC,aAAa,GAAG;AAClE,WAAK,gCAAgC,aAAa;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,MAAM,OAAO,KAAK;AAChB,UAAM,UAAU,IAAI,aAAa,MAAM,YAAY,KAAK,KAAK,IAAI,gBAAgB,GAAG,KAAK,OAAO;AAEhG,SAAK,sBAAsB,OAAO;AAClC,SAAK,uBAAuB;AAE5B,WAAO,IAAI,QAAQ,CAAC,YAAY;AAC9B,WAAK,uBAAuB,MAAM;AAChC,aAAK,uBAAuB,MAAM;AAAA,QAAC;AACnC,aAAK,uBAAuB;AAC5B,gBAAQ;AAAA,MACV;AACA,cAAQ,QAAQ;AAAA,IAClB,CAAC;AAAA,EACH;AAAA,EAEA,eAAe,SAAS,KAAKpB,YAAW;AACtC,UAAM,QAAQ,KAAK,kBAAkB,SAASA,UAAS;AAEvD,UAAM,SAAS,kCAAkC,OAAO,eAAeA,YAAW,SAAS,KAAK,CAAC;AAEjG,SAAK,8BAA8B,SAAS,MAAM;AAChD,YAAM,MAAM;AAAA,IACd,CAAC;AAAA,EACH;AAAA,EAEA,kCAAkC,OAAO,SAAS,MAAM;AACtD,SAAK,SAAS;AAEd,QAAI,KAAK,QAAQ;AACf,YAAM,eAAe,aAAa,YAAY,KAAK,EAAE,MAAM;AAC3D,YAAM,EAAE,oBAAoB,IAAI,MAAM;AAEtC,YAAM,SAAS,sBAAsB,OAAO,kBAAkB;AAC5D,YAAI,MAAM,KAAK;AACb,gBAAM,EAAE,YAAY,WAAW,IAAI;AACnC,gBAAM,eAAe,MAAM,cAAc;AACzC,gBAAM,WAAW,EAAE,YAAY,YAAY,aAAa;AACxD,gBAAM,UAAU;AAAA,YACd;AAAA,YACA;AAAA,YACA,YAAY;AAAA,YACZ,eAAe;AAAA,YACf,uBAAuB,KAAK;AAAA,YAC5B,UAAU;AAAA,UACZ;AAEA,cAAI,KAAK,OAAQ,SAAQ,SAAS,KAAK;AAEvC,kBAAQ,MAAM,MAAM,KAAK,OAAO;AAAA,QAClC;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB;AACd,QAAI,KAAK,QAAQ;AACf,YAAM,SAAS,0BAA0B,KAAK,MAAM;AACpD,cAAQ,QAAQ,OAAO,QAAQ,UAAU,KAAK,QAAQ,OAAO,EAAE,GAAG,KAAK,qBAAqB;AAAA,IAC9F;AAAA,EACF;AAAA,EAEA,MAAM,gCAAgC,eAAe;AACnD,YAAQ;AAAA,MACN,iBAAiB,cAAc,UAAU,2BAA2B,KAAK,QAAQ,EAAE;AAAA,IACrF;AAEA,UAAM,KAAK,eAAe,cAAc,QAAQ;AAAA,EAClD;AAAA,EAEA,oCAAoC,eAAe;AACjD,SAAK,QAAQ,aAAa,YAAY,EAAE;AAExC,UAAM,WAAW,cAAc;AAC/B,UAAMiB,SAAQ,OAAO,KAAK,YAAY;AACpC,UAAI,eAAe,UAAU;AAC3B,aAAK,eAAe,GAAG;AAAA,MACzB,OAAO;AACL,gBAAQ,MAAM,KAAK,OAAO;AAAA,MAC5B;AAAA,IACF;AAEA,UAAM,QAAQ,SAAS,uBAAuB;AAAA,MAC5C,QAAQ,KAAK;AAAA,MACb,QAAQ,EAAE,UAAU,OAAAA,OAAM;AAAA,MAC1B,YAAY;AAAA,IACd,CAAC;AAED,WAAO,CAAC,MAAM;AAAA,EAChB;AAAA,EAEA,gCAAgC,eAAe;AAC7C,SAAK,KAAK,QAAQ;AAClB,SAAK,wBAAwB,aAAa;AAAA,EAC5C;AAAA,EAEA,wBAAwB,eAAe;AACrC,UAAM,UAAU,iBAAiB,cAAc,UAAU,mDAAmD,KAAK,QAAQ,EAAE;AAC3H,UAAM,IAAI,uBAAuB,OAAO;AAAA,EAC1C;AAAA,EAEA,MAAM,eAAe,UAAU;AAC7B,UAAM,UAAU,IAAI,cAAc,QAAQ;AAC1C,UAAM,eAAe,MAAM,QAAQ;AACnC,UAAM,EAAE,UAAAf,WAAU,YAAY,WAAW,IAAI;AAE7C,WAAO,QAAQ,MAAMA,WAAU,EAAE,UAAU,EAAE,YAAY,YAAY,aAAa,EAAE,CAAC;AAAA,EACvF;AAAA,EAEA,kBAAkB,SAASF,YAAW;AACpC,UAAM,KAAK,aAAa,oBAAoBA,YAAW,OAAO,KAAK,KAAK,QAAQ,aAAa,QAAQ;AACrG,WAAO,oBAAoB,EAAE,KAAK,KAAK;AAAA,EACzC;AAAA,EAEA,MAAM,2BAA2B,WAAW;AAC1C,QAAI;AACJ,UAAM,KAAK,IAAI,OAAO,KAAK,EAAE;AAE7B,QAAI;AACF,gBAAU,gBAAgB,UAAU,cAAc,eAAe,EAAE,EAAE,GAAG,KAAK,SAAS;AACtF,UAAI,SAAS;AACX,eAAO;AAAA,MACT;AAEA,gBAAU,gBAAgB,UAAU,cAAc,6BAA6B,EAAE,GAAG,GAAG,KAAK,SAAS;AACrG,UAAI,SAAS;AACX,cAAM,QAAQ;AACd,eAAO,MAAM,KAAK,2BAA2B,OAAO;AAAA,MACtD;AAAA,IACF,SAASG,QAAO;AACd,cAAQ,MAAMA,MAAK;AACnB,aAAO,IAAI,aAAa;AAAA,IAC1B;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,uBAAuB,MAAMH,YAAW;AACtC,UAAM,SAAS,YAAY,MAAMA,UAAS;AAE1C,WAAO,oBAAoB,UAAU,MAAM,GAAG,KAAK,YAAY;AAAA,EACjE;AAAA,EAEA,2BAA2B,SAASA,YAAW;AAC7C,UAAM,KAAK,aAAa,oBAAoBA,YAAW,OAAO,KAAK,KAAK,QAAQ,aAAa,QAAQ;AAErG,QAAI,mBAAmB,mBAAmB,CAAC,KAAK,uBAAuB,SAASA,UAAS,GAAG;AAC1F,aAAO;AAAA,IACT;AAEA,QAAI,CAAC,KAAK,WAAW,MAAM,QAAQ;AACjC,aAAO;AAAA,IACT;AAEA,QAAI,IAAI;AACN,YAAM,eAAe,oBAAoB,EAAE;AAC3C,UAAI,cAAc;AAChB,eAAO,CAAC,aAAa;AAAA,MACvB;AAAA,IACF;AAEA,QAAI,CAAC,QAAQ,qBAAqB,OAAO,GAAG;AAC1C,aAAO;AAAA,IACT;AAEA,QAAIA,cAAa,CAAC,QAAQ,qBAAqBA,UAAS,GAAG;AACzD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA;AAAA,EAIA,IAAI,KAAK;AACP,WAAO,KAAK,QAAQ;AAAA,EACtB;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,CAAC,KAAK,QAAQ;AAAA,EACvB;AAAA,EAEA,IAAI,YAAY;AACd,QAAI,KAAK,QAAQ,KAAK;AACpB,aAAO,KAAK,QAAQ;AAAA,IACtB;AAAA,EACF;AAAA,EAEA,IAAI,UAAU,WAAW;AACvB,SAAK,4BAA4B,OAAO,MAAM;AAC5C,WAAK,QAAQ,MAAM,aAAa;AAAA,IAClC,CAAC;AAAA,EACH;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK,QAAQ;AAAA,EACtB;AAAA,EAEA,IAAI,YAAY;AACd,WAAO,KAAK,mBAAmB,UAAa,KAAK,qBAAqB,MAAM;AAAA,EAC9E;AAAA,EAEA,IAAI,WAAW;AACb,WAAO,KAAK,QAAQ,aAAa,UAAU;AAAA,EAC7C;AAAA,EAEA,IAAI,SAAS,OAAO;AAClB,QAAI,OAAO;AACT,WAAK,QAAQ,aAAa,YAAY,EAAE;AAAA,IAC1C,OAAO;AACL,WAAK,QAAQ,gBAAgB,UAAU;AAAA,IACzC;AAAA,EACF;AAAA,EAEA,IAAI,WAAW;AACb,WAAO,KAAK,QAAQ,YAAY,KAAK;AAAA,EACvC;AAAA,EAEA,IAAI,eAAe;AACjB,UAAM,OAAO,KAAK,QAAQ,cAAc,cAAc,yBAAyB;AAC/E,UAAM,OAAO,MAAM,WAAW;AAC9B,WAAO,UAAU,IAAI;AAAA,EACvB;AAAA,EAEA,qBAAqB,eAAe;AAClC,WAAO,KAAK,mBAAmB,IAAI,aAAa;AAAA,EAClD;AAAA,EAEA,4BAA4B,eAAe,UAAU;AACnD,SAAK,mBAAmB,IAAI,aAAa;AACzC,aAAS;AACT,SAAK,mBAAmB,OAAO,aAAa;AAAA,EAC9C;AAAA,EAEA,8BAA8B,SAAS,UAAU;AAC/C,SAAK,2BAA2B;AAChC,aAAS;AACT,WAAO,KAAK;AAAA,EACd;AACF;AAEA,SAAS,oBAAoB,IAAI;AAC/B,MAAI,MAAM,MAAM;AACd,UAAM,UAAU,SAAS,eAAe,EAAE;AAC1C,QAAI,mBAAmB,cAAc;AACnC,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,SAAS,gBAAgB,SAAS,YAAY;AAC5C,MAAI,SAAS;AACX,UAAM,MAAM,QAAQ,aAAa,KAAK;AACtC,QAAI,OAAO,QAAQ,cAAc,QAAQ,aAAa,KAAK,UAAU,GAAG;AACtE,YAAM,IAAI,MAAM,6BAA6B,QAAQ,EAAE,qDAAqD;AAAA,IAC9G;AACA,QAAI,QAAQ,kBAAkB,UAAU;AACtC,gBAAU,SAAS,WAAW,SAAS,IAAI;AAAA,IAC7C;AAEA,QAAI,mBAAmB,cAAc;AACnC,cAAQ,kBAAkB;AAC1B,cAAQ,qBAAqB;AAC7B,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,IAAM,gBAAgB;AAAA,EACpB,QAAQ;AACN,SAAK,eAAe,QAAQ,CAAC,MAAM,EAAE,eAAe,aAAa,KAAK,iBAAiB,EAAE,WAAW,CAAC;AAAA,EACvG;AAAA,EAEA,SAAS;AACP,SAAK,8BAA8B;AACnC,SAAK,eAAe,QAAQ,CAAC,MAAM,EAAE,OAAO,KAAK,eAAe,CAAC;AAAA,EACnE;AAAA,EAEA,SAAS;AACP,SAAK,eAAe,QAAQ,CAAC,MAAM,EAAE,eAAe,aAAa,KAAK,iBAAiB,CAAC,CAAC;AAAA,EAC3F;AAAA,EAEA,UAAU;AACR,SAAK,8BAA8B;AACnC,SAAK,eAAe,QAAQ,CAAC,MAAM,EAAE,QAAQ,KAAK,eAAe,CAAC;AAAA,EACpE;AAAA,EAEA,SAAS;AACP,SAAK,eAAe,QAAQ,CAAC,MAAM,EAAE,OAAO,CAAC;AAAA,EAC/C;AAAA,EAEA,UAAU;AACR,UAAM,SAAS,KAAK,aAAa,QAAQ;AAEzC,SAAK,eAAe,QAAQ,CAAC,kBAAkB;AAC7C,UAAI,WAAW,SAAS;AACtB,sBAAc,eAAe,KAAK,eAAe;AAAA,MACnD,OAAO;AACL,sBAAc,YAAY,KAAK,eAAe;AAAA,MAChD;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,aAAa,QAAQ;AAEzC,SAAK,eAAe,QAAQ,CAAC,kBAAkB;AAC7C,UAAI,WAAW,SAAS;AACtB,sBAAc,eAAe,KAAK,eAAe;AAAA,MACnD,OAAO;AACL,sBAAc,YAAY;AAC1B,sBAAc,OAAO,KAAK,eAAe;AAAA,MAC3C;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,UAAU;AACR,YAAQ,QAAQ,KAAK,SAAS,KAAK,SAAS;AAAA,EAC9C;AACF;AA0BA,IAAM,gBAAN,MAAM,uBAAsB,YAAY;AAAA,EACtC,aAAa,cAAc,YAAY;AACrC,UAAM,WAAW,cAAc;AAAA,EACjC;AAAA,EAEA,MAAM,oBAAoB;AACxB,QAAI;AACF,YAAM,KAAK,OAAO;AAAA,IACpB,SAASG,QAAO;AACd,cAAQ,MAAMA,MAAK;AAAA,IACrB,UAAE;AACA,WAAK,WAAW;AAAA,IAClB;AAAA,EACF;AAAA,EAEA,MAAM,SAAS;AACb,WAAQ,KAAK,mBAAmB,YAAY;AAC1C,YAAM,QAAQ,KAAK;AAEnB,UAAI,KAAK,cAAc,KAAK,GAAG;AAC7B,cAAM,YAAY;AAClB,cAAM,MAAM,OAAO,OAAO,IAAI;AAAA,MAChC;AAAA,IACF,GAAG;AAAA,EACL;AAAA,EAEA,aAAa;AACX,QAAI;AACF,WAAK,OAAO;AAAA,IAEd,QAAQ;AAAA,IAAC;AAAA,EACX;AAAA;AAAA;AAAA;AAAA,EAKA,gCAAgC;AAC9B,SAAK,kBAAkB,QAAQ,CAAC,MAAM,EAAE,OAAO,CAAC;AAAA,EAClD;AAAA;AAAA;AAAA;AAAA,EAKA,IAAI,oBAAoB;AACtB,UAAM,mBAAmB,KAAK,eAAe,QAAQ,CAAC,MAAM,CAAC,GAAG,EAAE,QAAQ,CAAC,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,EAAE,aAAa,IAAI,CAAC;AACjH,UAAM,iBAAiB,CAAC,GAAI,KAAK,iBAAiB,YAAY,CAAC,CAAE,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,EAAE,aAAa,IAAI,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,aAAa,IAAI,CAAC;AAExI,WAAO,iBAAiB,OAAO,CAAC,MAAM,eAAe,SAAS,EAAE,aAAa,IAAI,CAAC,CAAC;AAAA,EACrF;AAAA;AAAA;AAAA;AAAA,EAKA,IAAI,gBAAgB;AAClB,QAAI,KAAK,QAAQ;AACf,YAAM,iBAAiB,cAAc,KAAK,MAAM;AAChD,UAAI,gBAAgB;AAClB,eAAO;AAAA,MACT;AACA,WAAK,OAAO,gBAAgB;AAAA,IAC9B;AACA,SAAK,OAAO,6BAA6B;AAAA,EAC3C;AAAA;AAAA;AAAA;AAAA,EAKA,IAAI,iBAAiB;AACnB,QAAI,KAAK,QAAQ;AACf,aAAO,KAAK;AAAA,IACd,WAAW,KAAK,SAAS;AACvB,aAAO,KAAK;AAAA,IACd,OAAO;AACL,WAAK,OAAO,wCAAwC;AAAA,IACtD;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,IAAI,kBAAkB;AACpB,WAAO,KAAK,gBAAgB,QAAQ,UAAU,IAAI;AAAA,EACpD;AAAA;AAAA;AAAA;AAAA,EAKA,IAAI,kBAAkB;AACpB,QAAI,KAAK,sBAAsB,MAAM;AACnC,YAAM,WAAW,KAAK,cAAc,cAAc,UAAU;AAC5D,WAAK,YAAY,QAAQ;AACzB,aAAO;AAAA,IACT,WAAW,KAAK,6BAA6B,qBAAqB;AAChE,aAAO,KAAK;AAAA,IACd;AACA,SAAK,OAAO,kDAAkD;AAAA,EAChE;AAAA;AAAA;AAAA;AAAA,EAKA,IAAI,SAAS;AACX,WAAO,KAAK,aAAa,QAAQ;AAAA,EACnC;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,IAAI,SAAS;AACX,WAAO,KAAK,aAAa,QAAQ;AAAA,EACnC;AAAA;AAAA;AAAA;AAAA,EAKA,IAAI,UAAU;AACZ,WAAO,KAAK,aAAa,SAAS;AAAA,EACpC;AAAA;AAAA;AAAA;AAAA,EAKA,IAAI,YAAY;AACd,WAAO,KAAK,aAAa,YAAY;AAAA,EACvC;AAAA,EAEA,OAAO,SAAS;AACd,UAAM,IAAI,MAAM,GAAG,KAAK,WAAW,KAAK,OAAO,EAAE;AAAA,EACnD;AAAA,EAEA,IAAI,cAAc;AAChB,YAAQ,KAAK,UAAU,MAAM,SAAS,KAAK,CAAC,GAAG,CAAC,KAAK;AAAA,EACvD;AAAA,EAEA,IAAI,oBAAoB;AACtB,WAAO,IAAI,YAAY,8BAA8B;AAAA,MACnD,SAAS;AAAA,MACT,YAAY;AAAA,MACZ,QAAQ,EAAE,WAAW,MAAM,QAAQ,eAAc,cAAc;AAAA,IACjE,CAAC;AAAA,EACH;AAAA,EAEA,IAAI,qBAAqB;AACvB,UAAM,UAAU,KAAK,eAAe,eAAe,KAAK,MAAM;AAE9D,QAAI,YAAY,MAAM;AACpB,aAAO,CAAC,OAAO;AAAA,IACjB,OAAO;AACL,aAAO,CAAC;AAAA,IACV;AAAA,EACF;AAAA,EAEA,IAAI,wBAAwB;AAC1B,UAAM,WAAW,KAAK,eAAe,iBAAiB,KAAK,OAAO;AAElE,QAAI,SAAS,WAAW,GAAG;AACzB,aAAO,MAAM,UAAU,MAAM,KAAK,QAAQ;AAAA,IAC5C,OAAO;AACL,aAAO,CAAC;AAAA,IACV;AAAA,EACF;AACF;AAEA,IAAM,sBAAN,cAAkC,YAAY;AAAA,EAC5C,eAAe;AAAA,EAEf,oBAAoB;AAClB,SAAK,eAAe,KAAK,IAAI,MAAM,WAAW,IAAI,IAAI,UAAU,KAAK,GAAG,IAAI,IAAI,YAAY,KAAK,GAAG;AAEpG,wBAAoB,KAAK,YAAY;AAAA,EACvC;AAAA,EAEA,uBAAuB;AACrB,QAAI,KAAK,cAAc;AACrB,WAAK,aAAa,MAAM;AAExB,6BAAuB,KAAK,YAAY;AAAA,IAC1C;AAAA,EACF;AAAA,EAEA,IAAI,MAAM;AACR,WAAO,KAAK,aAAa,KAAK,KAAK;AAAA,EACrC;AACF;AAEA,aAAa,sBAAsB;AAEnC,IAAI,eAAe,IAAI,aAAa,MAAM,QAAW;AACnD,iBAAe,OAAO,eAAe,YAAY;AACnD;AAEA,IAAI,eAAe,IAAI,cAAc,MAAM,QAAW;AACpD,iBAAe,OAAO,gBAAgB,aAAa;AACrD;AAEA,IAAI,eAAe,IAAI,qBAAqB,MAAM,QAAW;AAC3D,iBAAe,OAAO,uBAAuB,mBAAmB;AAClE;AAAA,CAEC,MAAM;AACL,MAAI,UAAU,SAAS;AACvB,MAAI,CAAC,QAAS;AACd,MAAI,QAAQ,aAAa,6BAA6B,EAAG;AAEzD,YAAU,QAAQ;AAClB,SAAO,SAAS;AACd,QAAI,WAAW,SAAS,MAAM;AAC5B,aAAO,QAAQ;AAAA,QACb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAUA,QAAQ;AAAA,MACV;AAAA,IACF;AAEA,cAAU,QAAQ;AAAA,EACpB;AACF,GAAG;AAEH,OAAO,QAAQ,EAAE,GAAGgB,QAAO,cAAc;AACzC,MAAM;;;ACvgON,IAAI;AAEJ,eAAsB,cAAc;AAClC,SAAO,YAAY,YAAYE,gBAAe,EAAE,KAAK,WAAW,CAAC;AACnE;AAEO,SAAS,YAAY,aAAa;AACvC,SAAO,WAAW;AACpB;AAEA,eAAsBA,kBAAiB;AACrC,QAAM,EAAE,gBAAAA,gBAAe,IAAI,MAAM;AACjC,SAAOA,gBAAe;AACxB;AAEA,eAAsB,YAAY,SAAS,OAAO;AAChD,QAAM,EAAE,cAAc,IAAI,MAAM,YAAY;AAC5C,SAAO,cAAc,OAAO,SAAS,KAAK;AAC5C;;;ACCe,SAAR,KAAuB,KAAK;AAC/B,MAAI,CAAC,OAAO,OAAO,QAAQ,SAAU,QAAO;AAC5C,MAAI,eAAe,QAAQ,eAAe,OAAQ,QAAO;AACzD,MAAI,MAAM,QAAQ,GAAG,EAAG,QAAO,IAAI,IAAI,IAAI;AAC3C,SAAO,OAAO,KAAK,GAAG,EAAE,OAAO,SAAU,KAAK,KAAK;AAC/C,QAAI,QAAQ,IAAI,CAAC,EAAE,YAAY,IAAI,IAAI,MAAM,CAAC,EAAE,QAAQ,aAAa,SAAU,GAAG,GAAG;AACjF,aAAO,MAAM,EAAE,YAAY;AAAA,IAC/B,CAAC;AACD,QAAI,KAAK,IAAI,KAAK,IAAI,GAAG,CAAC;AAC1B,WAAO;AAAA,EACX,GAAG,CAAC,CAAC;AACT;;;AC1BA,IAAM,gCAAN,cAA4C,YAAY;AAAA,EACtD,OAAO,qBAAqB,CAAC,WAAW,oBAAoB;AAAA,EAE5D,MAAM,oBAAoB;AACxB,wBAAoB,IAAI;AACxB,SAAK,eAAe,MAAM,YAAY,KAAK,SAAS;AAAA,MAClD,UAAU,KAAK,qBAAqB,KAAK,IAAI;AAAA,MAC7C,WAAW,KAAK,sBAAsB,KAAK,IAAI;AAAA,MAC/C,cAAc,KAAK,yBAAyB,KAAK,IAAI;AAAA,IACvD,CAAC;AAAA,EACH;AAAA,EAEA,uBAAuB;AACrB,2BAAuB,IAAI;AAC3B,QAAI,KAAK,aAAc,MAAK,aAAa,YAAY;AACrD,SAAK,yBAAyB;AAAA,EAChC;AAAA,EAEA,2BAA2B;AACzB,QAAI,KAAK,cAAc;AACrB,WAAK,qBAAqB;AAC1B,WAAK,kBAAkB;AAAA,IACzB;AAAA,EACF;AAAA,EAEA,qBAAqB,MAAM;AACzB,UAAM,QAAQ,IAAI,aAAa,WAAW,EAAE,KAAK,CAAC;AAClD,WAAO,KAAK,cAAc,KAAK;AAAA,EACjC;AAAA,EAEA,wBAAwB;AACtB,SAAK,aAAa,aAAa,EAAE;AAAA,EACnC;AAAA,EAEA,2BAA2B;AACzB,SAAK,gBAAgB,WAAW;AAAA,EAClC;AAAA,EAEA,IAAI,UAAU;AACZ,UAAM,UAAU,KAAK,aAAa,SAAS;AAC3C,UAAM,qBAAqB,KAAK,aAAa,oBAAoB;AACjE,WAAO,EAAE,SAAS,oBAAoB,GAAG,KAAS,EAAE,GAAG,KAAK,QAAQ,CAAC,EAAE;AAAA,EACzE;AACF;AAGA,IAAI,eAAe,IAAI,2BAA2B,MAAM,QAAW;AACjE,iBAAe,OAAO,6BAA6B,6BAA6B;AAClF;;;ACpDO,SAAS,4BAA4B,OAAO;AACjD,MAAI,MAAM,kBAAkB,iBAAiB;AAC3C,UAAM,EAAE,QAAQ,MAAM,QAAQ,EAAE,aAAa,EAAE,IAAI;AAEnD,SAAK,iBAAiB,sBAAsB,CAAC,EAAE,QAAQ,EAAE,gBAAgB,EAAE,WAAAC,WAAU,EAAE,EAAE,MAAM;AAC7F,YAAM,OAAO,WAAW,aAAa,IAAI,IAAI,aAAa,OAAO,IAAI,gBAAgB;AACrF,YAAM,SAAS,qBAAqBA,YAAW,MAAM,IAAI;AAEzD,UAAI,CAAC,OAAO,KAAK,MAAM,GAAG;AACxB,YAAI,QAAQ,KAAK,MAAM,GAAG;AACxB,eAAK,OAAO,SAAS;AAAA,QACvB,OAAO;AACL,eAAK,IAAI,WAAW,MAAM;AAAA,QAC5B;AAEA,qBAAa,SAAS;AAAA,MACxB;AAAA,IACF,GAAG,EAAE,MAAM,KAAK,CAAC;AAAA,EACnB;AACF;AAEA,SAAS,qBAAqBA,YAAW,MAAM,MAAM;AACnD,QAAM,aAAa,oBAAoBA,UAAS;AAChD,QAAM,iBAAiB,KAAK,IAAI,SAAS;AACzC,QAAM,SAAS,KAAK,aAAa,QAAQ,KAAK;AAE9C,MAAI,OAAO,cAAc,UAAU;AACjC,WAAO;AAAA,EACT,WAAW,OAAO,kBAAkB,UAAU;AAC5C,WAAO;AAAA,EACT,OAAO;AACL,WAAO;AAAA,EACT;AACF;AAEA,SAAS,oBAAoBA,YAAW;AACtC,MAAIA,sBAAqB,qBAAqBA,sBAAqB,kBAAkB;AAQnF,QAAIA,WAAU,SAAS,WAAW;AAChC,aAAOA,WAAU;AAAA,IACnB,WAAWA,WAAU,aAAa,YAAY,GAAG;AAC/C,aAAOA,WAAU;AAAA,IACnB,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF,OAAO;AACL,WAAO;AAAA,EACT;AACF;AAEA,SAAS,WAAW,MAAM;AACxB,SAAO,gBAAgB,YAAY,gBAAgB;AACrD;;;AChDA,OAAO,QAAQ;AAEf,iBAAiB,8BAA8B,2BAA2B;;;ACR1E,IAAM,gBAAN,MAAoB;AAAA,EAChB,YAAY,aAAa,WAAW,cAAc;AAC9C,SAAK,cAAc;AACnB,SAAK,YAAY;AACjB,SAAK,eAAe;AACpB,SAAK,oBAAoB,oBAAI,IAAI;AAAA,EACrC;AAAA,EACA,UAAU;AACN,SAAK,YAAY,iBAAiB,KAAK,WAAW,MAAM,KAAK,YAAY;AAAA,EAC7E;AAAA,EACA,aAAa;AACT,SAAK,YAAY,oBAAoB,KAAK,WAAW,MAAM,KAAK,YAAY;AAAA,EAChF;AAAA,EACA,iBAAiB,SAAS;AACtB,SAAK,kBAAkB,IAAI,OAAO;AAAA,EACtC;AAAA,EACA,oBAAoB,SAAS;AACzB,SAAK,kBAAkB,OAAO,OAAO;AAAA,EACzC;AAAA,EACA,YAAY,OAAO;AACf,UAAM,gBAAgB,YAAY,KAAK;AACvC,eAAW,WAAW,KAAK,UAAU;AACjC,UAAI,cAAc,6BAA6B;AAC3C;AAAA,MACJ,OACK;AACD,gBAAQ,YAAY,aAAa;AAAA,MACrC;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,cAAc;AACV,WAAO,KAAK,kBAAkB,OAAO;AAAA,EACzC;AAAA,EACA,IAAI,WAAW;AACX,WAAO,MAAM,KAAK,KAAK,iBAAiB,EAAE,KAAK,CAAC,MAAM,UAAU;AAC5D,YAAM,YAAY,KAAK,OAAO,aAAa,MAAM;AACjD,aAAO,YAAY,aAAa,KAAK,YAAY,aAAa,IAAI;AAAA,IACtE,CAAC;AAAA,EACL;AACJ;AACA,SAAS,YAAY,OAAO;AACxB,MAAI,iCAAiC,OAAO;AACxC,WAAO;AAAA,EACX,OACK;AACD,UAAM,EAAE,yBAAyB,IAAI;AACrC,WAAO,OAAO,OAAO,OAAO;AAAA,MACxB,6BAA6B;AAAA,MAC7B,2BAA2B;AACvB,aAAK,8BAA8B;AACnC,iCAAyB,KAAK,IAAI;AAAA,MACtC;AAAA,IACJ,CAAC;AAAA,EACL;AACJ;AAEA,IAAM,aAAN,MAAiB;AAAA,EACb,YAAYC,cAAa;AACrB,SAAK,cAAcA;AACnB,SAAK,oBAAoB,oBAAI,IAAI;AACjC,SAAK,UAAU;AAAA,EACnB;AAAA,EACA,QAAQ;AACJ,QAAI,CAAC,KAAK,SAAS;AACf,WAAK,UAAU;AACf,WAAK,eAAe,QAAQ,CAAC,kBAAkB,cAAc,QAAQ,CAAC;AAAA,IAC1E;AAAA,EACJ;AAAA,EACA,OAAO;AACH,QAAI,KAAK,SAAS;AACd,WAAK,UAAU;AACf,WAAK,eAAe,QAAQ,CAAC,kBAAkB,cAAc,WAAW,CAAC;AAAA,IAC7E;AAAA,EACJ;AAAA,EACA,IAAI,iBAAiB;AACjB,WAAO,MAAM,KAAK,KAAK,kBAAkB,OAAO,CAAC,EAAE,OAAO,CAAC,WAAW,QAAQ,UAAU,OAAO,MAAM,KAAK,IAAI,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC;AAAA,EAChI;AAAA,EACA,iBAAiB,SAAS;AACtB,SAAK,6BAA6B,OAAO,EAAE,iBAAiB,OAAO;AAAA,EACvE;AAAA,EACA,oBAAoB,SAAS,sBAAsB,OAAO;AACtD,SAAK,6BAA6B,OAAO,EAAE,oBAAoB,OAAO;AACtE,QAAI;AACA,WAAK,8BAA8B,OAAO;AAAA,EAClD;AAAA,EACA,YAAYC,QAAO,SAAS,SAAS,CAAC,GAAG;AACrC,SAAK,YAAY,YAAYA,QAAO,SAAS,OAAO,IAAI,MAAM;AAAA,EAClE;AAAA,EACA,8BAA8B,SAAS;AACnC,UAAM,gBAAgB,KAAK,6BAA6B,OAAO;AAC/D,QAAI,CAAC,cAAc,YAAY,GAAG;AAC9B,oBAAc,WAAW;AACzB,WAAK,6BAA6B,OAAO;AAAA,IAC7C;AAAA,EACJ;AAAA,EACA,6BAA6B,SAAS;AAClC,UAAM,EAAE,aAAa,WAAW,aAAa,IAAI;AACjD,UAAM,mBAAmB,KAAK,oCAAoC,WAAW;AAC7E,UAAM,WAAW,KAAK,SAAS,WAAW,YAAY;AACtD,qBAAiB,OAAO,QAAQ;AAChC,QAAI,iBAAiB,QAAQ;AACzB,WAAK,kBAAkB,OAAO,WAAW;AAAA,EACjD;AAAA,EACA,6BAA6B,SAAS;AAClC,UAAM,EAAE,aAAa,WAAW,aAAa,IAAI;AACjD,WAAO,KAAK,mBAAmB,aAAa,WAAW,YAAY;AAAA,EACvE;AAAA,EACA,mBAAmB,aAAa,WAAW,cAAc;AACrD,UAAM,mBAAmB,KAAK,oCAAoC,WAAW;AAC7E,UAAM,WAAW,KAAK,SAAS,WAAW,YAAY;AACtD,QAAI,gBAAgB,iBAAiB,IAAI,QAAQ;AACjD,QAAI,CAAC,eAAe;AAChB,sBAAgB,KAAK,oBAAoB,aAAa,WAAW,YAAY;AAC7E,uBAAiB,IAAI,UAAU,aAAa;AAAA,IAChD;AACA,WAAO;AAAA,EACX;AAAA,EACA,oBAAoB,aAAa,WAAW,cAAc;AACtD,UAAM,gBAAgB,IAAI,cAAc,aAAa,WAAW,YAAY;AAC5E,QAAI,KAAK,SAAS;AACd,oBAAc,QAAQ;AAAA,IAC1B;AACA,WAAO;AAAA,EACX;AAAA,EACA,oCAAoC,aAAa;AAC7C,QAAI,mBAAmB,KAAK,kBAAkB,IAAI,WAAW;AAC7D,QAAI,CAAC,kBAAkB;AACnB,yBAAmB,oBAAI,IAAI;AAC3B,WAAK,kBAAkB,IAAI,aAAa,gBAAgB;AAAA,IAC5D;AACA,WAAO;AAAA,EACX;AAAA,EACA,SAAS,WAAW,cAAc;AAC9B,UAAM,QAAQ,CAAC,SAAS;AACxB,WAAO,KAAK,YAAY,EACnB,KAAK,EACL,QAAQ,CAAC,QAAQ;AAClB,YAAM,KAAK,GAAG,aAAa,GAAG,IAAI,KAAK,GAAG,GAAG,GAAG,EAAE;AAAA,IACtD,CAAC;AACD,WAAO,MAAM,KAAK,GAAG;AAAA,EACzB;AACJ;AAEA,IAAM,iCAAiC;AAAA,EACnC,KAAK,EAAE,OAAO,MAAM,GAAG;AACnB,QAAI;AACA,YAAM,gBAAgB;AAC1B,WAAO;AAAA,EACX;AAAA,EACA,QAAQ,EAAE,OAAO,MAAM,GAAG;AACtB,QAAI;AACA,YAAM,eAAe;AACzB,WAAO;AAAA,EACX;AAAA,EACA,KAAK,EAAE,OAAO,OAAO,QAAQ,GAAG;AAC5B,QAAI,OAAO;AACP,aAAO,YAAY,MAAM;AAAA,IAC7B,OACK;AACD,aAAO;AAAA,IACX;AAAA,EACJ;AACJ;AACA,IAAM,oBAAoB;AAC1B,SAAS,4BAA4B,kBAAkB;AACnD,QAAM,SAAS,iBAAiB,KAAK;AACrC,QAAMC,WAAU,OAAO,MAAM,iBAAiB,KAAK,CAAC;AACpD,MAAI,YAAYA,SAAQ,CAAC;AACzB,MAAI,YAAYA,SAAQ,CAAC;AACzB,MAAI,aAAa,CAAC,CAAC,WAAW,SAAS,UAAU,EAAE,SAAS,SAAS,GAAG;AACpE,iBAAa,IAAI,SAAS;AAC1B,gBAAY;AAAA,EAChB;AACA,SAAO;AAAA,IACH,aAAa,iBAAiBA,SAAQ,CAAC,CAAC;AAAA,IACxC;AAAA,IACA,cAAcA,SAAQ,CAAC,IAAI,kBAAkBA,SAAQ,CAAC,CAAC,IAAI,CAAC;AAAA,IAC5D,YAAYA,SAAQ,CAAC;AAAA,IACrB,YAAYA,SAAQ,CAAC;AAAA,IACrB,WAAWA,SAAQ,CAAC,KAAK;AAAA,EAC7B;AACJ;AACA,SAAS,iBAAiB,iBAAiB;AACvC,MAAI,mBAAmB,UAAU;AAC7B,WAAO;AAAA,EACX,WACS,mBAAmB,YAAY;AACpC,WAAO;AAAA,EACX;AACJ;AACA,SAAS,kBAAkB,cAAc;AACrC,SAAO,aACF,MAAM,GAAG,EACT,OAAO,CAAC,SAAS,UAAU,OAAO,OAAO,SAAS,EAAE,CAAC,MAAM,QAAQ,MAAM,EAAE,CAAC,GAAG,CAAC,KAAK,KAAK,KAAK,EAAE,CAAC,GAAG,CAAC,CAAC;AAChH;AACA,SAAS,qBAAqB,aAAa;AACvC,MAAI,eAAe,QAAQ;AACvB,WAAO;AAAA,EACX,WACS,eAAe,UAAU;AAC9B,WAAO;AAAA,EACX;AACJ;AAEA,SAAS,SAAS,OAAO;AACrB,SAAO,MAAM,QAAQ,uBAAuB,CAAC,GAAG,SAAS,KAAK,YAAY,CAAC;AAC/E;AACA,SAAS,kBAAkB,OAAO;AAC9B,SAAO,SAAS,MAAM,QAAQ,OAAO,GAAG,EAAE,QAAQ,OAAO,GAAG,CAAC;AACjE;AACA,SAAS,WAAW,OAAO;AACvB,SAAO,MAAM,OAAO,CAAC,EAAE,YAAY,IAAI,MAAM,MAAM,CAAC;AACxD;AACA,SAAS,UAAU,OAAO;AACtB,SAAO,MAAM,QAAQ,YAAY,CAAC,GAAG,SAAS,IAAI,KAAK,YAAY,CAAC,EAAE;AAC1E;AACA,SAAS,SAAS,OAAO;AACrB,SAAO,MAAM,MAAM,SAAS,KAAK,CAAC;AACtC;AAEA,SAAS,YAAY,QAAQ;AACzB,SAAO,WAAW,QAAQ,WAAW;AACzC;AACA,SAAS,YAAY,QAAQ,UAAU;AACnC,SAAO,OAAO,UAAU,eAAe,KAAK,QAAQ,QAAQ;AAChE;AAEA,IAAM,eAAe,CAAC,QAAQ,QAAQ,OAAO,OAAO;AACpD,IAAM,SAAN,MAAa;AAAA,EACT,YAAY,SAASC,QAAO,YAAY,QAAQ;AAC5C,SAAK,UAAU;AACf,SAAK,QAAQA;AACb,SAAK,cAAc,WAAW,eAAe;AAC7C,SAAK,YAAY,WAAW,aAAa,8BAA8B,OAAO,KAAK,MAAM,oBAAoB;AAC7G,SAAK,eAAe,WAAW,gBAAgB,CAAC;AAChD,SAAK,aAAa,WAAW,cAAc,MAAM,oBAAoB;AACrE,SAAK,aAAa,WAAW,cAAc,MAAM,qBAAqB;AACtE,SAAK,YAAY,WAAW,aAAa;AACzC,SAAK,SAAS;AAAA,EAClB;AAAA,EACA,OAAO,SAAS,OAAO,QAAQ;AAC3B,WAAO,IAAI,KAAK,MAAM,SAAS,MAAM,OAAO,4BAA4B,MAAM,OAAO,GAAG,MAAM;AAAA,EAClG;AAAA,EACA,WAAW;AACP,UAAM,cAAc,KAAK,YAAY,IAAI,KAAK,SAAS,KAAK;AAC5D,UAAM,cAAc,KAAK,kBAAkB,IAAI,KAAK,eAAe,KAAK;AACxE,WAAO,GAAG,KAAK,SAAS,GAAG,WAAW,GAAG,WAAW,KAAK,KAAK,UAAU,IAAI,KAAK,UAAU;AAAA,EAC/F;AAAA,EACA,0BAA0B,OAAO;AAC7B,QAAI,CAAC,KAAK,WAAW;AACjB,aAAO;AAAA,IACX;AACA,UAAM,UAAU,KAAK,UAAU,MAAM,GAAG;AACxC,QAAI,KAAK,sBAAsB,OAAO,OAAO,GAAG;AAC5C,aAAO;AAAA,IACX;AACA,UAAM,iBAAiB,QAAQ,OAAO,CAAC,QAAQ,CAAC,aAAa,SAAS,GAAG,CAAC,EAAE,CAAC;AAC7E,QAAI,CAAC,gBAAgB;AACjB,aAAO;AAAA,IACX;AACA,QAAI,CAAC,YAAY,KAAK,aAAa,cAAc,GAAG;AAChD,YAAM,gCAAgC,KAAK,SAAS,EAAE;AAAA,IAC1D;AACA,WAAO,KAAK,YAAY,cAAc,EAAE,YAAY,MAAM,MAAM,IAAI,YAAY;AAAA,EACpF;AAAA,EACA,uBAAuB,OAAO;AAC1B,QAAI,CAAC,KAAK,WAAW;AACjB,aAAO;AAAA,IACX;AACA,UAAM,UAAU,CAAC,KAAK,SAAS;AAC/B,QAAI,KAAK,sBAAsB,OAAO,OAAO,GAAG;AAC5C,aAAO;AAAA,IACX;AACA,WAAO;AAAA,EACX;AAAA,EACA,IAAI,SAAS;AACT,UAAM,SAAS,CAAC;AAChB,UAAM,UAAU,IAAI,OAAO,SAAS,KAAK,UAAU,gBAAgB,GAAG;AACtE,eAAW,EAAE,MAAM,MAAM,KAAK,MAAM,KAAK,KAAK,QAAQ,UAAU,GAAG;AAC/D,YAAM,QAAQ,KAAK,MAAM,OAAO;AAChC,YAAM,MAAM,SAAS,MAAM,CAAC;AAC5B,UAAI,KAAK;AACL,eAAO,SAAS,GAAG,CAAC,IAAI,SAAS,KAAK;AAAA,MAC1C;AAAA,IACJ;AACA,WAAO;AAAA,EACX;AAAA,EACA,IAAI,kBAAkB;AAClB,WAAO,qBAAqB,KAAK,WAAW;AAAA,EAChD;AAAA,EACA,IAAI,cAAc;AACd,WAAO,KAAK,OAAO;AAAA,EACvB;AAAA,EACA,sBAAsB,OAAO,SAAS;AAClC,UAAM,CAAC,MAAM,MAAM,KAAK,KAAK,IAAI,aAAa,IAAI,CAAC,aAAa,QAAQ,SAAS,QAAQ,CAAC;AAC1F,WAAO,MAAM,YAAY,QAAQ,MAAM,YAAY,QAAQ,MAAM,WAAW,OAAO,MAAM,aAAa;AAAA,EAC1G;AACJ;AACA,IAAM,oBAAoB;AAAA,EACtB,GAAG,MAAM;AAAA,EACT,QAAQ,MAAM;AAAA,EACd,MAAM,MAAM;AAAA,EACZ,SAAS,MAAM;AAAA,EACf,OAAO,CAAC,MAAO,EAAE,aAAa,MAAM,KAAK,WAAW,UAAU;AAAA,EAC9D,QAAQ,MAAM;AAAA,EACd,UAAU,MAAM;AACpB;AACA,SAAS,8BAA8B,SAAS;AAC5C,QAAM,UAAU,QAAQ,QAAQ,YAAY;AAC5C,MAAI,WAAW,mBAAmB;AAC9B,WAAO,kBAAkB,OAAO,EAAE,OAAO;AAAA,EAC7C;AACJ;AACA,SAAS,MAAM,SAAS;AACpB,QAAM,IAAI,MAAM,OAAO;AAC3B;AACA,SAAS,SAAS,OAAO;AACrB,MAAI;AACA,WAAO,KAAK,MAAM,KAAK;AAAA,EAC3B,SACO,KAAK;AACR,WAAO;AAAA,EACX;AACJ;AAEA,IAAM,UAAN,MAAc;AAAA,EACV,YAAY,SAAS,QAAQ;AACzB,SAAK,UAAU;AACf,SAAK,SAAS;AAAA,EAClB;AAAA,EACA,IAAI,QAAQ;AACR,WAAO,KAAK,OAAO;AAAA,EACvB;AAAA,EACA,IAAI,cAAc;AACd,WAAO,KAAK,OAAO;AAAA,EACvB;AAAA,EACA,IAAI,eAAe;AACf,WAAO,KAAK,OAAO;AAAA,EACvB;AAAA,EACA,IAAI,aAAa;AACb,WAAO,KAAK,QAAQ;AAAA,EACxB;AAAA,EACA,YAAY,OAAO;AACf,UAAM,cAAc,KAAK,mBAAmB,KAAK;AACjD,QAAI,KAAK,qBAAqB,KAAK,KAAK,KAAK,oBAAoB,WAAW,GAAG;AAC3E,WAAK,gBAAgB,WAAW;AAAA,IACpC;AAAA,EACJ;AAAA,EACA,IAAI,YAAY;AACZ,WAAO,KAAK,OAAO;AAAA,EACvB;AAAA,EACA,IAAI,SAAS;AACT,UAAM,SAAS,KAAK,WAAW,KAAK,UAAU;AAC9C,QAAI,OAAO,UAAU,YAAY;AAC7B,aAAO;AAAA,IACX;AACA,UAAM,IAAI,MAAM,WAAW,KAAK,MAAM,kCAAkC,KAAK,UAAU,GAAG;AAAA,EAC9F;AAAA,EACA,oBAAoB,OAAO;AACvB,UAAM,EAAE,QAAQ,IAAI,KAAK;AACzB,UAAM,EAAE,wBAAwB,IAAI,KAAK,QAAQ;AACjD,UAAM,EAAE,WAAW,IAAI,KAAK;AAC5B,QAAI,SAAS;AACb,eAAW,CAAC,MAAM,KAAK,KAAK,OAAO,QAAQ,KAAK,YAAY,GAAG;AAC3D,UAAI,QAAQ,yBAAyB;AACjC,cAAM,SAAS,wBAAwB,IAAI;AAC3C,iBAAS,UAAU,OAAO,EAAE,MAAM,OAAO,OAAO,SAAS,WAAW,CAAC;AAAA,MACzE,OACK;AACD;AAAA,MACJ;AAAA,IACJ;AACA,WAAO;AAAA,EACX;AAAA,EACA,mBAAmB,OAAO;AACtB,WAAO,OAAO,OAAO,OAAO,EAAE,QAAQ,KAAK,OAAO,OAAO,CAAC;AAAA,EAC9D;AAAA,EACA,gBAAgB,OAAO;AACnB,UAAM,EAAE,QAAQ,cAAc,IAAI;AAClC,QAAI;AACA,WAAK,OAAO,KAAK,KAAK,YAAY,KAAK;AACvC,WAAK,QAAQ,iBAAiB,KAAK,YAAY,EAAE,OAAO,QAAQ,eAAe,QAAQ,KAAK,WAAW,CAAC;AAAA,IAC5G,SACOF,QAAO;AACV,YAAM,EAAE,YAAY,YAAY,SAAS,OAAAE,OAAM,IAAI;AACnD,YAAM,SAAS,EAAE,YAAY,YAAY,SAAS,OAAAA,QAAO,MAAM;AAC/D,WAAK,QAAQ,YAAYF,QAAO,oBAAoB,KAAK,MAAM,KAAK,MAAM;AAAA,IAC9E;AAAA,EACJ;AAAA,EACA,qBAAqB,OAAO;AACxB,UAAM,cAAc,MAAM;AAC1B,QAAI,iBAAiB,iBAAiB,KAAK,OAAO,0BAA0B,KAAK,GAAG;AAChF,aAAO;AAAA,IACX;AACA,QAAI,iBAAiB,cAAc,KAAK,OAAO,uBAAuB,KAAK,GAAG;AAC1E,aAAO;AAAA,IACX;AACA,QAAI,KAAK,YAAY,aAAa;AAC9B,aAAO;AAAA,IACX,WACS,uBAAuB,WAAW,KAAK,QAAQ,SAAS,WAAW,GAAG;AAC3E,aAAO,KAAK,MAAM,gBAAgB,WAAW;AAAA,IACjD,OACK;AACD,aAAO,KAAK,MAAM,gBAAgB,KAAK,OAAO,OAAO;AAAA,IACzD;AAAA,EACJ;AAAA,EACA,IAAI,aAAa;AACb,WAAO,KAAK,QAAQ;AAAA,EACxB;AAAA,EACA,IAAI,aAAa;AACb,WAAO,KAAK,OAAO;AAAA,EACvB;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,MAAM;AAAA,EACtB;AAAA,EACA,IAAI,QAAQ;AACR,WAAO,KAAK,QAAQ;AAAA,EACxB;AACJ;AAEA,IAAM,kBAAN,MAAsB;AAAA,EAClB,YAAY,SAAS,UAAU;AAC3B,SAAK,uBAAuB,EAAE,YAAY,MAAM,WAAW,MAAM,SAAS,KAAK;AAC/E,SAAK,UAAU;AACf,SAAK,UAAU;AACf,SAAK,WAAW;AAChB,SAAK,WAAW,oBAAI,IAAI;AACxB,SAAK,mBAAmB,IAAI,iBAAiB,CAAC,cAAc,KAAK,iBAAiB,SAAS,CAAC;AAAA,EAChG;AAAA,EACA,QAAQ;AACJ,QAAI,CAAC,KAAK,SAAS;AACf,WAAK,UAAU;AACf,WAAK,iBAAiB,QAAQ,KAAK,SAAS,KAAK,oBAAoB;AACrE,WAAK,QAAQ;AAAA,IACjB;AAAA,EACJ;AAAA,EACA,MAAM,UAAU;AACZ,QAAI,KAAK,SAAS;AACd,WAAK,iBAAiB,WAAW;AACjC,WAAK,UAAU;AAAA,IACnB;AACA,aAAS;AACT,QAAI,CAAC,KAAK,SAAS;AACf,WAAK,iBAAiB,QAAQ,KAAK,SAAS,KAAK,oBAAoB;AACrE,WAAK,UAAU;AAAA,IACnB;AAAA,EACJ;AAAA,EACA,OAAO;AACH,QAAI,KAAK,SAAS;AACd,WAAK,iBAAiB,YAAY;AAClC,WAAK,iBAAiB,WAAW;AACjC,WAAK,UAAU;AAAA,IACnB;AAAA,EACJ;AAAA,EACA,UAAU;AACN,QAAI,KAAK,SAAS;AACd,YAAMC,WAAU,IAAI,IAAI,KAAK,oBAAoB,CAAC;AAClD,iBAAW,WAAW,MAAM,KAAK,KAAK,QAAQ,GAAG;AAC7C,YAAI,CAACA,SAAQ,IAAI,OAAO,GAAG;AACvB,eAAK,cAAc,OAAO;AAAA,QAC9B;AAAA,MACJ;AACA,iBAAW,WAAW,MAAM,KAAKA,QAAO,GAAG;AACvC,aAAK,WAAW,OAAO;AAAA,MAC3B;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,iBAAiB,WAAW;AACxB,QAAI,KAAK,SAAS;AACd,iBAAW,YAAY,WAAW;AAC9B,aAAK,gBAAgB,QAAQ;AAAA,MACjC;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,gBAAgB,UAAU;AACtB,QAAI,SAAS,QAAQ,cAAc;AAC/B,WAAK,uBAAuB,SAAS,QAAQ,SAAS,aAAa;AAAA,IACvE,WACS,SAAS,QAAQ,aAAa;AACnC,WAAK,oBAAoB,SAAS,YAAY;AAC9C,WAAK,kBAAkB,SAAS,UAAU;AAAA,IAC9C;AAAA,EACJ;AAAA,EACA,uBAAuB,SAAS,eAAe;AAC3C,QAAI,KAAK,SAAS,IAAI,OAAO,GAAG;AAC5B,UAAI,KAAK,SAAS,2BAA2B,KAAK,aAAa,OAAO,GAAG;AACrE,aAAK,SAAS,wBAAwB,SAAS,aAAa;AAAA,MAChE,OACK;AACD,aAAK,cAAc,OAAO;AAAA,MAC9B;AAAA,IACJ,WACS,KAAK,aAAa,OAAO,GAAG;AACjC,WAAK,WAAW,OAAO;AAAA,IAC3B;AAAA,EACJ;AAAA,EACA,oBAAoB,OAAO;AACvB,eAAW,QAAQ,MAAM,KAAK,KAAK,GAAG;AAClC,YAAM,UAAU,KAAK,gBAAgB,IAAI;AACzC,UAAI,SAAS;AACT,aAAK,YAAY,SAAS,KAAK,aAAa;AAAA,MAChD;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,kBAAkB,OAAO;AACrB,eAAW,QAAQ,MAAM,KAAK,KAAK,GAAG;AAClC,YAAM,UAAU,KAAK,gBAAgB,IAAI;AACzC,UAAI,WAAW,KAAK,gBAAgB,OAAO,GAAG;AAC1C,aAAK,YAAY,SAAS,KAAK,UAAU;AAAA,MAC7C;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,aAAa,SAAS;AAClB,WAAO,KAAK,SAAS,aAAa,OAAO;AAAA,EAC7C;AAAA,EACA,oBAAoB,OAAO,KAAK,SAAS;AACrC,WAAO,KAAK,SAAS,oBAAoB,IAAI;AAAA,EACjD;AAAA,EACA,YAAY,MAAM,WAAW;AACzB,eAAW,WAAW,KAAK,oBAAoB,IAAI,GAAG;AAClD,gBAAU,KAAK,MAAM,OAAO;AAAA,IAChC;AAAA,EACJ;AAAA,EACA,gBAAgB,MAAM;AAClB,QAAI,KAAK,YAAY,KAAK,cAAc;AACpC,aAAO;AAAA,IACX;AAAA,EACJ;AAAA,EACA,gBAAgB,SAAS;AACrB,QAAI,QAAQ,eAAe,KAAK,QAAQ,aAAa;AACjD,aAAO;AAAA,IACX,OACK;AACD,aAAO,KAAK,QAAQ,SAAS,OAAO;AAAA,IACxC;AAAA,EACJ;AAAA,EACA,WAAW,SAAS;AAChB,QAAI,CAAC,KAAK,SAAS,IAAI,OAAO,GAAG;AAC7B,UAAI,KAAK,gBAAgB,OAAO,GAAG;AAC/B,aAAK,SAAS,IAAI,OAAO;AACzB,YAAI,KAAK,SAAS,gBAAgB;AAC9B,eAAK,SAAS,eAAe,OAAO;AAAA,QACxC;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,cAAc,SAAS;AACnB,QAAI,KAAK,SAAS,IAAI,OAAO,GAAG;AAC5B,WAAK,SAAS,OAAO,OAAO;AAC5B,UAAI,KAAK,SAAS,kBAAkB;AAChC,aAAK,SAAS,iBAAiB,OAAO;AAAA,MAC1C;AAAA,IACJ;AAAA,EACJ;AACJ;AAEA,IAAM,oBAAN,MAAwB;AAAA,EACpB,YAAY,SAAS,eAAe,UAAU;AAC1C,SAAK,gBAAgB;AACrB,SAAK,WAAW;AAChB,SAAK,kBAAkB,IAAI,gBAAgB,SAAS,IAAI;AAAA,EAC5D;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,gBAAgB;AAAA,EAChC;AAAA,EACA,IAAI,WAAW;AACX,WAAO,IAAI,KAAK,aAAa;AAAA,EACjC;AAAA,EACA,QAAQ;AACJ,SAAK,gBAAgB,MAAM;AAAA,EAC/B;AAAA,EACA,MAAM,UAAU;AACZ,SAAK,gBAAgB,MAAM,QAAQ;AAAA,EACvC;AAAA,EACA,OAAO;AACH,SAAK,gBAAgB,KAAK;AAAA,EAC9B;AAAA,EACA,UAAU;AACN,SAAK,gBAAgB,QAAQ;AAAA,EACjC;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,gBAAgB;AAAA,EAChC;AAAA,EACA,aAAa,SAAS;AAClB,WAAO,QAAQ,aAAa,KAAK,aAAa;AAAA,EAClD;AAAA,EACA,oBAAoB,MAAM;AACtB,UAAM,QAAQ,KAAK,aAAa,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC;AAClD,UAAMA,WAAU,MAAM,KAAK,KAAK,iBAAiB,KAAK,QAAQ,CAAC;AAC/D,WAAO,MAAM,OAAOA,QAAO;AAAA,EAC/B;AAAA,EACA,eAAe,SAAS;AACpB,QAAI,KAAK,SAAS,yBAAyB;AACvC,WAAK,SAAS,wBAAwB,SAAS,KAAK,aAAa;AAAA,IACrE;AAAA,EACJ;AAAA,EACA,iBAAiB,SAAS;AACtB,QAAI,KAAK,SAAS,2BAA2B;AACzC,WAAK,SAAS,0BAA0B,SAAS,KAAK,aAAa;AAAA,IACvE;AAAA,EACJ;AAAA,EACA,wBAAwB,SAAS,eAAe;AAC5C,QAAI,KAAK,SAAS,gCAAgC,KAAK,iBAAiB,eAAe;AACnF,WAAK,SAAS,6BAA6B,SAAS,aAAa;AAAA,IACrE;AAAA,EACJ;AACJ;AAEA,SAAS,IAAI,KAAK,KAAK,OAAO;AAC1B,EAAAE,OAAM,KAAK,GAAG,EAAE,IAAI,KAAK;AAC7B;AACA,SAAS,IAAI,KAAK,KAAK,OAAO;AAC1B,EAAAA,OAAM,KAAK,GAAG,EAAE,OAAO,KAAK;AAC5B,QAAM,KAAK,GAAG;AAClB;AACA,SAASA,OAAM,KAAK,KAAK;AACrB,MAAI,SAAS,IAAI,IAAI,GAAG;AACxB,MAAI,CAAC,QAAQ;AACT,aAAS,oBAAI,IAAI;AACjB,QAAI,IAAI,KAAK,MAAM;AAAA,EACvB;AACA,SAAO;AACX;AACA,SAAS,MAAM,KAAK,KAAK;AACrB,QAAM,SAAS,IAAI,IAAI,GAAG;AAC1B,MAAI,UAAU,QAAQ,OAAO,QAAQ,GAAG;AACpC,QAAI,OAAO,GAAG;AAAA,EAClB;AACJ;AAEA,IAAM,WAAN,MAAe;AAAA,EACX,cAAc;AACV,SAAK,cAAc,oBAAI,IAAI;AAAA,EAC/B;AAAA,EACA,IAAI,OAAO;AACP,WAAO,MAAM,KAAK,KAAK,YAAY,KAAK,CAAC;AAAA,EAC7C;AAAA,EACA,IAAI,SAAS;AACT,UAAM,OAAO,MAAM,KAAK,KAAK,YAAY,OAAO,CAAC;AACjD,WAAO,KAAK,OAAO,CAAC,QAAQ,QAAQ,OAAO,OAAO,MAAM,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC;AAAA,EAC1E;AAAA,EACA,IAAI,OAAO;AACP,UAAM,OAAO,MAAM,KAAK,KAAK,YAAY,OAAO,CAAC;AACjD,WAAO,KAAK,OAAO,CAAC,MAAM,QAAQ,OAAO,IAAI,MAAM,CAAC;AAAA,EACxD;AAAA,EACA,IAAI,KAAK,OAAO;AACZ,QAAI,KAAK,aAAa,KAAK,KAAK;AAAA,EACpC;AAAA,EACA,OAAO,KAAK,OAAO;AACf,QAAI,KAAK,aAAa,KAAK,KAAK;AAAA,EACpC;AAAA,EACA,IAAI,KAAK,OAAO;AACZ,UAAM,SAAS,KAAK,YAAY,IAAI,GAAG;AACvC,WAAO,UAAU,QAAQ,OAAO,IAAI,KAAK;AAAA,EAC7C;AAAA,EACA,OAAO,KAAK;AACR,WAAO,KAAK,YAAY,IAAI,GAAG;AAAA,EACnC;AAAA,EACA,SAAS,OAAO;AACZ,UAAM,OAAO,MAAM,KAAK,KAAK,YAAY,OAAO,CAAC;AACjD,WAAO,KAAK,KAAK,CAAC,QAAQ,IAAI,IAAI,KAAK,CAAC;AAAA,EAC5C;AAAA,EACA,gBAAgB,KAAK;AACjB,UAAM,SAAS,KAAK,YAAY,IAAI,GAAG;AACvC,WAAO,SAAS,MAAM,KAAK,MAAM,IAAI,CAAC;AAAA,EAC1C;AAAA,EACA,gBAAgB,OAAO;AACnB,WAAO,MAAM,KAAK,KAAK,WAAW,EAC7B,OAAO,CAAC,CAAC,MAAM,MAAM,MAAM,OAAO,IAAI,KAAK,CAAC,EAC5C,IAAI,CAAC,CAAC,KAAK,OAAO,MAAM,GAAG;AAAA,EACpC;AACJ;AA2BA,IAAM,mBAAN,MAAuB;AAAA,EACnB,YAAY,SAAS,UAAU,UAAU,SAAS;AAC9C,SAAK,YAAY;AACjB,SAAK,UAAU;AACf,SAAK,kBAAkB,IAAI,gBAAgB,SAAS,IAAI;AACxD,SAAK,WAAW;AAChB,SAAK,mBAAmB,IAAI,SAAS;AAAA,EACzC;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,gBAAgB;AAAA,EAChC;AAAA,EACA,IAAI,WAAW;AACX,WAAO,KAAK;AAAA,EAChB;AAAA,EACA,IAAI,SAAS,UAAU;AACnB,SAAK,YAAY;AACjB,SAAK,QAAQ;AAAA,EACjB;AAAA,EACA,QAAQ;AACJ,SAAK,gBAAgB,MAAM;AAAA,EAC/B;AAAA,EACA,MAAM,UAAU;AACZ,SAAK,gBAAgB,MAAM,QAAQ;AAAA,EACvC;AAAA,EACA,OAAO;AACH,SAAK,gBAAgB,KAAK;AAAA,EAC9B;AAAA,EACA,UAAU;AACN,SAAK,gBAAgB,QAAQ;AAAA,EACjC;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,gBAAgB;AAAA,EAChC;AAAA,EACA,aAAa,SAAS;AAClB,UAAM,EAAE,SAAS,IAAI;AACrB,QAAI,UAAU;AACV,YAAMC,WAAU,QAAQ,QAAQ,QAAQ;AACxC,UAAI,KAAK,SAAS,sBAAsB;AACpC,eAAOA,YAAW,KAAK,SAAS,qBAAqB,SAAS,KAAK,OAAO;AAAA,MAC9E;AACA,aAAOA;AAAA,IACX,OACK;AACD,aAAO;AAAA,IACX;AAAA,EACJ;AAAA,EACA,oBAAoB,MAAM;AACtB,UAAM,EAAE,SAAS,IAAI;AACrB,QAAI,UAAU;AACV,YAAM,QAAQ,KAAK,aAAa,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC;AAClD,YAAMA,WAAU,MAAM,KAAK,KAAK,iBAAiB,QAAQ,CAAC,EAAE,OAAO,CAACC,WAAU,KAAK,aAAaA,MAAK,CAAC;AACtG,aAAO,MAAM,OAAOD,QAAO;AAAA,IAC/B,OACK;AACD,aAAO,CAAC;AAAA,IACZ;AAAA,EACJ;AAAA,EACA,eAAe,SAAS;AACpB,UAAM,EAAE,SAAS,IAAI;AACrB,QAAI,UAAU;AACV,WAAK,gBAAgB,SAAS,QAAQ;AAAA,IAC1C;AAAA,EACJ;AAAA,EACA,iBAAiB,SAAS;AACtB,UAAM,YAAY,KAAK,iBAAiB,gBAAgB,OAAO;AAC/D,eAAW,YAAY,WAAW;AAC9B,WAAK,kBAAkB,SAAS,QAAQ;AAAA,IAC5C;AAAA,EACJ;AAAA,EACA,wBAAwB,SAAS,gBAAgB;AAC7C,UAAM,EAAE,SAAS,IAAI;AACrB,QAAI,UAAU;AACV,YAAMA,WAAU,KAAK,aAAa,OAAO;AACzC,YAAM,gBAAgB,KAAK,iBAAiB,IAAI,UAAU,OAAO;AACjE,UAAIA,YAAW,CAAC,eAAe;AAC3B,aAAK,gBAAgB,SAAS,QAAQ;AAAA,MAC1C,WACS,CAACA,YAAW,eAAe;AAChC,aAAK,kBAAkB,SAAS,QAAQ;AAAA,MAC5C;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,gBAAgB,SAAS,UAAU;AAC/B,SAAK,SAAS,gBAAgB,SAAS,UAAU,KAAK,OAAO;AAC7D,SAAK,iBAAiB,IAAI,UAAU,OAAO;AAAA,EAC/C;AAAA,EACA,kBAAkB,SAAS,UAAU;AACjC,SAAK,SAAS,kBAAkB,SAAS,UAAU,KAAK,OAAO;AAC/D,SAAK,iBAAiB,OAAO,UAAU,OAAO;AAAA,EAClD;AACJ;AAEA,IAAM,oBAAN,MAAwB;AAAA,EACpB,YAAY,SAAS,UAAU;AAC3B,SAAK,UAAU;AACf,SAAK,WAAW;AAChB,SAAK,UAAU;AACf,SAAK,YAAY,oBAAI,IAAI;AACzB,SAAK,mBAAmB,IAAI,iBAAiB,CAAC,cAAc,KAAK,iBAAiB,SAAS,CAAC;AAAA,EAChG;AAAA,EACA,QAAQ;AACJ,QAAI,CAAC,KAAK,SAAS;AACf,WAAK,UAAU;AACf,WAAK,iBAAiB,QAAQ,KAAK,SAAS,EAAE,YAAY,MAAM,mBAAmB,KAAK,CAAC;AACzF,WAAK,QAAQ;AAAA,IACjB;AAAA,EACJ;AAAA,EACA,OAAO;AACH,QAAI,KAAK,SAAS;AACd,WAAK,iBAAiB,YAAY;AAClC,WAAK,iBAAiB,WAAW;AACjC,WAAK,UAAU;AAAA,IACnB;AAAA,EACJ;AAAA,EACA,UAAU;AACN,QAAI,KAAK,SAAS;AACd,iBAAW,iBAAiB,KAAK,qBAAqB;AAClD,aAAK,iBAAiB,eAAe,IAAI;AAAA,MAC7C;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,iBAAiB,WAAW;AACxB,QAAI,KAAK,SAAS;AACd,iBAAW,YAAY,WAAW;AAC9B,aAAK,gBAAgB,QAAQ;AAAA,MACjC;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,gBAAgB,UAAU;AACtB,UAAM,gBAAgB,SAAS;AAC/B,QAAI,eAAe;AACf,WAAK,iBAAiB,eAAe,SAAS,QAAQ;AAAA,IAC1D;AAAA,EACJ;AAAA,EACA,iBAAiB,eAAe,UAAU;AACtC,UAAM,MAAM,KAAK,SAAS,4BAA4B,aAAa;AACnE,QAAI,OAAO,MAAM;AACb,UAAI,CAAC,KAAK,UAAU,IAAI,aAAa,GAAG;AACpC,aAAK,kBAAkB,KAAK,aAAa;AAAA,MAC7C;AACA,YAAM,QAAQ,KAAK,QAAQ,aAAa,aAAa;AACrD,UAAI,KAAK,UAAU,IAAI,aAAa,KAAK,OAAO;AAC5C,aAAK,sBAAsB,OAAO,KAAK,QAAQ;AAAA,MACnD;AACA,UAAI,SAAS,MAAM;AACf,cAAME,YAAW,KAAK,UAAU,IAAI,aAAa;AACjD,aAAK,UAAU,OAAO,aAAa;AACnC,YAAIA;AACA,eAAK,oBAAoB,KAAK,eAAeA,SAAQ;AAAA,MAC7D,OACK;AACD,aAAK,UAAU,IAAI,eAAe,KAAK;AAAA,MAC3C;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,kBAAkB,KAAK,eAAe;AAClC,QAAI,KAAK,SAAS,mBAAmB;AACjC,WAAK,SAAS,kBAAkB,KAAK,aAAa;AAAA,IACtD;AAAA,EACJ;AAAA,EACA,sBAAsB,OAAO,KAAK,UAAU;AACxC,QAAI,KAAK,SAAS,uBAAuB;AACrC,WAAK,SAAS,sBAAsB,OAAO,KAAK,QAAQ;AAAA,IAC5D;AAAA,EACJ;AAAA,EACA,oBAAoB,KAAK,eAAe,UAAU;AAC9C,QAAI,KAAK,SAAS,qBAAqB;AACnC,WAAK,SAAS,oBAAoB,KAAK,eAAe,QAAQ;AAAA,IAClE;AAAA,EACJ;AAAA,EACA,IAAI,sBAAsB;AACtB,WAAO,MAAM,KAAK,IAAI,IAAI,KAAK,sBAAsB,OAAO,KAAK,sBAAsB,CAAC,CAAC;AAAA,EAC7F;AAAA,EACA,IAAI,wBAAwB;AACxB,WAAO,MAAM,KAAK,KAAK,QAAQ,UAAU,EAAE,IAAI,CAAC,cAAc,UAAU,IAAI;AAAA,EAChF;AAAA,EACA,IAAI,yBAAyB;AACzB,WAAO,MAAM,KAAK,KAAK,UAAU,KAAK,CAAC;AAAA,EAC3C;AACJ;AAEA,IAAM,oBAAN,MAAwB;AAAA,EACpB,YAAY,SAAS,eAAe,UAAU;AAC1C,SAAK,oBAAoB,IAAI,kBAAkB,SAAS,eAAe,IAAI;AAC3E,SAAK,WAAW;AAChB,SAAK,kBAAkB,IAAI,SAAS;AAAA,EACxC;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,kBAAkB;AAAA,EAClC;AAAA,EACA,QAAQ;AACJ,SAAK,kBAAkB,MAAM;AAAA,EACjC;AAAA,EACA,MAAM,UAAU;AACZ,SAAK,kBAAkB,MAAM,QAAQ;AAAA,EACzC;AAAA,EACA,OAAO;AACH,SAAK,kBAAkB,KAAK;AAAA,EAChC;AAAA,EACA,UAAU;AACN,SAAK,kBAAkB,QAAQ;AAAA,EACnC;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,kBAAkB;AAAA,EAClC;AAAA,EACA,IAAI,gBAAgB;AAChB,WAAO,KAAK,kBAAkB;AAAA,EAClC;AAAA,EACA,wBAAwB,SAAS;AAC7B,SAAK,cAAc,KAAK,qBAAqB,OAAO,CAAC;AAAA,EACzD;AAAA,EACA,6BAA6B,SAAS;AAClC,UAAM,CAAC,iBAAiB,aAAa,IAAI,KAAK,wBAAwB,OAAO;AAC7E,SAAK,gBAAgB,eAAe;AACpC,SAAK,cAAc,aAAa;AAAA,EACpC;AAAA,EACA,0BAA0B,SAAS;AAC/B,SAAK,gBAAgB,KAAK,gBAAgB,gBAAgB,OAAO,CAAC;AAAA,EACtE;AAAA,EACA,cAAc,QAAQ;AAClB,WAAO,QAAQ,CAAC,UAAU,KAAK,aAAa,KAAK,CAAC;AAAA,EACtD;AAAA,EACA,gBAAgB,QAAQ;AACpB,WAAO,QAAQ,CAAC,UAAU,KAAK,eAAe,KAAK,CAAC;AAAA,EACxD;AAAA,EACA,aAAa,OAAO;AAChB,SAAK,SAAS,aAAa,KAAK;AAChC,SAAK,gBAAgB,IAAI,MAAM,SAAS,KAAK;AAAA,EACjD;AAAA,EACA,eAAe,OAAO;AAClB,SAAK,SAAS,eAAe,KAAK;AAClC,SAAK,gBAAgB,OAAO,MAAM,SAAS,KAAK;AAAA,EACpD;AAAA,EACA,wBAAwB,SAAS;AAC7B,UAAM,iBAAiB,KAAK,gBAAgB,gBAAgB,OAAO;AACnE,UAAM,gBAAgB,KAAK,qBAAqB,OAAO;AACvD,UAAM,sBAAsB,IAAI,gBAAgB,aAAa,EAAE,UAAU,CAAC,CAAC,eAAe,YAAY,MAAM,CAAC,eAAe,eAAe,YAAY,CAAC;AACxJ,QAAI,uBAAuB,IAAI;AAC3B,aAAO,CAAC,CAAC,GAAG,CAAC,CAAC;AAAA,IAClB,OACK;AACD,aAAO,CAAC,eAAe,MAAM,mBAAmB,GAAG,cAAc,MAAM,mBAAmB,CAAC;AAAA,IAC/F;AAAA,EACJ;AAAA,EACA,qBAAqB,SAAS;AAC1B,UAAM,gBAAgB,KAAK;AAC3B,UAAM,cAAc,QAAQ,aAAa,aAAa,KAAK;AAC3D,WAAO,iBAAiB,aAAa,SAAS,aAAa;AAAA,EAC/D;AACJ;AACA,SAAS,iBAAiB,aAAa,SAAS,eAAe;AAC3D,SAAO,YACF,KAAK,EACL,MAAM,KAAK,EACX,OAAO,CAAC,YAAY,QAAQ,MAAM,EAClC,IAAI,CAAC,SAASC,YAAW,EAAE,SAAS,eAAe,SAAS,OAAAA,OAAM,EAAE;AAC7E;AACA,SAAS,IAAI,MAAM,OAAO;AACtB,QAAM,SAAS,KAAK,IAAI,KAAK,QAAQ,MAAM,MAAM;AACjD,SAAO,MAAM,KAAK,EAAE,OAAO,GAAG,CAAC,GAAGA,WAAU,CAAC,KAAKA,MAAK,GAAG,MAAMA,MAAK,CAAC,CAAC;AAC3E;AACA,SAAS,eAAe,MAAM,OAAO;AACjC,SAAO,QAAQ,SAAS,KAAK,SAAS,MAAM,SAAS,KAAK,WAAW,MAAM;AAC/E;AAEA,IAAM,oBAAN,MAAwB;AAAA,EACpB,YAAY,SAAS,eAAe,UAAU;AAC1C,SAAK,oBAAoB,IAAI,kBAAkB,SAAS,eAAe,IAAI;AAC3E,SAAK,WAAW;AAChB,SAAK,sBAAsB,oBAAI,QAAQ;AACvC,SAAK,yBAAyB,oBAAI,QAAQ;AAAA,EAC9C;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,kBAAkB;AAAA,EAClC;AAAA,EACA,QAAQ;AACJ,SAAK,kBAAkB,MAAM;AAAA,EACjC;AAAA,EACA,OAAO;AACH,SAAK,kBAAkB,KAAK;AAAA,EAChC;AAAA,EACA,UAAU;AACN,SAAK,kBAAkB,QAAQ;AAAA,EACnC;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,kBAAkB;AAAA,EAClC;AAAA,EACA,IAAI,gBAAgB;AAChB,WAAO,KAAK,kBAAkB;AAAA,EAClC;AAAA,EACA,aAAa,OAAO;AAChB,UAAM,EAAE,QAAQ,IAAI;AACpB,UAAM,EAAE,MAAM,IAAI,KAAK,yBAAyB,KAAK;AACrD,QAAI,OAAO;AACP,WAAK,6BAA6B,OAAO,EAAE,IAAI,OAAO,KAAK;AAC3D,WAAK,SAAS,oBAAoB,SAAS,KAAK;AAAA,IACpD;AAAA,EACJ;AAAA,EACA,eAAe,OAAO;AAClB,UAAM,EAAE,QAAQ,IAAI;AACpB,UAAM,EAAE,MAAM,IAAI,KAAK,yBAAyB,KAAK;AACrD,QAAI,OAAO;AACP,WAAK,6BAA6B,OAAO,EAAE,OAAO,KAAK;AACvD,WAAK,SAAS,sBAAsB,SAAS,KAAK;AAAA,IACtD;AAAA,EACJ;AAAA,EACA,yBAAyB,OAAO;AAC5B,QAAI,cAAc,KAAK,oBAAoB,IAAI,KAAK;AACpD,QAAI,CAAC,aAAa;AACd,oBAAc,KAAK,WAAW,KAAK;AACnC,WAAK,oBAAoB,IAAI,OAAO,WAAW;AAAA,IACnD;AACA,WAAO;AAAA,EACX;AAAA,EACA,6BAA6B,SAAS;AAClC,QAAI,gBAAgB,KAAK,uBAAuB,IAAI,OAAO;AAC3D,QAAI,CAAC,eAAe;AAChB,sBAAgB,oBAAI,IAAI;AACxB,WAAK,uBAAuB,IAAI,SAAS,aAAa;AAAA,IAC1D;AACA,WAAO;AAAA,EACX;AAAA,EACA,WAAW,OAAO;AACd,QAAI;AACA,YAAM,QAAQ,KAAK,SAAS,mBAAmB,KAAK;AACpD,aAAO,EAAE,MAAM;AAAA,IACnB,SACOC,QAAO;AACV,aAAO,EAAE,OAAAA,OAAM;AAAA,IACnB;AAAA,EACJ;AACJ;AAEA,IAAM,kBAAN,MAAsB;AAAA,EAClB,YAAY,SAAS,UAAU;AAC3B,SAAK,UAAU;AACf,SAAK,WAAW;AAChB,SAAK,mBAAmB,oBAAI,IAAI;AAAA,EACpC;AAAA,EACA,QAAQ;AACJ,QAAI,CAAC,KAAK,mBAAmB;AACzB,WAAK,oBAAoB,IAAI,kBAAkB,KAAK,SAAS,KAAK,iBAAiB,IAAI;AACvF,WAAK,kBAAkB,MAAM;AAAA,IACjC;AAAA,EACJ;AAAA,EACA,OAAO;AACH,QAAI,KAAK,mBAAmB;AACxB,WAAK,kBAAkB,KAAK;AAC5B,aAAO,KAAK;AACZ,WAAK,qBAAqB;AAAA,IAC9B;AAAA,EACJ;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,QAAQ;AAAA,EACxB;AAAA,EACA,IAAI,aAAa;AACb,WAAO,KAAK,QAAQ;AAAA,EACxB;AAAA,EACA,IAAI,kBAAkB;AAClB,WAAO,KAAK,OAAO;AAAA,EACvB;AAAA,EACA,IAAI,SAAS;AACT,WAAO,KAAK,QAAQ;AAAA,EACxB;AAAA,EACA,IAAI,WAAW;AACX,WAAO,MAAM,KAAK,KAAK,iBAAiB,OAAO,CAAC;AAAA,EACpD;AAAA,EACA,cAAc,QAAQ;AAClB,UAAM,UAAU,IAAI,QAAQ,KAAK,SAAS,MAAM;AAChD,SAAK,iBAAiB,IAAI,QAAQ,OAAO;AACzC,SAAK,SAAS,iBAAiB,OAAO;AAAA,EAC1C;AAAA,EACA,iBAAiB,QAAQ;AACrB,UAAM,UAAU,KAAK,iBAAiB,IAAI,MAAM;AAChD,QAAI,SAAS;AACT,WAAK,iBAAiB,OAAO,MAAM;AACnC,WAAK,SAAS,oBAAoB,OAAO;AAAA,IAC7C;AAAA,EACJ;AAAA,EACA,uBAAuB;AACnB,SAAK,SAAS,QAAQ,CAAC,YAAY,KAAK,SAAS,oBAAoB,SAAS,IAAI,CAAC;AACnF,SAAK,iBAAiB,MAAM;AAAA,EAChC;AAAA,EACA,mBAAmB,OAAO;AACtB,UAAM,SAAS,OAAO,SAAS,OAAO,KAAK,MAAM;AACjD,QAAI,OAAO,cAAc,KAAK,YAAY;AACtC,aAAO;AAAA,IACX;AAAA,EACJ;AAAA,EACA,oBAAoB,SAAS,QAAQ;AACjC,SAAK,cAAc,MAAM;AAAA,EAC7B;AAAA,EACA,sBAAsB,SAAS,QAAQ;AACnC,SAAK,iBAAiB,MAAM;AAAA,EAChC;AACJ;AAEA,IAAM,gBAAN,MAAoB;AAAA,EAChB,YAAY,SAAS,UAAU;AAC3B,SAAK,UAAU;AACf,SAAK,WAAW;AAChB,SAAK,oBAAoB,IAAI,kBAAkB,KAAK,SAAS,IAAI;AACjE,SAAK,qBAAqB,KAAK,WAAW;AAAA,EAC9C;AAAA,EACA,QAAQ;AACJ,SAAK,kBAAkB,MAAM;AAC7B,SAAK,uCAAuC;AAAA,EAChD;AAAA,EACA,OAAO;AACH,SAAK,kBAAkB,KAAK;AAAA,EAChC;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,QAAQ;AAAA,EACxB;AAAA,EACA,IAAI,aAAa;AACb,WAAO,KAAK,QAAQ;AAAA,EACxB;AAAA,EACA,4BAA4B,eAAe;AACvC,QAAI,iBAAiB,KAAK,oBAAoB;AAC1C,aAAO,KAAK,mBAAmB,aAAa,EAAE;AAAA,IAClD;AAAA,EACJ;AAAA,EACA,kBAAkB,KAAK,eAAe;AAClC,UAAM,aAAa,KAAK,mBAAmB,aAAa;AACxD,QAAI,CAAC,KAAK,SAAS,GAAG,GAAG;AACrB,WAAK,sBAAsB,KAAK,WAAW,OAAO,KAAK,SAAS,GAAG,CAAC,GAAG,WAAW,OAAO,WAAW,YAAY,CAAC;AAAA,IACrH;AAAA,EACJ;AAAA,EACA,sBAAsB,OAAO,MAAM,UAAU;AACzC,UAAM,aAAa,KAAK,uBAAuB,IAAI;AACnD,QAAI,UAAU;AACV;AACJ,QAAI,aAAa,MAAM;AACnB,iBAAW,WAAW,OAAO,WAAW,YAAY;AAAA,IACxD;AACA,SAAK,sBAAsB,MAAM,OAAO,QAAQ;AAAA,EACpD;AAAA,EACA,oBAAoB,KAAK,eAAe,UAAU;AAC9C,UAAM,aAAa,KAAK,uBAAuB,GAAG;AAClD,QAAI,KAAK,SAAS,GAAG,GAAG;AACpB,WAAK,sBAAsB,KAAK,WAAW,OAAO,KAAK,SAAS,GAAG,CAAC,GAAG,QAAQ;AAAA,IACnF,OACK;AACD,WAAK,sBAAsB,KAAK,WAAW,OAAO,WAAW,YAAY,GAAG,QAAQ;AAAA,IACxF;AAAA,EACJ;AAAA,EACA,yCAAyC;AACrC,eAAW,EAAE,KAAK,MAAM,cAAc,OAAO,KAAK,KAAK,kBAAkB;AACrE,UAAI,gBAAgB,UAAa,CAAC,KAAK,WAAW,KAAK,IAAI,GAAG,GAAG;AAC7D,aAAK,sBAAsB,MAAM,OAAO,YAAY,GAAG,MAAS;AAAA,MACpE;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,sBAAsB,MAAM,UAAU,aAAa;AAC/C,UAAM,oBAAoB,GAAG,IAAI;AACjC,UAAM,gBAAgB,KAAK,SAAS,iBAAiB;AACrD,QAAI,OAAO,iBAAiB,YAAY;AACpC,YAAM,aAAa,KAAK,uBAAuB,IAAI;AACnD,UAAI;AACA,cAAM,QAAQ,WAAW,OAAO,QAAQ;AACxC,YAAI,WAAW;AACf,YAAI,aAAa;AACb,qBAAW,WAAW,OAAO,WAAW;AAAA,QAC5C;AACA,sBAAc,KAAK,KAAK,UAAU,OAAO,QAAQ;AAAA,MACrD,SACOA,QAAO;AACV,YAAIA,kBAAiB,WAAW;AAC5B,UAAAA,OAAM,UAAU,mBAAmB,KAAK,QAAQ,UAAU,IAAI,WAAW,IAAI,OAAOA,OAAM,OAAO;AAAA,QACrG;AACA,cAAMA;AAAA,MACV;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,IAAI,mBAAmB;AACnB,UAAM,EAAE,mBAAmB,IAAI;AAC/B,WAAO,OAAO,KAAK,kBAAkB,EAAE,IAAI,CAAC,QAAQ,mBAAmB,GAAG,CAAC;AAAA,EAC/E;AAAA,EACA,IAAI,yBAAyB;AACzB,UAAM,cAAc,CAAC;AACrB,WAAO,KAAK,KAAK,kBAAkB,EAAE,QAAQ,CAAC,QAAQ;AAClD,YAAM,aAAa,KAAK,mBAAmB,GAAG;AAC9C,kBAAY,WAAW,IAAI,IAAI;AAAA,IACnC,CAAC;AACD,WAAO;AAAA,EACX;AAAA,EACA,SAAS,eAAe;AACpB,UAAM,aAAa,KAAK,uBAAuB,aAAa;AAC5D,UAAM,gBAAgB,MAAM,WAAW,WAAW,IAAI,CAAC;AACvD,WAAO,KAAK,SAAS,aAAa;AAAA,EACtC;AACJ;AAEA,IAAM,iBAAN,MAAqB;AAAA,EACjB,YAAY,SAAS,UAAU;AAC3B,SAAK,UAAU;AACf,SAAK,WAAW;AAChB,SAAK,gBAAgB,IAAI,SAAS;AAAA,EACtC;AAAA,EACA,QAAQ;AACJ,QAAI,CAAC,KAAK,mBAAmB;AACzB,WAAK,oBAAoB,IAAI,kBAAkB,KAAK,SAAS,KAAK,eAAe,IAAI;AACrF,WAAK,kBAAkB,MAAM;AAAA,IACjC;AAAA,EACJ;AAAA,EACA,OAAO;AACH,QAAI,KAAK,mBAAmB;AACxB,WAAK,qBAAqB;AAC1B,WAAK,kBAAkB,KAAK;AAC5B,aAAO,KAAK;AAAA,IAChB;AAAA,EACJ;AAAA,EACA,aAAa,EAAE,SAAS,SAAS,KAAK,GAAG;AACrC,QAAI,KAAK,MAAM,gBAAgB,OAAO,GAAG;AACrC,WAAK,cAAc,SAAS,IAAI;AAAA,IACpC;AAAA,EACJ;AAAA,EACA,eAAe,EAAE,SAAS,SAAS,KAAK,GAAG;AACvC,SAAK,iBAAiB,SAAS,IAAI;AAAA,EACvC;AAAA,EACA,cAAc,SAAS,MAAM;AACzB,QAAI;AACJ,QAAI,CAAC,KAAK,cAAc,IAAI,MAAM,OAAO,GAAG;AACxC,WAAK,cAAc,IAAI,MAAM,OAAO;AACpC,OAAC,KAAK,KAAK,uBAAuB,QAAQ,OAAO,SAAS,SAAS,GAAG,MAAM,MAAM,KAAK,SAAS,gBAAgB,SAAS,IAAI,CAAC;AAAA,IAClI;AAAA,EACJ;AAAA,EACA,iBAAiB,SAAS,MAAM;AAC5B,QAAI;AACJ,QAAI,KAAK,cAAc,IAAI,MAAM,OAAO,GAAG;AACvC,WAAK,cAAc,OAAO,MAAM,OAAO;AACvC,OAAC,KAAK,KAAK,uBAAuB,QAAQ,OAAO,SAAS,SAAS,GAAG,MAAM,MAAM,KAAK,SAAS,mBAAmB,SAAS,IAAI,CAAC;AAAA,IACrI;AAAA,EACJ;AAAA,EACA,uBAAuB;AACnB,eAAW,QAAQ,KAAK,cAAc,MAAM;AACxC,iBAAW,WAAW,KAAK,cAAc,gBAAgB,IAAI,GAAG;AAC5D,aAAK,iBAAiB,SAAS,IAAI;AAAA,MACvC;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,IAAI,gBAAgB;AAChB,WAAO,QAAQ,KAAK,QAAQ,UAAU;AAAA,EAC1C;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,QAAQ;AAAA,EACxB;AAAA,EACA,IAAI,QAAQ;AACR,WAAO,KAAK,QAAQ;AAAA,EACxB;AACJ;AAEA,SAAS,iCAAiC,aAAa,cAAc;AACjE,QAAM,YAAY,2BAA2B,WAAW;AACxD,SAAO,MAAM,KAAK,UAAU,OAAO,CAAC,QAAQC,iBAAgB;AACxD,4BAAwBA,cAAa,YAAY,EAAE,QAAQ,CAAC,SAAS,OAAO,IAAI,IAAI,CAAC;AACrF,WAAO;AAAA,EACX,GAAG,oBAAI,IAAI,CAAC,CAAC;AACjB;AACA,SAAS,iCAAiC,aAAa,cAAc;AACjE,QAAM,YAAY,2BAA2B,WAAW;AACxD,SAAO,UAAU,OAAO,CAAC,OAAOA,iBAAgB;AAC5C,UAAM,KAAK,GAAG,wBAAwBA,cAAa,YAAY,CAAC;AAChE,WAAO;AAAA,EACX,GAAG,CAAC,CAAC;AACT;AACA,SAAS,2BAA2B,aAAa;AAC7C,QAAM,YAAY,CAAC;AACnB,SAAO,aAAa;AAChB,cAAU,KAAK,WAAW;AAC1B,kBAAc,OAAO,eAAe,WAAW;AAAA,EACnD;AACA,SAAO,UAAU,QAAQ;AAC7B;AACA,SAAS,wBAAwB,aAAa,cAAc;AACxD,QAAM,aAAa,YAAY,YAAY;AAC3C,SAAO,MAAM,QAAQ,UAAU,IAAI,aAAa,CAAC;AACrD;AACA,SAAS,wBAAwB,aAAa,cAAc;AACxD,QAAM,aAAa,YAAY,YAAY;AAC3C,SAAO,aAAa,OAAO,KAAK,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,WAAW,GAAG,CAAC,CAAC,IAAI,CAAC;AACxF;AAEA,IAAM,iBAAN,MAAqB;AAAA,EACjB,YAAY,SAAS,UAAU;AAC3B,SAAK,UAAU;AACf,SAAK,UAAU;AACf,SAAK,WAAW;AAChB,SAAK,gBAAgB,IAAI,SAAS;AAClC,SAAK,uBAAuB,IAAI,SAAS;AACzC,SAAK,sBAAsB,oBAAI,IAAI;AACnC,SAAK,uBAAuB,oBAAI,IAAI;AAAA,EACxC;AAAA,EACA,QAAQ;AACJ,QAAI,CAAC,KAAK,SAAS;AACf,WAAK,kBAAkB,QAAQ,CAAC,eAAe;AAC3C,aAAK,+BAA+B,UAAU;AAC9C,aAAK,gCAAgC,UAAU;AAAA,MACnD,CAAC;AACD,WAAK,UAAU;AACf,WAAK,kBAAkB,QAAQ,CAAC,YAAY,QAAQ,QAAQ,CAAC;AAAA,IACjE;AAAA,EACJ;AAAA,EACA,UAAU;AACN,SAAK,oBAAoB,QAAQ,CAAC,aAAa,SAAS,QAAQ,CAAC;AACjE,SAAK,qBAAqB,QAAQ,CAAC,aAAa,SAAS,QAAQ,CAAC;AAAA,EACtE;AAAA,EACA,OAAO;AACH,QAAI,KAAK,SAAS;AACd,WAAK,UAAU;AACf,WAAK,qBAAqB;AAC1B,WAAK,sBAAsB;AAC3B,WAAK,uBAAuB;AAAA,IAChC;AAAA,EACJ;AAAA,EACA,wBAAwB;AACpB,QAAI,KAAK,oBAAoB,OAAO,GAAG;AACnC,WAAK,oBAAoB,QAAQ,CAAC,aAAa,SAAS,KAAK,CAAC;AAC9D,WAAK,oBAAoB,MAAM;AAAA,IACnC;AAAA,EACJ;AAAA,EACA,yBAAyB;AACrB,QAAI,KAAK,qBAAqB,OAAO,GAAG;AACpC,WAAK,qBAAqB,QAAQ,CAAC,aAAa,SAAS,KAAK,CAAC;AAC/D,WAAK,qBAAqB,MAAM;AAAA,IACpC;AAAA,EACJ;AAAA,EACA,gBAAgB,SAAS,WAAW,EAAE,WAAW,GAAG;AAChD,UAAM,SAAS,KAAK,UAAU,SAAS,UAAU;AACjD,QAAI,QAAQ;AACR,WAAK,cAAc,QAAQ,SAAS,UAAU;AAAA,IAClD;AAAA,EACJ;AAAA,EACA,kBAAkB,SAAS,WAAW,EAAE,WAAW,GAAG;AAClD,UAAM,SAAS,KAAK,iBAAiB,SAAS,UAAU;AACxD,QAAI,QAAQ;AACR,WAAK,iBAAiB,QAAQ,SAAS,UAAU;AAAA,IACrD;AAAA,EACJ;AAAA,EACA,qBAAqB,SAAS,EAAE,WAAW,GAAG;AAC1C,UAAM,WAAW,KAAK,SAAS,UAAU;AACzC,UAAM,YAAY,KAAK,UAAU,SAAS,UAAU;AACpD,UAAM,sBAAsB,QAAQ,QAAQ,IAAI,KAAK,OAAO,mBAAmB,KAAK,UAAU,GAAG;AACjG,QAAI,UAAU;AACV,aAAO,aAAa,uBAAuB,QAAQ,QAAQ,QAAQ;AAAA,IACvE,OACK;AACD,aAAO;AAAA,IACX;AAAA,EACJ;AAAA,EACA,wBAAwB,UAAU,eAAe;AAC7C,UAAM,aAAa,KAAK,qCAAqC,aAAa;AAC1E,QAAI,YAAY;AACZ,WAAK,gCAAgC,UAAU;AAAA,IACnD;AAAA,EACJ;AAAA,EACA,6BAA6B,UAAU,eAAe;AAClD,UAAM,aAAa,KAAK,qCAAqC,aAAa;AAC1E,QAAI,YAAY;AACZ,WAAK,gCAAgC,UAAU;AAAA,IACnD;AAAA,EACJ;AAAA,EACA,0BAA0B,UAAU,eAAe;AAC/C,UAAM,aAAa,KAAK,qCAAqC,aAAa;AAC1E,QAAI,YAAY;AACZ,WAAK,gCAAgC,UAAU;AAAA,IACnD;AAAA,EACJ;AAAA,EACA,cAAc,QAAQ,SAAS,YAAY;AACvC,QAAI;AACJ,QAAI,CAAC,KAAK,qBAAqB,IAAI,YAAY,OAAO,GAAG;AACrD,WAAK,cAAc,IAAI,YAAY,MAAM;AACzC,WAAK,qBAAqB,IAAI,YAAY,OAAO;AACjD,OAAC,KAAK,KAAK,oBAAoB,IAAI,UAAU,OAAO,QAAQ,OAAO,SAAS,SAAS,GAAG,MAAM,MAAM,KAAK,SAAS,gBAAgB,QAAQ,SAAS,UAAU,CAAC;AAAA,IAClK;AAAA,EACJ;AAAA,EACA,iBAAiB,QAAQ,SAAS,YAAY;AAC1C,QAAI;AACJ,QAAI,KAAK,qBAAqB,IAAI,YAAY,OAAO,GAAG;AACpD,WAAK,cAAc,OAAO,YAAY,MAAM;AAC5C,WAAK,qBAAqB,OAAO,YAAY,OAAO;AACpD,OAAC,KAAK,KAAK,oBACN,IAAI,UAAU,OAAO,QAAQ,OAAO,SAAS,SAAS,GAAG,MAAM,MAAM,KAAK,SAAS,mBAAmB,QAAQ,SAAS,UAAU,CAAC;AAAA,IAC3I;AAAA,EACJ;AAAA,EACA,uBAAuB;AACnB,eAAW,cAAc,KAAK,qBAAqB,MAAM;AACrD,iBAAW,WAAW,KAAK,qBAAqB,gBAAgB,UAAU,GAAG;AACzE,mBAAW,UAAU,KAAK,cAAc,gBAAgB,UAAU,GAAG;AACjE,eAAK,iBAAiB,QAAQ,SAAS,UAAU;AAAA,QACrD;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,gCAAgC,YAAY;AACxC,UAAM,WAAW,KAAK,oBAAoB,IAAI,UAAU;AACxD,QAAI,UAAU;AACV,eAAS,WAAW,KAAK,SAAS,UAAU;AAAA,IAChD;AAAA,EACJ;AAAA,EACA,+BAA+B,YAAY;AACvC,UAAM,WAAW,KAAK,SAAS,UAAU;AACzC,UAAM,mBAAmB,IAAI,iBAAiB,SAAS,MAAM,UAAU,MAAM,EAAE,WAAW,CAAC;AAC3F,SAAK,oBAAoB,IAAI,YAAY,gBAAgB;AACzD,qBAAiB,MAAM;AAAA,EAC3B;AAAA,EACA,gCAAgC,YAAY;AACxC,UAAM,gBAAgB,KAAK,2BAA2B,UAAU;AAChE,UAAM,oBAAoB,IAAI,kBAAkB,KAAK,MAAM,SAAS,eAAe,IAAI;AACvF,SAAK,qBAAqB,IAAI,YAAY,iBAAiB;AAC3D,sBAAkB,MAAM;AAAA,EAC5B;AAAA,EACA,SAAS,YAAY;AACjB,WAAO,KAAK,MAAM,QAAQ,yBAAyB,UAAU;AAAA,EACjE;AAAA,EACA,2BAA2B,YAAY;AACnC,WAAO,KAAK,MAAM,OAAO,wBAAwB,KAAK,YAAY,UAAU;AAAA,EAChF;AAAA,EACA,qCAAqC,eAAe;AAChD,WAAO,KAAK,kBAAkB,KAAK,CAAC,eAAe,KAAK,2BAA2B,UAAU,MAAM,aAAa;AAAA,EACpH;AAAA,EACA,IAAI,qBAAqB;AACrB,UAAM,eAAe,IAAI,SAAS;AAClC,SAAK,OAAO,QAAQ,QAAQ,CAAC,WAAW;AACpC,YAAM,cAAc,OAAO,WAAW;AACtC,YAAM,UAAU,iCAAiC,aAAa,SAAS;AACvE,cAAQ,QAAQ,CAAC,WAAW,aAAa,IAAI,QAAQ,OAAO,UAAU,CAAC;AAAA,IAC3E,CAAC;AACD,WAAO;AAAA,EACX;AAAA,EACA,IAAI,oBAAoB;AACpB,WAAO,KAAK,mBAAmB,gBAAgB,KAAK,UAAU;AAAA,EAClE;AAAA,EACA,IAAI,iCAAiC;AACjC,WAAO,KAAK,mBAAmB,gBAAgB,KAAK,UAAU;AAAA,EAClE;AAAA,EACA,IAAI,oBAAoB;AACpB,UAAM,cAAc,KAAK;AACzB,WAAO,KAAK,OAAO,SAAS,OAAO,CAAC,YAAY,YAAY,SAAS,QAAQ,UAAU,CAAC;AAAA,EAC5F;AAAA,EACA,UAAU,SAAS,YAAY;AAC3B,WAAO,CAAC,CAAC,KAAK,UAAU,SAAS,UAAU,KAAK,CAAC,CAAC,KAAK,iBAAiB,SAAS,UAAU;AAAA,EAC/F;AAAA,EACA,UAAU,SAAS,YAAY;AAC3B,WAAO,KAAK,YAAY,qCAAqC,SAAS,UAAU;AAAA,EACpF;AAAA,EACA,iBAAiB,SAAS,YAAY;AAClC,WAAO,KAAK,cAAc,gBAAgB,UAAU,EAAE,KAAK,CAAC,WAAW,OAAO,YAAY,OAAO;AAAA,EACrG;AAAA,EACA,IAAI,QAAQ;AACR,WAAO,KAAK,QAAQ;AAAA,EACxB;AAAA,EACA,IAAI,SAAS;AACT,WAAO,KAAK,QAAQ;AAAA,EACxB;AAAA,EACA,IAAI,aAAa;AACb,WAAO,KAAK,QAAQ;AAAA,EACxB;AAAA,EACA,IAAI,cAAc;AACd,WAAO,KAAK,QAAQ;AAAA,EACxB;AAAA,EACA,IAAI,SAAS;AACT,WAAO,KAAK,YAAY;AAAA,EAC5B;AACJ;AAEA,IAAM,UAAN,MAAc;AAAA,EACV,YAAY,QAAQ,OAAO;AACvB,SAAK,mBAAmB,CAAC,cAAc,SAAS,CAAC,MAAM;AACnD,YAAM,EAAE,YAAY,YAAY,QAAQ,IAAI;AAC5C,eAAS,OAAO,OAAO,EAAE,YAAY,YAAY,QAAQ,GAAG,MAAM;AAClE,WAAK,YAAY,iBAAiB,KAAK,YAAY,cAAc,MAAM;AAAA,IAC3E;AACA,SAAK,SAAS;AACd,SAAK,QAAQ;AACb,SAAK,aAAa,IAAI,OAAO,sBAAsB,IAAI;AACvD,SAAK,kBAAkB,IAAI,gBAAgB,MAAM,KAAK,UAAU;AAChE,SAAK,gBAAgB,IAAI,cAAc,MAAM,KAAK,UAAU;AAC5D,SAAK,iBAAiB,IAAI,eAAe,MAAM,IAAI;AACnD,SAAK,iBAAiB,IAAI,eAAe,MAAM,IAAI;AACnD,QAAI;AACA,WAAK,WAAW,WAAW;AAC3B,WAAK,iBAAiB,YAAY;AAAA,IACtC,SACOD,QAAO;AACV,WAAK,YAAYA,QAAO,yBAAyB;AAAA,IACrD;AAAA,EACJ;AAAA,EACA,UAAU;AACN,SAAK,gBAAgB,MAAM;AAC3B,SAAK,cAAc,MAAM;AACzB,SAAK,eAAe,MAAM;AAC1B,SAAK,eAAe,MAAM;AAC1B,QAAI;AACA,WAAK,WAAW,QAAQ;AACxB,WAAK,iBAAiB,SAAS;AAAA,IACnC,SACOA,QAAO;AACV,WAAK,YAAYA,QAAO,uBAAuB;AAAA,IACnD;AAAA,EACJ;AAAA,EACA,UAAU;AACN,SAAK,eAAe,QAAQ;AAAA,EAChC;AAAA,EACA,aAAa;AACT,QAAI;AACA,WAAK,WAAW,WAAW;AAC3B,WAAK,iBAAiB,YAAY;AAAA,IACtC,SACOA,QAAO;AACV,WAAK,YAAYA,QAAO,0BAA0B;AAAA,IACtD;AACA,SAAK,eAAe,KAAK;AACzB,SAAK,eAAe,KAAK;AACzB,SAAK,cAAc,KAAK;AACxB,SAAK,gBAAgB,KAAK;AAAA,EAC9B;AAAA,EACA,IAAI,cAAc;AACd,WAAO,KAAK,OAAO;AAAA,EACvB;AAAA,EACA,IAAI,aAAa;AACb,WAAO,KAAK,OAAO;AAAA,EACvB;AAAA,EACA,IAAI,SAAS;AACT,WAAO,KAAK,YAAY;AAAA,EAC5B;AAAA,EACA,IAAI,aAAa;AACb,WAAO,KAAK,YAAY;AAAA,EAC5B;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,MAAM;AAAA,EACtB;AAAA,EACA,IAAI,gBAAgB;AAChB,WAAO,KAAK,QAAQ;AAAA,EACxB;AAAA,EACA,YAAYA,QAAO,SAAS,SAAS,CAAC,GAAG;AACrC,UAAM,EAAE,YAAY,YAAY,QAAQ,IAAI;AAC5C,aAAS,OAAO,OAAO,EAAE,YAAY,YAAY,QAAQ,GAAG,MAAM;AAClE,SAAK,YAAY,YAAYA,QAAO,SAAS,OAAO,IAAI,MAAM;AAAA,EAClE;AAAA,EACA,gBAAgB,SAAS,MAAM;AAC3B,SAAK,uBAAuB,GAAG,IAAI,mBAAmB,OAAO;AAAA,EACjE;AAAA,EACA,mBAAmB,SAAS,MAAM;AAC9B,SAAK,uBAAuB,GAAG,IAAI,sBAAsB,OAAO;AAAA,EACpE;AAAA,EACA,gBAAgB,QAAQ,SAAS,MAAM;AACnC,SAAK,uBAAuB,GAAG,kBAAkB,IAAI,CAAC,mBAAmB,QAAQ,OAAO;AAAA,EAC5F;AAAA,EACA,mBAAmB,QAAQ,SAAS,MAAM;AACtC,SAAK,uBAAuB,GAAG,kBAAkB,IAAI,CAAC,sBAAsB,QAAQ,OAAO;AAAA,EAC/F;AAAA,EACA,uBAAuB,eAAe,MAAM;AACxC,UAAM,aAAa,KAAK;AACxB,QAAI,OAAO,WAAW,UAAU,KAAK,YAAY;AAC7C,iBAAW,UAAU,EAAE,GAAG,IAAI;AAAA,IAClC;AAAA,EACJ;AACJ;AAEA,SAAS,MAAM,aAAa;AACxB,SAAO,OAAO,aAAa,qBAAqB,WAAW,CAAC;AAChE;AACA,SAAS,OAAO,aAAa,YAAY;AACrC,QAAM,oBAAoBE,QAAO,WAAW;AAC5C,QAAM,mBAAmB,oBAAoB,YAAY,WAAW,UAAU;AAC9E,SAAO,iBAAiB,kBAAkB,WAAW,gBAAgB;AACrE,SAAO;AACX;AACA,SAAS,qBAAqB,aAAa;AACvC,QAAM,YAAY,iCAAiC,aAAa,WAAW;AAC3E,SAAO,UAAU,OAAO,CAAC,mBAAmB,aAAa;AACrD,UAAM,aAAa,SAAS,WAAW;AACvC,eAAW,OAAO,YAAY;AAC1B,YAAM,aAAa,kBAAkB,GAAG,KAAK,CAAC;AAC9C,wBAAkB,GAAG,IAAI,OAAO,OAAO,YAAY,WAAW,GAAG,CAAC;AAAA,IACtE;AACA,WAAO;AAAA,EACX,GAAG,CAAC,CAAC;AACT;AACA,SAAS,oBAAoB,WAAW,YAAY;AAChD,SAAO,WAAW,UAAU,EAAE,OAAO,CAAC,kBAAkB,QAAQ;AAC5D,UAAM,aAAa,sBAAsB,WAAW,YAAY,GAAG;AACnE,QAAI,YAAY;AACZ,aAAO,OAAO,kBAAkB,EAAE,CAAC,GAAG,GAAG,WAAW,CAAC;AAAA,IACzD;AACA,WAAO;AAAA,EACX,GAAG,CAAC,CAAC;AACT;AACA,SAAS,sBAAsB,WAAW,YAAY,KAAK;AACvD,QAAM,sBAAsB,OAAO,yBAAyB,WAAW,GAAG;AAC1E,QAAM,kBAAkB,uBAAuB,WAAW;AAC1D,MAAI,CAAC,iBAAiB;AAClB,UAAM,aAAa,OAAO,yBAAyB,YAAY,GAAG,EAAE;AACpE,QAAI,qBAAqB;AACrB,iBAAW,MAAM,oBAAoB,OAAO,WAAW;AACvD,iBAAW,MAAM,oBAAoB,OAAO,WAAW;AAAA,IAC3D;AACA,WAAO;AAAA,EACX;AACJ;AACA,IAAM,cAAc,MAAM;AACtB,MAAI,OAAO,OAAO,yBAAyB,YAAY;AACnD,WAAO,CAAC,WAAW,CAAC,GAAG,OAAO,oBAAoB,MAAM,GAAG,GAAG,OAAO,sBAAsB,MAAM,CAAC;AAAA,EACtG,OACK;AACD,WAAO,OAAO;AAAA,EAClB;AACJ,GAAG;AACH,IAAMA,WAAU,MAAM;AAClB,WAAS,kBAAkB,aAAa;AACpC,aAAS,WAAW;AAChB,aAAO,QAAQ,UAAU,aAAa,WAAW,UAAU;AAAA,IAC/D;AACA,aAAS,YAAY,OAAO,OAAO,YAAY,WAAW;AAAA,MACtD,aAAa,EAAE,OAAO,SAAS;AAAA,IACnC,CAAC;AACD,YAAQ,eAAe,UAAU,WAAW;AAC5C,WAAO;AAAA,EACX;AACA,WAAS,uBAAuB;AAC5B,UAAM,IAAI,WAAY;AAClB,WAAK,EAAE,KAAK,IAAI;AAAA,IACpB;AACA,UAAM,IAAI,kBAAkB,CAAC;AAC7B,MAAE,UAAU,IAAI,WAAY;AAAA,IAAE;AAC9B,WAAO,IAAI,EAAE;AAAA,EACjB;AACA,MAAI;AACA,yBAAqB;AACrB,WAAO;AAAA,EACX,SACOF,QAAO;AACV,WAAO,CAAC,gBAAgB,MAAM,iBAAiB,YAAY;AAAA,IAC3D;AAAA,EACJ;AACJ,GAAG;AAEH,SAAS,gBAAgB,YAAY;AACjC,SAAO;AAAA,IACH,YAAY,WAAW;AAAA,IACvB,uBAAuB,MAAM,WAAW,qBAAqB;AAAA,EACjE;AACJ;AAEA,IAAM,SAAN,MAAa;AAAA,EACT,YAAYG,cAAa,YAAY;AACjC,SAAK,cAAcA;AACnB,SAAK,aAAa,gBAAgB,UAAU;AAC5C,SAAK,kBAAkB,oBAAI,QAAQ;AACnC,SAAK,oBAAoB,oBAAI,IAAI;AAAA,EACrC;AAAA,EACA,IAAI,aAAa;AACb,WAAO,KAAK,WAAW;AAAA,EAC3B;AAAA,EACA,IAAI,wBAAwB;AACxB,WAAO,KAAK,WAAW;AAAA,EAC3B;AAAA,EACA,IAAI,WAAW;AACX,WAAO,MAAM,KAAK,KAAK,iBAAiB;AAAA,EAC5C;AAAA,EACA,uBAAuB,OAAO;AAC1B,UAAM,UAAU,KAAK,qBAAqB,KAAK;AAC/C,SAAK,kBAAkB,IAAI,OAAO;AAClC,YAAQ,QAAQ;AAAA,EACpB;AAAA,EACA,0BAA0B,OAAO;AAC7B,UAAM,UAAU,KAAK,gBAAgB,IAAI,KAAK;AAC9C,QAAI,SAAS;AACT,WAAK,kBAAkB,OAAO,OAAO;AACrC,cAAQ,WAAW;AAAA,IACvB;AAAA,EACJ;AAAA,EACA,qBAAqB,OAAO;AACxB,QAAI,UAAU,KAAK,gBAAgB,IAAI,KAAK;AAC5C,QAAI,CAAC,SAAS;AACV,gBAAU,IAAI,QAAQ,MAAM,KAAK;AACjC,WAAK,gBAAgB,IAAI,OAAO,OAAO;AAAA,IAC3C;AACA,WAAO;AAAA,EACX;AACJ;AAEA,IAAM,WAAN,MAAe;AAAA,EACX,YAAY,OAAO;AACf,SAAK,QAAQ;AAAA,EACjB;AAAA,EACA,IAAI,MAAM;AACN,WAAO,KAAK,KAAK,IAAI,KAAK,WAAW,IAAI,CAAC;AAAA,EAC9C;AAAA,EACA,IAAI,MAAM;AACN,WAAO,KAAK,OAAO,IAAI,EAAE,CAAC;AAAA,EAC9B;AAAA,EACA,OAAO,MAAM;AACT,UAAM,cAAc,KAAK,KAAK,IAAI,KAAK,WAAW,IAAI,CAAC,KAAK;AAC5D,WAAO,SAAS,WAAW;AAAA,EAC/B;AAAA,EACA,iBAAiB,MAAM;AACnB,WAAO,KAAK,KAAK,uBAAuB,KAAK,WAAW,IAAI,CAAC;AAAA,EACjE;AAAA,EACA,WAAW,MAAM;AACb,WAAO,GAAG,IAAI;AAAA,EAClB;AAAA,EACA,IAAI,OAAO;AACP,WAAO,KAAK,MAAM;AAAA,EACtB;AACJ;AAEA,IAAM,UAAN,MAAc;AAAA,EACV,YAAY,OAAO;AACf,SAAK,QAAQ;AAAA,EACjB;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,MAAM;AAAA,EACtB;AAAA,EACA,IAAI,aAAa;AACb,WAAO,KAAK,MAAM;AAAA,EACtB;AAAA,EACA,IAAI,KAAK;AACL,UAAM,OAAO,KAAK,uBAAuB,GAAG;AAC5C,WAAO,KAAK,QAAQ,aAAa,IAAI;AAAA,EACzC;AAAA,EACA,IAAI,KAAK,OAAO;AACZ,UAAM,OAAO,KAAK,uBAAuB,GAAG;AAC5C,SAAK,QAAQ,aAAa,MAAM,KAAK;AACrC,WAAO,KAAK,IAAI,GAAG;AAAA,EACvB;AAAA,EACA,IAAI,KAAK;AACL,UAAM,OAAO,KAAK,uBAAuB,GAAG;AAC5C,WAAO,KAAK,QAAQ,aAAa,IAAI;AAAA,EACzC;AAAA,EACA,OAAO,KAAK;AACR,QAAI,KAAK,IAAI,GAAG,GAAG;AACf,YAAM,OAAO,KAAK,uBAAuB,GAAG;AAC5C,WAAK,QAAQ,gBAAgB,IAAI;AACjC,aAAO;AAAA,IACX,OACK;AACD,aAAO;AAAA,IACX;AAAA,EACJ;AAAA,EACA,uBAAuB,KAAK;AACxB,WAAO,QAAQ,KAAK,UAAU,IAAI,UAAU,GAAG,CAAC;AAAA,EACpD;AACJ;AAEA,IAAM,QAAN,MAAY;AAAA,EACR,YAAY,QAAQ;AAChB,SAAK,qBAAqB,oBAAI,QAAQ;AACtC,SAAK,SAAS;AAAA,EAClB;AAAA,EACA,KAAK,QAAQ,KAAK,SAAS;AACvB,QAAI,aAAa,KAAK,mBAAmB,IAAI,MAAM;AACnD,QAAI,CAAC,YAAY;AACb,mBAAa,oBAAI,IAAI;AACrB,WAAK,mBAAmB,IAAI,QAAQ,UAAU;AAAA,IAClD;AACA,QAAI,CAAC,WAAW,IAAI,GAAG,GAAG;AACtB,iBAAW,IAAI,GAAG;AAClB,WAAK,OAAO,KAAK,SAAS,MAAM;AAAA,IACpC;AAAA,EACJ;AACJ;AAEA,SAAS,4BAA4B,eAAe,OAAO;AACvD,SAAO,IAAI,aAAa,MAAM,KAAK;AACvC;AAEA,IAAM,YAAN,MAAgB;AAAA,EACZ,YAAY,OAAO;AACf,SAAK,QAAQ;AAAA,EACjB;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,MAAM;AAAA,EACtB;AAAA,EACA,IAAI,aAAa;AACb,WAAO,KAAK,MAAM;AAAA,EACtB;AAAA,EACA,IAAI,SAAS;AACT,WAAO,KAAK,MAAM;AAAA,EACtB;AAAA,EACA,IAAI,YAAY;AACZ,WAAO,KAAK,KAAK,UAAU,KAAK;AAAA,EACpC;AAAA,EACA,QAAQ,aAAa;AACjB,WAAO,YAAY,OAAO,CAAC,QAAQ,eAAe,UAAU,KAAK,WAAW,UAAU,KAAK,KAAK,iBAAiB,UAAU,GAAG,MAAS;AAAA,EAC3I;AAAA,EACA,WAAW,aAAa;AACpB,WAAO,YAAY,OAAO,CAAC,SAAS,eAAe;AAAA,MAC/C,GAAG;AAAA,MACH,GAAG,KAAK,eAAe,UAAU;AAAA,MACjC,GAAG,KAAK,qBAAqB,UAAU;AAAA,IAC3C,GAAG,CAAC,CAAC;AAAA,EACT;AAAA,EACA,WAAW,YAAY;AACnB,UAAM,WAAW,KAAK,yBAAyB,UAAU;AACzD,WAAO,KAAK,MAAM,YAAY,QAAQ;AAAA,EAC1C;AAAA,EACA,eAAe,YAAY;AACvB,UAAM,WAAW,KAAK,yBAAyB,UAAU;AACzD,WAAO,KAAK,MAAM,gBAAgB,QAAQ;AAAA,EAC9C;AAAA,EACA,yBAAyB,YAAY;AACjC,UAAM,gBAAgB,KAAK,OAAO,wBAAwB,KAAK,UAAU;AACzE,WAAO,4BAA4B,eAAe,UAAU;AAAA,EAChE;AAAA,EACA,iBAAiB,YAAY;AACzB,UAAM,WAAW,KAAK,+BAA+B,UAAU;AAC/D,WAAO,KAAK,UAAU,KAAK,MAAM,YAAY,QAAQ,GAAG,UAAU;AAAA,EACtE;AAAA,EACA,qBAAqB,YAAY;AAC7B,UAAM,WAAW,KAAK,+BAA+B,UAAU;AAC/D,WAAO,KAAK,MAAM,gBAAgB,QAAQ,EAAE,IAAI,CAAC,YAAY,KAAK,UAAU,SAAS,UAAU,CAAC;AAAA,EACpG;AAAA,EACA,+BAA+B,YAAY;AACvC,UAAM,mBAAmB,GAAG,KAAK,UAAU,IAAI,UAAU;AACzD,WAAO,4BAA4B,KAAK,OAAO,iBAAiB,gBAAgB;AAAA,EACpF;AAAA,EACA,UAAU,SAAS,YAAY;AAC3B,QAAI,SAAS;AACT,YAAM,EAAE,WAAW,IAAI;AACvB,YAAM,gBAAgB,KAAK,OAAO;AAClC,YAAM,uBAAuB,KAAK,OAAO,wBAAwB,UAAU;AAC3E,WAAK,MAAM,KAAK,SAAS,UAAU,UAAU,IAAI,kBAAkB,aAAa,KAAK,UAAU,IAAI,UAAU,UAAU,oBAAoB,KAAK,UAAU,UAC/I,aAAa,+EAA+E;AAAA,IAC3G;AACA,WAAO;AAAA,EACX;AAAA,EACA,IAAI,QAAQ;AACR,WAAO,KAAK,MAAM;AAAA,EACtB;AACJ;AAEA,IAAM,YAAN,MAAgB;AAAA,EACZ,YAAY,OAAO,mBAAmB;AAClC,SAAK,QAAQ;AACb,SAAK,oBAAoB;AAAA,EAC7B;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,MAAM;AAAA,EACtB;AAAA,EACA,IAAI,aAAa;AACb,WAAO,KAAK,MAAM;AAAA,EACtB;AAAA,EACA,IAAI,SAAS;AACT,WAAO,KAAK,MAAM;AAAA,EACtB;AAAA,EACA,IAAI,YAAY;AACZ,WAAO,KAAK,KAAK,UAAU,KAAK;AAAA,EACpC;AAAA,EACA,QAAQ,aAAa;AACjB,WAAO,YAAY,OAAO,CAAC,QAAQ,eAAe,UAAU,KAAK,WAAW,UAAU,GAAG,MAAS;AAAA,EACtG;AAAA,EACA,WAAW,aAAa;AACpB,WAAO,YAAY,OAAO,CAAC,SAAS,eAAe,CAAC,GAAG,SAAS,GAAG,KAAK,eAAe,UAAU,CAAC,GAAG,CAAC,CAAC;AAAA,EAC3G;AAAA,EACA,yBAAyB,YAAY;AACjC,UAAM,gBAAgB,KAAK,OAAO,wBAAwB,KAAK,YAAY,UAAU;AACrF,WAAO,KAAK,kBAAkB,aAAa,aAAa;AAAA,EAC5D;AAAA,EACA,WAAW,YAAY;AACnB,UAAM,WAAW,KAAK,yBAAyB,UAAU;AACzD,QAAI;AACA,aAAO,KAAK,YAAY,UAAU,UAAU;AAAA,EACpD;AAAA,EACA,eAAe,YAAY;AACvB,UAAM,WAAW,KAAK,yBAAyB,UAAU;AACzD,WAAO,WAAW,KAAK,gBAAgB,UAAU,UAAU,IAAI,CAAC;AAAA,EACpE;AAAA,EACA,YAAY,UAAU,YAAY;AAC9B,UAAM,WAAW,KAAK,MAAM,cAAc,QAAQ;AAClD,WAAO,SAAS,OAAO,CAAC,YAAY,KAAK,eAAe,SAAS,UAAU,UAAU,CAAC,EAAE,CAAC;AAAA,EAC7F;AAAA,EACA,gBAAgB,UAAU,YAAY;AAClC,UAAM,WAAW,KAAK,MAAM,cAAc,QAAQ;AAClD,WAAO,SAAS,OAAO,CAAC,YAAY,KAAK,eAAe,SAAS,UAAU,UAAU,CAAC;AAAA,EAC1F;AAAA,EACA,eAAe,SAAS,UAAU,YAAY;AAC1C,UAAM,sBAAsB,QAAQ,aAAa,KAAK,MAAM,OAAO,mBAAmB,KAAK;AAC3F,WAAO,QAAQ,QAAQ,QAAQ,KAAK,oBAAoB,MAAM,GAAG,EAAE,SAAS,UAAU;AAAA,EAC1F;AACJ;AAEA,IAAM,QAAN,MAAM,OAAM;AAAA,EACR,YAAY,QAAQ,SAAS,YAAY,QAAQ;AAC7C,SAAK,UAAU,IAAI,UAAU,IAAI;AACjC,SAAK,UAAU,IAAI,SAAS,IAAI;AAChC,SAAK,OAAO,IAAI,QAAQ,IAAI;AAC5B,SAAK,kBAAkB,CAACC,aAAY;AAChC,aAAOA,SAAQ,QAAQ,KAAK,kBAAkB,MAAM,KAAK;AAAA,IAC7D;AACA,SAAK,SAAS;AACd,SAAK,UAAU;AACf,SAAK,aAAa;AAClB,SAAK,QAAQ,IAAI,MAAM,MAAM;AAC7B,SAAK,UAAU,IAAI,UAAU,KAAK,eAAe,OAAO;AAAA,EAC5D;AAAA,EACA,YAAY,UAAU;AAClB,WAAO,KAAK,QAAQ,QAAQ,QAAQ,IAAI,KAAK,UAAU,KAAK,cAAc,QAAQ,EAAE,KAAK,KAAK,eAAe;AAAA,EACjH;AAAA,EACA,gBAAgB,UAAU;AACtB,WAAO;AAAA,MACH,GAAI,KAAK,QAAQ,QAAQ,QAAQ,IAAI,CAAC,KAAK,OAAO,IAAI,CAAC;AAAA,MACvD,GAAG,KAAK,cAAc,QAAQ,EAAE,OAAO,KAAK,eAAe;AAAA,IAC/D;AAAA,EACJ;AAAA,EACA,cAAc,UAAU;AACpB,WAAO,MAAM,KAAK,KAAK,QAAQ,iBAAiB,QAAQ,CAAC;AAAA,EAC7D;AAAA,EACA,IAAI,qBAAqB;AACrB,WAAO,4BAA4B,KAAK,OAAO,qBAAqB,KAAK,UAAU;AAAA,EACvF;AAAA,EACA,IAAI,kBAAkB;AAClB,WAAO,KAAK,YAAY,SAAS;AAAA,EACrC;AAAA,EACA,IAAI,gBAAgB;AAChB,WAAO,KAAK,kBACN,OACA,IAAI,OAAM,KAAK,QAAQ,SAAS,iBAAiB,KAAK,YAAY,KAAK,MAAM,MAAM;AAAA,EAC7F;AACJ;AAEA,IAAM,gBAAN,MAAoB;AAAA,EAChB,YAAY,SAAS,QAAQ,UAAU;AACnC,SAAK,UAAU;AACf,SAAK,SAAS;AACd,SAAK,WAAW;AAChB,SAAK,oBAAoB,IAAI,kBAAkB,KAAK,SAAS,KAAK,qBAAqB,IAAI;AAC3F,SAAK,8BAA8B,oBAAI,QAAQ;AAC/C,SAAK,uBAAuB,oBAAI,QAAQ;AAAA,EAC5C;AAAA,EACA,QAAQ;AACJ,SAAK,kBAAkB,MAAM;AAAA,EACjC;AAAA,EACA,OAAO;AACH,SAAK,kBAAkB,KAAK;AAAA,EAChC;AAAA,EACA,IAAI,sBAAsB;AACtB,WAAO,KAAK,OAAO;AAAA,EACvB;AAAA,EACA,mBAAmB,OAAO;AACtB,UAAM,EAAE,SAAS,SAAS,WAAW,IAAI;AACzC,WAAO,KAAK,kCAAkC,SAAS,UAAU;AAAA,EACrE;AAAA,EACA,kCAAkC,SAAS,YAAY;AACnD,UAAM,qBAAqB,KAAK,kCAAkC,OAAO;AACzE,QAAI,QAAQ,mBAAmB,IAAI,UAAU;AAC7C,QAAI,CAAC,OAAO;AACR,cAAQ,KAAK,SAAS,mCAAmC,SAAS,UAAU;AAC5E,yBAAmB,IAAI,YAAY,KAAK;AAAA,IAC5C;AACA,WAAO;AAAA,EACX;AAAA,EACA,oBAAoB,SAAS,OAAO;AAChC,UAAM,kBAAkB,KAAK,qBAAqB,IAAI,KAAK,KAAK,KAAK;AACrE,SAAK,qBAAqB,IAAI,OAAO,cAAc;AACnD,QAAI,kBAAkB,GAAG;AACrB,WAAK,SAAS,eAAe,KAAK;AAAA,IACtC;AAAA,EACJ;AAAA,EACA,sBAAsB,SAAS,OAAO;AAClC,UAAM,iBAAiB,KAAK,qBAAqB,IAAI,KAAK;AAC1D,QAAI,gBAAgB;AAChB,WAAK,qBAAqB,IAAI,OAAO,iBAAiB,CAAC;AACvD,UAAI,kBAAkB,GAAG;AACrB,aAAK,SAAS,kBAAkB,KAAK;AAAA,MACzC;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,kCAAkC,SAAS;AACvC,QAAI,qBAAqB,KAAK,4BAA4B,IAAI,OAAO;AACrE,QAAI,CAAC,oBAAoB;AACrB,2BAAqB,oBAAI,IAAI;AAC7B,WAAK,4BAA4B,IAAI,SAAS,kBAAkB;AAAA,IACpE;AACA,WAAO;AAAA,EACX;AACJ;AAEA,IAAM,SAAN,MAAa;AAAA,EACT,YAAYD,cAAa;AACrB,SAAK,cAAcA;AACnB,SAAK,gBAAgB,IAAI,cAAc,KAAK,SAAS,KAAK,QAAQ,IAAI;AACtE,SAAK,qBAAqB,IAAI,SAAS;AACvC,SAAK,sBAAsB,oBAAI,IAAI;AAAA,EACvC;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,YAAY;AAAA,EAC5B;AAAA,EACA,IAAI,SAAS;AACT,WAAO,KAAK,YAAY;AAAA,EAC5B;AAAA,EACA,IAAI,SAAS;AACT,WAAO,KAAK,YAAY;AAAA,EAC5B;AAAA,EACA,IAAI,sBAAsB;AACtB,WAAO,KAAK,OAAO;AAAA,EACvB;AAAA,EACA,IAAI,UAAU;AACV,WAAO,MAAM,KAAK,KAAK,oBAAoB,OAAO,CAAC;AAAA,EACvD;AAAA,EACA,IAAI,WAAW;AACX,WAAO,KAAK,QAAQ,OAAO,CAAC,UAAU,WAAW,SAAS,OAAO,OAAO,QAAQ,GAAG,CAAC,CAAC;AAAA,EACzF;AAAA,EACA,QAAQ;AACJ,SAAK,cAAc,MAAM;AAAA,EAC7B;AAAA,EACA,OAAO;AACH,SAAK,cAAc,KAAK;AAAA,EAC5B;AAAA,EACA,eAAe,YAAY;AACvB,SAAK,iBAAiB,WAAW,UAAU;AAC3C,UAAM,SAAS,IAAI,OAAO,KAAK,aAAa,UAAU;AACtD,SAAK,cAAc,MAAM;AACzB,UAAM,YAAY,WAAW,sBAAsB;AACnD,QAAI,WAAW;AACX,gBAAU,KAAK,WAAW,uBAAuB,WAAW,YAAY,KAAK,WAAW;AAAA,IAC5F;AAAA,EACJ;AAAA,EACA,iBAAiB,YAAY;AACzB,UAAM,SAAS,KAAK,oBAAoB,IAAI,UAAU;AACtD,QAAI,QAAQ;AACR,WAAK,iBAAiB,MAAM;AAAA,IAChC;AAAA,EACJ;AAAA,EACA,kCAAkC,SAAS,YAAY;AACnD,UAAM,SAAS,KAAK,oBAAoB,IAAI,UAAU;AACtD,QAAI,QAAQ;AACR,aAAO,OAAO,SAAS,KAAK,CAAC,YAAY,QAAQ,WAAW,OAAO;AAAA,IACvE;AAAA,EACJ;AAAA,EACA,6CAA6C,SAAS,YAAY;AAC9D,UAAM,QAAQ,KAAK,cAAc,kCAAkC,SAAS,UAAU;AACtF,QAAI,OAAO;AACP,WAAK,cAAc,oBAAoB,MAAM,SAAS,KAAK;AAAA,IAC/D,OACK;AACD,cAAQ,MAAM,kDAAkD,UAAU,kBAAkB,OAAO;AAAA,IACvG;AAAA,EACJ;AAAA,EACA,YAAYH,QAAO,SAAS,QAAQ;AAChC,SAAK,YAAY,YAAYA,QAAO,SAAS,MAAM;AAAA,EACvD;AAAA,EACA,mCAAmC,SAAS,YAAY;AACpD,WAAO,IAAI,MAAM,KAAK,QAAQ,SAAS,YAAY,KAAK,MAAM;AAAA,EAClE;AAAA,EACA,eAAe,OAAO;AAClB,SAAK,mBAAmB,IAAI,MAAM,YAAY,KAAK;AACnD,UAAM,SAAS,KAAK,oBAAoB,IAAI,MAAM,UAAU;AAC5D,QAAI,QAAQ;AACR,aAAO,uBAAuB,KAAK;AAAA,IACvC;AAAA,EACJ;AAAA,EACA,kBAAkB,OAAO;AACrB,SAAK,mBAAmB,OAAO,MAAM,YAAY,KAAK;AACtD,UAAM,SAAS,KAAK,oBAAoB,IAAI,MAAM,UAAU;AAC5D,QAAI,QAAQ;AACR,aAAO,0BAA0B,KAAK;AAAA,IAC1C;AAAA,EACJ;AAAA,EACA,cAAc,QAAQ;AAClB,SAAK,oBAAoB,IAAI,OAAO,YAAY,MAAM;AACtD,UAAM,SAAS,KAAK,mBAAmB,gBAAgB,OAAO,UAAU;AACxE,WAAO,QAAQ,CAAC,UAAU,OAAO,uBAAuB,KAAK,CAAC;AAAA,EAClE;AAAA,EACA,iBAAiB,QAAQ;AACrB,SAAK,oBAAoB,OAAO,OAAO,UAAU;AACjD,UAAM,SAAS,KAAK,mBAAmB,gBAAgB,OAAO,UAAU;AACxE,WAAO,QAAQ,CAAC,UAAU,OAAO,0BAA0B,KAAK,CAAC;AAAA,EACrE;AACJ;AAEA,IAAM,gBAAgB;AAAA,EAClB,qBAAqB;AAAA,EACrB,iBAAiB;AAAA,EACjB,iBAAiB;AAAA,EACjB,yBAAyB,CAAC,eAAe,QAAQ,UAAU;AAAA,EAC3D,yBAAyB,CAAC,YAAY,WAAW,QAAQ,UAAU,IAAI,MAAM;AAAA,EAC7E,aAAa,OAAO,OAAO,OAAO,OAAO,EAAE,OAAO,SAAS,KAAK,OAAO,KAAK,UAAU,OAAO,KAAK,IAAI,WAAW,MAAM,aAAa,MAAM,aAAa,OAAO,cAAc,MAAM,QAAQ,KAAK,OAAO,SAAS,UAAU,WAAW,WAAW,GAAG,kBAAkB,6BAA6B,MAAM,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,kBAAkB,aAAa,MAAM,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACjY;AACA,SAAS,kBAAkB,OAAO;AAC9B,SAAO,MAAM,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,MAAO,OAAO,OAAO,OAAO,OAAO,CAAC,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,GAAI,CAAC,CAAC;AAClG;AAEA,IAAM,cAAN,MAAkB;AAAA,EACd,YAAY,UAAU,SAAS,iBAAiB,SAAS,eAAe;AACpE,SAAK,SAAS;AACd,SAAK,QAAQ;AACb,SAAK,mBAAmB,CAAC,YAAY,cAAc,SAAS,CAAC,MAAM;AAC/D,UAAI,KAAK,OAAO;AACZ,aAAK,oBAAoB,YAAY,cAAc,MAAM;AAAA,MAC7D;AAAA,IACJ;AACA,SAAK,UAAU;AACf,SAAK,SAAS;AACd,SAAK,aAAa,IAAI,WAAW,IAAI;AACrC,SAAK,SAAS,IAAI,OAAO,IAAI;AAC7B,SAAK,0BAA0B,OAAO,OAAO,CAAC,GAAG,8BAA8B;AAAA,EACnF;AAAA,EACA,OAAO,MAAM,SAAS,QAAQ;AAC1B,UAAMG,eAAc,IAAI,KAAK,SAAS,MAAM;AAC5C,IAAAA,aAAY,MAAM;AAClB,WAAOA;AAAA,EACX;AAAA,EACA,MAAM,QAAQ;AACV,UAAM,SAAS;AACf,SAAK,iBAAiB,eAAe,UAAU;AAC/C,SAAK,WAAW,MAAM;AACtB,SAAK,OAAO,MAAM;AAClB,SAAK,iBAAiB,eAAe,OAAO;AAAA,EAChD;AAAA,EACA,OAAO;AACH,SAAK,iBAAiB,eAAe,UAAU;AAC/C,SAAK,WAAW,KAAK;AACrB,SAAK,OAAO,KAAK;AACjB,SAAK,iBAAiB,eAAe,MAAM;AAAA,EAC/C;AAAA,EACA,SAAS,YAAY,uBAAuB;AACxC,SAAK,KAAK,EAAE,YAAY,sBAAsB,CAAC;AAAA,EACnD;AAAA,EACA,qBAAqB,MAAM,QAAQ;AAC/B,SAAK,wBAAwB,IAAI,IAAI;AAAA,EACzC;AAAA,EACA,KAAK,SAAS,MAAM;AAChB,UAAM,cAAc,MAAM,QAAQ,IAAI,IAAI,OAAO,CAAC,MAAM,GAAG,IAAI;AAC/D,gBAAY,QAAQ,CAAC,eAAe;AAChC,UAAI,WAAW,sBAAsB,YAAY;AAC7C,aAAK,OAAO,eAAe,UAAU;AAAA,MACzC;AAAA,IACJ,CAAC;AAAA,EACL;AAAA,EACA,OAAO,SAAS,MAAM;AAClB,UAAM,cAAc,MAAM,QAAQ,IAAI,IAAI,OAAO,CAAC,MAAM,GAAG,IAAI;AAC/D,gBAAY,QAAQ,CAAC,eAAe,KAAK,OAAO,iBAAiB,UAAU,CAAC;AAAA,EAChF;AAAA,EACA,IAAI,cAAc;AACd,WAAO,KAAK,OAAO,SAAS,IAAI,CAAC,YAAY,QAAQ,UAAU;AAAA,EACnE;AAAA,EACA,qCAAqC,SAAS,YAAY;AACtD,UAAM,UAAU,KAAK,OAAO,kCAAkC,SAAS,UAAU;AACjF,WAAO,UAAU,QAAQ,aAAa;AAAA,EAC1C;AAAA,EACA,YAAYH,QAAO,SAAS,QAAQ;AAChC,QAAI;AACJ,SAAK,OAAO,MAAM;AAAA;AAAA;AAAA;AAAA,KAAkB,SAASA,QAAO,MAAM;AAC1D,KAAC,KAAK,OAAO,aAAa,QAAQ,OAAO,SAAS,SAAS,GAAG,KAAK,QAAQ,SAAS,IAAI,GAAG,GAAGA,MAAK;AAAA,EACvG;AAAA,EACA,oBAAoB,YAAY,cAAc,SAAS,CAAC,GAAG;AACvD,aAAS,OAAO,OAAO,EAAE,aAAa,KAAK,GAAG,MAAM;AACpD,SAAK,OAAO,eAAe,GAAG,UAAU,KAAK,YAAY,EAAE;AAC3D,SAAK,OAAO,IAAI,YAAY,OAAO,OAAO,CAAC,GAAG,MAAM,CAAC;AACrD,SAAK,OAAO,SAAS;AAAA,EACzB;AACJ;AACA,SAAS,WAAW;AAChB,SAAO,IAAI,QAAQ,CAAC,YAAY;AAC5B,QAAI,SAAS,cAAc,WAAW;AAClC,eAAS,iBAAiB,oBAAoB,MAAM,QAAQ,CAAC;AAAA,IACjE,OACK;AACD,cAAQ;AAAA,IACZ;AAAA,EACJ,CAAC;AACL;AAEA,SAAS,wBAAwB,aAAa;AAC1C,QAAM,UAAU,iCAAiC,aAAa,SAAS;AACvE,SAAO,QAAQ,OAAO,CAAC,YAAY,oBAAoB;AACnD,WAAO,OAAO,OAAO,YAAY,6BAA6B,eAAe,CAAC;AAAA,EAClF,GAAG,CAAC,CAAC;AACT;AACA,SAAS,6BAA6B,KAAK;AACvC,SAAO;AAAA,IACH,CAAC,GAAG,GAAG,OAAO,GAAG;AAAA,MACb,MAAM;AACF,cAAM,EAAE,QAAQ,IAAI;AACpB,YAAI,QAAQ,IAAI,GAAG,GAAG;AAClB,iBAAO,QAAQ,IAAI,GAAG;AAAA,QAC1B,OACK;AACD,gBAAM,YAAY,QAAQ,iBAAiB,GAAG;AAC9C,gBAAM,IAAI,MAAM,sBAAsB,SAAS,GAAG;AAAA,QACtD;AAAA,MACJ;AAAA,IACJ;AAAA,IACA,CAAC,GAAG,GAAG,SAAS,GAAG;AAAA,MACf,MAAM;AACF,eAAO,KAAK,QAAQ,OAAO,GAAG;AAAA,MAClC;AAAA,IACJ;AAAA,IACA,CAAC,MAAM,WAAW,GAAG,CAAC,OAAO,GAAG;AAAA,MAC5B,MAAM;AACF,eAAO,KAAK,QAAQ,IAAI,GAAG;AAAA,MAC/B;AAAA,IACJ;AAAA,EACJ;AACJ;AAEA,SAAS,yBAAyB,aAAa;AAC3C,QAAM,UAAU,iCAAiC,aAAa,SAAS;AACvE,SAAO,QAAQ,OAAO,CAAC,YAAY,qBAAqB;AACpD,WAAO,OAAO,OAAO,YAAY,8BAA8B,gBAAgB,CAAC;AAAA,EACpF,GAAG,CAAC,CAAC;AACT;AACA,SAAS,oBAAoB,YAAY,SAAS,YAAY;AAC1D,SAAO,WAAW,YAAY,qCAAqC,SAAS,UAAU;AAC1F;AACA,SAAS,qCAAqC,YAAY,SAAS,YAAY;AAC3E,MAAI,mBAAmB,oBAAoB,YAAY,SAAS,UAAU;AAC1E,MAAI;AACA,WAAO;AACX,aAAW,YAAY,OAAO,6CAA6C,SAAS,UAAU;AAC9F,qBAAmB,oBAAoB,YAAY,SAAS,UAAU;AACtE,MAAI;AACA,WAAO;AACf;AACA,SAAS,8BAA8B,MAAM;AACzC,QAAM,gBAAgB,kBAAkB,IAAI;AAC5C,SAAO;AAAA,IACH,CAAC,GAAG,aAAa,QAAQ,GAAG;AAAA,MACxB,MAAM;AACF,cAAM,gBAAgB,KAAK,QAAQ,KAAK,IAAI;AAC5C,cAAM,WAAW,KAAK,QAAQ,yBAAyB,IAAI;AAC3D,YAAI,eAAe;AACf,gBAAM,mBAAmB,qCAAqC,MAAM,eAAe,IAAI;AACvF,cAAI;AACA,mBAAO;AACX,gBAAM,IAAI,MAAM,gEAAgE,IAAI,mCAAmC,KAAK,UAAU,GAAG;AAAA,QAC7I;AACA,cAAM,IAAI,MAAM,2BAA2B,IAAI,0BAA0B,KAAK,UAAU,uEAAuE,QAAQ,IAAI;AAAA,MAC/K;AAAA,IACJ;AAAA,IACA,CAAC,GAAG,aAAa,SAAS,GAAG;AAAA,MACzB,MAAM;AACF,cAAM,UAAU,KAAK,QAAQ,QAAQ,IAAI;AACzC,YAAI,QAAQ,SAAS,GAAG;AACpB,iBAAO,QACF,IAAI,CAAC,kBAAkB;AACxB,kBAAM,mBAAmB,qCAAqC,MAAM,eAAe,IAAI;AACvF,gBAAI;AACA,qBAAO;AACX,oBAAQ,KAAK,gEAAgE,IAAI,mCAAmC,KAAK,UAAU,KAAK,aAAa;AAAA,UACzJ,CAAC,EACI,OAAO,CAAC,eAAe,UAAU;AAAA,QAC1C;AACA,eAAO,CAAC;AAAA,MACZ;AAAA,IACJ;AAAA,IACA,CAAC,GAAG,aAAa,eAAe,GAAG;AAAA,MAC/B,MAAM;AACF,cAAM,gBAAgB,KAAK,QAAQ,KAAK,IAAI;AAC5C,cAAM,WAAW,KAAK,QAAQ,yBAAyB,IAAI;AAC3D,YAAI,eAAe;AACf,iBAAO;AAAA,QACX,OACK;AACD,gBAAM,IAAI,MAAM,2BAA2B,IAAI,0BAA0B,KAAK,UAAU,uEAAuE,QAAQ,IAAI;AAAA,QAC/K;AAAA,MACJ;AAAA,IACJ;AAAA,IACA,CAAC,GAAG,aAAa,gBAAgB,GAAG;AAAA,MAChC,MAAM;AACF,eAAO,KAAK,QAAQ,QAAQ,IAAI;AAAA,MACpC;AAAA,IACJ;AAAA,IACA,CAAC,MAAM,WAAW,aAAa,CAAC,QAAQ,GAAG;AAAA,MACvC,MAAM;AACF,eAAO,KAAK,QAAQ,IAAI,IAAI;AAAA,MAChC;AAAA,IACJ;AAAA,EACJ;AACJ;AAEA,SAAS,yBAAyB,aAAa;AAC3C,QAAM,UAAU,iCAAiC,aAAa,SAAS;AACvE,SAAO,QAAQ,OAAO,CAAC,YAAY,qBAAqB;AACpD,WAAO,OAAO,OAAO,YAAY,8BAA8B,gBAAgB,CAAC;AAAA,EACpF,GAAG,CAAC,CAAC;AACT;AACA,SAAS,8BAA8B,MAAM;AACzC,SAAO;AAAA,IACH,CAAC,GAAG,IAAI,QAAQ,GAAG;AAAA,MACf,MAAM;AACF,cAAM,SAAS,KAAK,QAAQ,KAAK,IAAI;AACrC,YAAI,QAAQ;AACR,iBAAO;AAAA,QACX,OACK;AACD,gBAAM,IAAI,MAAM,2BAA2B,IAAI,UAAU,KAAK,UAAU,cAAc;AAAA,QAC1F;AAAA,MACJ;AAAA,IACJ;AAAA,IACA,CAAC,GAAG,IAAI,SAAS,GAAG;AAAA,MAChB,MAAM;AACF,eAAO,KAAK,QAAQ,QAAQ,IAAI;AAAA,MACpC;AAAA,IACJ;AAAA,IACA,CAAC,MAAM,WAAW,IAAI,CAAC,QAAQ,GAAG;AAAA,MAC9B,MAAM;AACF,eAAO,KAAK,QAAQ,IAAI,IAAI;AAAA,MAChC;AAAA,IACJ;AAAA,EACJ;AACJ;AAEA,SAAS,wBAAwB,aAAa;AAC1C,QAAM,uBAAuB,iCAAiC,aAAa,QAAQ;AACnF,QAAM,wBAAwB;AAAA,IAC1B,oBAAoB;AAAA,MAChB,MAAM;AACF,eAAO,qBAAqB,OAAO,CAAC,QAAQ,wBAAwB;AAChE,gBAAM,kBAAkB,yBAAyB,qBAAqB,KAAK,UAAU;AACrF,gBAAM,gBAAgB,KAAK,KAAK,uBAAuB,gBAAgB,GAAG;AAC1E,iBAAO,OAAO,OAAO,QAAQ,EAAE,CAAC,aAAa,GAAG,gBAAgB,CAAC;AAAA,QACrE,GAAG,CAAC,CAAC;AAAA,MACT;AAAA,IACJ;AAAA,EACJ;AACA,SAAO,qBAAqB,OAAO,CAAC,YAAY,wBAAwB;AACpE,WAAO,OAAO,OAAO,YAAY,iCAAiC,mBAAmB,CAAC;AAAA,EAC1F,GAAG,qBAAqB;AAC5B;AACA,SAAS,iCAAiC,qBAAqB,YAAY;AACvE,QAAM,aAAa,yBAAyB,qBAAqB,UAAU;AAC3E,QAAM,EAAE,KAAK,MAAM,QAAQ,MAAM,QAAQ,MAAM,IAAI;AACnD,SAAO;AAAA,IACH,CAAC,IAAI,GAAG;AAAA,MACJ,MAAM;AACF,cAAM,QAAQ,KAAK,KAAK,IAAI,GAAG;AAC/B,YAAI,UAAU,MAAM;AAChB,iBAAO,KAAK,KAAK;AAAA,QACrB,OACK;AACD,iBAAO,WAAW;AAAA,QACtB;AAAA,MACJ;AAAA,MACA,IAAI,OAAO;AACP,YAAI,UAAU,QAAW;AACrB,eAAK,KAAK,OAAO,GAAG;AAAA,QACxB,OACK;AACD,eAAK,KAAK,IAAI,KAAK,MAAM,KAAK,CAAC;AAAA,QACnC;AAAA,MACJ;AAAA,IACJ;AAAA,IACA,CAAC,MAAM,WAAW,IAAI,CAAC,EAAE,GAAG;AAAA,MACxB,MAAM;AACF,eAAO,KAAK,KAAK,IAAI,GAAG,KAAK,WAAW;AAAA,MAC5C;AAAA,IACJ;AAAA,EACJ;AACJ;AACA,SAAS,yBAAyB,CAAC,OAAO,cAAc,GAAG,YAAY;AACnE,SAAO,yCAAyC;AAAA,IAC5C;AAAA,IACA;AAAA,IACA;AAAA,EACJ,CAAC;AACL;AACA,SAAS,uBAAuB,UAAU;AACtC,UAAQ,UAAU;AAAA,IACd,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,EACf;AACJ;AACA,SAAS,sBAAsB,cAAc;AACzC,UAAQ,OAAO,cAAc;AAAA,IACzB,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,EACf;AACA,MAAI,MAAM,QAAQ,YAAY;AAC1B,WAAO;AACX,MAAI,OAAO,UAAU,SAAS,KAAK,YAAY,MAAM;AACjD,WAAO;AACf;AACA,SAAS,qBAAqB,SAAS;AACnC,QAAM,EAAE,YAAY,OAAO,WAAW,IAAI;AAC1C,QAAM,UAAU,YAAY,WAAW,IAAI;AAC3C,QAAM,aAAa,YAAY,WAAW,OAAO;AACjD,QAAM,aAAa,WAAW;AAC9B,QAAM,WAAW,WAAW,CAAC;AAC7B,QAAM,cAAc,CAAC,WAAW;AAChC,QAAM,iBAAiB,uBAAuB,WAAW,IAAI;AAC7D,QAAM,uBAAuB,sBAAsB,QAAQ,WAAW,OAAO;AAC7E,MAAI;AACA,WAAO;AACX,MAAI;AACA,WAAO;AACX,MAAI,mBAAmB,sBAAsB;AACzC,UAAM,eAAe,aAAa,GAAG,UAAU,IAAI,KAAK,KAAK;AAC7D,UAAM,IAAI,MAAM,uDAAuD,YAAY,kCAAkC,cAAc,qCAAqC,WAAW,OAAO,iBAAiB,oBAAoB,IAAI;AAAA,EACvO;AACA,MAAI;AACA,WAAO;AACf;AACA,SAAS,yBAAyB,SAAS;AACvC,QAAM,EAAE,YAAY,OAAO,eAAe,IAAI;AAC9C,QAAM,aAAa,EAAE,YAAY,OAAO,YAAY,eAAe;AACnE,QAAM,iBAAiB,qBAAqB,UAAU;AACtD,QAAM,uBAAuB,sBAAsB,cAAc;AACjE,QAAM,mBAAmB,uBAAuB,cAAc;AAC9D,QAAM,OAAO,kBAAkB,wBAAwB;AACvD,MAAI;AACA,WAAO;AACX,QAAM,eAAe,aAAa,GAAG,UAAU,IAAI,cAAc,KAAK;AACtE,QAAM,IAAI,MAAM,uBAAuB,YAAY,UAAU,KAAK,SAAS;AAC/E;AACA,SAAS,0BAA0B,gBAAgB;AAC/C,QAAM,WAAW,uBAAuB,cAAc;AACtD,MAAI;AACA,WAAO,oBAAoB,QAAQ;AACvC,QAAM,aAAa,YAAY,gBAAgB,SAAS;AACxD,QAAM,UAAU,YAAY,gBAAgB,MAAM;AAClD,QAAM,aAAa;AACnB,MAAI;AACA,WAAO,WAAW;AACtB,MAAI,SAAS;AACT,UAAM,EAAE,KAAK,IAAI;AACjB,UAAM,mBAAmB,uBAAuB,IAAI;AACpD,QAAI;AACA,aAAO,oBAAoB,gBAAgB;AAAA,EACnD;AACA,SAAO;AACX;AACA,SAAS,yCAAyC,SAAS;AACvD,QAAM,EAAE,OAAO,eAAe,IAAI;AAClC,QAAM,MAAM,GAAG,UAAU,KAAK,CAAC;AAC/B,QAAM,OAAO,yBAAyB,OAAO;AAC7C,SAAO;AAAA,IACH;AAAA,IACA;AAAA,IACA,MAAM,SAAS,GAAG;AAAA,IAClB,IAAI,eAAe;AACf,aAAO,0BAA0B,cAAc;AAAA,IACnD;AAAA,IACA,IAAI,wBAAwB;AACxB,aAAO,sBAAsB,cAAc,MAAM;AAAA,IACrD;AAAA,IACA,QAAQ,QAAQ,IAAI;AAAA,IACpB,QAAQ,QAAQ,IAAI,KAAK,QAAQ;AAAA,EACrC;AACJ;AACA,IAAM,sBAAsB;AAAA,EACxB,IAAI,QAAQ;AACR,WAAO,CAAC;AAAA,EACZ;AAAA,EACA,SAAS;AAAA,EACT,QAAQ;AAAA,EACR,IAAI,SAAS;AACT,WAAO,CAAC;AAAA,EACZ;AAAA,EACA,QAAQ;AACZ;AACA,IAAM,UAAU;AAAA,EACZ,MAAM,OAAO;AACT,UAAM,QAAQ,KAAK,MAAM,KAAK;AAC9B,QAAI,CAAC,MAAM,QAAQ,KAAK,GAAG;AACvB,YAAM,IAAI,UAAU,yDAAyD,KAAK,cAAc,sBAAsB,KAAK,CAAC,GAAG;AAAA,IACnI;AACA,WAAO;AAAA,EACX;AAAA,EACA,QAAQ,OAAO;AACX,WAAO,EAAE,SAAS,OAAO,OAAO,KAAK,EAAE,YAAY,KAAK;AAAA,EAC5D;AAAA,EACA,OAAO,OAAO;AACV,WAAO,OAAO,MAAM,QAAQ,MAAM,EAAE,CAAC;AAAA,EACzC;AAAA,EACA,OAAO,OAAO;AACV,UAAM,SAAS,KAAK,MAAM,KAAK;AAC/B,QAAI,WAAW,QAAQ,OAAO,UAAU,YAAY,MAAM,QAAQ,MAAM,GAAG;AACvE,YAAM,IAAI,UAAU,0DAA0D,KAAK,cAAc,sBAAsB,MAAM,CAAC,GAAG;AAAA,IACrI;AACA,WAAO;AAAA,EACX;AAAA,EACA,OAAO,OAAO;AACV,WAAO;AAAA,EACX;AACJ;AACA,IAAM,UAAU;AAAA,EACZ,SAAS;AAAA,EACT,OAAO;AAAA,EACP,QAAQ;AACZ;AACA,SAAS,UAAU,OAAO;AACtB,SAAO,KAAK,UAAU,KAAK;AAC/B;AACA,SAAS,YAAY,OAAO;AACxB,SAAO,GAAG,KAAK;AACnB;AAEA,IAAM,aAAN,MAAiB;AAAA,EACb,YAAY,SAAS;AACjB,SAAK,UAAU;AAAA,EACnB;AAAA,EACA,WAAW,aAAa;AACpB,WAAO;AAAA,EACX;AAAA,EACA,OAAO,UAAU,aAAa,cAAc;AACxC;AAAA,EACJ;AAAA,EACA,IAAI,cAAc;AACd,WAAO,KAAK,QAAQ;AAAA,EACxB;AAAA,EACA,IAAI,QAAQ;AACR,WAAO,KAAK,QAAQ;AAAA,EACxB;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,MAAM;AAAA,EACtB;AAAA,EACA,IAAI,aAAa;AACb,WAAO,KAAK,MAAM;AAAA,EACtB;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,MAAM;AAAA,EACtB;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,MAAM;AAAA,EACtB;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,MAAM;AAAA,EACtB;AAAA,EACA,IAAI,OAAO;AACP,WAAO,KAAK,MAAM;AAAA,EACtB;AAAA,EACA,aAAa;AAAA,EACb;AAAA,EACA,UAAU;AAAA,EACV;AAAA,EACA,aAAa;AAAA,EACb;AAAA,EACA,SAAS,WAAW,EAAE,SAAS,KAAK,SAAS,SAAS,CAAC,GAAG,SAAS,KAAK,YAAY,UAAU,MAAM,aAAa,KAAM,IAAI,CAAC,GAAG;AAC3H,UAAM,OAAO,SAAS,GAAG,MAAM,IAAI,SAAS,KAAK;AACjD,UAAM,QAAQ,IAAI,YAAY,MAAM,EAAE,QAAQ,SAAS,WAAW,CAAC;AACnE,WAAO,cAAc,KAAK;AAC1B,WAAO;AAAA,EACX;AACJ;AACA,WAAW,YAAY;AAAA,EACnB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACJ;AACA,WAAW,UAAU,CAAC;AACtB,WAAW,UAAU,CAAC;AACtB,WAAW,SAAS,CAAC;;;AC9/ErB,IAAM,cAAc,YAAY,MAAM;AAGtC,YAAY,QAAQ;AACpB,OAAO,WAAW;;;ACNX,IAAI,QAAQ;AAAA,EACf;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACJ;AACO,IAAI,WAAW;AAAA,EAClB,UAAU,CAAC;AAAA,EACX,YAAY;AAAA,EACZ,qBAAqB;AAAA,EACrB,WAAW;AAAA,EACX,UAAU;AAAA,EACV,eAAe;AAAA,EACf,SAAS,OAAO,WAAW,YACvB,OAAO,UAAU,UAAU,QAAQ,MAAM,MAAM;AAAA,EACnD,gBAAgB;AAAA,EAChB,qBAAqB;AAAA,EACrB,YAAY;AAAA,EACZ,eAAe;AAAA,EACf,aAAa;AAAA,EACb,YAAY;AAAA,EACZ,aAAa;AAAA,EACb,eAAe;AAAA,EACf,gBAAgB;AAAA,EAChB,SAAS,CAAC;AAAA,EACV,eAAe;AAAA,EACf,eAAe;AAAA,EACf,YAAY;AAAA,EACZ,cAAc,SAAU,KAAK;AACzB,WAAO,OAAO,YAAY,eAAe,QAAQ,KAAK,GAAG;AAAA,EAC7D;AAAA,EACA,SAAS,SAAU,WAAW;AAC1B,QAAI,OAAO,IAAI,KAAK,UAAU,QAAQ,CAAC;AACvC,SAAK,SAAS,GAAG,GAAG,GAAG,CAAC;AACxB,SAAK,QAAQ,KAAK,QAAQ,IAAI,KAAM,KAAK,OAAO,IAAI,KAAK,CAAE;AAC3D,QAAI,QAAQ,IAAI,KAAK,KAAK,YAAY,GAAG,GAAG,CAAC;AAC7C,WAAQ,IACJ,KAAK,QAAQ,KAAK,QAAQ,IAAI,MAAM,QAAQ,KAAK,QAC7C,KACE,MAAM,OAAO,IAAI,KAAK,KACxB,CAAC;AAAA,EACb;AAAA,EACA,eAAe;AAAA,EACf,sBAAsB,CAAC;AAAA,EACvB,QAAQ;AAAA,EACR,QAAQ;AAAA,EACR,iBAAiB;AAAA,EACjB,MAAM;AAAA,EACN,mBAAmB;AAAA,EACnB,WAAW;AAAA,EACX,YAAY;AAAA,EACZ,KAAK,oBAAI,KAAK;AAAA,EACd,UAAU,CAAC;AAAA,EACX,SAAS,CAAC;AAAA,EACV,aAAa,CAAC;AAAA,EACd,WAAW,CAAC;AAAA,EACZ,WAAW,CAAC;AAAA,EACZ,eAAe,CAAC;AAAA,EAChB,QAAQ,CAAC;AAAA,EACT,eAAe,CAAC;AAAA,EAChB,SAAS,CAAC;AAAA,EACV,eAAe,CAAC;AAAA,EAChB,cAAc,CAAC;AAAA,EACf,uBAAuB,CAAC;AAAA,EACxB,SAAS,CAAC;AAAA,EACV,UAAU;AAAA,EACV,iBAAiB;AAAA,EACjB,WAAW;AAAA,EACX,uBAAuB;AAAA,EACvB,YAAY;AAAA,EACZ,QAAQ;AAAA,EACR,WAAW;AAAA,EACX,aAAa;AAAA,EACb,MAAM;AACV;;;AClFO,IAAI,UAAU;AAAA,EACjB,UAAU;AAAA,IACN,WAAW,CAAC,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,KAAK;AAAA,IAC3D,UAAU;AAAA,MACN;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,QAAQ;AAAA,IACJ,WAAW;AAAA,MACP;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACJ;AAAA,IACA,UAAU;AAAA,MACN;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,aAAa,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,EAAE;AAAA,EAC5D,gBAAgB;AAAA,EAChB,SAAS,SAAU,KAAK;AACpB,QAAI,IAAI,MAAM;AACd,QAAI,IAAI,KAAK,IAAI;AACb,aAAO;AACX,YAAQ,IAAI,IAAI;AAAA,MACZ,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX;AACI,eAAO;AAAA,IACf;AAAA,EACJ;AAAA,EACA,gBAAgB;AAAA,EAChB,kBAAkB;AAAA,EAClB,aAAa;AAAA,EACb,aAAa;AAAA,EACb,MAAM,CAAC,MAAM,IAAI;AAAA,EACjB,eAAe;AAAA,EACf,gBAAgB;AAAA,EAChB,eAAe;AAAA,EACf,iBAAiB;AAAA,EACjB,WAAW;AACf;AACA,IAAO,kBAAQ;;;ACvER,IAAI,MAAM,SAAU,QAAQ,QAAQ;AACvC,MAAI,WAAW,QAAQ;AAAE,aAAS;AAAA,EAAG;AACrC,UAAQ,QAAQ,QAAQ,MAAM,SAAS,EAAE;AAC7C;AACO,IAAI,MAAM,SAAU,MAAM;AAAE,SAAQ,SAAS,OAAO,IAAI;AAAI;AAC5D,SAASK,UAAS,IAAI,MAAM;AAC/B,MAAI;AACJ,SAAO,WAAY;AACf,QAAI,QAAQ;AACZ,QAAI,OAAO;AACX,iBAAa,CAAC;AACd,QAAI,WAAW,WAAY;AAAE,aAAO,GAAG,MAAM,OAAO,IAAI;AAAA,IAAG,GAAG,IAAI;AAAA,EACtE;AACJ;AACO,IAAI,WAAW,SAAU,KAAK;AACjC,SAAO,eAAe,QAAQ,MAAM,CAAC,GAAG;AAC5C;;;AChBO,SAAS,YAAY,MAAM,WAAW,MAAM;AAC/C,MAAI,SAAS;AACT,WAAO,KAAK,UAAU,IAAI,SAAS;AACvC,OAAK,UAAU,OAAO,SAAS;AACnC;AACO,SAAS,cAAc,KAAK,WAAW,SAAS;AACnD,MAAI,IAAI,OAAO,SAAS,cAAc,GAAG;AACzC,cAAY,aAAa;AACzB,YAAU,WAAW;AACrB,IAAE,YAAY;AACd,MAAI,YAAY;AACZ,MAAE,cAAc;AACpB,SAAO;AACX;AACO,SAAS,UAAU,MAAM;AAC5B,SAAO,KAAK;AACR,SAAK,YAAY,KAAK,UAAU;AACxC;AACO,SAAS,WAAW,MAAM,WAAW;AACxC,MAAI,UAAU,IAAI;AACd,WAAO;AAAA,WACF,KAAK;AACV,WAAO,WAAW,KAAK,YAAY,SAAS;AAChD,SAAO;AACX;AACO,SAAS,kBAAkB,gBAAgB,MAAM;AACpD,MAAI,UAAU,cAAc,OAAO,iBAAiB,GAAG,WAAW,cAAc,SAAS,cAAc,cAAc,GAAG,UAAU,cAAc,QAAQ,SAAS,GAAG,YAAY,cAAc,QAAQ,WAAW;AACjN,MAAI,UAAU,UAAU,QAAQ,UAAU,MAAM,IAAI;AAChD,aAAS,OAAO;AAAA,EACpB,OACK;AACD,aAAS,OAAO;AAChB,aAAS,UAAU;AAAA,EACvB;AACA,MAAI,SAAS;AACT,aAAS,OAAO;AACZ,eAAS,aAAa,KAAK,KAAK,GAAG,CAAC;AAC5C,UAAQ,YAAY,QAAQ;AAC5B,UAAQ,YAAY,OAAO;AAC3B,UAAQ,YAAY,SAAS;AAC7B,SAAO;AACX;AACO,SAAS,eAAe,OAAO;AAClC,MAAI;AACA,QAAI,OAAO,MAAM,iBAAiB,YAAY;AAC1C,UAAI,OAAO,MAAM,aAAa;AAC9B,aAAO,KAAK,CAAC;AAAA,IACjB;AACA,WAAO,MAAM;AAAA,EACjB,SACOC,QAAO;AACV,WAAO,MAAM;AAAA,EACjB;AACJ;;;ACpDA,IAAI,YAAY,WAAY;AAAE,SAAO;AAAW;AACzC,IAAI,aAAa,SAAU,aAAa,WAAW,QAAQ;AAAE,SAAO,OAAO,OAAO,YAAY,cAAc,UAAU,EAAE,WAAW;AAAG;AACtI,IAAI,YAAY;AAAA,EACnB,GAAG;AAAA,EACH,GAAG,SAAU,SAAS,WAAW,QAAQ;AACrC,YAAQ,SAAS,OAAO,OAAO,SAAS,QAAQ,SAAS,CAAC;AAAA,EAC9D;AAAA,EACA,GAAG,SAAU,SAAS,MAAM;AACxB,YAAQ,UAAU,QAAQ,SAAS,KAAK,KAAK,KAAK,KAAK,WAAW,IAAI,CAAC;AAAA,EAC3E;AAAA,EACA,GAAG,SAAU,SAAS,MAAM;AACxB,YAAQ,SAAS,WAAW,IAAI,CAAC;AAAA,EACrC;AAAA,EACA,GAAG,SAAU,SAAS,KAAK;AACvB,YAAQ,QAAQ,WAAW,GAAG,CAAC;AAAA,EACnC;AAAA,EACA,GAAG,SAAU,SAAS,MAAM,QAAQ;AAChC,YAAQ,SAAU,QAAQ,SAAS,IAAI,KACnC,KAAK,IAAI,IAAI,OAAO,OAAO,KAAK,CAAC,GAAG,GAAG,EAAE,KAAK,IAAI,CAAC,CAAC;AAAA,EAC5D;AAAA,EACA,GAAG,SAAU,SAAS,YAAY,QAAQ;AACtC,YAAQ,SAAS,OAAO,OAAO,UAAU,QAAQ,UAAU,CAAC;AAAA,EAChE;AAAA,EACA,GAAG,SAAU,SAAS,SAAS;AAC3B,YAAQ,WAAW,WAAW,OAAO,CAAC;AAAA,EAC1C;AAAA,EACA,GAAG,SAAU,GAAG,aAAa;AAAE,WAAO,IAAI,KAAK,WAAW,WAAW,IAAI,GAAI;AAAA,EAAG;AAAA,EAChF,GAAG,SAAU,SAAS,SAAS,QAAQ;AACnC,QAAI,aAAa,SAAS,OAAO;AACjC,QAAI,OAAO,IAAI,KAAK,QAAQ,YAAY,GAAG,GAAG,KAAK,aAAa,KAAK,GAAG,GAAG,GAAG,GAAG,CAAC;AAClF,SAAK,QAAQ,KAAK,QAAQ,IAAI,KAAK,OAAO,IAAI,OAAO,cAAc;AACnE,WAAO;AAAA,EACX;AAAA,EACA,GAAG,SAAU,SAAS,MAAM;AACxB,YAAQ,YAAY,WAAW,IAAI,CAAC;AAAA,EACxC;AAAA,EACA,GAAG,SAAU,GAAG,SAAS;AAAE,WAAO,IAAI,KAAK,OAAO;AAAA,EAAG;AAAA,EACrD,GAAG,SAAU,SAAS,KAAK;AACvB,YAAQ,QAAQ,WAAW,GAAG,CAAC;AAAA,EACnC;AAAA,EACA,GAAG,SAAU,SAAS,MAAM;AACxB,YAAQ,UAAU,QAAQ,SAAS,KAAK,KAAK,KAAK,KAAK,WAAW,IAAI,CAAC;AAAA,EAC3E;AAAA,EACA,GAAG,SAAU,SAAS,SAAS;AAC3B,YAAQ,WAAW,WAAW,OAAO,CAAC;AAAA,EAC1C;AAAA,EACA,GAAG,SAAU,SAAS,KAAK;AACvB,YAAQ,QAAQ,WAAW,GAAG,CAAC;AAAA,EACnC;AAAA,EACA,GAAG;AAAA,EACH,GAAG,SAAU,SAAS,OAAO;AACzB,YAAQ,SAAS,WAAW,KAAK,IAAI,CAAC;AAAA,EAC1C;AAAA,EACA,GAAG,SAAU,SAAS,OAAO;AACzB,YAAQ,SAAS,WAAW,KAAK,IAAI,CAAC;AAAA,EAC1C;AAAA,EACA,GAAG,SAAU,SAAS,SAAS;AAC3B,YAAQ,WAAW,WAAW,OAAO,CAAC;AAAA,EAC1C;AAAA,EACA,GAAG,SAAU,GAAG,iBAAiB;AAC7B,WAAO,IAAI,KAAK,WAAW,eAAe,CAAC;AAAA,EAC/C;AAAA,EACA,GAAG;AAAA,EACH,GAAG,SAAU,SAAS,MAAM;AACxB,YAAQ,YAAY,MAAO,WAAW,IAAI,CAAC;AAAA,EAC/C;AACJ;AACO,IAAI,aAAa;AAAA,EACpB,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AACP;AACO,IAAI,UAAU;AAAA,EACjB,GAAG,SAAU,MAAM;AAAE,WAAO,KAAK,YAAY;AAAA,EAAG;AAAA,EAChD,GAAG,SAAU,MAAM,QAAQ,SAAS;AAChC,WAAO,OAAO,SAAS,UAAU,QAAQ,EAAE,MAAM,QAAQ,OAAO,CAAC;AAAA,EACrE;AAAA,EACA,GAAG,SAAU,MAAM,QAAQ,SAAS;AAChC,WAAO,WAAW,QAAQ,EAAE,MAAM,QAAQ,OAAO,IAAI,GAAG,OAAO,MAAM;AAAA,EACzE;AAAA,EACA,GAAG,SAAU,MAAM,QAAQ,SAAS;AAChC,WAAO,IAAI,QAAQ,EAAE,MAAM,QAAQ,OAAO,CAAC;AAAA,EAC/C;AAAA,EACA,GAAG,SAAU,MAAM;AAAE,WAAO,IAAI,KAAK,SAAS,CAAC;AAAA,EAAG;AAAA,EAClD,GAAG,SAAU,MAAM,QAAQ;AACvB,WAAO,OAAO,YAAY,SACpB,KAAK,QAAQ,IAAI,OAAO,QAAQ,KAAK,QAAQ,CAAC,IAC9C,KAAK,QAAQ;AAAA,EACvB;AAAA,EACA,GAAG,SAAU,MAAM,QAAQ;AAAE,WAAO,OAAO,KAAK,IAAI,KAAK,SAAS,IAAI,EAAE,CAAC;AAAA,EAAG;AAAA,EAC5E,GAAG,SAAU,MAAM,QAAQ;AACvB,WAAO,WAAW,KAAK,SAAS,GAAG,MAAM,MAAM;AAAA,EACnD;AAAA,EACA,GAAG,SAAU,MAAM;AAAE,WAAO,IAAI,KAAK,WAAW,CAAC;AAAA,EAAG;AAAA,EACpD,GAAG,SAAU,MAAM;AAAE,WAAO,KAAK,QAAQ,IAAI;AAAA,EAAM;AAAA,EACnD,GAAG,SAAU,MAAM,GAAG,SAAS;AAC3B,WAAO,QAAQ,QAAQ,IAAI;AAAA,EAC/B;AAAA,EACA,GAAG,SAAU,MAAM;AAAE,WAAO,IAAI,KAAK,YAAY,GAAG,CAAC;AAAA,EAAG;AAAA,EACxD,GAAG,SAAU,MAAM;AAAE,WAAO,IAAI,KAAK,QAAQ,CAAC;AAAA,EAAG;AAAA,EACjD,GAAG,SAAU,MAAM;AAAE,WAAQ,KAAK,SAAS,IAAI,KAAK,KAAK,SAAS,IAAI,KAAK;AAAA,EAAK;AAAA,EAChF,GAAG,SAAU,MAAM;AAAE,WAAO,IAAI,KAAK,WAAW,CAAC;AAAA,EAAG;AAAA,EACpD,GAAG,SAAU,MAAM;AAAE,WAAO,KAAK,QAAQ;AAAA,EAAG;AAAA,EAC5C,GAAG,SAAU,MAAM,QAAQ;AACvB,WAAO,OAAO,SAAS,SAAS,KAAK,OAAO,CAAC;AAAA,EACjD;AAAA,EACA,GAAG,SAAU,MAAM;AAAE,WAAO,IAAI,KAAK,SAAS,IAAI,CAAC;AAAA,EAAG;AAAA,EACtD,GAAG,SAAU,MAAM;AAAE,WAAO,KAAK,SAAS,IAAI;AAAA,EAAG;AAAA,EACjD,GAAG,SAAU,MAAM;AAAE,WAAO,KAAK,WAAW;AAAA,EAAG;AAAA,EAC/C,GAAG,SAAU,MAAM;AAAE,WAAO,KAAK,QAAQ;AAAA,EAAG;AAAA,EAC5C,GAAG,SAAU,MAAM;AAAE,WAAO,KAAK,OAAO;AAAA,EAAG;AAAA,EAC3C,GAAG,SAAU,MAAM;AAAE,WAAO,OAAO,KAAK,YAAY,CAAC,EAAE,UAAU,CAAC;AAAA,EAAG;AACzE;;;AClIO,IAAI,sBAAsB,SAAU,IAAI;AAC3C,MAAI,KAAK,GAAG,QAAQC,UAAS,OAAO,SAAS,WAAW,IAAI,KAAK,GAAG,MAAM,OAAO,OAAO,SAAS,UAAU,IAAI,KAAK,GAAG,UAAU,WAAW,OAAO,SAAS,QAAQ;AACpK,SAAO,SAAU,SAAS,MAAM,gBAAgB;AAC5C,QAAI,SAAS,kBAAkB;AAC/B,QAAIA,QAAO,eAAe,UAAa,CAAC,UAAU;AAC9C,aAAOA,QAAO,WAAW,SAAS,MAAM,MAAM;AAAA,IAClD;AACA,WAAO,KACF,MAAM,EAAE,EACR,IAAI,SAAU,GAAG,GAAG,KAAK;AAC1B,aAAO,QAAQ,CAAC,KAAK,IAAI,IAAI,CAAC,MAAM,OAC9B,QAAQ,CAAC,EAAE,SAAS,QAAQA,OAAM,IAClC,MAAM,OACF,IACA;AAAA,IACd,CAAC,EACI,KAAK,EAAE;AAAA,EAChB;AACJ;AACO,IAAI,mBAAmB,SAAU,IAAI;AACxC,MAAI,KAAK,GAAG,QAAQA,UAAS,OAAO,SAAS,WAAW,IAAI,KAAK,GAAG,MAAM,OAAO,OAAO,SAAS,UAAU;AAC3G,SAAO,SAAU,MAAM,aAAa,UAAU,cAAc;AACxD,QAAI,SAAS,KAAK,CAAC;AACf,aAAO;AACX,QAAI,SAAS,gBAAgB;AAC7B,QAAI;AACJ,QAAI,WAAW;AACf,QAAI,gBAAgB;AAChB,mBAAa,IAAI,KAAK,KAAK,QAAQ,CAAC;AAAA,aAC/B,OAAO,SAAS,YACrB,KAAK,YAAY;AACjB,mBAAa,IAAI,KAAK,IAAI;AAAA,aACrB,OAAO,SAAS,UAAU;AAC/B,UAAI,SAAS,gBAAgBA,WAAU,UAAU;AACjD,UAAI,UAAU,OAAO,IAAI,EAAE,KAAK;AAChC,UAAI,YAAY,SAAS;AACrB,qBAAa,oBAAI,KAAK;AACtB,mBAAW;AAAA,MACf,WACSA,WAAUA,QAAO,WAAW;AACjC,qBAAaA,QAAO,UAAU,MAAM,MAAM;AAAA,MAC9C,WACS,KAAK,KAAK,OAAO,KACtB,OAAO,KAAK,OAAO,GAAG;AACtB,qBAAa,IAAI,KAAK,IAAI;AAAA,MAC9B,OACK;AACD,YAAI,UAAU,QAAQ,MAAM,CAAC;AAC7B,iBAAS,IAAI,GAAG,aAAa,GAAG,WAAW,IAAI,IAAI,OAAO,QAAQ,KAAK;AACnE,cAAI,QAAQ,OAAO,CAAC;AACpB,cAAI,cAAc,UAAU;AAC5B,cAAI,UAAU,OAAO,IAAI,CAAC,MAAM,QAAQ;AACxC,cAAI,WAAW,KAAK,KAAK,CAAC,SAAS;AAC/B,wBAAY,WAAW,KAAK;AAC5B,gBAAI,QAAQ,IAAI,OAAO,QAAQ,EAAE,KAAK,IAAI;AAC1C,gBAAI,UAAU,UAAU,OAAO;AAC3B,kBAAI,UAAU,MAAM,SAAS,SAAS,EAAE;AAAA,gBACpC,IAAI,UAAU,KAAK;AAAA,gBACnB,KAAK,MAAM,EAAE,UAAU;AAAA,cAC3B,CAAC;AAAA,YACL;AAAA,UACJ,WACS,CAAC;AACN,wBAAY;AAAA,QACpB;AACA,qBACI,CAACA,WAAU,CAACA,QAAO,aACb,IAAI,MAAK,oBAAI,KAAK,GAAE,YAAY,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,IACnD,IAAI,MAAK,oBAAI,KAAK,GAAE,SAAS,GAAG,GAAG,GAAG,CAAC,CAAC;AAClD,YAAI,QAAQ,SAAUC,KAAI;AACtB,cAAI,KAAKA,IAAG,IAAI,MAAMA,IAAG;AACzB,iBAAQ,aAAa,GAAG,YAAY,KAAK,MAAM,KAAK;AAAA,QACxD,CAAC;AACD,qBAAa,UAAU,aAAa;AAAA,MACxC;AAAA,IACJ;AACA,QAAI,EAAE,sBAAsB,QAAQ,CAAC,MAAM,WAAW,QAAQ,CAAC,IAAI;AAC/D,MAAAD,QAAO,aAAa,IAAI,MAAM,4BAA4B,QAAQ,CAAC;AACnE,aAAO;AAAA,IACX;AACA,QAAI,aAAa;AACb,iBAAW,SAAS,GAAG,GAAG,GAAG,CAAC;AAClC,WAAO;AAAA,EACX;AACJ;AACO,SAAS,aAAa,OAAO,OAAO,UAAU;AACjD,MAAI,aAAa,QAAQ;AAAE,eAAW;AAAA,EAAM;AAC5C,MAAI,aAAa,OAAO;AACpB,WAAQ,IAAI,KAAK,MAAM,QAAQ,CAAC,EAAE,SAAS,GAAG,GAAG,GAAG,CAAC,IACjD,IAAI,KAAK,MAAM,QAAQ,CAAC,EAAE,SAAS,GAAG,GAAG,GAAG,CAAC;AAAA,EACrD;AACA,SAAO,MAAM,QAAQ,IAAI,MAAM,QAAQ;AAC3C;AAOO,IAAI,YAAY,SAAU,IAAI,KAAK,KAAK;AAC3C,SAAO,KAAK,KAAK,IAAI,KAAK,GAAG,KAAK,KAAK,KAAK,IAAI,KAAK,GAAG;AAC5D;AACO,IAAI,gCAAgC,SAAU,OAAO,SAAS,SAAS;AAC1E,SAAO,QAAQ,OAAO,UAAU,KAAK;AACzC;AACO,IAAI,eAAe,SAAU,sBAAsB;AACtD,MAAI,QAAQ,KAAK,MAAM,uBAAuB,IAAI,GAAG,WAAW,uBAAuB,QAAQ,QAAQ;AACvG,SAAO,CAAC,OAAO,SAAS,uBAAuB,QAAQ,OAAO,UAAU,EAAE;AAC9E;AACO,IAAI,WAAW;AAAA,EAClB,KAAK;AACT;AACO,SAAS,gBAAgBE,SAAQ;AACpC,MAAI,QAAQA,QAAO;AACnB,MAAI,UAAUA,QAAO;AACrB,MAAI,UAAUA,QAAO;AACrB,MAAIA,QAAO,YAAY,QAAW;AAC9B,QAAI,UAAUA,QAAO,QAAQ,SAAS;AACtC,QAAI,aAAaA,QAAO,QAAQ,WAAW;AAC3C,QAAI,aAAaA,QAAO,QAAQ,WAAW;AAC3C,QAAI,QAAQ,SAAS;AACjB,cAAQ;AAAA,IACZ;AACA,QAAI,UAAU,WAAW,UAAU,YAAY;AAC3C,gBAAU;AAAA,IACd;AACA,QAAI,UAAU,WAAW,YAAY,cAAc,UAAU;AACzD,gBAAUA,QAAO,QAAQ,WAAW;AAAA,EAC5C;AACA,MAAIA,QAAO,YAAY,QAAW;AAC9B,QAAI,QAAQA,QAAO,QAAQ,SAAS;AACpC,QAAI,aAAaA,QAAO,QAAQ,WAAW;AAC3C,YAAQ,KAAK,IAAI,OAAO,KAAK;AAC7B,QAAI,UAAU;AACV,gBAAU,KAAK,IAAI,YAAY,OAAO;AAC1C,QAAI,UAAU,SAAS,YAAY;AAC/B,gBAAUA,QAAO,QAAQ,WAAW;AAAA,EAC5C;AACA,SAAO,EAAE,OAAc,SAAkB,QAAiB;AAC9D;;;AC7IA,IAAI,OAAO,OAAO,WAAW,YAAY;AACrC,SAAO,SAAS,SAAU,QAAQ;AAC9B,QAAI,OAAO,CAAC;AACZ,aAAS,KAAK,GAAG,KAAK,UAAU,QAAQ,MAAM;AAC1C,WAAK,KAAK,CAAC,IAAI,UAAU,EAAE;AAAA,IAC/B;AACA,QAAI,CAAC,QAAQ;AACT,YAAM,UAAU,4CAA4C;AAAA,IAChE;AACA,QAAI,UAAU,SAAUC,SAAQ;AAC5B,UAAIA,SAAQ;AACR,eAAO,KAAKA,OAAM,EAAE,QAAQ,SAAU,KAAK;AAAE,iBAAQ,OAAO,GAAG,IAAIA,QAAO,GAAG;AAAA,QAAI,CAAC;AAAA,MACtF;AAAA,IACJ;AACA,aAAS,KAAK,GAAG,SAAS,MAAM,KAAK,OAAO,QAAQ,MAAM;AACtD,UAAI,SAAS,OAAO,EAAE;AACtB,cAAQ,MAAM;AAAA,IAClB;AACA,WAAO;AAAA,EACX;AACJ;;;ACrBA,IAAI,WAAsC,WAAY;AAClD,aAAW,OAAO,UAAU,SAAS,GAAG;AACpC,aAAS,GAAG,IAAI,GAAG,IAAI,UAAU,QAAQ,IAAI,GAAG,KAAK;AACjD,UAAI,UAAU,CAAC;AACf,eAAS,KAAK,EAAG,KAAI,OAAO,UAAU,eAAe,KAAK,GAAG,CAAC;AAC1D,UAAE,CAAC,IAAI,EAAE,CAAC;AAAA,IAClB;AACA,WAAO;AAAA,EACX;AACA,SAAO,SAAS,MAAM,MAAM,SAAS;AACzC;AACA,IAAI,iBAAkD,WAAY;AAC9D,WAAS,IAAI,GAAG,IAAI,GAAG,KAAK,UAAU,QAAQ,IAAI,IAAI,IAAK,MAAK,UAAU,CAAC,EAAE;AAC7E,WAAS,IAAI,MAAM,CAAC,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI;AACzC,aAAS,IAAI,UAAU,CAAC,GAAG,IAAI,GAAG,KAAK,EAAE,QAAQ,IAAI,IAAI,KAAK;AAC1D,QAAE,CAAC,IAAI,EAAE,CAAC;AAClB,SAAO;AACX;AAQA,IAAI,sBAAsB;AAC1B,SAAS,kBAAkB,SAAS,gBAAgB;AAChD,MAAIC,QAAO;AAAA,IACP,QAAQ,SAAS,SAAS,CAAC,GAAG,QAAc,GAAG,UAAU,aAAa;AAAA,IACtE,MAAM;AAAA,EACV;AACA,EAAAA,MAAK,YAAY,iBAAiB,EAAE,QAAQA,MAAK,QAAQ,MAAMA,MAAK,KAAK,CAAC;AAC1E,EAAAA,MAAK,YAAY,CAAC;AAClB,EAAAA,MAAK,iBAAiB,CAAC;AACvB,EAAAA,MAAK,gBAAgB,CAAC;AACtB,EAAAA,MAAK,QAAQ;AACb,EAAAA,MAAK,oBAAoB;AACzB,EAAAA,MAAK,oBAAoB;AACzB,EAAAA,MAAK,cAAc;AACnB,EAAAA,MAAK,aAAa;AAClB,EAAAA,MAAK,QAAQ;AACb,EAAAA,MAAK,QAAQ;AACb,EAAAA,MAAK,cAAc;AACnB,EAAAA,MAAK,iBAAiB;AACtB,EAAAA,MAAK,YAAY;AACjB,EAAAA,MAAK,UAAUC;AACf,EAAAD,MAAK,YAAY;AACjB,EAAAA,MAAK,aAAa;AAClB,EAAAA,MAAK,cAAc;AACnB,EAAAA,MAAK,OAAO;AACZ,EAAAA,MAAK,SAAS;AACd,EAAAA,MAAK,MAAM;AACX,EAAAA,MAAK,UAAU;AACf,EAAAA,MAAK,SAAS;AACd,WAAS,uBAAuB;AAC5B,IAAAA,MAAK,QAAQ;AAAA,MACT,gBAAgB,SAAU,OAAO,IAAI;AACjC,YAAI,UAAU,QAAQ;AAAE,kBAAQA,MAAK;AAAA,QAAc;AACnD,YAAI,OAAO,QAAQ;AAAE,eAAKA,MAAK;AAAA,QAAa;AAC5C,YAAI,UAAU,MAAO,KAAK,MAAM,KAAK,KAAK,QAAQ,KAAM,KAAK,QAAQ;AACjE,iBAAO;AACX,eAAOA,MAAK,KAAK,YAAY,KAAK;AAAA,MACtC;AAAA,IACJ;AAAA,EACJ;AACA,WAAS,OAAO;AACZ,IAAAA,MAAK,UAAUA,MAAK,QAAQ;AAC5B,IAAAA,MAAK,SAAS;AACd,gBAAY;AACZ,gBAAY;AACZ,gBAAY;AACZ,eAAW;AACX,yBAAqB;AACrB,QAAI,CAACA,MAAK;AACN,YAAM;AACV,eAAW;AACX,QAAIA,MAAK,cAAc,UAAUA,MAAK,OAAO,YAAY;AACrD,UAAIA,MAAK,OAAO,YAAY;AACxB,yBAAiBA,MAAK,OAAO,aAAaA,MAAK,wBAAwB,MAAS;AAAA,MACpF;AACA,kBAAY,KAAK;AAAA,IACrB;AACA,qBAAiB;AACjB,QAAI,WAAW,iCAAiC,KAAK,UAAU,SAAS;AACxE,QAAI,CAACA,MAAK,YAAY,UAAU;AAC5B,uBAAiB;AAAA,IACrB;AACA,iBAAa,SAAS;AAAA,EAC1B;AACA,WAAS,0BAA0B;AAC/B,QAAI;AACJ,aAAU,KAAKA,MAAK,uBAAuB,QAAQ,OAAO,SAAS,SAAS,GAAG,YAAY,GACtF,iBAAiB,SAAS;AAAA,EACnC;AACA,WAAS,eAAe,IAAI;AACxB,WAAO,GAAG,KAAKA,KAAI;AAAA,EACvB;AACA,WAAS,mBAAmB;AACxB,QAAIE,UAASF,MAAK;AAClB,QAAIE,QAAO,gBAAgB,SAASA,QAAO,eAAe,GAAG;AACzD;AAAA,IACJ,WACSA,QAAO,eAAe,MAAM;AACjC,aAAO,sBAAsB,WAAY;AACrC,YAAIF,MAAK,sBAAsB,QAAW;AACtC,UAAAA,MAAK,kBAAkB,MAAM,aAAa;AAC1C,UAAAA,MAAK,kBAAkB,MAAM,UAAU;AAAA,QAC3C;AACA,YAAIA,MAAK,kBAAkB,QAAW;AAClC,cAAI,aAAaA,MAAK,KAAK,cAAc,KAAKE,QAAO;AACrD,UAAAF,MAAK,cAAc,MAAM,QAAQ,YAAY;AAC7C,UAAAA,MAAK,kBAAkB,MAAM,QACzB,aACKA,MAAK,gBAAgB,SAChBA,MAAK,YAAY,cACjB,KACN;AACR,UAAAA,MAAK,kBAAkB,MAAM,eAAe,YAAY;AACxD,UAAAA,MAAK,kBAAkB,MAAM,eAAe,SAAS;AAAA,QACzD;AAAA,MACJ,CAAC;AAAA,IACL;AAAA,EACJ;AACA,WAAS,WAAW,GAAG;AACnB,QAAIA,MAAK,cAAc,WAAW,GAAG;AACjC,UAAI,cAAcA,MAAK,OAAO,YAAY,UACtC,aAAa,oBAAI,KAAK,GAAGA,MAAK,OAAO,OAAO,KAAK,IAC/C,oBAAI,KAAK,IACT,IAAI,KAAKA,MAAK,OAAO,QAAQ,QAAQ,CAAC;AAC5C,UAAIG,YAAW,gBAAgBH,MAAK,MAAM;AAC1C,kBAAY,SAASG,UAAS,OAAOA,UAAS,SAASA,UAAS,SAAS,YAAY,gBAAgB,CAAC;AACtG,MAAAH,MAAK,gBAAgB,CAAC,WAAW;AACjC,MAAAA,MAAK,wBAAwB;AAAA,IACjC;AACA,QAAI,MAAM,UAAa,EAAE,SAAS,QAAQ;AACtC,kBAAY,CAAC;AAAA,IACjB;AACA,QAAI,YAAYA,MAAK,OAAO;AAC5B,uBAAmB;AACnB,gBAAY;AACZ,QAAIA,MAAK,OAAO,UAAU,WAAW;AACjC,MAAAA,MAAK,iBAAiB;AAAA,IAC1B;AAAA,EACJ;AACA,WAAS,cAAc,MAAM,MAAM;AAC/B,WAAQ,OAAO,KAAM,KAAK,IAAI,SAASA,MAAK,KAAK,KAAK,CAAC,CAAC;AAAA,EAC5D;AACA,WAAS,cAAc,MAAM;AACzB,YAAQ,OAAO,IAAI;AAAA,MACf,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX;AACI,eAAO,OAAO;AAAA,IACtB;AAAA,EACJ;AACA,WAAS,qBAAqB;AAC1B,QAAIA,MAAK,gBAAgB,UAAaA,MAAK,kBAAkB;AACzD;AACJ,QAAI,SAAS,SAASA,MAAK,YAAY,MAAM,MAAM,EAAE,GAAG,EAAE,KAAK,KAAK,IAAI,WAAW,SAASA,MAAK,cAAc,OAAO,EAAE,KAAK,KAAK,IAAI,UAAUA,MAAK,kBAAkB,UAChK,SAASA,MAAK,cAAc,OAAO,EAAE,KAAK,KAAK,KAChD;AACN,QAAIA,MAAK,SAAS,QAAW;AACzB,cAAQ,cAAc,OAAOA,MAAK,KAAK,WAAW;AAAA,IACtD;AACA,QAAI,gBAAgBA,MAAK,OAAO,YAAY,UACvCA,MAAK,OAAO,WACTA,MAAK,kBACLA,MAAK,yBACL,aAAaA,MAAK,uBAAuBA,MAAK,OAAO,SAAS,IAAI,MAC9D;AACZ,QAAI,gBAAgBA,MAAK,OAAO,YAAY,UACvCA,MAAK,OAAO,WACTA,MAAK,kBACLA,MAAK,yBACL,aAAaA,MAAK,uBAAuBA,MAAK,OAAO,SAAS,IAAI,MAC9D;AACZ,QAAIA,MAAK,OAAO,YAAY,UACxBA,MAAK,OAAO,YAAY,UACxBA,MAAK,OAAO,UAAUA,MAAK,OAAO,SAAS;AAC3C,UAAI,WAAW,8BAA8BA,MAAK,OAAO,QAAQ,SAAS,GAAGA,MAAK,OAAO,QAAQ,WAAW,GAAGA,MAAK,OAAO,QAAQ,WAAW,CAAC;AAC/I,UAAI,WAAW,8BAA8BA,MAAK,OAAO,QAAQ,SAAS,GAAGA,MAAK,OAAO,QAAQ,WAAW,GAAGA,MAAK,OAAO,QAAQ,WAAW,CAAC;AAC/I,UAAI,cAAc,8BAA8B,OAAO,SAAS,OAAO;AACvE,UAAI,cAAc,YAAY,cAAc,UAAU;AAClD,YAAI,SAAS,aAAa,QAAQ;AAClC,gBAAQ,OAAO,CAAC;AAChB,kBAAU,OAAO,CAAC;AAClB,kBAAU,OAAO,CAAC;AAAA,MACtB;AAAA,IACJ,OACK;AACD,UAAI,eAAe;AACf,YAAI,UAAUA,MAAK,OAAO,YAAY,SAChCA,MAAK,OAAO,UACZA,MAAK,OAAO;AAClB,gBAAQ,KAAK,IAAI,OAAO,QAAQ,SAAS,CAAC;AAC1C,YAAI,UAAU,QAAQ,SAAS;AAC3B,oBAAU,KAAK,IAAI,SAAS,QAAQ,WAAW,CAAC;AACpD,YAAI,YAAY,QAAQ,WAAW;AAC/B,oBAAU,KAAK,IAAI,SAAS,QAAQ,WAAW,CAAC;AAAA,MACxD;AACA,UAAI,eAAe;AACf,YAAI,UAAUA,MAAK,OAAO,YAAY,SAChCA,MAAK,OAAO,UACZA,MAAK,OAAO;AAClB,gBAAQ,KAAK,IAAI,OAAO,QAAQ,SAAS,CAAC;AAC1C,YAAI,UAAU,QAAQ,SAAS,KAAK,UAAU,QAAQ,WAAW;AAC7D,oBAAU,QAAQ,WAAW;AACjC,YAAI,YAAY,QAAQ,WAAW;AAC/B,oBAAU,KAAK,IAAI,SAAS,QAAQ,WAAW,CAAC;AAAA,MACxD;AAAA,IACJ;AACA,aAAS,OAAO,SAAS,OAAO;AAAA,EACpC;AACA,WAAS,iBAAiB,SAAS;AAC/B,QAAI,OAAO,WAAWA,MAAK;AAC3B,QAAI,QAAQ,gBAAgB,MAAM;AAC9B,eAAS,KAAK,SAAS,GAAG,KAAK,WAAW,GAAG,KAAK,WAAW,CAAC;AAAA,IAClE;AAAA,EACJ;AACA,WAAS,SAAS,OAAO,SAAS,SAAS;AACvC,QAAIA,MAAK,0BAA0B,QAAW;AAC1C,MAAAA,MAAK,sBAAsB,SAAS,QAAQ,IAAI,SAAS,WAAW,GAAG,CAAC;AAAA,IAC5E;AACA,QAAI,CAACA,MAAK,eAAe,CAACA,MAAK,iBAAiBA,MAAK;AACjD;AACJ,IAAAA,MAAK,YAAY,QAAQ,IAAI,CAACA,MAAK,OAAO,aAClC,KAAK,SAAS,KAAM,KAAK,IAAI,QAAQ,OAAO,CAAC,IAC/C,KAAK;AACX,IAAAA,MAAK,cAAc,QAAQ,IAAI,OAAO;AACtC,QAAIA,MAAK,SAAS;AACd,MAAAA,MAAK,KAAK,cAAcA,MAAK,KAAK,KAAK,IAAI,SAAS,EAAE,CAAC;AAC3D,QAAIA,MAAK,kBAAkB;AACvB,MAAAA,MAAK,cAAc,QAAQ,IAAI,OAAO;AAAA,EAC9C;AACA,WAAS,YAAY,OAAO;AACxB,QAAI,cAAc,eAAe,KAAK;AACtC,QAAI,OAAO,SAAS,YAAY,KAAK,KAAK,MAAM,SAAS;AACzD,QAAI,OAAO,MAAO,KACb,MAAM,QAAQ,WAAW,CAAC,QAAQ,KAAK,KAAK,SAAS,CAAC,GAAI;AAC3D,iBAAW,IAAI;AAAA,IACnB;AAAA,EACJ;AACA,WAAS,KAAKI,UAAS,OAAO,SAAS,SAAS;AAC5C,QAAI,iBAAiB;AACjB,aAAO,MAAM,QAAQ,SAAU,IAAI;AAAE,eAAO,KAAKA,UAAS,IAAI,SAAS,OAAO;AAAA,MAAG,CAAC;AACtF,QAAIA,oBAAmB;AACnB,aAAOA,SAAQ,QAAQ,SAAU,IAAI;AAAE,eAAO,KAAK,IAAI,OAAO,SAAS,OAAO;AAAA,MAAG,CAAC;AACtF,IAAAA,SAAQ,iBAAiB,OAAO,SAAS,OAAO;AAChD,IAAAJ,MAAK,UAAU,KAAK;AAAA,MAChB,QAAQ,WAAY;AAAE,eAAOI,SAAQ,oBAAoB,OAAO,SAAS,OAAO;AAAA,MAAG;AAAA,IACvF,CAAC;AAAA,EACL;AACA,WAAS,gBAAgB;AACrB,iBAAa,UAAU;AAAA,EAC3B;AACA,WAAS,aAAa;AAClB,QAAIJ,MAAK,OAAO,MAAM;AAClB,OAAC,QAAQ,SAAS,UAAU,OAAO,EAAE,QAAQ,SAAU,KAAK;AACxD,cAAM,UAAU,QAAQ,KAAKA,MAAK,QAAQ,iBAAiB,WAAW,MAAM,GAAG,GAAG,SAAU,IAAI;AAC5F,iBAAO,KAAK,IAAI,SAASA,MAAK,GAAG,CAAC;AAAA,QACtC,CAAC;AAAA,MACL,CAAC;AAAA,IACL;AACA,QAAIA,MAAK,UAAU;AACf,kBAAY;AACZ;AAAA,IACJ;AACA,QAAI,kBAAkBK,UAAS,UAAU,EAAE;AAC3C,IAAAL,MAAK,mBAAmBK,UAAS,eAAe,mBAAmB;AACnE,QAAIL,MAAK,iBAAiB,CAAC,oBAAoB,KAAK,UAAU,SAAS;AACnE,WAAKA,MAAK,eAAe,aAAa,SAAU,GAAG;AAC/C,YAAIA,MAAK,OAAO,SAAS;AACrB,sBAAY,eAAe,CAAC,CAAC;AAAA,MACrC,CAAC;AACL,SAAKA,MAAK,QAAQ,WAAW,SAAS;AACtC,QAAIA,MAAK,sBAAsB,QAAW;AACtC,WAAKA,MAAK,mBAAmB,WAAW,SAAS;AAAA,IACrD;AACA,QAAI,CAACA,MAAK,OAAO,UAAU,CAACA,MAAK,OAAO;AACpC,WAAK,QAAQ,UAAU,eAAe;AAC1C,QAAI,OAAO,iBAAiB;AACxB,WAAK,OAAO,UAAU,cAAc,aAAa;AAAA;AAEjD,WAAK,OAAO,UAAU,aAAa,aAAa;AACpD,SAAK,OAAO,UAAU,SAAS,eAAe,EAAE,SAAS,KAAK,CAAC;AAC/D,QAAIA,MAAK,OAAO,eAAe,MAAM;AACjC,WAAKA,MAAK,QAAQ,SAASA,MAAK,IAAI;AACpC,WAAKA,MAAK,QAAQ,SAASA,MAAK,IAAI;AAAA,IACxC;AACA,QAAIA,MAAK,kBAAkB,QAAW;AAClC,WAAKA,MAAK,UAAU,SAAS,eAAe;AAC5C,WAAKA,MAAK,UAAU,CAAC,SAAS,WAAW,GAAG,WAAW;AACvD,WAAKA,MAAK,eAAe,SAAS,UAAU;AAAA,IAChD;AACA,QAAIA,MAAK,kBAAkB,UACvBA,MAAK,kBAAkB,UACvBA,MAAK,gBAAgB,QAAW;AAChC,UAAI,UAAU,SAAU,GAAG;AACvB,eAAO,eAAe,CAAC,EAAE,OAAO;AAAA,MACpC;AACA,WAAKA,MAAK,eAAe,CAAC,WAAW,GAAG,UAAU;AAClD,WAAKA,MAAK,eAAe,QAAQ,YAAY,EAAE,SAAS,KAAK,CAAC;AAC9D,WAAKA,MAAK,eAAe,SAAS,aAAa;AAC/C,WAAK,CAACA,MAAK,aAAaA,MAAK,aAAa,GAAG,CAAC,SAAS,OAAO,GAAG,OAAO;AACxE,UAAIA,MAAK,kBAAkB;AACvB,aAAKA,MAAK,eAAe,SAAS,WAAY;AAAE,iBAAOA,MAAK,iBAAiBA,MAAK,cAAc,OAAO;AAAA,QAAG,CAAC;AAC/G,UAAIA,MAAK,SAAS,QAAW;AACzB,aAAKA,MAAK,MAAM,SAAS,SAAU,GAAG;AAClC,qBAAW,CAAC;AAAA,QAChB,CAAC;AAAA,MACL;AAAA,IACJ;AACA,QAAIA,MAAK,OAAO,YAAY;AACxB,WAAKA,MAAK,QAAQ,QAAQ,MAAM;AAAA,IACpC;AAAA,EACJ;AACA,WAAS,WAAW,UAAUM,gBAAe;AACzC,QAAI,SAAS,aAAa,SACpBN,MAAK,UAAU,QAAQ,IACvBA,MAAK,0BACFA,MAAK,OAAO,WAAWA,MAAK,OAAO,UAAUA,MAAK,MAC7CA,MAAK,OAAO,UACZA,MAAK,OAAO,WAAWA,MAAK,OAAO,UAAUA,MAAK,MAC9CA,MAAK,OAAO,UACZA,MAAK;AACvB,QAAI,UAAUA,MAAK;AACnB,QAAI,WAAWA,MAAK;AACpB,QAAI;AACA,UAAI,WAAW,QAAW;AACtB,QAAAA,MAAK,cAAc,OAAO,YAAY;AACtC,QAAAA,MAAK,eAAe,OAAO,SAAS;AAAA,MACxC;AAAA,IACJ,SACO,GAAG;AACN,QAAE,UAAU,4BAA4B;AACxC,MAAAA,MAAK,OAAO,aAAa,CAAC;AAAA,IAC9B;AACA,QAAIM,kBAAiBN,MAAK,gBAAgB,SAAS;AAC/C,mBAAa,cAAc;AAC3B,uBAAiB;AAAA,IACrB;AACA,QAAIM,mBACCN,MAAK,gBAAgB,WAAWA,MAAK,iBAAiB,WAAW;AAClE,mBAAa,eAAe;AAAA,IAChC;AACA,IAAAA,MAAK,OAAO;AAAA,EAChB;AACA,WAAS,cAAc,GAAG;AACtB,QAAI,cAAc,eAAe,CAAC;AAClC,QAAI,CAAC,YAAY,UAAU,QAAQ,OAAO;AACtC,wBAAkB,GAAG,YAAY,UAAU,SAAS,SAAS,IAAI,IAAI,EAAE;AAAA,EAC/E;AACA,WAAS,kBAAkB,GAAG,OAAO,WAAW;AAC5C,QAAI,SAAS,KAAK,eAAe,CAAC;AAClC,QAAI,QAAQ,aACP,UAAU,OAAO,cAAc,OAAO,WAAW;AACtD,QAAI,QAAQ,YAAY,WAAW;AACnC,UAAM,QAAQ;AACd,aAAS,MAAM,cAAc,KAAK;AAAA,EACtC;AACA,WAAS,QAAQ;AACb,QAAI,WAAW,OAAO,SAAS,uBAAuB;AACtD,IAAAA,MAAK,oBAAoB,cAAc,OAAO,oBAAoB;AAClE,IAAAA,MAAK,kBAAkB,WAAW;AAClC,QAAI,CAACA,MAAK,OAAO,YAAY;AACzB,eAAS,YAAY,cAAc,CAAC;AACpC,MAAAA,MAAK,iBAAiB,cAAc,OAAO,0BAA0B;AACrE,UAAIA,MAAK,OAAO,aAAa;AACzB,YAAI,KAAK,WAAW,GAAG,cAAc,GAAG,aAAa,cAAc,GAAG;AACtE,QAAAA,MAAK,eAAe,YAAY,WAAW;AAC3C,QAAAA,MAAK,cAAc;AACnB,QAAAA,MAAK,cAAc;AAAA,MACvB;AACA,MAAAA,MAAK,aAAa,cAAc,OAAO,sBAAsB;AAC7D,MAAAA,MAAK,WAAW,YAAY,cAAc,CAAC;AAC3C,UAAI,CAACA,MAAK,eAAe;AACrB,QAAAA,MAAK,gBAAgB,cAAc,OAAO,gBAAgB;AAC1D,QAAAA,MAAK,cAAc,WAAW;AAAA,MAClC;AACA,gBAAU;AACV,MAAAA,MAAK,WAAW,YAAYA,MAAK,aAAa;AAC9C,MAAAA,MAAK,eAAe,YAAYA,MAAK,UAAU;AAC/C,eAAS,YAAYA,MAAK,cAAc;AAAA,IAC5C;AACA,QAAIA,MAAK,OAAO,YAAY;AACxB,eAAS,YAAY,UAAU,CAAC;AAAA,IACpC;AACA,gBAAYA,MAAK,mBAAmB,aAAaA,MAAK,OAAO,SAAS,OAAO;AAC7E,gBAAYA,MAAK,mBAAmB,WAAWA,MAAK,OAAO,YAAY,IAAI;AAC3E,gBAAYA,MAAK,mBAAmB,cAAcA,MAAK,OAAO,aAAa,CAAC;AAC5E,IAAAA,MAAK,kBAAkB,YAAY,QAAQ;AAC3C,QAAI,eAAeA,MAAK,OAAO,aAAa,UACxCA,MAAK,OAAO,SAAS,aAAa;AACtC,QAAIA,MAAK,OAAO,UAAUA,MAAK,OAAO,QAAQ;AAC1C,MAAAA,MAAK,kBAAkB,UAAU,IAAIA,MAAK,OAAO,SAAS,WAAW,QAAQ;AAC7E,UAAIA,MAAK,OAAO,QAAQ;AACpB,YAAI,CAAC,gBAAgBA,MAAK,QAAQ;AAC9B,UAAAA,MAAK,QAAQ,WAAW,aAAaA,MAAK,mBAAmBA,MAAK,OAAO,WAAW;AAAA,iBAC/EA,MAAK,OAAO,aAAa;AAC9B,UAAAA,MAAK,OAAO,SAAS,YAAYA,MAAK,iBAAiB;AAAA,MAC/D;AACA,UAAIA,MAAK,OAAO,QAAQ;AACpB,YAAI,UAAU,cAAc,OAAO,mBAAmB;AACtD,YAAIA,MAAK,QAAQ;AACb,UAAAA,MAAK,QAAQ,WAAW,aAAa,SAASA,MAAK,OAAO;AAC9D,gBAAQ,YAAYA,MAAK,OAAO;AAChC,YAAIA,MAAK;AACL,kBAAQ,YAAYA,MAAK,QAAQ;AACrC,gBAAQ,YAAYA,MAAK,iBAAiB;AAAA,MAC9C;AAAA,IACJ;AACA,QAAI,CAACA,MAAK,OAAO,UAAU,CAACA,MAAK,OAAO;AACpC,OAACA,MAAK,OAAO,aAAa,SACpBA,MAAK,OAAO,WACZ,OAAO,SAAS,MAAM,YAAYA,MAAK,iBAAiB;AAAA,EACtE;AACA,WAAS,UAAU,WAAW,MAAM,YAAY,GAAG;AAC/C,QAAI,gBAAgB,UAAU,MAAM,IAAI,GAAG,aAAa,cAAc,QAAQ,WAAW,KAAK,QAAQ,EAAE,SAAS,CAAC;AAClH,eAAW,UAAU;AACrB,eAAW,KAAK;AAChB,eAAW,aAAa,cAAcA,MAAK,WAAW,MAAMA,MAAK,OAAO,cAAc,CAAC;AACvF,QAAI,UAAU,QAAQ,QAAQ,MAAM,MAChC,aAAa,MAAMA,MAAK,GAAG,MAAM,GAAG;AACpC,MAAAA,MAAK,gBAAgB;AACrB,iBAAW,UAAU,IAAI,OAAO;AAChC,iBAAW,aAAa,gBAAgB,MAAM;AAAA,IAClD;AACA,QAAI,eAAe;AACf,iBAAW,WAAW;AACtB,UAAI,eAAe,IAAI,GAAG;AACtB,mBAAW,UAAU,IAAI,UAAU;AACnC,QAAAA,MAAK,mBAAmB;AACxB,YAAIA,MAAK,OAAO,SAAS,SAAS;AAC9B,sBAAY,YAAY,cAAcA,MAAK,cAAc,CAAC,KACtD,aAAa,MAAMA,MAAK,cAAc,CAAC,GAAG,IAAI,MAAM,CAAC;AACzD,sBAAY,YAAY,YAAYA,MAAK,cAAc,CAAC,KACpD,aAAa,MAAMA,MAAK,cAAc,CAAC,GAAG,IAAI,MAAM,CAAC;AACzD,cAAI,cAAc;AACd,uBAAW,UAAU,IAAI,SAAS;AAAA,QAC1C;AAAA,MACJ;AAAA,IACJ,OACK;AACD,iBAAW,UAAU,IAAI,oBAAoB;AAAA,IACjD;AACA,QAAIA,MAAK,OAAO,SAAS,SAAS;AAC9B,UAAI,cAAc,IAAI,KAAK,CAAC,eAAe,IAAI;AAC3C,mBAAW,UAAU,IAAI,SAAS;AAAA,IAC1C;AACA,QAAIA,MAAK,eACLA,MAAK,OAAO,eAAe,KAC3B,cAAc,kBACd,IAAI,MAAM,GAAG;AACb,MAAAA,MAAK,YAAY,mBAAmB,aAAa,iCAAiCA,MAAK,OAAO,QAAQ,IAAI,IAAI,SAAS;AAAA,IAC3H;AACA,iBAAa,eAAe,UAAU;AACtC,WAAO;AAAA,EACX;AACA,WAAS,eAAe,YAAY;AAChC,eAAW,MAAM;AACjB,QAAIA,MAAK,OAAO,SAAS;AACrB,kBAAY,UAAU;AAAA,EAC9B;AACA,WAAS,qBAAqB,OAAO;AACjC,QAAI,aAAa,QAAQ,IAAI,IAAIA,MAAK,OAAO,aAAa;AAC1D,QAAI,WAAW,QAAQ,IAAIA,MAAK,OAAO,aAAa;AACpD,aAAS,IAAI,YAAY,KAAK,UAAU,KAAK,OAAO;AAChD,UAAI,QAAQA,MAAK,cAAc,SAAS,CAAC;AACzC,UAAI,aAAa,QAAQ,IAAI,IAAI,MAAM,SAAS,SAAS;AACzD,UAAI,WAAW,QAAQ,IAAI,MAAM,SAAS,SAAS;AACnD,eAAS,IAAI,YAAY,KAAK,UAAU,KAAK,OAAO;AAChD,YAAI,IAAI,MAAM,SAAS,CAAC;AACxB,YAAI,EAAE,UAAU,QAAQ,QAAQ,MAAM,MAAM,UAAU,EAAE,OAAO;AAC3D,iBAAO;AAAA,MACf;AAAA,IACJ;AACA,WAAO;AAAA,EACX;AACA,WAAS,oBAAoB,SAAS,OAAO;AACzC,QAAI,aAAa,QAAQ,UAAU,QAAQ,OAAO,MAAM,KAClD,QAAQ,QAAQ,SAAS,IACzBA,MAAK;AACX,QAAI,WAAW,QAAQ,IAAIA,MAAK,OAAO,aAAa;AACpD,QAAI,YAAY,QAAQ,IAAI,IAAI;AAChC,aAAS,IAAI,aAAaA,MAAK,cAAc,KAAK,UAAU,KAAK,WAAW;AACxE,UAAI,QAAQA,MAAK,cAAc,SAAS,CAAC;AACzC,UAAI,aAAa,aAAaA,MAAK,iBAAiB,IAC9C,QAAQ,KAAK,QACb,QAAQ,IACJ,MAAM,SAAS,SAAS,IACxB;AACV,UAAI,eAAe,MAAM,SAAS;AAClC,eAAS,IAAI,YAAY,KAAK,KAAK,IAAI,gBAAgB,MAAM,QAAQ,IAAI,eAAe,KAAK,KAAK,WAAW;AACzG,YAAI,IAAI,MAAM,SAAS,CAAC;AACxB,YAAI,EAAE,UAAU,QAAQ,QAAQ,MAAM,MAClC,UAAU,EAAE,OAAO,KACnB,KAAK,IAAI,QAAQ,KAAK,CAAC,KAAK,KAAK,IAAI,KAAK;AAC1C,iBAAO,eAAe,CAAC;AAAA,MAC/B;AAAA,IACJ;AACA,IAAAA,MAAK,YAAY,SAAS;AAC1B,eAAW,qBAAqB,SAAS,GAAG,CAAC;AAC7C,WAAO;AAAA,EACX;AACA,WAAS,WAAW,SAAS,QAAQ;AACjC,QAAI,gBAAgB,wBAAwB;AAC5C,QAAI,aAAa,SAAS,iBAAiB,SAAS,IAAI;AACxD,QAAI,YAAY,YAAY,SACtB,UACA,aACI,gBACAA,MAAK,qBAAqB,UAAa,SAASA,MAAK,gBAAgB,IACjEA,MAAK,mBACLA,MAAK,kBAAkB,UAAa,SAASA,MAAK,aAAa,IAC3DA,MAAK,gBACL,qBAAqB,SAAS,IAAI,IAAI,EAAE;AAC1D,QAAI,cAAc,QAAW;AACzB,MAAAA,MAAK,OAAO,MAAM;AAAA,IACtB,WACS,CAAC,YAAY;AAClB,qBAAe,SAAS;AAAA,IAC5B,OACK;AACD,0BAAoB,WAAW,MAAM;AAAA,IACzC;AAAA,EACJ;AACA,WAAS,eAAe,MAAM,OAAO;AACjC,QAAI,gBAAgB,IAAI,KAAK,MAAM,OAAO,CAAC,EAAE,OAAO,IAAIA,MAAK,KAAK,iBAAiB,KAAK;AACxF,QAAI,gBAAgBA,MAAK,MAAM,gBAAgB,QAAQ,IAAI,MAAM,IAAI,IAAI;AACzE,QAAI,cAAcA,MAAK,MAAM,eAAe,OAAO,IAAI,GAAG,OAAO,OAAO,SAAS,uBAAuB,GAAG,eAAeA,MAAK,OAAO,aAAa,GAAG,oBAAoB,eAAe,wBAAwB,gBAAgB,oBAAoB,eAAe,wBAAwB;AAC5R,QAAI,YAAY,gBAAgB,IAAI,cAAc,WAAW;AAC7D,WAAO,aAAa,eAAe,aAAa,YAAY;AACxD,WAAK,YAAY,UAAU,mBAAmB,mBAAmB,IAAI,KAAK,MAAM,QAAQ,GAAG,SAAS,GAAG,WAAW,QAAQ,CAAC;AAAA,IAC/H;AACA,SAAK,YAAY,GAAG,aAAa,aAAa,aAAa,YAAY;AACnE,WAAK,YAAY,UAAU,iBAAiB,IAAI,KAAK,MAAM,OAAO,SAAS,GAAG,WAAW,QAAQ,CAAC;AAAA,IACtG;AACA,aAAS,SAAS,cAAc,GAAG,UAAU,KAAK,iBAC7CA,MAAK,OAAO,eAAe,KAAK,WAAW,MAAM,IAAI,UAAU,YAAY;AAC5E,WAAK,YAAY,UAAU,mBAAmB,mBAAmB,IAAI,KAAK,MAAM,QAAQ,GAAG,SAAS,WAAW,GAAG,QAAQ,QAAQ,CAAC;AAAA,IACvI;AACA,QAAI,eAAe,cAAc,OAAO,cAAc;AACtD,iBAAa,YAAY,IAAI;AAC7B,WAAO;AAAA,EACX;AACA,WAAS,YAAY;AACjB,QAAIA,MAAK,kBAAkB,QAAW;AAClC;AAAA,IACJ;AACA,cAAUA,MAAK,aAAa;AAC5B,QAAIA,MAAK;AACL,gBAAUA,MAAK,WAAW;AAC9B,QAAI,OAAO,SAAS,uBAAuB;AAC3C,aAAS,IAAI,GAAG,IAAIA,MAAK,OAAO,YAAY,KAAK;AAC7C,UAAI,IAAI,IAAI,KAAKA,MAAK,aAAaA,MAAK,cAAc,CAAC;AACvD,QAAE,SAASA,MAAK,eAAe,CAAC;AAChC,WAAK,YAAY,eAAe,EAAE,YAAY,GAAG,EAAE,SAAS,CAAC,CAAC;AAAA,IAClE;AACA,IAAAA,MAAK,cAAc,YAAY,IAAI;AACnC,IAAAA,MAAK,OAAOA,MAAK,cAAc;AAC/B,QAAIA,MAAK,OAAO,SAAS,WAAWA,MAAK,cAAc,WAAW,GAAG;AACjE,kBAAY;AAAA,IAChB;AAAA,EACJ;AACA,WAAS,mBAAmB;AACxB,QAAIA,MAAK,OAAO,aAAa,KACzBA,MAAK,OAAO,sBAAsB;AAClC;AACJ,QAAI,mBAAmB,SAAUO,QAAO;AACpC,UAAIP,MAAK,OAAO,YAAY,UACxBA,MAAK,gBAAgBA,MAAK,OAAO,QAAQ,YAAY,KACrDO,SAAQP,MAAK,OAAO,QAAQ,SAAS,GAAG;AACxC,eAAO;AAAA,MACX;AACA,aAAO,EAAEA,MAAK,OAAO,YAAY,UAC7BA,MAAK,gBAAgBA,MAAK,OAAO,QAAQ,YAAY,KACrDO,SAAQP,MAAK,OAAO,QAAQ,SAAS;AAAA,IAC7C;AACA,IAAAA,MAAK,wBAAwB,WAAW;AACxC,IAAAA,MAAK,wBAAwB,YAAY;AACzC,aAAS,IAAI,GAAG,IAAI,IAAI,KAAK;AACzB,UAAI,CAAC,iBAAiB,CAAC;AACnB;AACJ,UAAI,QAAQ,cAAc,UAAU,+BAA+B;AACnE,YAAM,QAAQ,IAAI,KAAKA,MAAK,aAAa,CAAC,EAAE,SAAS,EAAE,SAAS;AAChE,YAAM,cAAc,WAAW,GAAGA,MAAK,OAAO,uBAAuBA,MAAK,IAAI;AAC9E,YAAM,WAAW;AACjB,UAAIA,MAAK,iBAAiB,GAAG;AACzB,cAAM,WAAW;AAAA,MACrB;AACA,MAAAA,MAAK,wBAAwB,YAAY,KAAK;AAAA,IAClD;AAAA,EACJ;AACA,WAAS,aAAa;AAClB,QAAI,YAAY,cAAc,OAAO,iBAAiB;AACtD,QAAI,mBAAmB,OAAO,SAAS,uBAAuB;AAC9D,QAAI;AACJ,QAAIA,MAAK,OAAO,aAAa,KACzBA,MAAK,OAAO,sBAAsB,UAAU;AAC5C,qBAAe,cAAc,QAAQ,WAAW;AAAA,IACpD,OACK;AACD,MAAAA,MAAK,0BAA0B,cAAc,UAAU,gCAAgC;AACvF,MAAAA,MAAK,wBAAwB,aAAa,cAAcA,MAAK,KAAK,cAAc;AAChF,WAAKA,MAAK,yBAAyB,UAAU,SAAU,GAAG;AACtD,YAAI,SAAS,eAAe,CAAC;AAC7B,YAAI,gBAAgB,SAAS,OAAO,OAAO,EAAE;AAC7C,QAAAA,MAAK,YAAY,gBAAgBA,MAAK,YAAY;AAClD,qBAAa,eAAe;AAAA,MAChC,CAAC;AACD,uBAAiB;AACjB,qBAAeA,MAAK;AAAA,IACxB;AACA,QAAI,YAAY,kBAAkB,YAAY,EAAE,UAAU,KAAK,CAAC;AAChE,QAAI,cAAc,UAAU,qBAAqB,OAAO,EAAE,CAAC;AAC3D,gBAAY,aAAa,cAAcA,MAAK,KAAK,aAAa;AAC9D,QAAIA,MAAK,OAAO,SAAS;AACrB,kBAAY,aAAa,OAAOA,MAAK,OAAO,QAAQ,YAAY,EAAE,SAAS,CAAC;AAAA,IAChF;AACA,QAAIA,MAAK,OAAO,SAAS;AACrB,kBAAY,aAAa,OAAOA,MAAK,OAAO,QAAQ,YAAY,EAAE,SAAS,CAAC;AAC5E,kBAAY,WACR,CAAC,CAACA,MAAK,OAAO,WACVA,MAAK,OAAO,QAAQ,YAAY,MAAMA,MAAK,OAAO,QAAQ,YAAY;AAAA,IAClF;AACA,QAAI,eAAe,cAAc,OAAO,yBAAyB;AACjE,iBAAa,YAAY,YAAY;AACrC,iBAAa,YAAY,SAAS;AAClC,qBAAiB,YAAY,YAAY;AACzC,cAAU,YAAY,gBAAgB;AACtC,WAAO;AAAA,MACH;AAAA,MACA;AAAA,MACA;AAAA,IACJ;AAAA,EACJ;AACA,WAAS,cAAc;AACnB,cAAUA,MAAK,QAAQ;AACvB,IAAAA,MAAK,SAAS,YAAYA,MAAK,YAAY;AAC3C,QAAIA,MAAK,OAAO,YAAY;AACxB,MAAAA,MAAK,eAAe,CAAC;AACrB,MAAAA,MAAK,gBAAgB,CAAC;AAAA,IAC1B;AACA,aAAS,IAAIA,MAAK,OAAO,YAAY,OAAM;AACvC,UAAI,QAAQ,WAAW;AACvB,MAAAA,MAAK,aAAa,KAAK,MAAM,WAAW;AACxC,MAAAA,MAAK,cAAc,KAAK,MAAM,YAAY;AAC1C,MAAAA,MAAK,SAAS,YAAY,MAAM,SAAS;AAAA,IAC7C;AACA,IAAAA,MAAK,SAAS,YAAYA,MAAK,YAAY;AAAA,EAC/C;AACA,WAAS,gBAAgB;AACrB,IAAAA,MAAK,WAAW,cAAc,OAAO,kBAAkB;AACvD,IAAAA,MAAK,eAAe,CAAC;AACrB,IAAAA,MAAK,gBAAgB,CAAC;AACtB,IAAAA,MAAK,eAAe,cAAc,QAAQ,sBAAsB;AAChE,IAAAA,MAAK,aAAa,YAAYA,MAAK,OAAO;AAC1C,IAAAA,MAAK,eAAe,cAAc,QAAQ,sBAAsB;AAChE,IAAAA,MAAK,aAAa,YAAYA,MAAK,OAAO;AAC1C,gBAAY;AACZ,WAAO,eAAeA,OAAM,uBAAuB;AAAA,MAC/C,KAAK,WAAY;AAAE,eAAOA,MAAK;AAAA,MAAsB;AAAA,MACrD,KAAK,SAAU,MAAM;AACjB,YAAIA,MAAK,yBAAyB,MAAM;AACpC,sBAAYA,MAAK,cAAc,sBAAsB,IAAI;AACzD,UAAAA,MAAK,uBAAuB;AAAA,QAChC;AAAA,MACJ;AAAA,IACJ,CAAC;AACD,WAAO,eAAeA,OAAM,uBAAuB;AAAA,MAC/C,KAAK,WAAY;AAAE,eAAOA,MAAK;AAAA,MAAsB;AAAA,MACrD,KAAK,SAAU,MAAM;AACjB,YAAIA,MAAK,yBAAyB,MAAM;AACpC,sBAAYA,MAAK,cAAc,sBAAsB,IAAI;AACzD,UAAAA,MAAK,uBAAuB;AAAA,QAChC;AAAA,MACJ;AAAA,IACJ,CAAC;AACD,IAAAA,MAAK,qBAAqBA,MAAK,aAAa,CAAC;AAC7C,iCAA6B;AAC7B,WAAOA,MAAK;AAAA,EAChB;AACA,WAAS,YAAY;AACjB,IAAAA,MAAK,kBAAkB,UAAU,IAAI,SAAS;AAC9C,QAAIA,MAAK,OAAO;AACZ,MAAAA,MAAK,kBAAkB,UAAU,IAAI,YAAY;AACrD,QAAIG,YAAW,gBAAgBH,MAAK,MAAM;AAC1C,IAAAA,MAAK,gBAAgB,cAAc,OAAO,gBAAgB;AAC1D,IAAAA,MAAK,cAAc,WAAW;AAC9B,QAAI,YAAY,cAAc,QAAQ,4BAA4B,GAAG;AACrE,QAAI,YAAY,kBAAkB,kBAAkB;AAAA,MAChD,cAAcA,MAAK,KAAK;AAAA,IAC5B,CAAC;AACD,IAAAA,MAAK,cAAc,UAAU,qBAAqB,OAAO,EAAE,CAAC;AAC5D,QAAI,cAAc,kBAAkB,oBAAoB;AAAA,MACpD,cAAcA,MAAK,KAAK;AAAA,IAC5B,CAAC;AACD,IAAAA,MAAK,gBAAgB,YAAY,qBAAqB,OAAO,EAAE,CAAC;AAChE,IAAAA,MAAK,YAAY,WAAWA,MAAK,cAAc,WAAW;AAC1D,IAAAA,MAAK,YAAY,QAAQ,IAAIA,MAAK,wBAC5BA,MAAK,sBAAsB,SAAS,IACpCA,MAAK,OAAO,YACRG,UAAS,QACT,cAAcA,UAAS,KAAK,CAAC;AACvC,IAAAH,MAAK,cAAc,QAAQ,IAAIA,MAAK,wBAC9BA,MAAK,sBAAsB,WAAW,IACtCG,UAAS,OAAO;AACtB,IAAAH,MAAK,YAAY,aAAa,QAAQA,MAAK,OAAO,cAAc,SAAS,CAAC;AAC1E,IAAAA,MAAK,cAAc,aAAa,QAAQA,MAAK,OAAO,gBAAgB,SAAS,CAAC;AAC9E,IAAAA,MAAK,YAAY,aAAa,OAAOA,MAAK,OAAO,YAAY,MAAM,GAAG;AACtE,IAAAA,MAAK,YAAY,aAAa,OAAOA,MAAK,OAAO,YAAY,OAAO,IAAI;AACxE,IAAAA,MAAK,YAAY,aAAa,aAAa,GAAG;AAC9C,IAAAA,MAAK,cAAc,aAAa,OAAO,GAAG;AAC1C,IAAAA,MAAK,cAAc,aAAa,OAAO,IAAI;AAC3C,IAAAA,MAAK,cAAc,aAAa,aAAa,GAAG;AAChD,IAAAA,MAAK,cAAc,YAAY,SAAS;AACxC,IAAAA,MAAK,cAAc,YAAY,SAAS;AACxC,IAAAA,MAAK,cAAc,YAAY,WAAW;AAC1C,QAAIA,MAAK,OAAO;AACZ,MAAAA,MAAK,cAAc,UAAU,IAAI,UAAU;AAC/C,QAAIA,MAAK,OAAO,eAAe;AAC3B,MAAAA,MAAK,cAAc,UAAU,IAAI,YAAY;AAC7C,UAAI,cAAc,kBAAkB,kBAAkB;AACtD,MAAAA,MAAK,gBAAgB,YAAY,qBAAqB,OAAO,EAAE,CAAC;AAChE,MAAAA,MAAK,cAAc,QAAQ,IAAIA,MAAK,wBAC9BA,MAAK,sBAAsB,WAAW,IACtCG,UAAS,OAAO;AACtB,MAAAH,MAAK,cAAc,aAAa,QAAQA,MAAK,cAAc,aAAa,MAAM,CAAC;AAC/E,MAAAA,MAAK,cAAc,aAAa,OAAO,GAAG;AAC1C,MAAAA,MAAK,cAAc,aAAa,OAAO,IAAI;AAC3C,MAAAA,MAAK,cAAc,aAAa,aAAa,GAAG;AAChD,MAAAA,MAAK,cAAc,YAAY,cAAc,QAAQ,4BAA4B,GAAG,CAAC;AACrF,MAAAA,MAAK,cAAc,YAAY,WAAW;AAAA,IAC9C;AACA,QAAI,CAACA,MAAK,OAAO,WAAW;AACxB,MAAAA,MAAK,OAAO,cAAc,QAAQ,mBAAmBA,MAAK,KAAK,KAAK,KAAKA,MAAK,wBACxEA,MAAK,YAAY,QACjBA,MAAK,OAAO,eAAe,EAAE,CAAC,CAAC;AACrC,MAAAA,MAAK,KAAK,QAAQA,MAAK,KAAK;AAC5B,MAAAA,MAAK,KAAK,WAAW;AACrB,MAAAA,MAAK,cAAc,YAAYA,MAAK,IAAI;AAAA,IAC5C;AACA,WAAOA,MAAK;AAAA,EAChB;AACA,WAAS,gBAAgB;AACrB,QAAI,CAACA,MAAK;AACN,MAAAA,MAAK,mBAAmB,cAAc,OAAO,oBAAoB;AAAA;AAEjE,gBAAUA,MAAK,gBAAgB;AACnC,aAAS,IAAIA,MAAK,OAAO,YAAY,OAAM;AACvC,UAAI,YAAY,cAAc,OAAO,4BAA4B;AACjE,MAAAA,MAAK,iBAAiB,YAAY,SAAS;AAAA,IAC/C;AACA,mBAAe;AACf,WAAOA,MAAK;AAAA,EAChB;AACA,WAAS,iBAAiB;AACtB,QAAI,CAACA,MAAK,kBAAkB;AACxB;AAAA,IACJ;AACA,QAAI,iBAAiBA,MAAK,KAAK;AAC/B,QAAI,WAAW,eAAeA,MAAK,KAAK,SAAS,SAAS;AAC1D,QAAI,iBAAiB,KAAK,iBAAiB,SAAS,QAAQ;AACxD,iBAAW,eAAe,SAAS,OAAO,gBAAgB,SAAS,MAAM,GAAG,SAAS,OAAO,GAAG,cAAc,CAAC;AAAA,IAClH;AACA,aAAS,IAAIA,MAAK,OAAO,YAAY,OAAM;AACvC,MAAAA,MAAK,iBAAiB,SAAS,CAAC,EAAE,YAAY,uDAAuD,SAAS,KAAK,yCAAyC,IAAI;AAAA,IACpK;AAAA,EACJ;AACA,WAAS,aAAa;AAClB,IAAAA,MAAK,kBAAkB,UAAU,IAAI,UAAU;AAC/C,QAAI,cAAc,cAAc,OAAO,uBAAuB;AAC9D,gBAAY,YAAY,cAAc,QAAQ,qBAAqBA,MAAK,KAAK,gBAAgB,CAAC;AAC9F,QAAI,cAAc,cAAc,OAAO,iBAAiB;AACxD,gBAAY,YAAY,WAAW;AACnC,WAAO;AAAA,MACH;AAAA,MACA;AAAA,IACJ;AAAA,EACJ;AACA,WAAS,YAAY,OAAO,UAAU;AAClC,QAAI,aAAa,QAAQ;AAAE,iBAAW;AAAA,IAAM;AAC5C,QAAI,QAAQ,WAAW,QAAQ,QAAQA,MAAK;AAC5C,QAAK,QAAQ,KAAKA,MAAK,wBAAwB,QAC1C,QAAQ,KAAKA,MAAK,wBAAwB;AAC3C;AACJ,IAAAA,MAAK,gBAAgB;AACrB,QAAIA,MAAK,eAAe,KAAKA,MAAK,eAAe,IAAI;AACjD,MAAAA,MAAK,eAAeA,MAAK,eAAe,KAAK,IAAI;AACjD,MAAAA,MAAK,gBAAgBA,MAAK,eAAe,MAAM;AAC/C,mBAAa,cAAc;AAC3B,uBAAiB;AAAA,IACrB;AACA,cAAU;AACV,iBAAa,eAAe;AAC5B,iCAA6B;AAAA,EACjC;AACA,WAAS,MAAM,oBAAoB,WAAW;AAC1C,QAAI,uBAAuB,QAAQ;AAAE,2BAAqB;AAAA,IAAM;AAChE,QAAI,cAAc,QAAQ;AAAE,kBAAY;AAAA,IAAM;AAC9C,IAAAA,MAAK,MAAM,QAAQ;AACnB,QAAIA,MAAK,aAAa;AAClB,MAAAA,MAAK,SAAS,QAAQ;AAC1B,QAAIA,MAAK,gBAAgB;AACrB,MAAAA,MAAK,YAAY,QAAQ;AAC7B,IAAAA,MAAK,gBAAgB,CAAC;AACtB,IAAAA,MAAK,wBAAwB;AAC7B,QAAI,cAAc,MAAM;AACpB,MAAAA,MAAK,cAAcA,MAAK,aAAa,YAAY;AACjD,MAAAA,MAAK,eAAeA,MAAK,aAAa,SAAS;AAAA,IACnD;AACA,QAAIA,MAAK,OAAO,eAAe,MAAM;AACjC,UAAI,KAAK,gBAAgBA,MAAK,MAAM,GAAG,QAAQ,GAAG,OAAO,UAAU,GAAG,SAAS,UAAU,GAAG;AAC5F,eAAS,OAAO,SAAS,OAAO;AAAA,IACpC;AACA,IAAAA,MAAK,OAAO;AACZ,QAAI;AACA,mBAAa,UAAU;AAAA,EAC/B;AACA,WAAS,QAAQ;AACb,IAAAA,MAAK,SAAS;AACd,QAAI,CAACA,MAAK,UAAU;AAChB,UAAIA,MAAK,sBAAsB,QAAW;AACtC,QAAAA,MAAK,kBAAkB,UAAU,OAAO,MAAM;AAAA,MAClD;AACA,UAAIA,MAAK,WAAW,QAAW;AAC3B,QAAAA,MAAK,OAAO,UAAU,OAAO,QAAQ;AAAA,MACzC;AAAA,IACJ;AACA,iBAAa,SAAS;AAAA,EAC1B;AACA,WAASC,WAAU;AACf,QAAID,MAAK,WAAW;AAChB,mBAAa,WAAW;AAC5B,aAAS,IAAIA,MAAK,UAAU,QAAQ,OAAM;AACtC,MAAAA,MAAK,UAAU,CAAC,EAAE,OAAO;AAAA,IAC7B;AACA,IAAAA,MAAK,YAAY,CAAC;AAClB,QAAIA,MAAK,aAAa;AAClB,UAAIA,MAAK,YAAY;AACjB,QAAAA,MAAK,YAAY,WAAW,YAAYA,MAAK,WAAW;AAC5D,MAAAA,MAAK,cAAc;AAAA,IACvB,WACSA,MAAK,qBAAqBA,MAAK,kBAAkB,YAAY;AAClE,UAAIA,MAAK,OAAO,UAAUA,MAAK,kBAAkB,YAAY;AACzD,YAAI,UAAUA,MAAK,kBAAkB;AACrC,gBAAQ,aAAa,QAAQ,YAAY,QAAQ,SAAS;AAC1D,YAAI,QAAQ,YAAY;AACpB,iBAAO,QAAQ;AACX,oBAAQ,WAAW,aAAa,QAAQ,YAAY,OAAO;AAC/D,kBAAQ,WAAW,YAAY,OAAO;AAAA,QAC1C;AAAA,MACJ;AAEI,QAAAA,MAAK,kBAAkB,WAAW,YAAYA,MAAK,iBAAiB;AAAA,IAC5E;AACA,QAAIA,MAAK,UAAU;AACf,MAAAA,MAAK,MAAM,OAAO;AAClB,UAAIA,MAAK,SAAS;AACd,QAAAA,MAAK,SAAS,WAAW,YAAYA,MAAK,QAAQ;AACtD,aAAOA,MAAK;AAAA,IAChB;AACA,QAAIA,MAAK,OAAO;AACZ,MAAAA,MAAK,MAAM,OAAOA,MAAK,MAAM;AAC7B,MAAAA,MAAK,MAAM,UAAU,OAAO,iBAAiB;AAC7C,MAAAA,MAAK,MAAM,gBAAgB,UAAU;AAAA,IACzC;AACA;AAAA,MACI;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACJ,EAAE,QAAQ,SAAU,GAAG;AACnB,UAAI;AACA,eAAOA,MAAK,CAAC;AAAA,MACjB,SACO,GAAG;AAAA,MAAE;AAAA,IAChB,CAAC;AAAA,EACL;AACA,WAAS,eAAe,MAAM;AAC1B,WAAOA,MAAK,kBAAkB,SAAS,IAAI;AAAA,EAC/C;AACA,WAAS,cAAc,GAAG;AACtB,QAAIA,MAAK,UAAU,CAACA,MAAK,OAAO,QAAQ;AACpC,UAAI,gBAAgB,eAAe,CAAC;AACpC,UAAI,oBAAoB,eAAe,aAAa;AACpD,UAAI,UAAU,kBAAkBA,MAAK,SACjC,kBAAkBA,MAAK,YACvBA,MAAK,QAAQ,SAAS,aAAa,KAClC,EAAE,QACC,EAAE,KAAK,YACN,CAAC,EAAE,KAAK,QAAQA,MAAK,KAAK,KACvB,CAAC,EAAE,KAAK,QAAQA,MAAK,QAAQ;AACzC,UAAI,YAAY,CAAC,WACb,CAAC,qBACD,CAAC,eAAe,EAAE,aAAa;AACnC,UAAI,YAAY,CAACA,MAAK,OAAO,qBAAqB,KAAK,SAAU,MAAM;AACnE,eAAO,KAAK,SAAS,aAAa;AAAA,MACtC,CAAC;AACD,UAAI,aAAa,WAAW;AACxB,YAAIA,MAAK,OAAO,YAAY;AACxB,UAAAA,MAAK,QAAQA,MAAK,OAAO,OAAO,OAAOA,MAAK,OAAO,WAC7CA,MAAK,OAAO,YACZA,MAAK,OAAO,UAAU;AAAA,QAChC;AACA,YAAIA,MAAK,kBAAkB,UACvBA,MAAK,kBAAkB,UACvBA,MAAK,gBAAgB,UACrBA,MAAK,MAAM,UAAU,MACrBA,MAAK,MAAM,UAAU,QAAW;AAChC,qBAAW;AAAA,QACf;AACA,QAAAA,MAAK,MAAM;AACX,YAAIA,MAAK,UACLA,MAAK,OAAO,SAAS,WACrBA,MAAK,cAAc,WAAW;AAC9B,UAAAA,MAAK,MAAM,KAAK;AAAA,MACxB;AAAA,IACJ;AAAA,EACJ;AACA,WAAS,WAAW,SAAS;AACzB,QAAI,CAAC,WACAA,MAAK,OAAO,WAAW,UAAUA,MAAK,OAAO,QAAQ,YAAY,KACjEA,MAAK,OAAO,WAAW,UAAUA,MAAK,OAAO,QAAQ,YAAY;AAClE;AACJ,QAAI,aAAa,SAAS,YAAYA,MAAK,gBAAgB;AAC3D,IAAAA,MAAK,cAAc,cAAcA,MAAK;AACtC,QAAIA,MAAK,OAAO,WACZA,MAAK,gBAAgBA,MAAK,OAAO,QAAQ,YAAY,GAAG;AACxD,MAAAA,MAAK,eAAe,KAAK,IAAIA,MAAK,OAAO,QAAQ,SAAS,GAAGA,MAAK,YAAY;AAAA,IAClF,WACSA,MAAK,OAAO,WACjBA,MAAK,gBAAgBA,MAAK,OAAO,QAAQ,YAAY,GAAG;AACxD,MAAAA,MAAK,eAAe,KAAK,IAAIA,MAAK,OAAO,QAAQ,SAAS,GAAGA,MAAK,YAAY;AAAA,IAClF;AACA,QAAI,WAAW;AACX,MAAAA,MAAK,OAAO;AACZ,mBAAa,cAAc;AAC3B,uBAAiB;AAAA,IACrB;AAAA,EACJ;AACA,WAAS,UAAU,MAAM,UAAU;AAC/B,QAAI;AACJ,QAAI,aAAa,QAAQ;AAAE,iBAAW;AAAA,IAAM;AAC5C,QAAI,cAAcA,MAAK,UAAU,MAAM,QAAW,QAAQ;AAC1D,QAAKA,MAAK,OAAO,WACb,eACA,aAAa,aAAaA,MAAK,OAAO,SAAS,aAAa,SAAY,WAAW,CAACA,MAAK,cAAc,IAAI,KAC1GA,MAAK,OAAO,WACT,eACA,aAAa,aAAaA,MAAK,OAAO,SAAS,aAAa,SAAY,WAAW,CAACA,MAAK,cAAc,IAAI;AAC/G,aAAO;AACX,QAAI,CAACA,MAAK,OAAO,UAAUA,MAAK,OAAO,QAAQ,WAAW;AACtD,aAAO;AACX,QAAI,gBAAgB;AAChB,aAAO;AACX,QAAI,OAAO,CAAC,CAACA,MAAK,OAAO,QAAQ,SAAS,KAAKA,MAAK,OAAO,YAAY,QAAQ,OAAO,SAAS,KAAKA,MAAK,OAAO;AAChH,aAAS,IAAI,GAAG,IAAI,QAAQ,IAAI,MAAM,QAAQ,KAAK;AAC/C,UAAI,MAAM,CAAC;AACX,UAAI,OAAO,MAAM,cACb,EAAE,WAAW;AACb,eAAO;AAAA,eACF,aAAa,QAClB,gBAAgB,UAChB,EAAE,QAAQ,MAAM,YAAY,QAAQ;AACpC,eAAO;AAAA,eACF,OAAO,MAAM,UAAU;AAC5B,YAAI,SAASA,MAAK,UAAU,GAAG,QAAW,IAAI;AAC9C,eAAO,UAAU,OAAO,QAAQ,MAAM,YAAY,QAAQ,IACpD,OACA,CAAC;AAAA,MACX,WACS,OAAO,MAAM,YAClB,gBAAgB,UAChB,EAAE,QACF,EAAE,MACF,YAAY,QAAQ,KAAK,EAAE,KAAK,QAAQ,KACxC,YAAY,QAAQ,KAAK,EAAE,GAAG,QAAQ;AACtC,eAAO;AAAA,IACf;AACA,WAAO,CAAC;AAAA,EACZ;AACA,WAAS,SAAS,MAAM;AACpB,QAAIA,MAAK,kBAAkB;AACvB,aAAQ,KAAK,UAAU,QAAQ,QAAQ,MAAM,MACzC,KAAK,UAAU,QAAQ,oBAAoB,MAAM,MACjDA,MAAK,cAAc,SAAS,IAAI;AACxC,WAAO;AAAA,EACX;AACA,WAAS,OAAO,GAAG;AACf,QAAI,UAAU,EAAE,WAAWA,MAAK;AAChC,QAAI,eAAeA,MAAK,OAAO,MAAM,QAAQ,MAAM,WAAW;AAC9D,QAAI,WACA,gBACA,EAAE,EAAE,iBAAiB,eAAe,EAAE,aAAa,IAAI;AACvD,MAAAA,MAAK,QAAQA,MAAK,OAAO,OAAO,MAAM,EAAE,WAAWA,MAAK,WAClDA,MAAK,OAAO,YACZA,MAAK,OAAO,UAAU;AAAA,IAChC;AAAA,EACJ;AACA,WAAS,UAAU,GAAG;AAClB,QAAI,cAAc,eAAe,CAAC;AAClC,QAAI,UAAUA,MAAK,OAAO,OACpB,QAAQ,SAAS,WAAW,IAC5B,gBAAgBA,MAAK;AAC3B,QAAI,aAAaA,MAAK,OAAO;AAC7B,QAAI,eAAeA,MAAK,WAAW,CAAC,cAAc,CAAC;AACnD,QAAI,qBAAqBA,MAAK,OAAO,UAAU,WAAW,CAAC;AAC3D,QAAI,EAAE,YAAY,MAAM,SAAS;AAC7B,UAAI,YAAY;AACZ,QAAAA,MAAK,QAAQA,MAAK,OAAO,OAAO,MAAM,gBAAgBA,MAAK,WACrDA,MAAK,OAAO,YACZA,MAAK,OAAO,UAAU;AAC5B,QAAAA,MAAK,MAAM;AACX,eAAO,YAAY,KAAK;AAAA,MAC5B,OACK;AACD,QAAAA,MAAK,KAAK;AAAA,MACd;AAAA,IACJ,WACS,eAAe,WAAW,KAC/B,gBACA,oBAAoB;AACpB,UAAI,YAAY,CAAC,CAACA,MAAK,iBACnBA,MAAK,cAAc,SAAS,WAAW;AAC3C,cAAQ,EAAE,SAAS;AAAA,QACf,KAAK;AACD,cAAI,WAAW;AACX,cAAE,eAAe;AACjB,uBAAW;AACX,0BAAc;AAAA,UAClB;AAEI,uBAAW,CAAC;AAChB;AAAA,QACJ,KAAK;AACD,YAAE,eAAe;AACjB,wBAAc;AACd;AAAA,QACJ,KAAK;AAAA,QACL,KAAK;AACD,cAAI,WAAW,CAACA,MAAK,OAAO,YAAY;AACpC,cAAE,eAAe;AACjB,YAAAA,MAAK,MAAM;AAAA,UACf;AACA;AAAA,QACJ,KAAK;AAAA,QACL,KAAK;AACD,cAAI,CAAC,aAAa,CAAC,SAAS;AACxB,cAAE,eAAe;AACjB,gBAAI,gBAAgB,wBAAwB;AAC5C,gBAAIA,MAAK,kBAAkB,WACtB,eAAe,SACX,iBAAiB,SAAS,aAAa,IAAK;AACjD,kBAAI,UAAU,EAAE,YAAY,KAAK,IAAI;AACrC,kBAAI,CAAC,EAAE;AACH,2BAAW,QAAW,OAAO;AAAA,mBAC5B;AACD,kBAAE,gBAAgB;AAClB,4BAAY,OAAO;AACnB,2BAAW,qBAAqB,CAAC,GAAG,CAAC;AAAA,cACzC;AAAA,YACJ;AAAA,UACJ,WACSA,MAAK;AACV,YAAAA,MAAK,YAAY,MAAM;AAC3B;AAAA,QACJ,KAAK;AAAA,QACL,KAAK;AACD,YAAE,eAAe;AACjB,cAAI,QAAQ,EAAE,YAAY,KAAK,IAAI;AACnC,cAAKA,MAAK,iBACN,YAAY,OAAO,UACnB,gBAAgBA,MAAK,SACrB,gBAAgBA,MAAK,UAAU;AAC/B,gBAAI,EAAE,SAAS;AACX,gBAAE,gBAAgB;AAClB,yBAAWA,MAAK,cAAc,KAAK;AACnC,yBAAW,qBAAqB,CAAC,GAAG,CAAC;AAAA,YACzC,WACS,CAAC;AACN,yBAAW,QAAW,QAAQ,CAAC;AAAA,UACvC,WACS,gBAAgBA,MAAK,oBAAoB;AAC9C,uBAAWA,MAAK,cAAc,KAAK;AAAA,UACvC,WACSA,MAAK,OAAO,YAAY;AAC7B,gBAAI,CAAC,aAAaA,MAAK;AACnB,cAAAA,MAAK,YAAY,MAAM;AAC3B,uBAAW,CAAC;AACZ,YAAAA,MAAK,iBAAiB;AAAA,UAC1B;AACA;AAAA,QACJ,KAAK;AACD,cAAI,WAAW;AACX,gBAAI,QAAQ;AAAA,cACRA,MAAK;AAAA,cACLA,MAAK;AAAA,cACLA,MAAK;AAAA,cACLA,MAAK;AAAA,YACT,EACK,OAAOA,MAAK,cAAc,EAC1B,OAAO,SAAU,GAAG;AAAE,qBAAO;AAAA,YAAG,CAAC;AACtC,gBAAI,IAAI,MAAM,QAAQ,WAAW;AACjC,gBAAI,MAAM,IAAI;AACV,kBAAI,SAAS,MAAM,KAAK,EAAE,WAAW,KAAK,EAAE;AAC5C,gBAAE,eAAe;AACjB,eAAC,UAAUA,MAAK,QAAQ,MAAM;AAAA,YAClC;AAAA,UACJ,WACS,CAACA,MAAK,OAAO,cAClBA,MAAK,iBACLA,MAAK,cAAc,SAAS,WAAW,KACvC,EAAE,UAAU;AACZ,cAAE,eAAe;AACjB,YAAAA,MAAK,OAAO,MAAM;AAAA,UACtB;AACA;AAAA,QACJ;AACI;AAAA,MACR;AAAA,IACJ;AACA,QAAIA,MAAK,SAAS,UAAa,gBAAgBA,MAAK,MAAM;AACtD,cAAQ,EAAE,KAAK;AAAA,QACX,KAAKA,MAAK,KAAK,KAAK,CAAC,EAAE,OAAO,CAAC;AAAA,QAC/B,KAAKA,MAAK,KAAK,KAAK,CAAC,EAAE,OAAO,CAAC,EAAE,YAAY;AACzC,UAAAA,MAAK,KAAK,cAAcA,MAAK,KAAK,KAAK,CAAC;AACxC,6BAAmB;AACnB,sBAAY;AACZ;AAAA,QACJ,KAAKA,MAAK,KAAK,KAAK,CAAC,EAAE,OAAO,CAAC;AAAA,QAC/B,KAAKA,MAAK,KAAK,KAAK,CAAC,EAAE,OAAO,CAAC,EAAE,YAAY;AACzC,UAAAA,MAAK,KAAK,cAAcA,MAAK,KAAK,KAAK,CAAC;AACxC,6BAAmB;AACnB,sBAAY;AACZ;AAAA,MACR;AAAA,IACJ;AACA,QAAI,WAAW,eAAe,WAAW,GAAG;AACxC,mBAAa,aAAa,CAAC;AAAA,IAC/B;AAAA,EACJ;AACA,WAAS,YAAY,MAAM,WAAW;AAClC,QAAI,cAAc,QAAQ;AAAE,kBAAY;AAAA,IAAiB;AACzD,QAAIA,MAAK,cAAc,WAAW,KAC7B,SACI,CAAC,KAAK,UAAU,SAAS,SAAS,KAC/B,KAAK,UAAU,SAAS,oBAAoB;AACpD;AACJ,QAAI,YAAY,OACV,KAAK,QAAQ,QAAQ,IACrBA,MAAK,KAAK,kBAAkB,QAAQ,QAAQ,GAAG,cAAcA,MAAK,UAAUA,MAAK,cAAc,CAAC,GAAG,QAAW,IAAI,EAAE,QAAQ,GAAG,iBAAiB,KAAK,IAAI,WAAWA,MAAK,cAAc,CAAC,EAAE,QAAQ,CAAC,GAAG,eAAe,KAAK,IAAI,WAAWA,MAAK,cAAc,CAAC,EAAE,QAAQ,CAAC;AAC9Q,QAAI,mBAAmB;AACvB,QAAI,WAAW,GAAG,WAAW;AAC7B,aAAS,IAAI,gBAAgB,IAAI,cAAc,KAAK,SAAS,KAAK;AAC9D,UAAI,CAAC,UAAU,IAAI,KAAK,CAAC,GAAG,IAAI,GAAG;AAC/B,2BACI,oBAAqB,IAAI,kBAAkB,IAAI;AACnD,YAAI,IAAI,gBAAgB,CAAC,YAAY,IAAI;AACrC,qBAAW;AAAA,iBACN,IAAI,gBAAgB,CAAC,YAAY,IAAI;AAC1C,qBAAW;AAAA,MACnB;AAAA,IACJ;AACA,QAAI,iBAAiB,MAAM,KAAKA,MAAK,WAAW,iBAAiB,oBAAoBA,MAAK,OAAO,aAAa,UAAU,SAAS,CAAC;AAClI,mBAAe,QAAQ,SAAU,SAAS;AACtC,UAAI,OAAO,QAAQ;AACnB,UAAI,YAAY,KAAK,QAAQ;AAC7B,UAAI,aAAc,WAAW,KAAK,YAAY,YACzC,WAAW,KAAK,YAAY;AACjC,UAAI,YAAY;AACZ,gBAAQ,UAAU,IAAI,YAAY;AAClC,SAAC,WAAW,cAAc,UAAU,EAAE,QAAQ,SAAU,GAAG;AACvD,kBAAQ,UAAU,OAAO,CAAC;AAAA,QAC9B,CAAC;AACD;AAAA,MACJ,WACS,oBAAoB,CAAC;AAC1B;AACJ,OAAC,cAAc,WAAW,YAAY,YAAY,EAAE,QAAQ,SAAU,GAAG;AACrE,gBAAQ,UAAU,OAAO,CAAC;AAAA,MAC9B,CAAC;AACD,UAAI,SAAS,QAAW;AACpB,aAAK,UAAU,IAAI,aAAaA,MAAK,cAAc,CAAC,EAAE,QAAQ,IACxD,eACA,UAAU;AAChB,YAAI,cAAc,aAAa,cAAc;AACzC,kBAAQ,UAAU,IAAI,YAAY;AAAA,iBAC7B,cAAc,aAAa,cAAc;AAC9C,kBAAQ,UAAU,IAAI,UAAU;AACpC,YAAI,aAAa,aACZ,aAAa,KAAK,aAAa,aAChC,UAAU,WAAW,aAAa,SAAS;AAC3C,kBAAQ,UAAU,IAAI,SAAS;AAAA,MACvC;AAAA,IACJ,CAAC;AAAA,EACL;AACA,WAAS,WAAW;AAChB,QAAIA,MAAK,UAAU,CAACA,MAAK,OAAO,UAAU,CAACA,MAAK,OAAO;AACnD,uBAAiB;AAAA,EACzB;AACA,WAAS,KAAK,GAAG,iBAAiB;AAC9B,QAAI,oBAAoB,QAAQ;AAAE,wBAAkBA,MAAK;AAAA,IAAkB;AAC3E,QAAIA,MAAK,aAAa,MAAM;AACxB,UAAI,GAAG;AACH,UAAE,eAAe;AACjB,YAAI,cAAc,eAAe,CAAC;AAClC,YAAI,aAAa;AACb,sBAAY,KAAK;AAAA,QACrB;AAAA,MACJ;AACA,UAAIA,MAAK,gBAAgB,QAAW;AAChC,QAAAA,MAAK,YAAY,MAAM;AACvB,QAAAA,MAAK,YAAY,MAAM;AAAA,MAC3B;AACA,mBAAa,QAAQ;AACrB;AAAA,IACJ,WACSA,MAAK,OAAO,YAAYA,MAAK,OAAO,QAAQ;AACjD;AAAA,IACJ;AACA,QAAI,UAAUA,MAAK;AACnB,IAAAA,MAAK,SAAS;AACd,QAAI,CAAC,SAAS;AACV,MAAAA,MAAK,kBAAkB,UAAU,IAAI,MAAM;AAC3C,MAAAA,MAAK,OAAO,UAAU,IAAI,QAAQ;AAClC,mBAAa,QAAQ;AACrB,uBAAiB,eAAe;AAAA,IACpC;AACA,QAAIA,MAAK,OAAO,eAAe,QAAQA,MAAK,OAAO,eAAe,MAAM;AACpE,UAAIA,MAAK,OAAO,eAAe,UAC1B,MAAM,UACH,CAACA,MAAK,cAAc,SAAS,EAAE,aAAa,IAAI;AACpD,mBAAW,WAAY;AAAE,iBAAOA,MAAK,YAAY,OAAO;AAAA,QAAG,GAAG,EAAE;AAAA,MACpE;AAAA,IACJ;AAAA,EACJ;AACA,WAAS,iBAAiB,MAAM;AAC5B,WAAO,SAAU,MAAM;AACnB,UAAI,UAAWA,MAAK,OAAO,MAAM,OAAO,MAAM,IAAIA,MAAK,UAAU,MAAMA,MAAK,OAAO,UAAU;AAC7F,UAAI,iBAAiBA,MAAK,OAAO,OAAO,SAAS,QAAQ,QAAQ,SAAS,MAAM;AAChF,UAAI,YAAY,QAAW;AACvB,QAAAA,MAAK,SAAS,QAAQ,mBAAmB,gBAAgB,IACrD,QAAQ,SAAS,IAAI,KACjB,QAAQ,WAAW,IAAI,KACvB,QAAQ,WAAW,IAAI;AAAA,MACnC;AACA,UAAIA,MAAK,eAAe;AACpB,QAAAA,MAAK,gBAAgBA,MAAK,cAAc,OAAO,SAAU,GAAG;AAAE,iBAAO,UAAU,CAAC;AAAA,QAAG,CAAC;AACpF,YAAI,CAACA,MAAK,cAAc,UAAU,SAAS;AACvC,2BAAiB,OAAO;AAC5B,oBAAY;AAAA,MAChB;AACA,UAAIA,MAAK,eAAe;AACpB,eAAO;AACP,YAAI,YAAY;AACZ,UAAAA,MAAK,mBAAmB,IAAI,IAAI,QAAQ,YAAY,EAAE,SAAS;AAAA;AAE/D,UAAAA,MAAK,mBAAmB,gBAAgB,IAAI;AAChD,QAAAA,MAAK,mBAAmB,WACpB,CAAC,CAAC,kBACE,YAAY,UACZ,eAAe,YAAY,MAAM,QAAQ,YAAY;AAAA,MACjE;AAAA,IACJ;AAAA,EACJ;AACA,WAAS,cAAc;AACnB,QAAI,WAAW;AAAA,MACX;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACJ;AACA,QAAI,aAAa,SAAS,SAAS,CAAC,GAAG,KAAK,MAAM,KAAK,UAAU,QAAQ,WAAW,CAAC,CAAC,CAAC,CAAC,GAAG,cAAc;AACzG,QAAIQ,WAAU,CAAC;AACf,IAAAR,MAAK,OAAO,YAAY,WAAW;AACnC,IAAAA,MAAK,OAAO,aAAa,WAAW;AACpC,WAAO,eAAeA,MAAK,QAAQ,UAAU;AAAA,MACzC,KAAK,WAAY;AAAE,eAAOA,MAAK,OAAO;AAAA,MAAS;AAAA,MAC/C,KAAK,SAAU,OAAO;AAClB,QAAAA,MAAK,OAAO,UAAU,eAAe,KAAK;AAAA,MAC9C;AAAA,IACJ,CAAC;AACD,WAAO,eAAeA,MAAK,QAAQ,WAAW;AAAA,MAC1C,KAAK,WAAY;AAAE,eAAOA,MAAK,OAAO;AAAA,MAAU;AAAA,MAChD,KAAK,SAAU,OAAO;AAClB,QAAAA,MAAK,OAAO,WAAW,eAAe,KAAK;AAAA,MAC/C;AAAA,IACJ,CAAC;AACD,QAAI,WAAW,WAAW,SAAS;AACnC,QAAI,CAAC,WAAW,eAAe,WAAW,cAAc,WAAW;AAC/D,UAAI,oBAAoB,UAAU,cAAc,cAAc,SAAe;AAC7E,MAAAQ,SAAQ,aACJ,WAAW,cAAc,WACnB,SAAS,WAAW,gBAAgB,OAAO,MAC3C,oBAAoB,UAAU,WAAW,gBAAgB,OAAO;AAAA,IAC9E;AACA,QAAI,WAAW,aACV,WAAW,cAAc,aAC1B,CAAC,WAAW,WAAW;AACvB,UAAI,mBAAmB,UAAU,cAAc,aAAa,SAAe;AAC3E,MAAAA,SAAQ,YACJ,WAAW,cAAc,WACnB,SAAS,WAAW,gBAAgB,SAAS,QAC7C,oBAAoB,UAAU,WAAW,gBAAgB,OAAO,MAAM;AAAA,IACpF;AACA,WAAO,eAAeR,MAAK,QAAQ,WAAW;AAAA,MAC1C,KAAK,WAAY;AAAE,eAAOA,MAAK,OAAO;AAAA,MAAU;AAAA,MAChD,KAAK,iBAAiB,KAAK;AAAA,IAC/B,CAAC;AACD,WAAO,eAAeA,MAAK,QAAQ,WAAW;AAAA,MAC1C,KAAK,WAAY;AAAE,eAAOA,MAAK,OAAO;AAAA,MAAU;AAAA,MAChD,KAAK,iBAAiB,KAAK;AAAA,IAC/B,CAAC;AACD,QAAI,mBAAmB,SAAU,MAAM;AAAE,aAAO,SAAU,KAAK;AAC3D,QAAAA,MAAK,OAAO,SAAS,QAAQ,aAAa,UAAU,IAAIA,MAAK,UAAU,KAAK,OAAO;AAAA,MACvF;AAAA,IAAG;AACH,WAAO,eAAeA,MAAK,QAAQ,WAAW;AAAA,MAC1C,KAAK,WAAY;AAAE,eAAOA,MAAK,OAAO;AAAA,MAAU;AAAA,MAChD,KAAK,iBAAiB,KAAK;AAAA,IAC/B,CAAC;AACD,WAAO,eAAeA,MAAK,QAAQ,WAAW;AAAA,MAC1C,KAAK,WAAY;AAAE,eAAOA,MAAK,OAAO;AAAA,MAAU;AAAA,MAChD,KAAK,iBAAiB,KAAK;AAAA,IAC/B,CAAC;AACD,QAAI,WAAW,SAAS,QAAQ;AAC5B,MAAAA,MAAK,OAAO,aAAa;AACzB,MAAAA,MAAK,OAAO,aAAa;AAAA,IAC7B;AACA,WAAO,OAAOA,MAAK,QAAQQ,UAAS,UAAU;AAC9C,aAAS,IAAI,GAAG,IAAI,SAAS,QAAQ;AACjC,MAAAR,MAAK,OAAO,SAAS,CAAC,CAAC,IACnBA,MAAK,OAAO,SAAS,CAAC,CAAC,MAAM,QACzBA,MAAK,OAAO,SAAS,CAAC,CAAC,MAAM;AACzC,UAAM,OAAO,SAAU,MAAM;AAAE,aAAOA,MAAK,OAAO,IAAI,MAAM;AAAA,IAAW,CAAC,EAAE,QAAQ,SAAU,MAAM;AAC9F,MAAAA,MAAK,OAAO,IAAI,IAAI,SAASA,MAAK,OAAO,IAAI,KAAK,CAAC,CAAC,EAAE,IAAI,cAAc;AAAA,IAC5E,CAAC;AACD,IAAAA,MAAK,WACD,CAACA,MAAK,OAAO,iBACT,CAACA,MAAK,OAAO,UACbA,MAAK,OAAO,SAAS,YACrB,CAACA,MAAK,OAAO,QAAQ,UACrB,CAACA,MAAK,OAAO,UACb,CAACA,MAAK,OAAO,eACb,iEAAiE,KAAK,UAAU,SAAS;AACjG,aAAS,IAAI,GAAG,IAAIA,MAAK,OAAO,QAAQ,QAAQ,KAAK;AACjD,UAAI,aAAaA,MAAK,OAAO,QAAQ,CAAC,EAAEA,KAAI,KAAK,CAAC;AAClD,eAAS,OAAO,YAAY;AACxB,YAAI,MAAM,QAAQ,GAAG,IAAI,IAAI;AACzB,UAAAA,MAAK,OAAO,GAAG,IAAI,SAAS,WAAW,GAAG,CAAC,EACtC,IAAI,cAAc,EAClB,OAAOA,MAAK,OAAO,GAAG,CAAC;AAAA,QAChC,WACS,OAAO,WAAW,GAAG,MAAM;AAChC,UAAAA,MAAK,OAAO,GAAG,IAAI,WAAW,GAAG;AAAA,MACzC;AAAA,IACJ;AACA,QAAI,CAAC,WAAW,eAAe;AAC3B,MAAAA,MAAK,OAAO,gBACR,aAAa,EAAE,YAAY,MAAMA,MAAK,OAAO;AAAA,IACrD;AACA,iBAAa,eAAe;AAAA,EAChC;AACA,WAAS,eAAe;AACpB,WAAOA,MAAK,OAAO,OACb,QAAQ,cAAc,cAAc,IACpC;AAAA,EACV;AACA,WAAS,cAAc;AACnB,QAAI,OAAOA,MAAK,OAAO,WAAW,YAC9B,OAAO,UAAU,MAAMA,MAAK,OAAO,MAAM,MAAM;AAC/C,MAAAA,MAAK,OAAO,aAAa,IAAI,MAAM,+BAA+BA,MAAK,OAAO,MAAM,CAAC;AACzF,IAAAA,MAAK,OAAO,SAAS,SAAS,CAAC,GAAG,UAAU,MAAM,OAAO,GAAI,OAAOA,MAAK,OAAO,WAAW,WACrFA,MAAK,OAAO,SACZA,MAAK,OAAO,WAAW,YACnB,UAAU,MAAMA,MAAK,OAAO,MAAM,IAClC,MAAU;AACpB,eAAW,IAAI,MAAMA,MAAK,KAAK,SAAS,UAAU,KAAK,GAAG,IAAI;AAC9D,eAAW,IAAI,MAAMA,MAAK,KAAK,SAAS,SAAS,KAAK,GAAG,IAAI;AAC7D,eAAW,IAAI,MAAMA,MAAK,KAAK,OAAO,UAAU,KAAK,GAAG,IAAI;AAC5D,eAAW,IAAI,MAAMA,MAAK,KAAK,OAAO,SAAS,KAAK,GAAG,IAAI;AAC3D,eAAW,IAAI,MAAMA,MAAK,KAAK,KAAK,CAAC,IAAI,MAAMA,MAAK,KAAK,KAAK,CAAC,IAAI,MAAMA,MAAK,KAAK,KAAK,CAAC,EAAE,YAAY,IAAI,MAAMA,MAAK,KAAK,KAAK,CAAC,EAAE,YAAY,IAAI;AACnJ,QAAI,aAAa,SAAS,SAAS,CAAC,GAAG,cAAc,GAAG,KAAK,MAAM,KAAK,UAAU,QAAQ,WAAW,CAAC,CAAC,CAAC,CAAC;AACzG,QAAI,WAAW,cAAc,UACzB,UAAU,cAAc,cAAc,QAAW;AACjD,MAAAA,MAAK,OAAO,YAAYA,MAAK,KAAK;AAAA,IACtC;AACA,IAAAA,MAAK,aAAa,oBAAoBA,KAAI;AAC1C,IAAAA,MAAK,YAAY,iBAAiB,EAAE,QAAQA,MAAK,QAAQ,MAAMA,MAAK,KAAK,CAAC;AAAA,EAC9E;AACA,WAAS,iBAAiB,uBAAuB;AAC7C,QAAI,OAAOA,MAAK,OAAO,aAAa,YAAY;AAC5C,aAAO,KAAKA,MAAK,OAAO,SAASA,OAAM,qBAAqB;AAAA,IAChE;AACA,QAAIA,MAAK,sBAAsB;AAC3B;AACJ,iBAAa,uBAAuB;AACpC,QAAI,kBAAkB,yBAAyBA,MAAK;AACpD,QAAI,iBAAiB,MAAM,UAAU,OAAO,KAAKA,MAAK,kBAAkB,UAAW,SAAU,KAAK,OAAO;AAAE,aAAO,MAAM,MAAM;AAAA,IAAc,GAAI,CAAC,GAAG,gBAAgBA,MAAK,kBAAkB,aAAa,YAAYA,MAAK,OAAO,SAAS,MAAM,GAAG,GAAG,oBAAoB,UAAU,CAAC,GAAG,sBAAsB,UAAU,SAAS,IAAI,UAAU,CAAC,IAAI,MAAM,cAAc,gBAAgB,sBAAsB,GAAG,qBAAqB,OAAO,cAAc,YAAY,QAAQ,YAAY,sBAAsB,WAC3e,sBAAsB,WACnB,qBAAqB,kBACrB,YAAY,MAAM;AAC1B,QAAI,MAAM,OAAO,cACb,YAAY,OACX,CAAC,YAAY,gBAAgB,eAAe,IAAI,CAAC,iBAAiB;AACvE,gBAAYA,MAAK,mBAAmB,YAAY,CAAC,SAAS;AAC1D,gBAAYA,MAAK,mBAAmB,eAAe,SAAS;AAC5D,QAAIA,MAAK,OAAO;AACZ;AACJ,QAAI,OAAO,OAAO,cAAc,YAAY;AAC5C,QAAI,WAAW;AACf,QAAI,UAAU;AACd,QAAI,wBAAwB,UAAU;AAClC,eAAS,gBAAgB,YAAY,SAAS;AAC9C,iBAAW;AAAA,IACf,WACS,wBAAwB,SAAS;AACtC,cAAQ,gBAAgB,YAAY;AACpC,gBAAU;AAAA,IACd;AACA,gBAAYA,MAAK,mBAAmB,aAAa,CAAC,YAAY,CAAC,OAAO;AACtE,gBAAYA,MAAK,mBAAmB,eAAe,QAAQ;AAC3D,gBAAYA,MAAK,mBAAmB,cAAc,OAAO;AACzD,QAAI,QAAQ,OAAO,SAAS,KAAK,eAC5B,OAAO,cAAc,YAAY;AACtC,QAAI,YAAY,OAAO,gBAAgB,OAAO,SAAS,KAAK;AAC5D,QAAI,aAAa,QAAQ,gBAAgB,OAAO,SAAS,KAAK;AAC9D,gBAAYA,MAAK,mBAAmB,aAAa,SAAS;AAC1D,QAAIA,MAAK,OAAO;AACZ;AACJ,IAAAA,MAAK,kBAAkB,MAAM,MAAM,MAAM;AACzC,QAAI,CAAC,WAAW;AACZ,MAAAA,MAAK,kBAAkB,MAAM,OAAO,OAAO;AAC3C,MAAAA,MAAK,kBAAkB,MAAM,QAAQ;AAAA,IACzC,WACS,CAAC,YAAY;AAClB,MAAAA,MAAK,kBAAkB,MAAM,OAAO;AACpC,MAAAA,MAAK,kBAAkB,MAAM,QAAQ,QAAQ;AAAA,IACjD,OACK;AACD,UAAI,MAAM,sBAAsB;AAChC,UAAI,QAAQ;AACR;AACJ,UAAI,YAAY,OAAO,SAAS,KAAK;AACrC,UAAI,aAAa,KAAK,IAAI,GAAG,YAAY,IAAI,gBAAgB,CAAC;AAC9D,UAAI,eAAe;AACnB,UAAI,cAAc;AAClB,UAAI,cAAc,IAAI,SAAS;AAC/B,UAAI,cAAc,WAAW,YAAY,OAAO;AAChD,kBAAYA,MAAK,mBAAmB,aAAa,KAAK;AACtD,kBAAYA,MAAK,mBAAmB,cAAc,IAAI;AACtD,UAAI,WAAW,eAAe,MAAM,cAAc,aAAa,WAAW;AAC1E,MAAAA,MAAK,kBAAkB,MAAM,OAAO,aAAa;AACjD,MAAAA,MAAK,kBAAkB,MAAM,QAAQ;AAAA,IACzC;AAAA,EACJ;AACA,WAAS,wBAAwB;AAC7B,QAAI,gBAAgB;AACpB,aAAS,IAAI,GAAG,IAAI,SAAS,YAAY,QAAQ,KAAK;AAClD,UAAI,QAAQ,SAAS,YAAY,CAAC;AAClC,UAAI,CAAC,MAAM;AACP;AACJ,UAAI;AACA,cAAM;AAAA,MACV,SACO,KAAK;AACR;AAAA,MACJ;AACA,sBAAgB;AAChB;AAAA,IACJ;AACA,WAAO,iBAAiB,OAAO,gBAAgB,iBAAiB;AAAA,EACpE;AACA,WAAS,mBAAmB;AACxB,QAAI,QAAQ,SAAS,cAAc,OAAO;AAC1C,aAAS,KAAK,YAAY,KAAK;AAC/B,WAAO,MAAM;AAAA,EACjB;AACA,WAAS,SAAS;AACd,QAAIA,MAAK,OAAO,cAAcA,MAAK;AAC/B;AACJ,qBAAiB;AACjB,iCAA6B;AAC7B,cAAU;AAAA,EACd;AACA,WAAS,gBAAgB;AACrB,IAAAA,MAAK,OAAO,MAAM;AAClB,QAAI,OAAO,UAAU,UAAU,QAAQ,MAAM,MAAM,MAC/C,UAAU,qBAAqB,QAAW;AAC1C,iBAAWA,MAAK,OAAO,CAAC;AAAA,IAC5B,OACK;AACD,MAAAA,MAAK,MAAM;AAAA,IACf;AAAA,EACJ;AACA,WAAS,WAAW,GAAG;AACnB,MAAE,eAAe;AACjB,MAAE,gBAAgB;AAClB,QAAI,eAAe,SAAU,KAAK;AAC9B,aAAO,IAAI,aACP,IAAI,UAAU,SAAS,eAAe,KACtC,CAAC,IAAI,UAAU,SAAS,oBAAoB,KAC5C,CAAC,IAAI,UAAU,SAAS,YAAY;AAAA,IAC5C;AACA,QAAI,IAAI,WAAW,eAAe,CAAC,GAAG,YAAY;AAClD,QAAI,MAAM;AACN;AACJ,QAAI,SAAS;AACb,QAAI,eAAgBA,MAAK,wBAAwB,IAAI,KAAK,OAAO,QAAQ,QAAQ,CAAC;AAClF,QAAI,qBAAqB,aAAa,SAAS,IAAIA,MAAK,gBACpD,aAAa,SAAS,IAClBA,MAAK,eAAeA,MAAK,OAAO,aAAa,MACjDA,MAAK,OAAO,SAAS;AACzB,IAAAA,MAAK,mBAAmB;AACxB,QAAIA,MAAK,OAAO,SAAS;AACrB,MAAAA,MAAK,gBAAgB,CAAC,YAAY;AAAA,aAC7BA,MAAK,OAAO,SAAS,YAAY;AACtC,UAAI,gBAAgB,eAAe,YAAY;AAC/C,UAAI;AACA,QAAAA,MAAK,cAAc,OAAO,SAAS,aAAa,GAAG,CAAC;AAAA;AAEpD,QAAAA,MAAK,cAAc,KAAK,YAAY;AAAA,IAC5C,WACSA,MAAK,OAAO,SAAS,SAAS;AACnC,UAAIA,MAAK,cAAc,WAAW,GAAG;AACjC,QAAAA,MAAK,MAAM,OAAO,KAAK;AAAA,MAC3B;AACA,MAAAA,MAAK,wBAAwB;AAC7B,MAAAA,MAAK,cAAc,KAAK,YAAY;AACpC,UAAI,aAAa,cAAcA,MAAK,cAAc,CAAC,GAAG,IAAI,MAAM;AAC5D,QAAAA,MAAK,cAAc,KAAK,SAAU,GAAG,GAAG;AAAE,iBAAO,EAAE,QAAQ,IAAI,EAAE,QAAQ;AAAA,QAAG,CAAC;AAAA,IACrF;AACA,uBAAmB;AACnB,QAAI,mBAAmB;AACnB,UAAI,YAAYA,MAAK,gBAAgB,aAAa,YAAY;AAC9D,MAAAA,MAAK,cAAc,aAAa,YAAY;AAC5C,MAAAA,MAAK,eAAe,aAAa,SAAS;AAC1C,UAAI,WAAW;AACX,qBAAa,cAAc;AAC3B,yBAAiB;AAAA,MACrB;AACA,mBAAa,eAAe;AAAA,IAChC;AACA,iCAA6B;AAC7B,cAAU;AACV,gBAAY;AACZ,QAAI,CAAC,qBACDA,MAAK,OAAO,SAAS,WACrBA,MAAK,OAAO,eAAe;AAC3B,qBAAe,MAAM;AAAA,aAChBA,MAAK,qBAAqB,UAC/BA,MAAK,gBAAgB,QAAW;AAChC,MAAAA,MAAK,oBAAoBA,MAAK,iBAAiB,MAAM;AAAA,IACzD;AACA,QAAIA,MAAK,gBAAgB;AACrB,MAAAA,MAAK,gBAAgB,UAAaA,MAAK,YAAY,MAAM;AAC7D,QAAIA,MAAK,OAAO,eAAe;AAC3B,UAAI,SAASA,MAAK,OAAO,SAAS,YAAY,CAACA,MAAK,OAAO;AAC3D,UAAI,QAAQA,MAAK,OAAO,SAAS,WAC7BA,MAAK,cAAc,WAAW,KAC9B,CAACA,MAAK,OAAO;AACjB,UAAI,UAAU,OAAO;AACjB,sBAAc;AAAA,MAClB;AAAA,IACJ;AACA,kBAAc;AAAA,EAClB;AACA,MAAI,YAAY;AAAA,IACZ,QAAQ,CAAC,aAAa,cAAc;AAAA,IACpC,YAAY,CAAC,aAAa,kBAAkB,aAAa;AAAA,IACzD,SAAS,CAAC,UAAU;AAAA,IACpB,SAAS,CAAC,UAAU;AAAA,IACpB,iBAAiB,CAAC,qBAAqB;AAAA,IACvC,YAAY;AAAA,MACR,WAAY;AACR,YAAIA,MAAK,OAAO,eAAe,MAAM;AACjC,eAAKA,MAAK,QAAQ,SAASA,MAAK,IAAI;AACpC,eAAKA,MAAK,QAAQ,SAASA,MAAK,IAAI;AAAA,QACxC,OACK;AACD,UAAAA,MAAK,OAAO,oBAAoB,SAASA,MAAK,IAAI;AAClD,UAAAA,MAAK,OAAO,oBAAoB,SAASA,MAAK,IAAI;AAAA,QACtD;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ;AACA,WAAS,IAAIS,SAAQ,OAAO;AACxB,QAAIA,YAAW,QAAQ,OAAOA,YAAW,UAAU;AAC/C,aAAO,OAAOT,MAAK,QAAQS,OAAM;AACjC,eAAS,OAAOA,SAAQ;AACpB,YAAI,UAAU,GAAG,MAAM;AACnB,oBAAU,GAAG,EAAE,QAAQ,SAAU,GAAG;AAAE,mBAAO,EAAE;AAAA,UAAG,CAAC;AAAA,MAC3D;AAAA,IACJ,OACK;AACD,MAAAT,MAAK,OAAOS,OAAM,IAAI;AACtB,UAAI,UAAUA,OAAM,MAAM;AACtB,kBAAUA,OAAM,EAAE,QAAQ,SAAU,GAAG;AAAE,iBAAO,EAAE;AAAA,QAAG,CAAC;AAAA,eACjD,MAAM,QAAQA,OAAM,IAAI;AAC7B,QAAAT,MAAK,OAAOS,OAAM,IAAI,SAAS,KAAK;AAAA,IAC5C;AACA,IAAAT,MAAK,OAAO;AACZ,gBAAY,IAAI;AAAA,EACpB;AACA,WAAS,gBAAgB,WAAW,QAAQ;AACxC,QAAI,QAAQ,CAAC;AACb,QAAI,qBAAqB;AACrB,cAAQ,UAAU,IAAI,SAAU,GAAG;AAAE,eAAOA,MAAK,UAAU,GAAG,MAAM;AAAA,MAAG,CAAC;AAAA,aACnE,qBAAqB,QAAQ,OAAO,cAAc;AACvD,cAAQ,CAACA,MAAK,UAAU,WAAW,MAAM,CAAC;AAAA,aACrC,OAAO,cAAc,UAAU;AACpC,cAAQA,MAAK,OAAO,MAAM;AAAA,QACtB,KAAK;AAAA,QACL,KAAK;AACD,kBAAQ,CAACA,MAAK,UAAU,WAAW,MAAM,CAAC;AAC1C;AAAA,QACJ,KAAK;AACD,kBAAQ,UACH,MAAMA,MAAK,OAAO,WAAW,EAC7B,IAAI,SAAU,MAAM;AAAE,mBAAOA,MAAK,UAAU,MAAM,MAAM;AAAA,UAAG,CAAC;AACjE;AAAA,QACJ,KAAK;AACD,kBAAQ,UACH,MAAMA,MAAK,KAAK,cAAc,EAC9B,IAAI,SAAU,MAAM;AAAE,mBAAOA,MAAK,UAAU,MAAM,MAAM;AAAA,UAAG,CAAC;AACjE;AAAA,QACJ;AACI;AAAA,MACR;AAAA,IACJ;AAEI,MAAAA,MAAK,OAAO,aAAa,IAAI,MAAM,4BAA4B,KAAK,UAAU,SAAS,CAAC,CAAC;AAC7F,IAAAA,MAAK,gBAAiBA,MAAK,OAAO,sBAC5B,QACA,MAAM,OAAO,SAAU,GAAG;AAAE,aAAO,aAAa,QAAQ,UAAU,GAAG,KAAK;AAAA,IAAG,CAAC;AACpF,QAAIA,MAAK,OAAO,SAAS;AACrB,MAAAA,MAAK,cAAc,KAAK,SAAU,GAAG,GAAG;AAAE,eAAO,EAAE,QAAQ,IAAI,EAAE,QAAQ;AAAA,MAAG,CAAC;AAAA,EACrF;AACA,WAAS,QAAQ,MAAMM,gBAAe,QAAQ;AAC1C,QAAIA,mBAAkB,QAAQ;AAAE,MAAAA,iBAAgB;AAAA,IAAO;AACvD,QAAI,WAAW,QAAQ;AAAE,eAASN,MAAK,OAAO;AAAA,IAAY;AAC1D,QAAK,SAAS,KAAK,CAAC,QAAU,gBAAgB,SAAS,KAAK,WAAW;AACnE,aAAOA,MAAK,MAAMM,cAAa;AACnC,oBAAgB,MAAM,MAAM;AAC5B,IAAAN,MAAK,wBACDA,MAAK,cAAcA,MAAK,cAAc,SAAS,CAAC;AACpD,IAAAA,MAAK,OAAO;AACZ,eAAW,QAAWM,cAAa;AACnC,qBAAiB;AACjB,QAAIN,MAAK,cAAc,WAAW,GAAG;AACjC,MAAAA,MAAK,MAAM,KAAK;AAAA,IACpB;AACA,gBAAYM,cAAa;AACzB,QAAIA;AACA,mBAAa,UAAU;AAAA,EAC/B;AACA,WAAS,eAAe,KAAK;AACzB,WAAO,IACF,MAAM,EACN,IAAI,SAAU,MAAM;AACrB,UAAI,OAAO,SAAS,YAChB,OAAO,SAAS,YAChB,gBAAgB,MAAM;AACtB,eAAON,MAAK,UAAU,MAAM,QAAW,IAAI;AAAA,MAC/C,WACS,QACL,OAAO,SAAS,YAChB,KAAK,QACL,KAAK;AACL,eAAO;AAAA,UACH,MAAMA,MAAK,UAAU,KAAK,MAAM,MAAS;AAAA,UACzC,IAAIA,MAAK,UAAU,KAAK,IAAI,MAAS;AAAA,QACzC;AACJ,aAAO;AAAA,IACX,CAAC,EACI,OAAO,SAAU,GAAG;AAAE,aAAO;AAAA,IAAG,CAAC;AAAA,EAC1C;AACA,WAAS,aAAa;AAClB,IAAAA,MAAK,gBAAgB,CAAC;AACtB,IAAAA,MAAK,MAAMA,MAAK,UAAUA,MAAK,OAAO,GAAG,KAAK,oBAAI,KAAK;AACvD,QAAI,gBAAgBA,MAAK,OAAO,iBAC1BA,MAAK,MAAM,aAAa,WACtBA,MAAK,MAAM,aAAa,eACxBA,MAAK,MAAM,eACXA,MAAK,MAAM,UAAUA,MAAK,MAAM,cAC9B,OACAA,MAAK,MAAM;AACrB,QAAI;AACA,sBAAgB,eAAeA,MAAK,OAAO,UAAU;AACzD,IAAAA,MAAK,eACDA,MAAK,cAAc,SAAS,IACtBA,MAAK,cAAc,CAAC,IACpBA,MAAK,OAAO,WACVA,MAAK,OAAO,QAAQ,QAAQ,IAAIA,MAAK,IAAI,QAAQ,IAC/CA,MAAK,OAAO,UACZA,MAAK,OAAO,WACVA,MAAK,OAAO,QAAQ,QAAQ,IAAIA,MAAK,IAAI,QAAQ,IAC/CA,MAAK,OAAO,UACZA,MAAK;AACvB,IAAAA,MAAK,cAAcA,MAAK,aAAa,YAAY;AACjD,IAAAA,MAAK,eAAeA,MAAK,aAAa,SAAS;AAC/C,QAAIA,MAAK,cAAc,SAAS;AAC5B,MAAAA,MAAK,wBAAwBA,MAAK,cAAc,CAAC;AACrD,QAAIA,MAAK,OAAO,YAAY;AACxB,MAAAA,MAAK,OAAO,UAAUA,MAAK,UAAUA,MAAK,OAAO,SAAS,KAAK;AACnE,QAAIA,MAAK,OAAO,YAAY;AACxB,MAAAA,MAAK,OAAO,UAAUA,MAAK,UAAUA,MAAK,OAAO,SAAS,KAAK;AACnE,IAAAA,MAAK,iBACD,CAAC,CAACA,MAAK,OAAO,YACTA,MAAK,OAAO,QAAQ,SAAS,IAAI,KAC9BA,MAAK,OAAO,QAAQ,WAAW,IAAI,KACnCA,MAAK,OAAO,QAAQ,WAAW,IAAI;AAC/C,IAAAA,MAAK,iBACD,CAAC,CAACA,MAAK,OAAO,YACTA,MAAK,OAAO,QAAQ,SAAS,IAAI,KAC9BA,MAAK,OAAO,QAAQ,WAAW,IAAI,KACnCA,MAAK,OAAO,QAAQ,WAAW,IAAI;AAAA,EACnD;AACA,WAAS,cAAc;AACnB,IAAAA,MAAK,QAAQ,aAAa;AAC1B,QAAI,CAACA,MAAK,OAAO;AACb,MAAAA,MAAK,OAAO,aAAa,IAAI,MAAM,iCAAiC,CAAC;AACrE;AAAA,IACJ;AACA,IAAAA,MAAK,MAAM,QAAQA,MAAK,MAAM;AAC9B,IAAAA,MAAK,MAAM,OAAO;AAClB,IAAAA,MAAK,MAAM,UAAU,IAAI,iBAAiB;AAC1C,IAAAA,MAAK,SAASA,MAAK;AACnB,QAAIA,MAAK,OAAO,UAAU;AACtB,MAAAA,MAAK,WAAW,cAAcA,MAAK,MAAM,UAAUA,MAAK,OAAO,aAAa;AAC5E,MAAAA,MAAK,SAASA,MAAK;AACnB,MAAAA,MAAK,SAAS,cAAcA,MAAK,MAAM;AACvC,MAAAA,MAAK,SAAS,WAAWA,MAAK,MAAM;AACpC,MAAAA,MAAK,SAAS,WAAWA,MAAK,MAAM;AACpC,MAAAA,MAAK,SAAS,WAAWA,MAAK,MAAM;AACpC,MAAAA,MAAK,SAAS,OAAO;AACrB,MAAAA,MAAK,MAAM,aAAa,QAAQ,QAAQ;AACxC,UAAI,CAACA,MAAK,OAAO,UAAUA,MAAK,MAAM;AAClC,QAAAA,MAAK,MAAM,WAAW,aAAaA,MAAK,UAAUA,MAAK,MAAM,WAAW;AAAA,IAChF;AACA,QAAI,CAACA,MAAK,OAAO;AACb,MAAAA,MAAK,OAAO,aAAa,YAAY,UAAU;AACnD,0BAAsB;AAAA,EAC1B;AACA,WAAS,wBAAwB;AAC7B,IAAAA,MAAK,mBAAmBA,MAAK,OAAO,mBAAmBA,MAAK;AAAA,EAChE;AACA,WAAS,cAAc;AACnB,QAAI,YAAYA,MAAK,OAAO,aACtBA,MAAK,OAAO,aACR,SACA,mBACJ;AACN,IAAAA,MAAK,cAAc,cAAc,SAASA,MAAK,MAAM,YAAY,mBAAmB;AACpF,IAAAA,MAAK,YAAY,WAAW;AAC5B,IAAAA,MAAK,YAAY,OAAO;AACxB,IAAAA,MAAK,YAAY,WAAWA,MAAK,MAAM;AACvC,IAAAA,MAAK,YAAY,WAAWA,MAAK,MAAM;AACvC,IAAAA,MAAK,YAAY,cAAcA,MAAK,MAAM;AAC1C,IAAAA,MAAK,kBACD,cAAc,mBACR,kBACA,cAAc,SACV,UACA;AACd,QAAIA,MAAK,cAAc,SAAS,GAAG;AAC/B,MAAAA,MAAK,YAAY,eAAeA,MAAK,YAAY,QAAQA,MAAK,WAAWA,MAAK,cAAc,CAAC,GAAGA,MAAK,eAAe;AAAA,IACxH;AACA,QAAIA,MAAK,OAAO;AACZ,MAAAA,MAAK,YAAY,MAAMA,MAAK,WAAWA,MAAK,OAAO,SAAS,OAAO;AACvE,QAAIA,MAAK,OAAO;AACZ,MAAAA,MAAK,YAAY,MAAMA,MAAK,WAAWA,MAAK,OAAO,SAAS,OAAO;AACvE,QAAIA,MAAK,MAAM,aAAa,MAAM;AAC9B,MAAAA,MAAK,YAAY,OAAO,OAAOA,MAAK,MAAM,aAAa,MAAM,CAAC;AAClE,IAAAA,MAAK,MAAM,OAAO;AAClB,QAAIA,MAAK,aAAa;AAClB,MAAAA,MAAK,SAAS,OAAO;AACzB,QAAI;AACA,UAAIA,MAAK,MAAM;AACX,QAAAA,MAAK,MAAM,WAAW,aAAaA,MAAK,aAAaA,MAAK,MAAM,WAAW;AAAA,IACnF,SACO,IAAI;AAAA,IAAE;AACb,SAAKA,MAAK,aAAa,UAAU,SAAU,GAAG;AAC1C,MAAAA,MAAK,QAAQ,eAAe,CAAC,EAAE,OAAO,OAAOA,MAAK,eAAe;AACjE,mBAAa,UAAU;AACvB,mBAAa,SAAS;AAAA,IAC1B,CAAC;AAAA,EACL;AACA,WAAS,OAAO,GAAG;AACf,QAAIA,MAAK,WAAW;AAChB,aAAOA,MAAK,MAAM;AACtB,IAAAA,MAAK,KAAK,CAAC;AAAA,EACf;AACA,WAAS,aAAa,OAAO,MAAM;AAC/B,QAAIA,MAAK,WAAW;AAChB;AACJ,QAAI,QAAQA,MAAK,OAAO,KAAK;AAC7B,QAAI,UAAU,UAAa,MAAM,SAAS,GAAG;AACzC,eAAS,IAAI,GAAG,MAAM,CAAC,KAAK,IAAI,MAAM,QAAQ;AAC1C,cAAM,CAAC,EAAEA,MAAK,eAAeA,MAAK,MAAM,OAAOA,OAAM,IAAI;AAAA,IACjE;AACA,QAAI,UAAU,YAAY;AACtB,MAAAA,MAAK,MAAM,cAAc,YAAY,QAAQ,CAAC;AAC9C,MAAAA,MAAK,MAAM,cAAc,YAAY,OAAO,CAAC;AAAA,IACjD;AAAA,EACJ;AACA,WAAS,YAAY,MAAM;AACvB,QAAI,IAAI,SAAS,YAAY,OAAO;AACpC,MAAE,UAAU,MAAM,MAAM,IAAI;AAC5B,WAAO;AAAA,EACX;AACA,WAAS,eAAe,MAAM;AAC1B,aAAS,IAAI,GAAG,IAAIA,MAAK,cAAc,QAAQ,KAAK;AAChD,UAAI,eAAeA,MAAK,cAAc,CAAC;AACvC,UAAI,wBAAwB,QACxB,aAAa,cAAc,IAAI,MAAM;AACrC,eAAO,KAAK;AAAA,IACpB;AACA,WAAO;AAAA,EACX;AACA,WAAS,cAAc,MAAM;AACzB,QAAIA,MAAK,OAAO,SAAS,WAAWA,MAAK,cAAc,SAAS;AAC5D,aAAO;AACX,WAAQ,aAAa,MAAMA,MAAK,cAAc,CAAC,CAAC,KAAK,KACjD,aAAa,MAAMA,MAAK,cAAc,CAAC,CAAC,KAAK;AAAA,EACrD;AACA,WAAS,+BAA+B;AACpC,QAAIA,MAAK,OAAO,cAAcA,MAAK,YAAY,CAACA,MAAK;AACjD;AACJ,IAAAA,MAAK,aAAa,QAAQ,SAAU,aAAa,GAAG;AAChD,UAAI,IAAI,IAAI,KAAKA,MAAK,aAAaA,MAAK,cAAc,CAAC;AACvD,QAAE,SAASA,MAAK,eAAe,CAAC;AAChC,UAAIA,MAAK,OAAO,aAAa,KACzBA,MAAK,OAAO,sBAAsB,UAAU;AAC5C,QAAAA,MAAK,cAAc,CAAC,EAAE,cAClB,WAAW,EAAE,SAAS,GAAGA,MAAK,OAAO,uBAAuBA,MAAK,IAAI,IAAI;AAAA,MACjF,OACK;AACD,QAAAA,MAAK,wBAAwB,QAAQ,EAAE,SAAS,EAAE,SAAS;AAAA,MAC/D;AACA,kBAAY,QAAQ,EAAE,YAAY,EAAE,SAAS;AAAA,IACjD,CAAC;AACD,IAAAA,MAAK,sBACDA,MAAK,OAAO,YAAY,WACnBA,MAAK,gBAAgBA,MAAK,OAAO,QAAQ,YAAY,IAChDA,MAAK,gBAAgBA,MAAK,OAAO,QAAQ,SAAS,IAClDA,MAAK,cAAcA,MAAK,OAAO,QAAQ,YAAY;AACjE,IAAAA,MAAK,sBACDA,MAAK,OAAO,YAAY,WACnBA,MAAK,gBAAgBA,MAAK,OAAO,QAAQ,YAAY,IAChDA,MAAK,eAAe,IAAIA,MAAK,OAAO,QAAQ,SAAS,IACrDA,MAAK,cAAcA,MAAK,OAAO,QAAQ,YAAY;AAAA,EACrE;AACA,WAAS,WAAW,gBAAgB;AAChC,QAAI,SAAS,mBACRA,MAAK,OAAO,WAAWA,MAAK,OAAO,YAAYA,MAAK,OAAO;AAChE,WAAOA,MAAK,cACP,IAAI,SAAU,MAAM;AAAE,aAAOA,MAAK,WAAW,MAAM,MAAM;AAAA,IAAG,CAAC,EAC7D,OAAO,SAAU,GAAG,GAAG,KAAK;AAC7B,aAAOA,MAAK,OAAO,SAAS,WACxBA,MAAK,OAAO,cACZ,IAAI,QAAQ,CAAC,MAAM;AAAA,IAC3B,CAAC,EACI,KAAKA,MAAK,OAAO,SAAS,UACzBA,MAAK,OAAO,cACZA,MAAK,KAAK,cAAc;AAAA,EAClC;AACA,WAAS,YAAYM,gBAAe;AAChC,QAAIA,mBAAkB,QAAQ;AAAE,MAAAA,iBAAgB;AAAA,IAAM;AACtD,QAAIN,MAAK,gBAAgB,UAAaA,MAAK,iBAAiB;AACxD,MAAAA,MAAK,YAAY,QACbA,MAAK,0BAA0B,SACzBA,MAAK,WAAWA,MAAK,uBAAuBA,MAAK,eAAe,IAChE;AAAA,IACd;AACA,IAAAA,MAAK,MAAM,QAAQ,WAAWA,MAAK,OAAO,UAAU;AACpD,QAAIA,MAAK,aAAa,QAAW;AAC7B,MAAAA,MAAK,SAAS,QAAQ,WAAWA,MAAK,OAAO,SAAS;AAAA,IAC1D;AACA,QAAIM,mBAAkB;AAClB,mBAAa,eAAe;AAAA,EACpC;AACA,WAAS,gBAAgB,GAAG;AACxB,QAAI,cAAc,eAAe,CAAC;AAClC,QAAI,cAAcN,MAAK,aAAa,SAAS,WAAW;AACxD,QAAI,cAAcA,MAAK,aAAa,SAAS,WAAW;AACxD,QAAI,eAAe,aAAa;AAC5B,kBAAY,cAAc,KAAK,CAAC;AAAA,IACpC,WACSA,MAAK,aAAa,QAAQ,WAAW,KAAK,GAAG;AAClD,kBAAY,OAAO;AAAA,IACvB,WACS,YAAY,UAAU,SAAS,SAAS,GAAG;AAChD,MAAAA,MAAK,WAAWA,MAAK,cAAc,CAAC;AAAA,IACxC,WACS,YAAY,UAAU,SAAS,WAAW,GAAG;AAClD,MAAAA,MAAK,WAAWA,MAAK,cAAc,CAAC;AAAA,IACxC;AAAA,EACJ;AACA,WAAS,YAAY,GAAG;AACpB,MAAE,eAAe;AACjB,QAAI,YAAY,EAAE,SAAS,WAAW,cAAc,eAAe,CAAC,GAAG,QAAQ;AAC/E,QAAIA,MAAK,SAAS,UAAa,gBAAgBA,MAAK,MAAM;AACtD,MAAAA,MAAK,KAAK,cACNA,MAAK,KAAK,KAAK,IAAIA,MAAK,KAAK,gBAAgBA,MAAK,KAAK,KAAK,CAAC,CAAC,CAAC;AAAA,IACvE;AACA,QAAI,MAAM,WAAW,MAAM,aAAa,KAAK,CAAC,GAAG,MAAM,WAAW,MAAM,aAAa,KAAK,CAAC,GAAG,OAAO,WAAW,MAAM,aAAa,MAAM,CAAC,GAAG,WAAW,SAAS,MAAM,OAAO,EAAE,GAAG,QAAQ,EAAE,UACxL,YAAa,EAAE,UAAU,KAAK,IAAI,KAAM;AAC7C,QAAI,WAAW,WAAW,OAAO;AACjC,QAAI,OAAO,MAAM,UAAU,eAAe,MAAM,MAAM,WAAW,GAAG;AAChE,UAAI,aAAa,UAAUA,MAAK,aAAa,eAAe,UAAUA,MAAK;AAC3E,UAAI,WAAW,KAAK;AAChB,mBACI,MACI,WACA,IAAI,CAAC,UAAU,KACd,IAAI,UAAU,KAAK,IAAI,CAACA,MAAK,IAAI;AAC1C,YAAI;AACA,4BAAkB,QAAW,IAAIA,MAAK,WAAW;AAAA,MACzD,WACS,WAAW,KAAK;AACrB,mBACI,UAAUA,MAAK,cAAc,WAAW,MAAM,IAAI,CAACA,MAAK,IAAI,IAAI;AACpE,YAAI;AACA,4BAAkB,QAAW,GAAGA,MAAK,WAAW;AAAA,MACxD;AACA,UAAIA,MAAK,QACL,eACC,SAAS,IACJ,WAAW,aAAa,KACxB,KAAK,IAAI,WAAW,QAAQ,IAAI,OAAO;AAC7C,QAAAA,MAAK,KAAK,cACNA,MAAK,KAAK,KAAK,IAAIA,MAAK,KAAK,gBAAgBA,MAAK,KAAK,KAAK,CAAC,CAAC,CAAC;AAAA,MACvE;AACA,YAAM,QAAQ,IAAI,QAAQ;AAAA,IAC9B;AAAA,EACJ;AACA,OAAK;AACL,SAAOA;AACX;AACA,SAAS,WAAW,UAAUE,SAAQ;AAClC,MAAI,QAAQ,MAAM,UAAU,MACvB,KAAK,QAAQ,EACb,OAAO,SAAU,GAAG;AAAE,WAAO,aAAa;AAAA,EAAa,CAAC;AAC7D,MAAI,YAAY,CAAC;AACjB,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACnC,QAAI,OAAO,MAAM,CAAC;AAClB,QAAI;AACA,UAAI,KAAK,aAAa,cAAc,MAAM;AACtC;AACJ,UAAI,KAAK,eAAe,QAAW;AAC/B,aAAK,WAAW,QAAQ;AACxB,aAAK,aAAa;AAAA,MACtB;AACA,WAAK,aAAa,kBAAkB,MAAMA,WAAU,CAAC,CAAC;AACtD,gBAAU,KAAK,KAAK,UAAU;AAAA,IAClC,SACO,GAAG;AACN,cAAQ,MAAM,CAAC;AAAA,IACnB;AAAA,EACJ;AACA,SAAO,UAAU,WAAW,IAAI,UAAU,CAAC,IAAI;AACnD;AACA,IAAI,OAAO,gBAAgB,eACvB,OAAO,mBAAmB,eAC1B,OAAO,aAAa,aAAa;AACjC,iBAAe,UAAU,YAAY,SAAS,UAAU,YAAY,SAAUA,SAAQ;AAClF,WAAO,WAAW,MAAMA,OAAM;AAAA,EAClC;AACA,cAAY,UAAU,YAAY,SAAUA,SAAQ;AAChD,WAAO,WAAW,CAAC,IAAI,GAAGA,OAAM;AAAA,EACpC;AACJ;AACA,IAAI,YAAY,SAAU,UAAUA,SAAQ;AACxC,MAAI,OAAO,aAAa,UAAU;AAC9B,WAAO,WAAW,OAAO,SAAS,iBAAiB,QAAQ,GAAGA,OAAM;AAAA,EACxE,WACS,oBAAoB,MAAM;AAC/B,WAAO,WAAW,CAAC,QAAQ,GAAGA,OAAM;AAAA,EACxC,OACK;AACD,WAAO,WAAW,UAAUA,OAAM;AAAA,EACtC;AACJ;AACA,UAAU,gBAAgB,CAAC;AAC3B,UAAU,QAAQ;AAAA,EACd,IAAI,SAAS,CAAC,GAAG,eAAO;AAAA,EACxB,SAAS,SAAS,CAAC,GAAG,eAAO;AACjC;AACA,UAAU,WAAW,SAAU,MAAM;AACjC,YAAU,MAAM,UAAU,SAAS,SAAS,CAAC,GAAG,UAAU,MAAM,OAAO,GAAG,IAAI;AAClF;AACA,UAAU,cAAc,SAAUA,SAAQ;AACtC,YAAU,gBAAgB,SAAS,SAAS,CAAC,GAAG,UAAU,aAAa,GAAGA,OAAM;AACpF;AACA,UAAU,YAAY,iBAAiB,CAAC,CAAC;AACzC,UAAU,aAAa,oBAAoB,CAAC,CAAC;AAC7C,UAAU,eAAe;AACzB,IAAI,OAAO,WAAW,eAAe,OAAO,OAAO,OAAO,aAAa;AACnE,SAAO,GAAG,YAAY,SAAUA,SAAQ;AACpC,WAAO,WAAW,MAAMA,OAAM;AAAA,EAClC;AACJ;AACA,KAAK,UAAU,UAAU,SAAU,MAAM;AACrC,SAAO,IAAI,KAAK,KAAK,YAAY,GAAG,KAAK,SAAS,GAAG,KAAK,QAAQ,KAAK,OAAO,SAAS,WAAW,SAAS,MAAM,EAAE,IAAI,KAAK;AAChI;AACA,IAAI,OAAO,WAAW,aAAa;AAC/B,SAAO,YAAY;AACvB;AACA,IAAO,cAAQ;;;AC3/Df,mBAAiB;AAEjB,IAAO,uCAAP,cAA6B,WAAW;AAAA,EACpC,OAAO,UAAU;AAAA,IACb;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACJ;AAAA,EACA,OAAO,SAAS;AAAA,IACZ,gBAAgB;AAAA,EACpB;AAAA,EAEA,UAAU;AACN,YAAQ,IAAI,gEAAyD;AACrE,YAAQ,IAAI,iCAA0B,KAAK,OAAO;AAClD,YAAQ,IAAI,gCAAyB,KAAK,OAAO;AACjD,YAAQ,IAAI,kCAA2B,KAAK,iBAAiB;AAC7D,YAAQ,IAAI,sCAA+B,KAAK,oBAAoB,KAAK,iBAAiB,WAAW;AACrG,YAAQ,IAAI,8BAAuB,KAAK,mBAAmB;AAG3D,YAAQ,IAAI,kCAA2B,OAAO,gBAAc,WAAW;AAEvE,SAAK,eAAe;AACpB,SAAK,eAAe;AACpB,SAAK,YAAY;AAGjB,eAAW,MAAM;AACb,cAAQ,IAAI,8CAAuC;AACnD,UAAI;AACA,aAAK,eAAe;AAAA,MACxB,SAASQ,QAAO;AACZ,gBAAQ,MAAM,sCAA+BA,MAAK;AAAA,MACtD;AAAA,IACJ,GAAG,GAAG;AAAA,EACV;AAAA,EAEA,aAAa;AACT,QAAI,KAAK,YAAY;AACjB,WAAK,WAAW,QAAQ;AAAA,IAC5B;AAAA,EACJ;AAAA,EAEA,iBAAiB;AACb,YAAQ,IAAI,uDAAgD;AAE5D,QAAI,CAAC,KAAK,mBAAmB;AACzB,cAAQ,MAAM,qCAA8B;AAC5C;AAAA,IACJ;AAGA,QAAI,KAAK,YAAY;AACjB,WAAK,WAAW,QAAQ;AACxB,WAAK,aAAa;AAAA,IACtB;AAGA,SAAK,oBAAoB;AAAA,EAC7B;AAAA,EAEA,MAAM,sBAAsB;AACxB,YAAQ,IAAI,gEAAyD;AAErE,QAAI,CAAC,KAAK,mBAAmB;AACzB,cAAQ,MAAM,sDAA+C;AAC7D;AAAA,IACJ;AAEA,QAAI;AAEA,YAAM,gBAAgB,MAAM,KAAK,mBAAmB;AAEpD,YAAMC,UAAS;AAAA,QACX,QAAQ;AAAA,QACR,QAAQ,aAAAC,QAAK;AAAA,QACb,YAAY;AAAA,QACZ,SAAS;AAAA,QACT,UAAS,oBAAI,KAAK,GAAE,QAAQ,EAAE;AAAA;AAAA,QAC9B,QAAQ;AAAA;AAAA,QACR,SAAS;AAAA;AAAA,QACT,UAAU,CAAC,eAAe,YAAY;AAClC,kBAAQ,IAAI,yCAAkC,OAAO;AACrD,eAAK,iBAAiB,OAAO;AAAA,QACjC;AAAA,QACA,SAAS,MAAM;AACX,kBAAQ,IAAI,8BAAuB;AACnC,qBAAW,MAAM;AACb,iBAAK,eAAe;AAAA,UACxB,GAAG,EAAE;AAAA,QACT;AAAA,QACA,SAAS,CAACF,WAAU;AAChB,kBAAQ,MAAM,8BAAuBA,MAAK;AAAA,QAC9C;AAAA,MACJ;AAEA,cAAQ,IAAI,6CAAsCC,OAAM;AACxD,WAAK,aAAa,YAAU,KAAK,gBAAgBA,OAAM;AAEvD,UAAI,KAAK,YAAY;AACjB,gBAAQ,IAAI,gDAAyC,KAAK,UAAU;AAAA,MACxE,OAAO;AACH,gBAAQ,MAAM,+CAAwC;AAAA,MAC1D;AAAA,IACJ,SAASD,QAAO;AACZ,cAAQ,MAAM,0CAAmCA,MAAK;AAEtD,WAAK,yBAAyB;AAAA,IAClC;AAAA,EACJ;AAAA,EAEA,iBAAiB;AACb,YAAQ,IAAI,yDAAkD;AAE9D,UAAM,kBAAkB,KAAK,eAAe,cAAc,qBAAqB;AAC/E,QAAI,iBAAiB;AACjB,cAAQ,IAAI,2DAAoD;AAGhE,sBAAgB,UAAU,IAAI,QAAQ;AACtC,sBAAgB,MAAM,WAAW;AACjC,sBAAgB,MAAM,MAAM;AAC5B,sBAAgB,MAAM,OAAO;AAC7B,sBAAgB,MAAM,UAAU;AAChC,sBAAgB,MAAM,QAAQ;AAC9B,sBAAgB,MAAM,WAAW;AACjC,sBAAgB,MAAM,aAAa;AACnC,sBAAgB,MAAM,UAAU;AAGhC,YAAM,eAAe,gBAAgB,cAAc,eAAe;AAClE,UAAI,cAAc;AACd,qBAAa,MAAM,QAAQ;AAC3B,qBAAa,MAAM,WAAW;AAC9B,qBAAa,MAAM,WAAW;AAAA,MAClC;AAAA,IACJ,OAAO;AACH,cAAQ,MAAM,iDAA0C;AAAA,IAC5D;AAAA,EACJ;AAAA,EAEA,iBAAiB,SAAS;AACtB,SAAK,eAAe;AAGpB,QAAI,KAAK,oBAAoB;AACzB,WAAK,gBAAgB,QAAQ;AAAA,IACjC;AAGA,SAAK,oBAAoB;AAAA,EAC7B;AAAA,EAEA,mBAAmB;AACf,UAAM,YAAY,KAAK,gBAAgB;AACvC,SAAK,eAAe;AAEpB,YAAQ,IAAI,2BAAoB,SAAS;AAGzC,SAAK,oBAAoB;AAAA,EAC7B;AAAA,EAEA,wBAAwB;AACpB,YAAQ,IAAI,+EAAwE;AAGpF,SAAK,eAAe;AAAA,EACxB;AAAA,EAEA,sBAAsB;AAClB,YAAQ,IAAI,sCAA+B;AAAA,MACvC,cAAc,KAAK;AAAA,MACnB,cAAc,KAAK;AAAA,MACnB,kBAAkB,KAAK;AAAA,IAC3B,CAAC;AAED,QAAI,KAAK,gBAAgB,KAAK,gBAAgB,KAAK,wBAAwB;AACvE,YAAM,eAAe,GAAG,KAAK,YAAY,IAAI,KAAK,YAAY;AAC9D,WAAK,oBAAoB,QAAQ;AACjC,cAAQ,IAAI,qCAA8B,YAAY;AAGtD,WAAK,oBAAoB,cAAc,IAAI,MAAM,QAAQ,CAAC;AAAA,IAC9D,OAAO;AACH,cAAQ,IAAI,iEAA0D;AAAA,IAC1E;AAAA,EACJ;AAAA,EAEA,sBAAsB;AAClB,WAAO,KAAK,qBAAqB,SAAS,KAAK,gBAAgB,KAAK,KAAK,IAAI;AAAA,EACjF;AAAA,EAEA,kBAAkB;AACd,SAAK,YAAY,KAAK,qBAAqB,KAAK,gBAAgB,UAAU;AAC1E,YAAQ,IAAI,iCAA0B,KAAK,SAAS;AAGpD,QAAI,KAAK,wBAAwB;AAC7B,WAAK,oBAAoB,QAAQ,KAAK,YAAY,SAAS;AAAA,IAC/D;AAAA,EACJ;AAAA,EAEA,6BAA6B;AACzB,YAAQ,IAAI,mCAA4B;AAExC,QAAI,CAAC,KAAK,8BAA8B;AACpC,cAAQ,MAAM,iDAA0C;AACxD;AAAA,IACJ;AAEA,UAAM,iBAAiB,KAAK,0BAA0B,gBAAgB,CAAC;AAEvE,QAAI,kBAAkB,eAAe,OAAO;AACxC,cAAQ,IAAI,uCAAgC,eAAe,IAAI;AAG/D,UAAI,KAAK,+BAA+B,KAAK,6BAA6B;AACtE,aAAK,yBAAyB,cAAc,eAAe;AAC3D,aAAK,yBAAyB,UAAU,OAAO,QAAQ;AAAA,MAC3D;AAGA,WAAK,wBAAwB,eAAe,IAAI;AAAA,IACpD,OAAO;AAEH,UAAI,KAAK,6BAA6B;AAClC,aAAK,yBAAyB,UAAU,IAAI,QAAQ;AAAA,MACxD;AAAA,IACJ;AAAA,EACJ;AAAA,EAEA,wBAAwB,YAAY;AAEhC,UAAM,YAAY,WAAW,MAAM,uCAAuC;AAE1E,QAAI,aAAa,KAAK,oBAAoB;AACtC,YAAM,YAAY,UAAU,CAAC;AAE7B,YAAM,CAAC,OAAO,OAAO,IAAI,UAAU,MAAM,GAAG;AAC5C,YAAM,YAAY,oBAAI,KAAK;AAC3B,gBAAU,SAAS,SAAS,KAAK,GAAG,SAAS,OAAO,IAAI,EAAE;AAE1D,YAAM,cAAc,UAAU,aAAa,EAAE,MAAM,GAAG,CAAC;AACvD,WAAK,gBAAgB,QAAQ;AAC7B,WAAK,eAAe;AAEpB,cAAQ,IAAI,0CAAmC,WAAW;AAC1D,WAAK,oBAAoB;AAAA,IAC7B;AAAA,EACJ;AAAA,EAEA,MAAM,qBAAqB;AACvB,YAAQ,IAAI,6EAAsE;AAElF,QAAI;AACA,YAAM,YAAY,KAAK,oBAAoB;AAC3C,YAAM,SAAS,gBAAgB,KAAK,mBAAmB,8BAA8B,SAAS;AAC9F,cAAQ,IAAI,4BAAqB,MAAM;AAEvC,YAAM,WAAW,MAAM,MAAM,QAAQ;AAAA,QACjC,SAAS;AAAA,UACL,QAAQ;AAAA,UACR,gBAAgB;AAAA,QACpB;AAAA,MACJ,CAAC;AAED,UAAI,CAAC,SAAS,IAAI;AACd,cAAM,IAAI,MAAM,uBAAuB,SAAS,MAAM,EAAE;AAAA,MAC5D;AAEA,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,cAAQ,IAAI,kCAA2B,IAAI;AAG3C,YAAM,gBAAgB,KAAK;AAAA,QACvB,KAAK,mBAAmB,CAAC;AAAA,QACzB,KAAK,oBAAoB,CAAC;AAAA,MAC9B;AAEA,cAAQ,IAAI,8CAAuC,aAAa;AAChE,aAAO;AAAA,IACX,SAASA,QAAO;AACZ,cAAQ,MAAM,2CAAoCA,MAAK;AACvD,aAAO,CAAC;AAAA,IACZ;AAAA,EACJ;AAAA,EAEA,4BAA4B,iBAAiB,kBAAkB;AAC3D,UAAM,gBAAgB,CAAC;AAGvB,QAAI,mBAAmB,gBAAgB,SAAS,GAAG;AAC/C,oBAAc,KAAK,CAAC,SAAS;AACzB,cAAM,YAAY,KAAK,OAAO;AAC9B,eAAO,gBAAgB,SAAS,SAAS;AAAA,MAC7C,CAAC;AAAA,IACL;AAGA,QAAI,oBAAoB,iBAAiB,SAAS,GAAG;AACjD,uBAAiB,QAAQ,CAAC,eAAe;AACrC,cAAM,cAAc,IAAI,KAAK,UAAU;AAEvC,sBAAc,KAAK,CAAC,SAAS;AACzB,iBACI,KAAK,YAAY,MAAM,YAAY,YAAY,KAC/C,KAAK,SAAS,MAAM,YAAY,SAAS,KACzC,KAAK,QAAQ,MAAM,YAAY,QAAQ;AAAA,QAE/C,CAAC;AAAA,MACL,CAAC;AAAA,IACL;AAEA,WAAO;AAAA,EACX;AAAA,EAEA,2BAA2B;AACvB,YAAQ,IAAI,sEAA+D;AAE3E,UAAMC,UAAS;AAAA,MACX,QAAQ;AAAA,MACR,QAAQ,aAAAC,QAAK;AAAA,MACb,YAAY;AAAA,MACZ,SAAS;AAAA,MACT,UAAS,oBAAI,KAAK,GAAE,QAAQ,EAAE;AAAA,MAC9B,QAAQ;AAAA,MACR,UAAU,CAAC,eAAe,YAAY;AAClC,gBAAQ,IAAI,4CAAqC,OAAO;AACxD,aAAK,iBAAiB,OAAO;AAAA,MACjC;AAAA,MACA,SAAS,MAAM;AACX,gBAAQ,IAAI,iCAA0B;AACtC,mBAAW,MAAM;AACb,eAAK,eAAe;AAAA,QACxB,GAAG,EAAE;AAAA,MACT;AAAA,IACJ;AAEA,SAAK,aAAa,YAAU,KAAK,gBAAgBD,OAAM;AAAA,EAC3D;AACJ;;;AC/VA,IAAO,8BAAP,cAA6B,WAAW;AAAA,EACpC,OAAO,UAAU,CAAC,aAAa,YAAY,cAAc;AAAA,EACzD,OAAO,SAAS,EAAE,YAAY,OAAO;AAAA,EAErC,OAAO,UAAU,CAAC,YAAY,SAAS,QAAQ;AAAA,EAE/C,UAAU;AACN,YAAQ,IAAI,+BAA+B;AAC3C,YAAQ,IAAI,sBAAsB;AAAA,MAC9B,WAAW,KAAK;AAAA,MAChB,UAAU,KAAK;AAAA,MACf,cAAc,KAAK;AAAA,IACvB,CAAC;AAGD,UAAM,YAAY,IAAI,gBAAgB,OAAO,SAAS,MAAM;AAC5D,UAAM,aAAa,UAAU,IAAI,aAAa;AAC9C,UAAM,UAAU,UAAU,IAAI,UAAU;AAExC,SAAK,cAAc,oBAAI,KAAK;AAG5B,QAAI,YAAY,QAAQ;AACpB,WAAK,oBAAoB;AACzB,WAAK,cAAc;AAAA,IACvB,WAAW,YAAY;AAEnB,WAAK,oBAAoB,IAAI,KAAK,UAAU;AAE5C,WAAK,cAAc,IAAI,KAAK,KAAK,iBAAiB;AAClD,WAAK,cAAc;AAAA,IACvB,OAAO;AAEH,WAAK,oBAAoB,oBAAI,KAAK;AAClC,WAAK,cAAc;AAAA,IACvB;AAEA,SAAK,aAAa;AAAA,MACd;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACJ;AAGA,QAAI,SAAS,eAAe,WAAW;AACnC,eAAS,iBAAiB,oBAAoB,MAAM,KAAK,mBAAmB,CAAC;AAAA,IACjF,OAAO;AACH,WAAK,mBAAmB;AAAA,IAC5B;AAAA,EACJ;AAAA,EAEA,qBAAqB;AACjB,QAAI;AACA,WAAK,eAAe;AACpB,WAAK,0BAA0B;AAAA,IACnC,SAASE,QAAO;AACZ,cAAQ,MAAM,kCAAkCA,MAAK;AAAA,IACzD;AAAA,EACJ;AAAA,EAEA,gBAAgB;AACZ,SAAK,YAAY,SAAS,KAAK,YAAY,SAAS,IAAI,CAAC;AACzD,SAAK,eAAe;AAAA,EACxB;AAAA,EAEA,YAAY;AACR,SAAK,YAAY,SAAS,KAAK,YAAY,SAAS,IAAI,CAAC;AACzD,SAAK,eAAe;AAAA,EACxB;AAAA,EAEA,WAAW,OAAO;AACd,UAAM,aAAa,MAAM,OAAO,QAAQ,aAAa;AACrD,QAAI,CAAC,WAAY;AACjB,QAAI,CAAC,KAAK,kBAAmB;AAE7B,UAAM,aAAa,WAAW,QAAQ;AACtC,SAAK,oBAAoB,IAAI,KAAK,UAAU;AAG5C,SAAK,eAAe,iBAAiB,cAAc,EAAE,QAAQ,CAAC,OAAO;AACjE,SAAG,UAAU,OAAO,eAAe,YAAY;AAC/C,SAAG,UAAU,IAAI,mBAAmB;AAAA,IACxC,CAAC;AAGD,eAAW,UAAU,OAAO,mBAAmB;AAC/C,eAAW,UAAU,IAAI,eAAe,YAAY;AAEpD,SAAK,0BAA0B;AAC/B,SAAK,yBAAyB,UAAU;AAAA,EAC5C;AAAA,EAEA,iBAAiB;AACb,YAAQ,IAAI,uBAAuB;AACnC,UAAM,OAAO,KAAK,YAAY,YAAY;AAC1C,UAAM,QAAQ,KAAK,YAAY,SAAS;AAGxC,QAAI,CAAC,KAAK,sBAAsB,CAAC,KAAK,mBAAmB;AACrD,cAAQ,MAAM,+BAA+B;AAAA,QACzC,WAAW,KAAK;AAAA,QAChB,UAAU,KAAK;AAAA,MACnB,CAAC;AACD;AAAA,IACJ;AAGA,SAAK,gBAAgB,cAAc,GAAG,IAAI,UAAK,KAAK,WAAW,KAAK,CAAC;AAGrE,SAAK,eAAe,YAAY;AAGhC,UAAM,WAAW,IAAI,KAAK,MAAM,OAAO,CAAC;AACxC,UAAM,UAAU,IAAI,KAAK,MAAM,QAAQ,GAAG,CAAC;AAC3C,UAAM,iBAAiB,SAAS,OAAO;AAEvC,YAAQ,IAAI,kBAAkB,EAAE,MAAM,OAAO,gBAAgB,SAAS,QAAQ,QAAQ,EAAE,CAAC;AAGzF,aAAS,IAAI,GAAG,IAAI,gBAAgB,KAAK;AACrC,YAAM,WAAW,SAAS,cAAc,KAAK;AAC7C,eAAS,YAAY;AACrB,WAAK,eAAe,YAAY,QAAQ;AAAA,IAC5C;AAGA,aAAS,MAAM,GAAG,OAAO,QAAQ,QAAQ,GAAG,OAAO;AAC/C,YAAM,YAAY,KAAK,gBAAgB,MAAM,OAAO,GAAG;AACvD,WAAK,eAAe,YAAY,SAAS;AAAA,IAC7C;AAEA,YAAQ,IAAI,0BAA0B,KAAK,eAAe,SAAS,QAAQ,UAAU;AAAA,EACzF;AAAA,EAEA,gBAAgB,MAAM,OAAO,KAAK;AAC9B,UAAM,OAAO,IAAI,KAAK,MAAM,OAAO,GAAG;AACtC,UAAM,aAAa,KAAK,oBAAoB,IAAI;AAChD,UAAM,QAAQ,oBAAI,KAAK;AACvB,UAAM,UAAU,KAAK,WAAW,MAAM,KAAK;AAC3C,UAAM,aAAa,KAAK,qBAAqB,KAAK,WAAW,MAAM,KAAK,iBAAiB;AAEzF,UAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,WAAO,OAAO;AACd,WAAO,cAAc;AACrB,WAAO,QAAQ,OAAO;AACtB,WAAO,QAAQ,SAAS;AAExB,QAAI,UAAU;AAEd,QAAI,KAAK,aAAa;AAElB,UAAI,SAAS;AACT,mBAAW;AAAA,MACf,OAAO;AACH,mBAAW;AAAA,MACf;AAAA,IACJ,WAAW,YAAY;AACnB,iBAAW;AAAA,IACf,WAAW,SAAS;AAChB,iBAAW;AAAA,IACf,OAAO;AACH,iBAAW;AAAA,IACf;AAEA,WAAO,YAAY;AAEnB,WAAO;AAAA,EACX;AAAA,EAEA,WAAW,OAAO,OAAO;AACrB,WACI,MAAM,YAAY,MAAM,MAAM,YAAY,KAC1C,MAAM,SAAS,MAAM,MAAM,SAAS,KACpC,MAAM,QAAQ,MAAM,MAAM,QAAQ;AAAA,EAE1C;AAAA,EAEA,oBAAoB,MAAM;AACtB,UAAM,OAAO,KAAK,YAAY;AAC9B,UAAM,QAAQ,OAAO,KAAK,SAAS,IAAI,CAAC,EAAE,SAAS,GAAG,GAAG;AACzD,UAAM,MAAM,OAAO,KAAK,QAAQ,CAAC,EAAE,SAAS,GAAG,GAAG;AAClD,WAAO,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG;AAAA,EAClC;AAAA,EAEA,qBAAqB,MAAM;AACvB,UAAM,OAAO,KAAK,YAAY;AAC9B,UAAM,QAAQ,KAAK,SAAS,IAAI;AAChC,UAAM,MAAM,KAAK,QAAQ;AACzB,WAAO,GAAG,IAAI,SAAI,KAAK,SAAI,GAAG;AAAA,EAClC;AAAA,EAEA,4BAA4B;AACxB,QAAI,CAAC,KAAK,sBAAuB;AAEjC,QAAI,KAAK,aAAa;AAClB,WAAK,mBAAmB,cAAc;AAAA,IAC1C,WAAW,KAAK,mBAAmB;AAC/B,WAAK,mBAAmB,cAAc,KAAK,qBAAqB,KAAK,iBAAiB;AAAA,IAC1F,OAAO;AACH,WAAK,mBAAmB,cAAc;AAAA,IAC1C;AAAA,EACJ;AAAA,EAEA,MAAM,yBAAyB,YAAY;AACvC,QAAI;AAEA,YAAM,MAAM,IAAI,IAAI,OAAO,SAAS,IAAI;AAGxC,UAAI,aAAa,OAAO,UAAU;AAGlC,UAAI,aAAa,IAAI,eAAe,UAAU;AAG9C,YAAM,MAAM,IAAI,SAAS,GAAG,EAAE,QAAQ,UAAU,CAAC;AAAA,IACrD,SAASA,QAAO;AACZ,cAAQ,MAAM,kCAAkCA,MAAK;AAAA,IACzD;AAAA,EACJ;AAAA,EAEA,cAAc;AAEV,UAAM,kBAAkB,SAAS,cAAc,mBAAmB;AAClE,QAAI,iBAAiB;AACjB,sBAAgB,MAAM,UAAU;AAAA,IACpC;AAAA,EACJ;AAAA,EAEA,cAAc;AACV,UAAM,kBAAkB,SAAS,cAAc,mBAAmB;AAClE,QAAI,iBAAiB;AACjB,sBAAgB,MAAM,UAAU;AAAA,IACpC;AAAA,EACJ;AACJ;;;ACrPA,IAAO,mCAAP,cAA6B,WAAW;AAAA,EACpC,OAAO,UAAU;AAAA,IACb;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACJ;AAAA,EACA,OAAO,SAAS;AAAA,IACZ,gBAAgB;AAAA,IAChB,iBAAiB;AAAA,EACrB;AAAA,EAEA,OAAO,aAAa;AAAA,EAEpB,UAAU;AAEN,SAAK,qBAAqB;AAG1B,SAAK,sBAAsB,KAAK,qBAAqB,KAAK,IAAI;AAC9D,SAAK,0BAA0B,KAAK,yBAAyB,KAAK,IAAI;AAGtE,aAAS,iBAAiB,oBAAoB,KAAK,mBAAmB;AACtE,aAAS,iBAAiB,8BAA8B,KAAK,uBAAuB;AAGpF,eAAW,MAAM;AACb,WAAK,0BAA0B;AAAA,IACnC,GAAG,GAAG;AAAA,EACV;AAAA,EAEA,aAAa;AAET,QAAI,KAAK,qBAAqB;AAC1B,eAAS,oBAAoB,oBAAoB,KAAK,mBAAmB;AAAA,IAC7E;AACA,QAAI,KAAK,yBAAyB;AAC9B,eAAS,oBAAoB,8BAA8B,KAAK,uBAAuB;AAAA,IAC3F;AAAA,EACJ;AAAA;AAAA,EAGA,uBAAuB;AACnB,WAAO,4BAA4B,CAAC,UAAU;AAC1C,aAAO,KAAK,iBAAiB,KAAK;AAAA,IACtC;AAEA,WAAO,sBAAsB,CAAC,YAAY;AACtC,aAAO,KAAK,oBAAoB,OAAO;AAAA,IAC3C;AAEA,WAAO,4BAA4B,MAAM;AACrC,4CAAsC;AACtC,aAAO,KAAK,0BAA0B;AAAA,IAC1C;AAEA,WAAO,mBAAmB,MAAM;AAC5B,aAAO,KAAK,iBAAiB;AAAA,IACjC;AAAA,EACJ;AAAA;AAAA,EAGA,4BAA4B;AACxB,UAAM,mBAAmB,oBAAI,IAAI;AAGjC,UAAM,mBAAmB,SAAS,iBAAiB,6BAA6B;AAEhF,qBAAiB,QAAQ,CAAC,MAAMC,WAAU;AACtC,YAAM,eAAe,KAAK,cAAc,IAAI;AAC5C,UAAI,cAAc;AACd,cAAM,YAAY,aAAa,YAAY,KAAK;AAEhD,YAAI,UAAU,SAAS,cAAI,KAAK,UAAU,SAAS,cAAI,GAAG;AACtD,gBAAM,eAAe,UAAU,MAAM,wBAAwB;AAC7D,cAAI,cAAc;AACd,kBAAM,cAAc,aAAa,CAAC;AAClC,kBAAM,gBAAgB,KAAK,iBAAiB,WAAW;AAEvD,gBAAI,eAAe;AACf,+BAAiB,IAAI,aAAa;AAAA,YACtC;AAAA,UACJ;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ,CAAC;AAGD,SAAK,wBAAwB,gBAAgB;AAAA,EACjD;AAAA;AAAA,EAGA,wBAAwB,kBAAkB;AACtC,UAAM,oBAAoB,KAAK;AAE/B,sBAAkB,QAAQ,CAAC,aAAa;AACpC,YAAM,eAAe,SAAS,SAAS,KAAK;AAC5C,YAAM,QAAQ,SAAS,QAAQ,OAAO;AACtC,YAAM,WAAW,QAAQ,MAAM,cAAc,iBAAiB,IAAI;AAElE,UAAI,iBAAiB,IAAI,YAAY,GAAG;AAEpC,iBAAS,UAAU;AACnB,iBAAS,WAAW;AAEpB,YAAI,OAAO;AACP,gBAAM,UAAU,IAAI,aAAa,kBAAkB,sBAAsB,YAAY;AACrF,gBAAM,UAAU,OAAO,qBAAqB,iBAAiB;AAE7D,cAAI,UAAU;AACV,kBAAM,eAAe,CAAC,gBAAM,gBAAM,gBAAM,gBAAM,gBAAM,gBAAM,cAAI;AAC9D,kBAAM,eACF,aAAa,YAAY,KAAK,SAAS,YAAY,KAAK,EAAE,QAAQ,gBAAgB,EAAE;AACxF,qBAAS,YAAY,GAAG,YAAY;AAAA,UACxC;AAAA,QACJ;AAAA,MACJ,OAAO;AAEH,iBAAS,UAAU;AACnB,iBAAS,WAAW;AAEpB,YAAI,OAAO;AACP,gBAAM,UAAU,OAAO,aAAa,kBAAkB,sBAAsB,YAAY;AACxF,gBAAM,UAAU,IAAI,qBAAqB,iBAAiB;AAE1D,cAAI,UAAU;AACV,kBAAM,eAAe,CAAC,gBAAM,gBAAM,gBAAM,gBAAM,gBAAM,gBAAM,cAAI;AAC9D,qBAAS,YACL,aAAa,YAAY,KAAK,SAAS,YAAY,QAAQ,gBAAgB,EAAE,EAAE,KAAK;AAAA,UAC5F;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ,CAAC;AAAA,EACL;AAAA;AAAA,EAGA,MAAM,iBAAiB,OAAO;AAC1B,UAAM,eAAe;AAErB,QAAI;AAEA,YAAM,kBAAkB,KAAK,QAAQ,iBAAiB,kCAAkC;AACxF,YAAM,sBAAsB,KAAK,QAAQ,iBAAiB,iDAAiD;AAG3G,YAAM,uBAAuB,MAAM,KAAK,eAAe,EAAE,OAAO,CAAC,OAAO,GAAG,QAAQ;AACnF,UAAI,qBAAqB,SAAS,GAAG;AACjC,cAAM,mBAAmB,qBACpB,IAAI,CAAC,OAAO;AACT,gBAAM,eAAe,CAAC,gBAAM,gBAAM,gBAAM,gBAAM,gBAAM,gBAAM,cAAI;AAC9D,iBAAO,aAAa,SAAS,GAAG,KAAK,CAAC;AAAA,QAC1C,CAAC,EACA,KAAK,QAAG;AAEb,cAAM,2EAAe,gBAAgB;AAAA;AAAA,2IAA6B;AAGlE,6BAAqB,QAAQ,CAAC,OAAQ,GAAG,UAAU,KAAM;AACzD;AAAA,MACJ;AAEA,UAAI,oBAAoB,WAAW,GAAG;AAClC,cAAM,4FAAiB;AACvB;AAAA,MACJ;AAGA,YAAM,mBAAmB,MAAM,KAAK,mBAAmB,EAAE,IAAI,CAAC,OAAO,SAAS,GAAG,KAAK,CAAC;AACvF,YAAM,mBAAmB,KAAK,oBAAoB;AAClD,YAAM,aAAa,iBAAiB,OAAO,CAAC,YAAY,iBAAiB,IAAI,OAAO,CAAC;AAErF,UAAI,WAAW,SAAS,GAAG;AACvB,cAAM,iBAAiB,WAClB,IAAI,CAAC,YAAY;AACd,gBAAM,eAAe,CAAC,gBAAM,gBAAM,gBAAM,gBAAM,gBAAM,gBAAM,cAAI;AAC9D,iBAAO,aAAa,OAAO;AAAA,QAC/B,CAAC,EACA,KAAK,QAAG;AAEb,cAAM,qEAAc,cAAc;AAAA;AAAA,yHAA0B;AAC5D;AAAA,MACJ;AAGA,YAAM,cAAc,KAAK,QAAQ,cAAc,uBAAuB;AACtE,YAAM,SAAS,cAAc,YAAY,QAAQ;AAGjD,YAAM,KAAK,4BAA4B,qBAAqB,MAAM;AAGlE,YAAM,gCAAO;AACb,0BAAoB,QAAQ,CAAC,aAAc,SAAS,UAAU,KAAM;AAGpE,iBAAW,MAAM,OAAO,SAAS,OAAO,GAAG,GAAG;AAAA,IAClD,SAASC,QAAO;AACZ,cAAQ,MAAM,uCAAYA,MAAK;AAC/B,YAAM,iCAAQA,OAAM,OAAO,EAAE;AAAA,IACjC;AAAA,EACJ;AAAA;AAAA,EAGA,MAAM,4BAA4B,YAAY,QAAQ;AAClD,UAAM,YAAY,KAAK,aAAa;AAEpC,UAAM,WAAW,MAAM,KAAK,UAAU,EAAE,IAAI,OAAO,UAAUD,WAAU;AACnE,YAAM,UAAU,SAAS,SAAS,KAAK;AAEvC,YAAM,aAAa,KAAK,oBAAoB,OAAO;AAGnD,YAAM,WAAW,IAAI,SAAS;AAC9B,eAAS,OAAO,sBAAsB,UAAU;AAChD,eAAS,OAAO,wBAAwB,MAAM;AAC9C,eAAS,OAAO,8BAA8B,SAAS;AACvD,eAAS,OAAO,yBAAyB,MAAM;AAC/C,eAAS,OAAO,2BAA2B,MAAM;AACjD,eAAS,OAAO,yBAAyB,OAAO;AAGhD,YAAM,WAAW,MAAM,MAAM,KAAK,sBAAsB;AAAA,QACpD,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,SAAS;AAAA,UACL,gBAAgB;AAAA,UAChB,QAAQ;AAAA,UACR,oBAAoB;AAAA,QACxB;AAAA,MACJ,CAAC;AAED,UAAI,CAAC,SAAS,IAAI;AACd,cAAM,YAAY,MAAM,SAAS,KAAK;AACtC,gBAAQ,MAAM,kBAAaA,SAAQ,CAAC,YAAY,SAAS;AACzD,cAAM,IAAI,MAAM,QAAQ,SAAS,MAAM,KAAK,SAAS,UAAU,EAAE;AAAA,MACrE;AAEA,aAAO;AAAA,IACX,CAAC;AAED,UAAM,QAAQ,IAAI,QAAQ;AAAA,EAC9B;AAAA;AAAA,EAGA,oBAAoB,SAAS;AACzB,QAAI,CAAC,SAAS;AACV;AAAA,IACJ;AAEA,UAAM,WAAW,KAAK,QAAQ,cAAc,mCAAmC,OAAO,IAAI;AAC1F,QAAI,YAAY,CAAC,SAAS,UAAU;AAChC,eAAS,UAAU,CAAC,SAAS;AAG7B,YAAM,QAAQ,SAAS,QAAQ,OAAO;AACtC,UAAI,OAAO;AACP,cAAM,UAAU,IAAI,eAAe,WAAW;AAC9C,mBAAW,MAAM;AACb,gBAAM,UAAU,OAAO,eAAe,WAAW;AAAA,QACrD,GAAG,GAAG;AAAA,MACV;AAAA,IACJ,WAAW,YAAY,SAAS,UAAU;AACtC,YAAM,oEAAa;AAAA,IACvB;AAAA,EACJ;AAAA;AAAA,EAGA,mBAAmB;AACf,UAAM,WAAW,SAAS,iBAAiB,6BAA6B;AACxE,UAAM,iBAAiB,MAAM,KAAK,SAAS,iBAAiB,wBAAwB,CAAC,EAAE;AAAA,MAAO,CAAC,OAC3F,GAAG,YAAY,SAAS,cAAI;AAAA,IAChC,EAAE;AACF,UAAM,eAAe,MAAM,KAAK,SAAS,iBAAiB,wBAAwB,CAAC,EAAE;AAAA,MACjF,CAAC,OAAO,CAAC,GAAG,YAAY,SAAS,cAAI;AAAA,IACzC,EAAE;AACF,UAAM,aAAa,SAAS;AAG5B,UAAM,SAAS;AAAA,MACX,WAAW,SAAS,cAAc,4BAA4B;AAAA,MAC9D,SAAS,SAAS,cAAc,gCAAgC;AAAA,MAChE,OAAO,SAAS,cAAc,4BAA4B;AAAA,IAC9D;AAEA,QAAI,OAAO,UAAW,QAAO,UAAU,cAAc,GAAG,cAAc;AACtE,QAAI,OAAO,QAAS,QAAO,QAAQ,cAAc,GAAG,YAAY;AAChE,QAAI,OAAO,MAAO,QAAO,MAAM,cAAc,GAAG,UAAU;AAAA,EAC9D;AAAA;AAAA,EAGA,iBAAiB,aAAa;AAC1B,UAAM,aAAa;AAAA,MACf,cAAI;AAAA,MACJ,cAAI;AAAA,MACJ,cAAI;AAAA,MACJ,cAAI;AAAA,MACJ,cAAI;AAAA,MACJ,cAAI;AAAA,MACJ,cAAI;AAAA,IACR;AACA,WAAO,WAAW,WAAW;AAAA,EACjC;AAAA;AAAA,EAGA,sBAAsB;AAClB,UAAM,mBAAmB,oBAAI,IAAI;AACjC,UAAM,mBAAmB,SAAS,iBAAiB,6BAA6B;AAEhF,qBAAiB,QAAQ,CAAC,SAAS;AAC/B,YAAM,eAAe,KAAK,cAAc,IAAI;AAC5C,UACI,gBACA,aAAa,YAAY,SAAS,cAAI,KACtC,aAAa,YAAY,SAAS,cAAI,GACxC;AACE,cAAM,eAAe,aAAa,YAAY,MAAM,wBAAwB;AAC5E,YAAI,cAAc;AACd,gBAAM,gBAAgB,KAAK,iBAAiB,aAAa,CAAC,CAAC;AAC3D,cAAI,eAAe;AACf,6BAAiB,IAAI,aAAa;AAAA,UACtC;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ,CAAC;AAED,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,oBAAoB,SAAS;AACzB,UAAM,QAAQ,oBAAI,KAAK;AACvB,UAAM,eAAe,MAAM,OAAO;AAClC,QAAI,YAAY,UAAU;AAC1B,QAAI,aAAa,GAAG;AAChB,mBAAa;AAAA,IACjB;AACA,UAAM,aAAa,IAAI,KAAK,KAAK;AACjC,eAAW,QAAQ,MAAM,QAAQ,IAAI,SAAS;AAE9C,WAAO,WAAW,YAAY,EAAE,MAAM,GAAG,EAAE,CAAC;AAAA,EAChD;AAAA;AAAA,EAGA,eAAe;AACX,UAAM,QAAQ,SAAS,cAAc,qBAAqB,GAAG;AAC7D,QAAI,CAAC,OAAO;AACR,YAAM,IAAI,MAAM,sBAAsB;AAAA,IAC1C;AACA,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,qBAAqB,OAAO;AACxB,eAAW,MAAM;AACb,WAAK,0BAA0B;AAAA,IACnC,GAAG,GAAG;AAAA,EACV;AAAA;AAAA,EAGA,yBAAyB,OAAO;AAC5B,QACI,MAAM,OAAO,WAAW,cACvB,MAAM,OAAO,WAAW,4BAA4B,MAAM,OAAO,WAAW,0BAC/E;AAEE,iBAAW,MAAM;AACb,aAAK,qBAAqB;AAC1B,aAAK,0BAA0B;AAG/B,cAAM,gBAAgB,SAAS,iBAAiB,sBAAsB;AACtE,sBAAc,QAAQ,CAAC,iBAAiB;AACpC,gBAAM,eAAe,aAAa,QAAQ,YAAY;AACtD,qBAAW,MAAM;AACb,yBAAa,MAAM,aAAa;AAChC,yBAAa,MAAM,UAAU;AAC7B,uBAAW,MAAM;AACb,2BAAa,OAAO;AAAA,YACxB,GAAG,GAAG;AAAA,UACV,GAAG,SAAS,YAAY,CAAC;AAAA,QAC7B,CAAC;AAAA,MACL,GAAG,GAAG;AAAA,IACV;AAAA,EACJ;AACJ;AAGA,IAAI,sCAAsC;AAC1C,IAAM,aAAa;AAEnB,OAAO,4BACH,OAAO,6BACP,WAAY;AACR,MAAI,uCAAuC,YAAY;AACnD;AAAA,EACJ;AAEA;AACJ;;;AClZJ,IAAO,kCAAP,cAA6B,WAAW;AAAA,EACpC,OAAO,SAAS,EAAE,SAAS,OAAO;AAAA,EAElC,UAAU;AACN,SAAK,QAAQ,iBAAiB,SAAS,KAAK,YAAY,KAAK,IAAI,CAAC;AAAA,EACtE;AAAA,EAEA,YAAY,OAAO;AACf,UAAM,UAAU,KAAK,gBAAgB;AAErC,QAAI,CAAC,QAAQ,OAAO,GAAG;AACnB,YAAM,eAAe;AACrB,YAAM,gBAAgB;AACtB,aAAO;AAAA,IACX;AAAA,EACJ;AACJ;;;AChBA,IAAO,+CAAP,cAA6B,WAAW;AAAA,EACtC,OAAO,UAAU,CAAC,WAAW;AAAA,EAE7B,UAAU;AACR,YAAQ,IAAI,gDAAgD;AAAA,EAC9D;AAAA,EAEA,UAAU,OAAO;AACf,UAAM,UAAU,MAAM,OAAO,QAAQ;AACrC,UAAM,YAAY,MAAM,OAAO;AAC/B,UAAM,MAAM,MAAM,OAAO,QAAQ,mBAAmB;AACpD,UAAM,gBAAgB,IAAI,cAAc,iBAAiB;AAEzD,QAAI,WAAW;AAEb,oBAAc,YAAY;AAC1B,UAAI,UAAU,OAAO,YAAY;AAAA,IACnC,OAAO;AAEL,oBAAc,YAAY;AAC1B,UAAI,UAAU,IAAI,YAAY;AAE9B,WAAK,WAAW,OAAO;AAAA,IACzB;AAAA,EACF;AAAA,EAEA,QAAQ,OAAO;AACb,UAAM,UAAU,MAAM,OAAO,QAAQ;AACrC,SAAK,cAAc,OAAO;AAAA,EAC5B;AAAA,EAEA,QAAQ,OAAO;AACb,UAAM,UAAU,MAAM,OAAO,QAAQ;AAErC,YAAQ,IAAI,YAAY,OAAO,EAAE;AAAA,EACnC;AAAA,EAEA,MAAM,cAAc,SAAS;AAC3B,QAAI;AACF,YAAM,WAAW,MAAM,MAAM,sBAAsB,KAAK,kBAAkB,CAAC,yCAAyC,OAAO,IAAI;AAAA,QAC7H,SAAS;AAAA,UACP,UAAU;AAAA,UACV,oBAAoB;AAAA,QACtB;AAAA,MACF,CAAC;AAED,UAAI,SAAS,IAAI;AACf,cAAM,OAAO,MAAM,SAAS,KAAK;AACjC,cAAM,iBAAiB,SAAS,eAAe,sBAAsB;AACrE,cAAM,eAAe,SAAS,eAAe,oBAAoB;AAEjE,qBAAa,YAAY;AACzB,uBAAe,UAAU,OAAO,QAAQ;AAGxC,mBAAW,MAAM;AACf,yBAAe,UAAU,IAAI,aAAa;AAAA,QAC5C,GAAG,EAAE;AAAA,MACP;AAAA,IACF,SAASE,QAAO;AACd,cAAQ,MAAM,6BAA6BA,MAAK;AAAA,IAClD;AAAA,EACF;AAAA,EAEA,MAAM,WAAW,SAAS;AACxB,QAAI;AACF,YAAM,MAAM,sBAAsB,KAAK,kBAAkB,CAAC,oCAAoC;AAAA,QAC5F,QAAQ;AAAA,QACR,SAAS;AAAA,UACP,gBAAgB;AAAA,UAChB,gBAAgB,KAAK,aAAa;AAAA,UAClC,oBAAoB;AAAA,QACtB;AAAA,QACA,MAAM,KAAK,UAAU,EAAE,QAAiB,CAAC;AAAA,MAC3C,CAAC;AAAA,IACH,SAASA,QAAO;AACd,cAAQ,MAAM,wBAAwBA,MAAK;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,WAAO,OAAO,SAAS,SAAS,MAAM,GAAG,EAAE,CAAC;AAAA,EAC9C;AAAA,EAEA,eAAe;AACb,WAAO,SAAS,cAAc,yBAAyB,GAAG,aAAa,SAAS;AAAA,EAClF;AACF;;;ACvFA,IAAO,qCAAP,cAA6B,WAAW;AAAA,EACpC,OAAO,UAAU;AAAA,IACb;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACJ;AAAA,EAEA,UAAU;AACN,SAAK,oBAAoB;AACzB,SAAK,cAAc;AAAA,EACvB;AAAA,EAEA,sBAAsB;AAClB,UAAM,cAAc,KAAK,wBAAwB;AAEjD,QAAI,aAAa;AACb,WAAK,0BAA0B,UAAU,IAAI,cAAc,qBAAqB;AAChF,WAAK,sBAAsB,YAAY;AACvC,WAAK,qBAAqB,YAAY;AAAA,IAC1C,OAAO;AACH,WAAK,0BAA0B,UAAU,OAAO,cAAc,qBAAqB;AACnF,WAAK,cAAc;AAAA,IACvB;AAAA,EACJ;AAAA,EAEA,gBAAgB;AACZ,QAAI,KAAK,wBAAwB,SAAS;AACtC;AAAA,IACJ;AAEA,UAAM,gBAAgB,SAAS,KAAK,0BAA0B,KAAK,KAAK;AACxE,UAAM,gBAAgB,SAAS,KAAK,sBAAsB,KAAK,KAAK;AACpE,UAAM,eAAe,gBAAgB;AAGrC,UAAM,YAAY,oBAAI,KAAK;AAC3B,cAAU,SAAS,IAAI,GAAG,GAAG,CAAC;AAC9B,UAAM,UAAU,IAAI,KAAK,UAAU,QAAQ,IAAI,eAAe,GAAK;AAEnE,SAAK,sBAAsB,YAAY,+EAAiD,YAAY;AACpG,SAAK,qBAAqB,YAAY,gIAA+D,QAChG,SAAS,EACT,SAAS,EACT,SAAS,GAAG,GAAG,CAAC,IAAI,QAAQ,WAAW,EAAE,SAAS,EAAE,SAAS,GAAG,GAAG,CAAC;AAAA,EAC7E;AACJ;;;AChDA,IAAO,8BAAP,cAA6B,WAAW;AAAA,EACpC,OAAO,UAAU,CAAC,UAAU,MAAM;AAAA,EAElC,UAAU;AACN,SAAK,oBAAoB,KAAK,aAAa,KAAK,IAAI;AAAA,EACxD;AAAA,EAEA,aAAa;AACT,aAAS,oBAAoB,SAAS,KAAK,iBAAiB;AAAA,EAChE;AAAA,EAEA,OAAO,OAAO;AACV,UAAM,eAAe;AACrB,UAAM,gBAAgB;AAEtB,QAAI,KAAK,WAAW,UAAU,SAAS,QAAQ,GAAG;AAC9C,WAAK,KAAK;AAAA,IACd,OAAO;AACH,WAAK,MAAM;AAAA,IACf;AAAA,EACJ;AAAA,EAEA,OAAO;AACH,SAAK,WAAW,UAAU,OAAO,QAAQ;AACzC,aAAS,iBAAiB,SAAS,KAAK,iBAAiB;AAAA,EAC7D;AAAA,EAEA,QAAQ;AACJ,SAAK,WAAW,UAAU,IAAI,QAAQ;AACtC,aAAS,oBAAoB,SAAS,KAAK,iBAAiB;AAAA,EAChE;AAAA,EAEA,aAAa,OAAO;AAChB,QAAI,CAAC,KAAK,QAAQ,SAAS,MAAM,MAAM,GAAG;AACtC,WAAK,MAAM;AAAA,IACf;AAAA,EACJ;AACJ;;;ACrCA,IAAO,2BAAP,cAA6B,WAAW;AAAA,EACpC,OAAO,SAAS;AAAA,IACZ,SAAS;AAAA,IACT,MAAM;AAAA,IACN,UAAU;AAAA,IACV,eAAe;AAAA,IACf,WAAW;AAAA,EACf;AAAA,EAEA,UAAU;AACN,YAAQ,IAAI,4DAAoB;AAAA,MAC5B,UAAU,KAAK;AAAA,MACf,eAAe,KAAK;AAAA,MACpB,WAAW,KAAK;AAAA,IACpB,CAAC;AAED,SAAK,UAAU;AAEf,QAAI,KAAK,eAAe;AACpB,YAAM,QAAQ,KAAK,kBAAkB;AACrC,cAAQ,IAAI,uBAAQ,KAAK,mCAAU;AACnC,iBAAW,MAAM;AACb,aAAK,KAAK;AAAA,MACd,GAAG,KAAK;AAAA,IACZ;AAAA,EACJ;AAAA,EAEA,YAAY;AACR,YAAQ,IAAI,wCAAe;AAE3B,SAAK,QAAQ,MAAM,UAAU;AAC7B,SAAK,QAAQ,MAAM,YAAY;AAC/B,SAAK,QAAQ,MAAM,aAAa;AAGhC,eAAW,MAAM;AACb,WAAK,QAAQ,MAAM,UAAU;AAC7B,WAAK,QAAQ,MAAM,YAAY;AAAA,IACnC,GAAG,GAAG;AAAA,EACV;AAAA,EAEA,OAAO;AACH,YAAQ,IAAI,0CAAe;AAC3B,SAAK,QAAQ,MAAM,aAAa;AAChC,SAAK,QAAQ,MAAM,UAAU;AAC7B,SAAK,QAAQ,MAAM,YAAY;AAE/B,eAAW,MAAM;AACb,UAAI,KAAK,oBAAoB;AACzB,gBAAQ,IAAI,gDAAW;AACvB,eAAO,SAAS,OAAO;AAAA,MAC3B,OAAO;AACH,gBAAQ,IAAI,iDAAiB;AAC7B,aAAK,QAAQ,OAAO;AAAA,MACxB;AAAA,IACJ,GAAG,GAAG;AAAA,EACV;AAAA;AAAA,EAGA,QAAQ;AACJ,YAAQ,IAAI,uCAAc;AAC1B,SAAK,KAAK;AAAA,EACd;AACJ;;;AC/DA,IAAO,qCAAP,cAA6B,WAAW;AAAA,EACpC,OAAO,UAAU,CAAC,aAAa,mBAAmB;AAAA,EAClD,OAAO,SAAS;AAAA,IACZ,cAAc;AAAA,IACd,aAAa;AAAA;AAAA,EACjB;AAAA,EAEA,UAAU;AACN,YAAQ,IAAI,gDAAyC;AACrD,SAAK,gBAAgB;AAAA,EACzB;AAAA,EAEA,eAAe;AACX,UAAM,OAAO,KAAK,gBAAgB,MAAM,KAAK;AAG7C,QAAI,KAAK,eAAe;AACpB,mBAAa,KAAK,aAAa;AAAA,IACnC;AAGA,QAAI,CAAC,QAAQ,SAAS,KAAK,kBAAkB;AACzC,WAAK,uBAAuB;AAC5B;AAAA,IACJ;AAGA,SAAK,gBAAgB,WAAW,MAAM;AAClC,WAAK,oBAAoB,IAAI;AAAA,IACjC,GAAG,GAAG;AAAA,EACV;AAAA,EAEA,oBAAoB,MAAM;AACtB,UAAM,YAAY,SAAS,cAAc,qBAAqB,EAAE;AAEhE,UAAM,sBAAsB,KAAK,iBAAiB,uCAAuC;AAAA,MACrF,QAAQ;AAAA,MACR,SAAS;AAAA,QACL,gBAAgB;AAAA,QAChB,gBAAgB;AAAA,MACpB;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACjB;AAAA,QACA,cAAc,KAAK;AAAA,MACvB,CAAC;AAAA,IACL,CAAC,EACA,KAAK,cAAY,SAAS,KAAK,CAAC,EAChC,KAAK,UAAQ;AACV,UAAI,KAAK,QAAQ;AACb,aAAK,sBAAsB,4BAAQ,SAAS;AAAA,MAChD,OAAO;AACH,aAAK,sBAAsB,wFAAkB,OAAO;AAAA,MACxD;AAAA,IACJ,CAAC,EACA,MAAM,CAAAC,WAAS;AACZ,cAAQ,MAAM,+BAAwBA,MAAK;AAC3C,WAAK,uBAAuB;AAAA,IAChC,CAAC;AAAA,EACL;AAAA,EAEA,sBAAsB,SAAS,MAAM;AACjC,UAAM,iBAAiB,KAAK;AAC5B,UAAM,UAAU,SAAS;AAEzB,mBAAe,cAAc;AAC7B,mBAAe,YAAY,gBAAgB,UAAU,iBAAiB,gBAAgB;AACtF,mBAAe,MAAM,UAAU;AAG/B,SAAK,gBAAgB,YAAY,KAAK,gBAAgB,UAAU;AAAA,MAC5D;AAAA,MACA,UAAU,mBAAmB;AAAA,IACjC;AAGA,UAAM,eAAe,KAAK,QAAQ,cAAc,sBAAsB;AACtE,QAAI,cAAc;AACd,mBAAa,WAAW;AACxB,mBAAa,YAAY,aAAa,UAAU;AAAA,QAC5C;AAAA,QACA,UAAU,gBAAgB;AAAA,MAC9B;AAAA,IACJ;AAAA,EACJ;AAAA,EAEA,yBAAyB;AACrB,UAAM,iBAAiB,KAAK;AAC5B,mBAAe,MAAM,UAAU;AAC/B,mBAAe,cAAc;AAG7B,SAAK,gBAAgB,YAAY,KAAK,gBAAgB,UAAU;AAAA,MAC5D;AAAA,MACA;AAAA,IACJ;AAGA,UAAM,eAAe,KAAK,QAAQ,cAAc,sBAAsB;AACtE,QAAI,cAAc;AACd,mBAAa,WAAW;AACxB,mBAAa,YAAY,aAAa,UAAU;AAAA,QAC5C;AAAA,QACA;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ;AACJ;;;AC1GA,IAAO,2BAAP,cAA6B,WAAW;AAAA,EACtC,UAAU;AACR,SAAK,QAAQ,cAAc;AAAA,EAC7B;AACF;;;ACJA,IAAO,2BAAP,cAA6B,WAAW;AAAA,EACpC,OAAO,UAAU,CAAC,WAAW,WAAW,SAAS,WAAW,cAAc,QAAQ,eAAe;AAAA,EAEjG,UAAU;AACN,SAAK,cAAc;AACnB,SAAK,gBAAgB;AAGrB,QAAI,CAAC,OAAO,YAAY;AACpB,aAAO,aAAa;AAAA,QAChB,aAAa;AAAA,QACb,eAAe;AAAA,MACnB;AAAA,IACJ;AAGA,WAAO,iBAAiB,CAAC,SAAS,SAAS;AACvC,WAAK,UAAU,SAAS,IAAI;AAAA,IAChC;AAGA,SAAK,wBAAwB,KAAK,iBAAiB,KAAK,IAAI;AAC5D,aAAS,iBAAiB,SAAS,KAAK,qBAAqB;AAG7D,SAAK,kBAAkB,KAAK,MAAM,KAAK,IAAI;AAC3C,aAAS,iBAAiB,eAAe,KAAK,eAAe;AAAA,EACjE;AAAA,EAEA,aAAa;AAET,QAAI,KAAK,uBAAuB;AAC5B,eAAS,oBAAoB,SAAS,KAAK,qBAAqB;AAAA,IACpE;AACA,QAAI,KAAK,iBAAiB;AACtB,eAAS,oBAAoB,eAAe,KAAK,eAAe;AAAA,IACpE;AAAA,EACJ;AAAA;AAAA,EAGA,iBAAiB,OAAO;AAEpB,UAAM,uBAAuB,MAAM,OAAO,QAAQ,8BAA8B;AAChF,QAAI,sBAAsB;AACtB,YAAM,eAAe;AACrB,WAAK,MAAM;AAAA,IACf;AAAA,EACJ;AAAA;AAAA,EAGA,KAAK,OAAO;AACR,UAAM,eAAe;AAErB,YAAQ,IAAI,gCAAyB;AAErC,UAAM,SAAS,MAAM;AACrB,UAAM,OAAO,OAAO,QAAQ,MAAM;AAClC,YAAQ,IAAI,yBAAkB,IAAI;AAElC,UAAM,QAAQ,OAAO,QAAQ,gBAAgB;AAC7C,UAAM,UAAU,OAAO,QAAQ,kBAAkB;AACjD,UAAM,cAAc,OAAO,QAAQ,eAAe;AAClD,UAAM,OAAO,OAAO,QAAQ,eAAe;AAG3C,UAAM,QAAQ,SAAS,eAAe,oBAAoB;AAC1D,UAAM,eAAe,OAAO,cAAc,6BAA6B;AACvE,UAAM,iBAAiB,OAAO,cAAc,+BAA+B;AAC3E,UAAM,oBAAoB,OAAO,cAAc,kCAAkC;AACjF,UAAM,iBAAiB,OAAO,cAAc,+BAA+B;AAC3E,UAAM,iBAAiB,OAAO,cAAc,+BAA+B;AAE3E,QAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,mBAAmB;AAClE,cAAQ,MAAM,iCAA4B;AAC1C;AAAA,IACJ;AAGA,iBAAa,cAAc;AAC3B,mBAAe,cAAc;AAC7B,sBAAkB,cAAc;AAGhC,SAAK,wBAAwB,OAAO,IAAI;AAGxC,WAAO,WAAW,cAAc;AAChC,WAAO,WAAW,gBAAgB,MAAM;AACpC,cAAQ,IAAI,6CAAsC,IAAI;AACtD,UAAI,MAAM;AACN,gBAAQ,IAAI,8BAAuB,KAAK,MAAM;AAC9C,aAAK,OAAO;AAAA,MAChB,OAAO;AAEH,cAAM,OAAO,OAAO;AACpB,YAAI,MAAM;AACN,kBAAQ,IAAI,4BAAqB,IAAI;AACrC,iBAAO,SAAS,OAAO;AAAA,QAC3B;AAAA,MACJ;AAAA,IACJ;AAEA,YAAQ,IAAI,oCAA6B,OAAO,UAAU;AAG1D,SAAK,cAAc;AACnB,SAAK,gBAAgB,OAAO,WAAW;AAGvC,UAAM,UAAU,OAAO,QAAQ;AAC/B,UAAM,UAAU,IAAI,OAAO;AAG3B,0BAAsB,MAAM;AACxB,sBAAgB,UAAU,IAAI,aAAa;AAC3C,sBAAgB,UAAU,IAAI,aAAa;AAAA,IAC/C,CAAC;AAAA,EACL;AAAA;AAAA,EAGA,QAAQ;AAEJ,UAAM,oBAAoB,SAAS,eAAe,oBAAoB;AACtE,QAAI,qBAAqB,CAAC,kBAAkB,UAAU,SAAS,QAAQ,GAAG;AACtE,YAAM,iBAAiB,mBAAmB,cAAc,+BAA+B;AACvF,YAAM,iBAAiB,mBAAmB,cAAc,+BAA+B;AAEvF,UAAI,kBAAkB,gBAAgB;AAClC,uBAAe,UAAU,OAAO,aAAa;AAC7C,uBAAe,UAAU,OAAO,aAAa;AAAA,MACjD;AAEA,iBAAW,MAAM;AACb,YAAI,mBAAmB;AACnB,4BAAkB,UAAU,IAAI,QAAQ;AACxC,4BAAkB,UAAU,OAAO,OAAO;AAAA,QAC9C;AAGA,aAAK,cAAc;AACnB,aAAK,gBAAgB;AACrB,YAAI,OAAO,YAAY;AACnB,iBAAO,WAAW,cAAc;AAChC,iBAAO,WAAW,gBAAgB;AAAA,QACtC;AAAA,MACJ,GAAG,GAAG;AACN;AAAA,IACJ;AAGA,UAAM,iBAAiB,SAAS,eAAe,iBAAiB;AAChE,QAAI,kBAAkB,CAAC,eAAe,UAAU,SAAS,QAAQ,GAAG;AAChE,qBAAe,UAAU,IAAI,QAAQ;AAGrC,YAAM,eAAe,SAAS,eAAe,eAAe;AAC5D,UAAI,cAAc;AACd,qBAAa,YAAY;AAAA,MAC7B;AAAA,IACJ;AAAA,EACJ;AAAA;AAAA,EAGA,UAAU;AACN,YAAQ,IAAI,gCAA2B;AACvC,YAAQ,IAAI,mCAA4B,OAAO,UAAU;AAGzD,UAAM,gBAAgB,OAAO,YAAY,iBAAiB,KAAK;AAC/D,YAAQ,IAAI,gCAA2B,CAAC,CAAC,aAAa;AAEtD,QAAI,eAAe;AAEf,oBAAc;AAGd,UAAI,OAAO,YAAY;AACnB,eAAO,WAAW,cAAc;AAChC,eAAO,WAAW,gBAAgB;AAAA,MACtC;AAGA,WAAK,MAAM;AAAA,IACf,OAAO;AACH,cAAQ,IAAI,gCAA2B;AACvC,WAAK,MAAM;AAAA,IACf;AAAA,EACJ;AAAA;AAAA,EAGA,wBAAwB,OAAO,MAAM;AACjC,UAAM,gBAAgB,MAAM,cAAc,qCAAqC;AAC/E,UAAM,OAAO,MAAM,cAAc,4BAA4B;AAC7D,UAAM,aAAa,MAAM,cAAc,kCAAkC;AAEzE,QAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,YAAY;AACxC,cAAQ,MAAM,uCAAkC;AAChD;AAAA,IACJ;AAEA,SAAK,gBAAgB,eAAe,MAAM,YAAY,IAAI;AAAA,EAC9D;AAAA;AAAA,EAGA,cAAc,MAAM;AAChB,UAAM,gBAAgB,KAAK;AAC3B,UAAM,OAAO,KAAK;AAClB,UAAM,aAAa,KAAK;AAExB,SAAK,gBAAgB,eAAe,MAAM,YAAY,IAAI;AAAA,EAC9D;AAAA;AAAA,EAGA,gBAAgB,eAAe,MAAM,YAAY,MAAM;AAEnD,kBAAc,YACV;AACJ,eAAW,YACP;AAEJ,YAAQ,MAAM;AAAA,MACV,KAAK;AACD,sBAAc,UAAU,IAAI,YAAY;AACxC,aAAK,UAAU,IAAI,cAAc;AACjC,mBAAW,UAAU,IAAI,cAAc,oBAAoB,oBAAoB;AAE/E,aAAK,YACD;AACJ;AAAA,MACJ,KAAK;AACD,sBAAc,UAAU,IAAI,eAAe;AAC3C,aAAK,UAAU,IAAI,iBAAiB;AACpC,mBAAW,UAAU,IAAI,iBAAiB,uBAAuB,uBAAuB;AAExF,aAAK,YACD;AACJ;AAAA,MACJ,KAAK;AACD,sBAAc,UAAU,IAAI,aAAa;AACzC,aAAK,UAAU,IAAI,eAAe;AAClC,mBAAW,UAAU,IAAI,eAAe,qBAAqB,qBAAqB;AAElF,aAAK,YACD;AACJ;AAAA,MACJ;AACI,sBAAc,UAAU,IAAI,aAAa;AACzC,aAAK,UAAU,IAAI,eAAe;AAClC,mBAAW,UAAU,IAAI,eAAe,qBAAqB,qBAAqB;AAAA,IAC1F;AAAA,EACJ;AAAA;AAAA,EAGA,QAAQ,OAAO;AACX,QAAI,MAAM,QAAQ,UAAU;AACxB,WAAK,MAAM;AAAA,IACf,WAAW,MAAM,QAAQ,SAAS;AAC9B,WAAK,QAAQ;AAAA,IACjB;AAAA,EACJ;AAAA;AAAA,EAGA,UAAU,SAAS,OAAO,WAAW;AACjC,UAAM,iBAAiB,SAAS,eAAe,sBAAsB;AACrE,UAAM,eAAe,SAAS,eAAe,qBAAqB;AAClE,UAAM,YAAY,SAAS,eAAe,kBAAkB;AAC5D,UAAM,YAAY,SAAS,eAAe,kBAAkB;AAE5D,QAAI,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,aAAa,CAAC,UAAW;AAGlE,iBAAa,YAAY;AACzB,cAAU,YAAY;AAGtB,YAAQ,MAAM;AAAA,MACV,KAAK;AACD,qBAAa,UAAU,IAAI,eAAe,UAAU,kBAAkB;AACtE,kBAAU,UAAU,IAAI,gBAAgB;AACxC,kBAAU,YACN;AACJ,kBAAU,UAAU,IAAI,gBAAgB;AACxC;AAAA,MACJ,KAAK;AACD,qBAAa,UAAU,IAAI,aAAa,UAAU,gBAAgB;AAClE,kBAAU,UAAU,IAAI,cAAc;AACtC,kBAAU,YACN;AACJ,kBAAU,UAAU,IAAI,cAAc;AACtC;AAAA,MACJ,KAAK;AACD,qBAAa,UAAU,IAAI,gBAAgB,UAAU,mBAAmB;AACxE,kBAAU,UAAU,IAAI,iBAAiB;AACzC,kBAAU,YACN;AACJ,kBAAU,UAAU,IAAI,iBAAiB;AACzC;AAAA,IACR;AAGA,cAAU,cAAc;AAGxB,mBAAe,UAAU,OAAO,QAAQ;AAGxC,eAAW,MAAM;AACb,qBAAe,UAAU,IAAI,QAAQ;AAAA,IACzC,GAAG,GAAI;AAAA,EACX;AAAA;AAAA,EAGA,YAAY;AACR,UAAM,iBAAiB,SAAS,eAAe,sBAAsB;AACrE,QAAI,gBAAgB;AAChB,qBAAe,UAAU,IAAI,QAAQ;AAAA,IACzC;AAAA,EACJ;AAAA;AAAA,EAGA,gBAAgB,OAAO;AACnB,UAAM,eAAe;AAErB,YAAQ,IAAI,mCAA4B;AAExC,UAAM,OAAO,MAAM;AACnB,YAAQ,IAAI,yBAAkB,IAAI;AAElC,UAAM,QAAQ,KAAK,QAAQ,gBAAgB;AAC3C,UAAM,UAAU,KAAK,QAAQ,kBAAkB;AAC/C,UAAM,cAAc,KAAK,QAAQ,eAAe;AAChD,UAAM,OAAO,KAAK,QAAQ,eAAe;AAGzC,UAAM,QAAQ,SAAS,eAAe,oBAAoB;AAC1D,UAAM,eAAe,OAAO,cAAc,6BAA6B;AACvE,UAAM,iBAAiB,OAAO,cAAc,+BAA+B;AAC3E,UAAM,oBAAoB,OAAO,cAAc,kCAAkC;AACjF,UAAM,iBAAiB,OAAO,cAAc,+BAA+B;AAC3E,UAAM,iBAAiB,OAAO,cAAc,+BAA+B;AAE3E,QAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,mBAAmB;AAClE,cAAQ,MAAM,iCAA4B;AAE1C,WAAK,OAAO;AACZ;AAAA,IACJ;AAGA,iBAAa,cAAc;AAC3B,mBAAe,cAAc;AAC7B,sBAAkB,cAAc;AAGhC,SAAK,wBAAwB,OAAO,IAAI;AAGxC,WAAO,WAAW,cAAc;AAChC,WAAO,WAAW,gBAAgB,MAAM;AACpC,cAAQ,IAAI,6CAAsC;AAClD,cAAQ,IAAI,8BAAuB,KAAK,MAAM;AAC9C,WAAK,OAAO;AAAA,IAChB;AAEA,YAAQ,IAAI,yCAAkC,OAAO,UAAU;AAG/D,UAAM,UAAU,OAAO,QAAQ;AAC/B,UAAM,UAAU,IAAI,OAAO;AAG3B,0BAAsB,MAAM;AACxB,sBAAgB,UAAU,IAAI,aAAa;AAC3C,sBAAgB,UAAU,IAAI,aAAa;AAAA,IAC/C,CAAC;AAAA,EACL;AAAA,EAEA,YAAY;AACR,UAAM,0DAAiC;AAAA,EAC3C;AAAA;AAAA,EAGA,WAAW,OAAO;AACd,UAAM,eAAe;AAErB,UAAM,OAAO,MAAM;AACnB,UAAM,MAAM,KAAK;AAGjB,UAAM,iBAAiB,SAAS,eAAe,iBAAiB;AAChE,UAAM,eAAe,SAAS,eAAe,eAAe;AAE5D,QAAI,CAAC,kBAAkB,CAAC,cAAc;AAClC,cAAQ,MAAM,kCAA6B;AAC3C;AAAA,IACJ;AAGA,iBAAa,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWzB,mBAAe,UAAU,OAAO,QAAQ;AAGxC,UAAM,KAAK;AAAA,MACP,SAAS;AAAA,QACL,QAAQ;AAAA,QACR,oBAAoB;AAAA,MACxB;AAAA,IACJ,CAAC,EACI,KAAK,CAAC,aAAa;AAChB,cAAQ,IAAI,8BAAuB,SAAS,MAAM;AAClD,cAAQ,IAAI,+BAAwB,SAAS,QAAQ,IAAI,cAAc,CAAC;AAExE,UAAI,CAAC,SAAS,IAAI;AACd,cAAM,IAAI,MAAM,QAAQ,SAAS,MAAM,KAAK,SAAS,UAAU,EAAE;AAAA,MACrE;AACA,aAAO,SAAS,KAAK;AAAA,IACzB,CAAC,EACA,KAAK,CAAC,SAAS;AACZ,cAAQ,IAAI,4CAAuC,KAAK,MAAM;AAC9D,mBAAa,YAAY;AAAA,IAI7B,CAAC,EACA,MAAM,CAACC,WAAU;AACd,cAAQ,MAAM,+DAAgBA,MAAK;AACnC,mBAAa,YAAY;AAAA;AAAA,4EAEUA,OAAM,OAAO;AAAA;AAAA;AAAA;AAAA,IAIpD,CAAC;AAAA,EACT;AACJ;;;AC5bA,IAAO,mCAAP,cAA6B,WAAW;AAAA,EACtC,OAAO,UAAU,CAAC,wBAAwB,aAAa;AAAA,EAEvD,UAAU;AACR,YAAQ,IAAI,oCAAoC;AAChD,SAAK,kBAAkB;AAAA,EACzB;AAAA,EAEA,YAAY,OAAO;AACjB,UAAM,OAAO,MAAM,OAAO;AAC1B,UAAM,gBAAgB,SAAS,eAAe,wBAAwB;AAEtE,QAAI,SAAS,gBAAgB;AAC3B,oBAAc,UAAU,OAAO,QAAQ;AAAA,IACzC,OAAO;AACL,oBAAc,UAAU,IAAI,QAAQ;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,YAAY,OAAO;AACjB,UAAM,aAAa,MAAM,OAAO,QAAQ,cAAc;AACtD,SAAK,cAAc,UAAU;AAAA,EAC/B;AAAA,EAEA,gBAAgB,OAAO;AACrB,UAAM,aAAa,MAAM,OAAO,QAAQ,cAAc;AACtD,SAAK,cAAc,UAAU;AAAA,EAC/B;AAAA,EAEA,UAAU,OAAO;AACf,UAAM,mBAAmB,SAAS,eAAe,cAAc;AAC/D,UAAM,kBAAkB,iBAAiB,iBAAiB,cAAc;AACxE,UAAMC,YAAW,gBAAgB;AAEjC,UAAM,gBAAgB,KAAK,iBAAiBA,SAAQ;AACpD,qBAAiB,mBAAmB,aAAa,aAAa;AAG9D,UAAM,YAAY,iBAAiB;AACnC,SAAK,cAAc,SAAS;AAAA,EAC9B;AAAA,EAEA,aAAa,OAAO;AAClB,UAAM,aAAa,MAAM,OAAO,QAAQ,cAAc;AACtD,eAAW,OAAO;AAClB,SAAK,eAAe;AAAA,EACtB;AAAA,EAEA,MAAM,YAAY,OAAO;AACvB,UAAM,UAAU,MAAM,OAAO,QAAQ;AACrC,UAAM,OAAO,SAAS,cAAc,sCAAsC,EAAE;AAC5E,UAAM,UAAU,KAAK,eAAe;AAEpC,QAAI;AACF,YAAM,WAAW,MAAM,MAAM,sBAAsB,KAAK,kBAAkB,CAAC,mCAAmC;AAAA,QAC5G,QAAQ;AAAA,QACR,SAAS;AAAA,UACP,gBAAgB;AAAA,UAChB,gBAAgB,KAAK,aAAa;AAAA,UAClC,oBAAoB;AAAA,QACtB;AAAA,QACA,MAAM,KAAK,UAAU;AAAA,UACnB;AAAA,UACA,gBAAgB;AAAA,UAChB;AAAA,QACF,CAAC;AAAA,MACH,CAAC;AAED,UAAI,SAAS,IAAI;AAEf,aAAK,WAAW;AAEhB,eAAO,SAAS,OAAO;AAAA,MACzB,OAAO;AACL,gBAAQ,MAAM,sBAAsB;AAAA,MACtC;AAAA,IACF,SAASC,QAAO;AACd,cAAQ,MAAM,yBAAyBA,MAAK;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,cAAc,YAAY;AACxB,UAAM,YAAY,WAAW,cAAc,6BAA6B,EAAE;AAC1E,UAAM,UAAU,WAAW,cAAc,2BAA2B,EAAE;AACtE,UAAM,WAAW,SAAS,WAAW,cAAc,4BAA4B,EAAE,KAAK;AAEtF,QAAI,aAAa,WAAW,UAAU;AACpC,YAAM,QAAQ,KAAK,kBAAkB,WAAW,SAAS,QAAQ;AACjE,YAAM,YAAY,WAAW,cAAc,aAAa;AACxD,YAAM,eAAe,WAAW,cAAc,qBAAqB;AAEnE,UAAI,UAAW,WAAU,cAAc,MAAM;AAC7C,UAAI,aAAc,cAAa,cAAc,MAAM,KAAK,IAAI;AAAA,IAC9D;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,SAAS,iBAAiB,cAAc;AACxD,YAAQ,QAAQ,YAAU,KAAK,cAAc,MAAM,CAAC;AAAA,EACtD;AAAA,EAEA,kBAAkB,WAAW,SAAS,iBAAiB;AACrD,UAAM,QAAQ,CAAC;AACf,UAAMC,SAAQ,oBAAI,KAAK,cAAc,SAAS,KAAK;AACnD,UAAM,MAAM,oBAAI,KAAK,cAAc,OAAO,KAAK;AAE/C,QAAI,UAAU,IAAI,KAAKA,MAAK;AAE5B,WAAO,WAAW,KAAK;AACrB,YAAM,KAAK,QAAQ,aAAa,EAAE,MAAM,GAAG,CAAC,CAAC;AAC7C,cAAQ,WAAW,QAAQ,WAAW,IAAI,eAAe;AAAA,IAC3D;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,iBAAiBC,QAAO;AACtB,WAAO;AAAA,8EACmEA,MAAK;AAAA;AAAA;AAAA;AAAA;AAAA,qCAK9CA,MAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAMLA,MAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAONA,MAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCA2BFA,MAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAM1C;AAAA,EAEA,iBAAiB;AACf,UAAM,UAAU,CAAC;AACjB,UAAM,cAAc,SAAS,iBAAiB,cAAc;AAE5D,gBAAY,QAAQ,UAAQ;AAC1B,YAAM,YAAY,KAAK,cAAc,6BAA6B,EAAE;AACpE,YAAM,UAAU,KAAK,cAAc,2BAA2B,EAAE;AAChE,YAAM,WAAW,KAAK,cAAc,4BAA4B,EAAE;AAElE,UAAI,aAAa,SAAS;AACxB,gBAAQ,KAAK;AAAA,UACX,YAAY;AAAA,UACZ,UAAU;AAAA,UACV,kBAAkB,SAAS,QAAQ;AAAA,QACrC,CAAC;AAAA,MACH;AAAA,IACF,CAAC;AAED,WAAO;AAAA,EACT;AAAA,EAEA,iBAAiB;AACf,UAAM,cAAc,SAAS,iBAAiB,cAAc;AAC5D,gBAAY,QAAQ,CAAC,MAAMA,WAAU;AACnC,WAAK,QAAQ,cAAcA;AAC3B,WAAK,cAAc,6BAA6B,EAAE,OAAO,WAAWA,MAAK;AACzE,WAAK,cAAc,2BAA2B,EAAE,OAAO,WAAWA,MAAK;AACvE,WAAK,cAAc,4BAA4B,EAAE,OAAO,WAAWA,MAAK;AAExE,YAAM,eAAe,KAAK,cAAc,qCAAqC;AAC7E,UAAI,cAAc;AAChB,qBAAa,QAAQ,cAAcA;AAAA,MACrC;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,aAAa;AACX,UAAM,iBAAiB,SAAS,eAAe,sBAAsB;AACrE,mBAAe,UAAU,IAAI,QAAQ;AAAA,EACvC;AAAA,EAEA,oBAAoB;AAClB,WAAO,OAAO,SAAS,SAAS,MAAM,GAAG,EAAE,CAAC;AAAA,EAC9C;AAAA,EAEA,eAAe;AACb,WAAO,SAAS,cAAc,yBAAyB,GAAG,aAAa,SAAS;AAAA,EAClF;AACF;;;AC1NA,IAAO,0CAAP,cAA6B,WAAW;AAAA,EACpC,OAAO,UAAU;AAAA,IACb;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACJ;AAAA,EAEA,OAAO,SAAS;AAAA,IACZ,gBAAgB;AAAA,EACpB;AAAA,EAEA,UAAU;AACN,YAAQ,IAAI,yCAAyC;AACrD,SAAK,eAAe;AACpB,SAAK,eAAe;AACpB,SAAK,iBAAiB,CAAC;AACvB,SAAK,kBAAkB,CAAC;AACxB,SAAK,oBAAoB;AAGzB,SAAK,gBAAgB;AAAA,EACzB;AAAA,EAEA,aAAa;AAET,QAAI,KAAK,mBAAmB;AACxB,WAAK,kBAAkB,QAAQ;AAAA,IACnC;AAAA,EACJ;AAAA;AAAA,EAGA,kBAAkB,MAAM;AAEpB,UAAM,OAAO,KAAK,YAAY;AAC9B,UAAM,QAAQ,OAAO,KAAK,SAAS,IAAI,CAAC,EAAE,SAAS,GAAG,GAAG;AACzD,UAAM,MAAM,OAAO,KAAK,QAAQ,CAAC,EAAE,SAAS,GAAG,GAAG;AAClD,WAAO,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG;AAAA,EAClC;AAAA;AAAA,EAGA,eAAe,YAAY;AAEvB,QAAI,WAAW,SAAS,GAAG,GAAG;AAC1B,mBAAa,WAAW,MAAM,GAAG,EAAE,CAAC;AAAA,IACxC;AACA,UAAM,CAAC,MAAM,OAAO,GAAG,IAAI,WAAW,MAAM,GAAG,EAAE,IAAI,MAAM;AAC3D,WAAO,IAAI,KAAK,MAAM,QAAQ,GAAG,GAAG;AAAA,EACxC;AAAA;AAAA,EAGA,oBAAoB,MAAM;AACtB,UAAM,WAAW,CAAC,UAAK,UAAK,UAAK,UAAK,UAAK,UAAK,QAAG;AACnD,WAAO,SAAS,KAAK,OAAO,CAAC;AAAA,EACjC;AAAA;AAAA,EAGA,oBAAoB,MAAM;AACtB,UAAM,QAAQ,oBAAI,KAAK;AACvB,UAAM,SAAS,GAAG,GAAG,GAAG,CAAC;AAEzB,UAAM,YAAY,IAAI,KAAK,IAAI;AAC/B,cAAU,SAAS,GAAG,GAAG,GAAG,CAAC;AAE7B,WAAO,aAAa;AAAA,EACxB;AAAA;AAAA,EAGA,kBAAkB;AACd,UAAM,SAAS,SAAS,KAAK,kBAAkB,KAAK;AACpD,UAAM,WAAW,SAAS,KAAK,kBAAkB,KAAK;AACtD,UAAM,iBAAiB,SAAS;AAGhC,QAAI,iBAAiB,IAAI;AACrB,WAAK,UAAU,oDAAY;AAC3B;AAAA,IACJ;AAEA,SAAK,YAAY;AACjB,SAAK,mBAAmB;AAAA,EAC5B;AAAA;AAAA,EAGA,MAAM,qBAAqB;AACvB,QAAI;AACA,WAAK,YAAY;AAEjB,YAAM,WAAW,MAAM;AAAA,QACnB,eAAe,KAAK,mBAAmB,+BAA+B,KAAK,SAAS;AAAA,MACxF;AAEA,UAAI,CAAC,SAAS,IAAI;AACd,cAAM,YAAY,MAAM,SAAS,KAAK;AACtC,YAAI,SAAS,WAAW,OAAO,UAAU,UAAU;AAC/C,eAAK,UAAU,sIAAwB;AACvC;AAAA,QACJ;AACA,cAAM,IAAI,MAAM,0BAAM;AAAA,MAC1B;AAEA,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,WAAK,iBAAiB,KAAK,mBAAmB,CAAC;AAC/C,WAAK,kBAAkB,KAAK,uBAAuB,CAAC;AAGpD,WAAK,iBAAiB,KAAK,eAAe,OAAO,CAAC,YAAY;AAC1D,cAAM,OAAO,KAAK,eAAe,OAAO;AACxC,eAAO,CAAC,KAAK,oBAAoB,IAAI;AAAA,MACzC,CAAC;AAED,cAAQ,IAAI,oEAAkB,KAAK,cAAc;AAGjD,UAAI,KAAK,eAAe,WAAW,KAAK,KAAK,gBAAgB,KAAK,mBAAmB;AACjF,aAAK,oBAAoB,KAAK,iBAAiB;AAAA,MACnD,WAAW,KAAK,eAAe,WAAW,KAAK,CAAC,KAAK,cAAc;AAE/D,aAAK,oBAAoB;AAAA,MAC7B,OAAO;AACH,aAAK,aAAa;AAClB,aAAK,oBAAoB;AAAA,MAC7B;AAAA,IACJ,SAASC,QAAO;AACZ,cAAQ,MAAM,2DAAcA,MAAK;AACjC,WAAK,UAAU,8DAAY;AAAA,IAC/B;AAAA,EACJ;AAAA;AAAA,EAGA,sBAAsB;AAElB,QAAI,KAAK,mBAAmB;AACxB,WAAK,kBAAkB,QAAQ;AAAA,IACnC;AAGA,UAAM,eAAe,KAAK,eAAe,IAAI,CAAC,YAAY;AAEtD,YAAM,CAAC,MAAM,OAAO,GAAG,IAAI,QAAQ,MAAM,GAAG,EAAE,IAAI,MAAM;AACxD,aAAO,IAAI,KAAK,MAAM,QAAQ,GAAG,GAAG;AAAA,IACxC,CAAC;AAED,YAAQ,IAAI,yCAAW,KAAK,cAAc;AAC1C,YAAQ,IAAI,+CAAiB,YAAY;AAGzC,iBAAa,QAAQ,CAAC,MAAMC,WAAU;AAClC,YAAM,cAAc,KAAK,eAAeA,MAAK;AAC7C,YAAM,eAAe,KAAK,kBAAkB,IAAI;AAChD,YAAM,YAAY,KAAK,OAAO;AAC9B,YAAM,eAAe,CAAC,UAAK,UAAK,UAAK,UAAK,UAAK,UAAK,QAAG;AACvD,cAAQ,IAAI,GAAG,WAAW,OAAO,YAAY,iBAAO,aAAa,SAAS,CAAC,GAAG;AAAA,IAClF,CAAC;AAGD,SAAK,oBAAoB,YAAY;AACrC,SAAK,oBAAoB,MAAM,QAAQ;AACvC,SAAK,oBAAoB,MAAM,WAAW;AAC1C,SAAK,oBAAoB,MAAM,SAAS;AAGxC,UAAM,qBAAqB;AAAA,MACvB,UAAU;AAAA;AAAA,QAEN,WAAW,CAAC,UAAK,UAAK,UAAK,UAAK,UAAK,UAAK,QAAG;AAAA,QAC7C,UAAU,CAAC,sBAAO,sBAAO,sBAAO,sBAAO,sBAAO,sBAAO,oBAAK;AAAA,MAC9D;AAAA,MACA,QAAQ;AAAA,QACJ,WAAW,CAAC,WAAM,WAAM,WAAM,WAAM,WAAM,WAAM,WAAM,WAAM,WAAM,YAAO,YAAO,UAAK;AAAA,QACrF,UAAU;AAAA,UACN;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACJ;AAAA,MACJ;AAAA,MACA,gBAAgB;AAAA;AAAA,MAChB,gBAAgB;AAAA,MAChB,kBAAkB;AAAA,MAClB,aAAa;AAAA,MACb,aAAa;AAAA,IACjB;AAGA,UAAM,WAAW,oBAAI,KAAK;AAC1B,aAAS,QAAQ,SAAS,QAAQ,IAAI,CAAC;AACvC,aAAS,SAAS,GAAG,GAAG,GAAG,CAAC;AAE5B,SAAK,oBAAoB,YAAU,KAAK,qBAAqB;AAAA,MACzD,QAAQ;AAAA,MACR,YAAY;AAAA,MACZ,SAAS;AAAA;AAAA,MACT,UAAS,oBAAI,KAAK,GAAE,QAAQ,EAAE;AAAA;AAAA,MAC9B,QAAQ,aAAa,SAAS,IAAI,eAAe,CAAC;AAAA;AAAA,MAClD,eAAe;AAAA,MACf,QAAQ;AAAA;AAAA;AAAA,MAGR,SAAS;AAAA;AAAA,QAEL;AAAA,UACI,MAAM,IAAI,KAAK,MAAM,GAAG,CAAC;AAAA;AAAA,UACzB,IAAI,oBAAI,KAAK;AAAA;AAAA,QACjB;AAAA,MACJ;AAAA,MAEA,UAAU,CAAC,kBAAkB;AACzB,YAAI,cAAc,SAAS,GAAG;AAC1B,gBAAM,eAAe,cAAc,CAAC;AAGpC,cAAI,KAAK,oBAAoB,YAAY,GAAG;AACxC,iBAAK,UAAU,0EAAc;AAC7B,iBAAK,kBAAkB,MAAM;AAC7B;AAAA,UACJ;AAEA,eAAK,WAAW,YAAY;AAAA,QAChC;AAAA,MACJ;AAAA,MAEA,SAAS,MAAM;AAEX,aAAK,YAAY;AACjB,gBAAQ,IAAI,qDAAqD;AAGjE,aAAK,sBAAsB;AAAA,MAC/B;AAAA,MAEA,aAAa,CAAC,MAAM,MAAM,IAAI,YAAY;AACtC,cAAM,OAAO,QAAQ;AAGrB,YAAI,KAAK,oBAAoB,IAAI,GAAG;AAChC,kBAAQ,UAAU,IAAI,eAAe;AACrC,kBAAQ,QAAQ;AAChB,kBAAQ,MAAM,UAAU;AACxB,kBAAQ,MAAM,SAAS;AACvB,kBAAQ,MAAM,iBAAiB;AAAA,QACnC;AAAA,MACJ;AAAA,IACJ,CAAC;AAAA,EACL;AAAA;AAAA,EAGA,wBAAwB;AACpB,UAAM,QAAQ,SAAS,cAAc,OAAO;AAC5C,UAAM,cAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoBpB,QAAI,CAAC,SAAS,cAAc,4BAA4B,GAAG;AACvD,YAAM,KAAK;AACX,eAAS,KAAK,YAAY,KAAK;AAAA,IACnC;AAAA,EACJ;AAAA;AAAA,EAGA,cAAc;AACV,SAAK,mBAAmB,UAAU,OAAO,QAAQ;AACjD,SAAK,oBAAoB,MAAM,UAAU;AACzC,SAAK,sBAAsB,UAAU,IAAI,QAAQ;AAAA,EACrD;AAAA;AAAA,EAGA,cAAc;AACV,SAAK,mBAAmB,UAAU,IAAI,QAAQ;AAAA,EAClD;AAAA;AAAA,EAGA,eAAe;AACX,SAAK,mBAAmB,UAAU,IAAI,QAAQ;AAC9C,SAAK,oBAAoB,MAAM,UAAU;AACzC,SAAK,sBAAsB,UAAU,IAAI,QAAQ;AAAA,EACrD;AAAA;AAAA,EAGA,oBAAoB,iBAAiB;AACjC,SAAK,mBAAmB,UAAU,IAAI,QAAQ;AAC9C,SAAK,oBAAoB,MAAM,UAAU;AACzC,SAAK,sBAAsB,UAAU,OAAO,QAAQ;AAEpD,QAAI,mBAAmB,KAAK,8BAA8B;AACtD,YAAM,OAAO,KAAK,eAAe,eAAe;AAChD,YAAM,gBAAgB,GAAG,KAAK,SAAS,IAAI,CAAC,SAAI,KAAK,QAAQ,CAAC;AAC9D,WAAK,0BAA0B,cAAc;AAAA,IACjD;AAAA,EACJ;AAAA;AAAA,EAGA,sBAAsB;AAClB,SAAK,mBAAmB,UAAU,IAAI,QAAQ;AAC9C,SAAK,oBAAoB,MAAM,UAAU;AACzC,SAAK,sBAAsB,UAAU,IAAI,QAAQ;AAGjD,SAAK,UAAU,kMAAkC;AAAA,EACrD;AAAA;AAAA,EAGA,WAAW,MAAM;AAEb,QAAI,KAAK,oBAAoB,IAAI,GAAG;AAChC,WAAK,UAAU,0EAAc;AAC7B;AAAA,IACJ;AAEA,YAAQ,IAAI,6BAAS,IAAI;AACzB,SAAK,eAAe;AACpB,SAAK,0BAA0B;AAC/B,SAAK,uBAAuB;AAG5B,SAAK,sBAAsB,UAAU,OAAO,QAAQ;AAAA,EACxD;AAAA;AAAA,EAGA,4BAA4B;AACxB,QAAI,CAAC,KAAK,aAAc;AAExB,UAAM,QAAQ,KAAK,aAAa,SAAS,IAAI;AAC7C,UAAM,MAAM,KAAK,aAAa,QAAQ;AACtC,UAAM,UAAU,KAAK,oBAAoB,KAAK,YAAY;AAE1D,QAAI,KAAK,2BAA2B;AAChC,WAAK,uBAAuB,cAAc,GAAG,KAAK,SAAI,GAAG;AAAA,IAC7D;AAEA,QAAI,KAAK,8BAA8B;AACnC,WAAK,0BAA0B,cAAc,eAAK,OAAO;AAAA,IAC7D;AAEA,QAAI,KAAK,8BAA8B;AACnC,WAAK,0BAA0B,cAAc,GAAG,KAAK,SAAI,GAAG,sBAAO,OAAO;AAAA,IAC9E;AAAA,EACJ;AAAA;AAAA,EAGA,MAAM,yBAAyB;AAC3B,QAAI,CAAC,KAAK,aAAc;AAExB,QAAI;AACA,YAAM,aAAa,KAAK,kBAAkB,KAAK,YAAY;AAC3D,YAAM,WAAW,MAAM;AAAA,QACnB,eAAe,KAAK,mBAAmB,yBAAyB,UAAU,eAAe,KAAK,SAAS;AAAA,MAC3G;AAEA,UAAI,CAAC,SAAS,IAAI;AACd,cAAM,YAAY,MAAM,SAAS,KAAK;AACtC,YAAI,SAAS,WAAW,OAAO,UAAU,UAAU;AAC/C,eAAK,UAAU,8DAAY;AAC3B;AAAA,QACJ;AACA,YAAI,SAAS,WAAW,KAAK;AACzB,eAAK,UAAU,UAAU,SAAS,kDAAU;AAC5C;AAAA,QACJ;AACA,cAAM,IAAI,MAAM,sCAAQ;AAAA,MAC5B;AAEA,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,WAAK,gBAAgB,KAAK,mBAAmB,CAAC,CAAC;AAAA,IACnD,SAASD,QAAO;AACZ,cAAQ,MAAM,qDAAaA,MAAK;AAChC,WAAK,UAAU,0EAAc;AAAA,IACjC;AAAA,EACJ;AAAA;AAAA,EAGA,gBAAgB,WAAW;AACvB,YAAQ,IAAI,6BAAS,SAAS;AAG9B,QAAI,KAAK,4BAA6B,MAAK,yBAAyB,YAAY;AAChF,QAAI,KAAK,0BAA2B,MAAK,uBAAuB,YAAY;AAE5E,QAAI,eAAe;AACnB,QAAI,aAAa;AAEjB,cAAU,QAAQ,CAAC,SAAS;AACxB,YAAM,SAAS,KAAK,qBAAqB,IAAI;AAC7C,YAAM,OAAO,SAAS,KAAK,KAAK,MAAM,GAAG,EAAE,CAAC,CAAC;AAE7C,UAAI,OAAO,IAAI;AAEX,YAAI,KAAK,6BAA6B;AAClC,eAAK,yBAAyB,YAAY,MAAM;AAChD,yBAAe;AAAA,QACnB;AAAA,MACJ,OAAO;AAEH,YAAI,KAAK,2BAA2B;AAChC,eAAK,uBAAuB,YAAY,MAAM;AAC9C,uBAAa;AAAA,QACjB;AAAA,MACJ;AAAA,IACJ,CAAC;AAGD,QAAI,KAAK,yBAAyB;AAC9B,WAAK,qBAAqB,MAAM,UAAU,eAAe,UAAU;AAAA,IACvE;AACA,QAAI,KAAK,uBAAuB;AAC5B,WAAK,mBAAmB,MAAM,UAAU,aAAa,UAAU;AAAA,IACnE;AAGA,QAAI,KAAK,6BAA6B;AAClC,WAAK,yBAAyB,UAAU,OAAO,QAAQ;AAAA,IAC3D;AAAA,EACJ;AAAA;AAAA,EAGA,qBAAqB,MAAM;AACvB,UAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,WAAO,OAAO;AACd,WAAO,cAAc,KAAK;AAC1B,WAAO,YACH;AACJ,WAAO,QAAQ,OAAO,KAAK;AAC3B,WAAO,QAAQ,SAAS;AACxB,WAAO,QAAQ,OAAO,KAAK,UAAU,IAAI;AAEzC,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,eAAe,OAAO;AAClB,UAAM,SAAS,MAAM;AACrB,UAAM,OAAO,KAAK,MAAM,OAAO,QAAQ,IAAI;AAE3C,SAAK,eAAe;AACpB,YAAQ,IAAI,6BAAS,IAAI;AAEzB,SAAK,sBAAsB;AAG3B,QAAI,KAAK,yBAAyB;AAC9B,WAAK,qBAAqB,WAAW;AAAA,IACzC;AAAA,EACJ;AAAA;AAAA,EAGA,wBAAwB;AACpB,UAAM,aAAa;AAAA,MACf,GAAI,KAAK,8BAA8B,KAAK,yBAAyB,iBAAiB,QAAQ,IAAI,CAAC;AAAA,MACnG,GAAI,KAAK,4BAA4B,KAAK,uBAAuB,iBAAiB,QAAQ,IAAI,CAAC;AAAA,IACnG;AAEA,eAAW,QAAQ,CAAC,WAAW;AAC3B,UAAI,KAAK,gBAAgB,OAAO,QAAQ,SAAS,KAAK,aAAa,MAAM;AACrE,eAAO,YACH;AAAA,MACR,OAAO;AACH,eAAO,YACH;AAAA,MACR;AAAA,IACJ,CAAC;AAAA,EACL;AAAA;AAAA,EAGA,oBAAoB;AAChB,SAAK,eAAe;AACpB,SAAK,eAAe;AAGpB,QAAI,KAAK,0BAA0B;AAC/B,WAAK,sBAAsB,UAAU,IAAI,QAAQ;AAAA,IACrD;AAGA,QAAI,KAAK,mBAAmB;AACxB,WAAK,kBAAkB,MAAM;AAAA,IACjC;AAGA,QAAI,KAAK,yBAAyB;AAC9B,WAAK,qBAAqB,WAAW;AAAA,IACzC;AAAA,EACJ;AAAA;AAAA,EAGA,uBAAuB;AACnB,QAAI,CAAC,KAAK,gBAAgB,CAAC,KAAK,cAAc;AAC1C,WAAK,UAAU,kDAAU;AACzB;AAAA,IACJ;AAGA,QAAI,KAAK,oBAAoB,KAAK,YAAY,GAAG;AAC7C,WAAK,UAAU,0EAAc;AAC7B,WAAK,kBAAkB;AACvB;AAAA,IACJ;AAEA,UAAM,aAAa,KAAK,kBAAkB,KAAK,YAAY;AAC3D,UAAM,SAAS,IAAI,gBAAgB;AAAA,MAC/B,MAAM;AAAA,MACN,MAAM,KAAK,aAAa;AAAA,MACxB,YAAY,KAAK;AAAA,IACrB,CAAC;AAED,WAAO,SAAS,OAAO,eAAe,KAAK,mBAAmB,qBAAqB,MAAM;AAAA,EAC7F;AAAA;AAAA,EAGA,UAAU,SAAS;AAEf,QAAI,eAAe,SAAS,cAAc,4BAA4B;AACtE,QAAI,CAAC,cAAc;AACf,qBAAe,SAAS,cAAc,KAAK;AAC3C,mBAAa,KAAK;AAClB,mBAAa,YAAY;AACzB,WAAK,QAAQ,aAAa,cAAc,KAAK,QAAQ,UAAU;AAAA,IACnE;AAEA,iBAAa,cAAc;AAC3B,iBAAa,MAAM,UAAU;AAG7B,eAAW,MAAM;AACb,UAAI,cAAc;AACd,qBAAa,MAAM,UAAU;AAAA,MACjC;AAAA,IACJ,GAAG,GAAI;AAAA,EACX;AACJ;;;ACvjBA,IAAAE,gBAAiB;AAEjB,IAAO,iCAAP,cAA6B,WAAW;AAAA,EACpC,OAAO,UAAU;AAAA,IACb;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACJ;AAAA,EACA,OAAO,SAAS;AAAA,IACZ,gBAAgB;AAAA,IAChB,eAAe;AAAA,IACf,cAAc;AAAA,IACd,cAAc;AAAA,EAClB;AAAA,EAEA,UAAU;AACN,SAAK,eAAe;AACpB,SAAK,mBAAmB;AACxB,SAAK,eAAe;AACpB,SAAK,qBAAqB;AAG1B,SAAK,gBAAgB;AACrB,SAAK,gBAAgB,MAAM;AACvB,mBAAa,KAAK,aAAa;AAC/B,WAAK,gBAAgB,WAAW,MAAM;AAClC,cAAM,kBAAkB,KAAK,gBAAgB,cAAc,qBAAqB;AAChF,YAAI,iBAAiB;AACjB,eAAK,qBAAqB,eAAe;AAAA,QAC7C;AAAA,MACJ,GAAG,GAAG;AAAA,IACV;AACA,WAAO,iBAAiB,UAAU,KAAK,aAAa;AAGpD,WAAO,iBAAiB,qBAAqB,MAAM;AAC/C,iBAAW,MAAM;AACb,cAAM,kBAAkB,KAAK,gBAAgB,cAAc,qBAAqB;AAChF,YAAI,iBAAiB;AACjB,eAAK,qBAAqB,eAAe;AAAA,QAC7C;AAAA,MACJ,GAAG,GAAG;AAAA,IACV,CAAC;AAGD,eAAW,MAAM;AACb,WAAK,eAAe;AACpB,WAAK,yBAAyB;AAC9B,WAAK,wBAAwB;AAAA,IACjC,GAAG,GAAG;AAAA,EACV;AAAA,EAEA,aAAa;AAET,QAAI,KAAK,eAAe;AACpB,aAAO,oBAAoB,UAAU,KAAK,aAAa;AAAA,IAC3D;AAGA,QAAI,KAAK,eAAe;AACpB,mBAAa,KAAK,aAAa;AAAA,IACnC;AAAA,EACJ;AAAA,EAEA,2BAA2B;AACvB,UAAM,yBAAyB,MAAM;AACjC,WAAK,wBAAwB;AAC7B,WAAK,mBAAmB;AACxB,WAAK,sBAAsB;AAG3B,UAAI,KAAK,YAAY;AACjB,aAAK,sBAAsB;AAAA,MAC/B,OAAO;AACH,aAAK,eAAe;AAAA,MACxB;AAGA,UAAI,KAAK,cAAc;AACnB,aAAK,iBAAiB,KAAK,YAAY;AAAA,MAC3C;AAAA,IACJ;AAEA,QAAI,KAAK,qBAAqB;AAC1B,WAAK,iBAAiB,iBAAiB,UAAU,sBAAsB;AAAA,IAC3E;AAEA,QAAI,KAAK,qBAAqB;AAC1B,WAAK,iBAAiB,iBAAiB,UAAU,sBAAsB;AAAA,IAC3E;AAGA,SAAK,mBAAmB;AAAA,EAC5B;AAAA,EAEA,0BAA0B;AACtB,QAAI,CAAC,KAAK,uBAAuB,CAAC,KAAK,oBAAqB;AAE5D,UAAM,gBAAgB,SAAS,KAAK,iBAAiB,KAAK,KAAK;AAC/D,UAAM,kBAAkB,SAAS,KAAK,iBAAiB,KAAK,KAAK;AACjE,UAAM,eAAe,KAAK,qBAAqB;AAG/C,SAAK,oBAAoB,KAAK,kBAAkB,eAAe,GAAG,eAAe,eAAe;AAGhG,SAAK,oBAAoB,KAAK,kBAAkB,iBAAiB,GAAG,eAAe,aAAa;AAGhG,SAAK,yBAAyB;AAAA,EAClC;AAAA,EAEA,oBAAoB,eAAe,cAAc,UAAU,UAAU;AAEjE,kBAAc,YAAY;AAG1B,aAAS,IAAI,UAAU,KAAK,UAAU,KAAK;AACvC,YAAMC,UAAS,SAAS,cAAc,QAAQ;AAC9C,MAAAA,QAAO,QAAQ;AACf,MAAAA,QAAO,cAAc;AACrB,UAAI,MAAM,cAAc;AACpB,QAAAA,QAAO,WAAW;AAAA,MACtB;AACA,oBAAc,YAAYA,OAAM;AAAA,IACpC;AAAA,EACJ;AAAA,EAEA,2BAA2B;AACvB,UAAM,SAAS,SAAS,KAAK,iBAAiB,KAAK,KAAK;AACxD,UAAM,WAAW,SAAS,KAAK,iBAAiB,KAAK,KAAK;AAC1D,UAAM,iBAAiB,SAAS;AAChC,UAAM,eAAe,KAAK,qBAAqB;AAG/C,QAAI,iBAAiB,cAAc;AAC/B,YAAM,mBAAmB,KAAK,IAAI,GAAG,eAAe,MAAM;AAC1D,WAAK,iBAAiB,QAAQ;AAC9B,iBAAW,MAAM,KAAK,wBAAwB,GAAG,EAAE;AAAA,IACvD;AAGA,QAAI,SAAS,GAAG;AACZ,WAAK,iBAAiB,QAAQ;AAC9B,iBAAW,MAAM,KAAK,wBAAwB,GAAG,EAAE;AAAA,IACvD;AAAA,EACJ;AAAA,EAEA,qBAAqB;AACjB,UAAM,mBAAmB,SAAS,eAAe,aAAa;AAC9D,UAAM,mBAAmB,SAAS,eAAe,aAAa;AAE9D,QAAI,oBAAoB,KAAK,qBAAqB;AAC9C,uBAAiB,QAAQ,KAAK,iBAAiB;AAAA,IACnD;AAEA,QAAI,oBAAoB,KAAK,qBAAqB;AAC9C,uBAAiB,QAAQ,KAAK,iBAAiB;AAAA,IACnD;AAAA,EACJ;AAAA,EAEA,sBAAsB;AAClB,UAAM,SAAS,KAAK,sBAAsB,SAAS,KAAK,iBAAiB,KAAK,KAAK,IAAI;AACvF,UAAM,WAAW,KAAK,sBAAsB,SAAS,KAAK,iBAAiB,KAAK,KAAK,IAAI;AACzF,WAAO,SAAS;AAAA,EACpB;AAAA,EAEA,MAAM,iBAAiB;AACnB,QAAI,CAAC,KAAK,mBAAmB;AACzB;AAAA,IACJ;AAGA,QAAI,KAAK,YAAY;AACjB,WAAK,WAAW,QAAQ;AACxB,WAAK,aAAa;AAAA,IACtB;AAEA,QAAI;AAEA,YAAM,YAAY,KAAK,oBAAoB;AAC3C,YAAM,SAAS,KAAK,sBAAsB,SAAS,KAAK,iBAAiB,KAAK,KAAK,IAAI;AACvF,YAAM,WAAW,KAAK,sBAAsB,SAAS,KAAK,iBAAiB,KAAK,KAAK,IAAI;AAEzF,YAAM,oBAAoB,gBAAgB,KAAK,mBAAmB,+BAA+B,SAAS,WAAW,MAAM,aAAa,QAAQ;AAEhJ,YAAM,yBAAyB,MAAM,MAAM,mBAAmB;AAAA,QAC1D,SAAS;AAAA,UACL,QAAQ;AAAA,UACR,gBAAgB;AAAA,QACpB;AAAA,MACJ,CAAC;AAED,UAAI,uBAAuB,WAAW,KAAK;AACvC,cAAM,YAAY,MAAM,uBAAuB,KAAK;AACpD,aAAK,uBAAuB,UAAU,WAAW,UAAU,KAAK;AAChE;AAAA,MACJ;AAEA,UAAI,CAAC,uBAAuB,IAAI;AAC5B,cAAM,IAAI,MAAM,uBAAuB,uBAAuB,MAAM,EAAE;AAAA,MAC1E;AAEA,YAAM,qBAAqB,MAAM,uBAAuB,KAAK;AAG7D,UACI,mBAAmB,iBAClB,CAAC,mBAAmB,mBAAmB,mBAAmB,gBAAgB,WAAW,IACxF;AAEE,YAAI,KAAK,YAAY;AACjB,eAAK,WAAW,QAAQ;AACxB,eAAK,aAAa;AAAA,QACtB;AAEA,cAAM,qBAAqB,mBAAmB,wBAAwB;AACtE,cAAM,kBAAkB,mBAAmB,qBAAqB,IAAI,KAAK,KAAK,IAAI,IAAI,qBAAqB,KAAK,KAAK,KAAK,GAAI,EAAE,YAAY,EAAE,MAAM,GAAG,EAAE,CAAC;AAC1J,aAAK,uBAAuB,iBAAiB,SAAS;AACtD;AAAA,MACJ;AAGA,UAAI,CAAC,mBAAmB,cAAc;AAElC,YAAI,KAAK,YAAY;AACjB,eAAK,WAAW,QAAQ;AACxB,eAAK,aAAa;AAAA,QACtB;AACA,aAAK,sBAAsB,SAAS;AACpC;AAAA,MACJ;AAIA,YAAM,SAAS,gBAAgB,KAAK,mBAAmB,8BAA8B,SAAS;AAE9F,YAAM,WAAW,MAAM,MAAM,QAAQ;AAAA,QACjC,SAAS;AAAA,UACL,QAAQ;AAAA,UACR,gBAAgB;AAAA,QACpB;AAAA,MACJ,CAAC;AAED,UAAI,CAAC,SAAS,IAAI;AACd,cAAM,IAAI,MAAM,uBAAuB,SAAS,MAAM,EAAE;AAAA,MAC5D;AAEA,YAAM,OAAO,MAAM,SAAS,KAAK;AAGjC,UAAI,KAAK,UAAU;AACf,aAAK,qBAAqB,KAAK;AAAA,MACnC;AAGA,WAAK,uBAAuB;AAG5B,YAAM,gBAAgB,KAAK;AAAA,QACvB,KAAK,mBAAmB,CAAC;AAAA,QACzB,KAAK,oBAAoB,CAAC;AAAA,QAC1B,KAAK;AAAA,QACL,mBAAmB,mBAAmB,CAAC;AAAA,MAC3C;AAGA,UAAI,cAAc;AAClB,UAAI,kBAAkB;AAEtB,UAAI,mBAAmB,mBAAmB,mBAAmB,gBAAgB,SAAS,GAAG;AAErF,sBAAc,mBAAmB,gBAAgB,CAAC;AAClD,YAAI;AACA,4BAAkB,IAAI,KAAK,WAAW;AAEtC,cAAI,MAAM,gBAAgB,QAAQ,CAAC,GAAG;AAClC,0BAAc;AACd,8BAAkB;AAAA,UACtB;AAAA,QACJ,SAASC,QAAO;AACZ,wBAAc;AACd,4BAAkB;AAAA,QACtB;AAAA,MACJ;AAIA,YAAM,kBAAkB;AAAA,QACpB,QAAQ;AAAA,QACR,QAAQ;AAAA;AAAA,QAER,QAAQ,cAAAC,QAAK;AAAA,QACb,YAAY;AAAA,QACZ,SAAS;AAAA,QACT,UAAS,oBAAI,KAAK,GAAE,QAAQ,KAAK,kBAAkB;AAAA,QACnD,SAAS;AAAA;AAAA,QAET,GAAI,eAAe,EAAE,YAAyB;AAAA,QAC9C,GAAI,mBAAmB,EAAE,gBAAiC;AAAA,QAC1D,UAAU,CAAC,GAAG,YAAY;AAEtB,cAAI,CAAC,WAAW,YAAY,IAAI;AAC5B;AAAA,UACJ;AAEA,eAAK,eAAe;AAGpB,cAAI,KAAK,eAAe;AACpB,iBAAK,WAAW,QAAQ;AAAA,UAC5B;AAGA,gBAAM,uBAAuB,SAAS,eAAe,kBAAkB;AACvE,cAAI,sBAAsB;AACtB,iCAAqB,QAAQ;AAAA,UACjC;AAGA,eAAK,kBAAkB,OAAO;AAE9B,eAAK,iBAAiB,OAAO;AAAA,QACjC;AAAA,QACA,SAAS,CAAC,GAAG,IAAI,aAAa;AAC1B,qBAAW,MAAM,KAAK,eAAe,GAAG,GAAG;AAE3C,cAAI,eAAe,UAAU;AACzB,uBAAW,MAAM;AACb,uBAAS,QAAQ,aAAa,IAAI;AAGlC,yBAAW,MAAM;AACb,oBAAI,KAAK,oBAAoB;AACzB,wBAAM,mBAAmB,KAAK,gBAAgB,UAAU,KAAK;AAC7D,sBAAI,CAAC,oBACD,iBAAiB,SAAS,sCAAQ,KAClC,qBAAqB,IAAI;AACzB,yBAAK,eAAe;AACpB,yBAAK,iBAAiB,WAAW;AAAA,kBACrC;AAAA,gBACJ;AAAA,cACJ,GAAG,GAAG;AAAA,YACV,GAAG,GAAG;AAAA,UACV;AAAA,QACJ;AAAA,QACA,QAAQ,MAAM;AACV,qBAAW,MAAM,KAAK,eAAe,GAAG,GAAG;AAAA,QAC/C;AAAA,QACA,eAAe,MAAM;AACjB,qBAAW,MAAM,KAAK,eAAe,GAAG,EAAE;AAAA,QAC9C;AAAA,QACA,cAAc,MAAM;AAChB,qBAAW,MAAM,KAAK,eAAe,GAAG,EAAE;AAAA,QAC9C;AAAA,MACJ;AAEA,WAAK,aAAa,YAAU,KAAK,gBAAgB,eAAe;AAAA,IAEpE,SAASD,QAAO;AACZ,WAAK,UAAU,0EAAc;AAAA,IACjC;AAAA,EACJ;AAAA,EAEA,eAAe,aAAa,GAAG;AAE3B,QAAI,kBAAkB,KAAK,gBAAgB,cAAc,qBAAqB;AAC9E,QAAI,CAAC,iBAAiB;AAClB,wBAAkB,SAAS,cAAc,qBAAqB;AAAA,IAClE;AAEA,QAAI,CAAC,iBAAiB;AAClB,UAAI,aAAa,GAAG;AAChB,mBAAW,MAAM,KAAK,eAAe,aAAa,CAAC,GAAG,GAAG;AAAA,MAC7D;AACA;AAAA,IACJ;AAGA,oBAAgB,UAAU,IAAI,QAAQ;AAGtC,oBAAgB,MAAM,WAAW;AACjC,oBAAgB,MAAM,MAAM;AAC5B,oBAAgB,MAAM,OAAO;AAC7B,oBAAgB,MAAM,UAAU;AAChC,oBAAgB,MAAM,QAAQ;AAC9B,oBAAgB,MAAM,WAAW;AACjC,oBAAgB,MAAM,kBAAkB;AAGxC,SAAK,qBAAqB,eAAe;AAGzC,UAAM,eAAe,gBAAgB,cAAc,eAAe;AAClE,QAAI,cAAc;AACd,mBAAa,MAAM,QAAQ;AAC3B,mBAAa,MAAM,WAAW;AAC9B,mBAAa,MAAM,WAAW;AAAA,IAClC;AAEA,UAAM,gBAAgB,gBAAgB,cAAc,iBAAiB;AACrE,QAAI,eAAe;AACf,oBAAc,MAAM,QAAQ;AAAA,IAChC;AAAA,EACJ;AAAA,EAEA,qBAAqB,iBAAiB;AAClC,UAAM,cAAc,OAAO;AAC3B,QAAI,OAAO,QAAQ;AAGnB,QAAI,eAAe,KAAK;AACpB,cAAQ;AACR,eAAS;AACT,iBAAW;AAAA,IACf,WAAW,eAAe,KAAK;AAC3B,cAAQ;AACR,eAAS;AACT,iBAAW;AAAA,IACf,WAAW,eAAe,MAAM;AAC5B,cAAQ;AACR,eAAS;AACT,iBAAW;AAAA,IACf,WAAW,eAAe,MAAM;AAC5B,cAAQ;AACR,eAAS;AACT,iBAAW;AAAA,IACf,OAAO;AACH,cAAQ;AACR,eAAS;AACT,iBAAW;AAAA,IACf;AAGA,oBAAgB,MAAM,YAAY,SAAS,KAAK;AAChD,oBAAgB,MAAM,kBAAkB,SAAS,KAAK;AACtD,oBAAgB,MAAM,eAAe,SAAS,KAAK;AACnD,oBAAgB,MAAM,cAAc,SAAS,KAAK;AAClD,oBAAgB,MAAM,SAAS;AAC/B,oBAAgB,MAAM,WAAW;AAAA,EACrC;AAAA,EAEA,0BAA0B;AAEtB,QAAI,KAAK,4BAA4B;AACjC,WAAK,wBAAwB,UAAU,IAAI,QAAQ;AAAA,IACvD;AAAA,EACJ;AAAA,EAEA,uBAAuB,iBAAiB,WAAW;AAE/C,SAAK,eAAe;AACpB,SAAK,eAAe;AACpB,SAAK,mBAAmB;AAGxB,UAAM,uBAAuB,SAAS,eAAe,kBAAkB;AACvE,QAAI,sBAAsB;AACtB,2BAAqB,QAAQ;AAAA,IACjC;AAEA,QAAI,KAAK,eAAe;AACpB,WAAK,WAAW,QAAQ;AAAA,IAC5B;AAGA,UAAM,MAAM,IAAI,IAAI,OAAO,QAAQ;AACnC,QAAI,aAAa,OAAO,aAAa;AACrC,WAAO,QAAQ,UAAU,CAAC,GAAG,IAAI,IAAI,SAAS,CAAC;AAG/C,QAAI,KAAK,YAAY;AACjB,WAAK,WAAW,QAAQ;AACxB,WAAK,aAAa;AAAA,IACtB;AAGA,QAAI,KAAK,mBAAmB;AACxB,WAAK,eAAe,YAAY;AAAA,IACpC;AAGA,QAAI,KAAK,8BAA8B;AACnC,WAAK,0BAA0B,UAAU,IAAI,QAAQ;AACrD,WAAK,0BAA0B,MAAM,UAAU;AAAA,IACnD;AAGA,QAAI,KAAK,oBAAoB;AACzB,WAAK,gBAAgB,YAAY;AAAA,IACrC;AAGA,QAAI,KAAK,4BAA4B;AACjC,YAAM,gBAAgB,KAAK,mBAAmB,eAAe;AAC7D,WAAK,wBAAwB,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8DAQI,aAAa,iCAAuB,SAAS;AAAA;AAAA;AAAA;AAI1F,WAAK,wBAAwB,UAAU,OAAO,QAAQ;AAAA,IAC1D;AAGA,QAAI,KAAK,mBAAmB;AACxB,WAAK,eAAe,WAAW;AAC/B,WAAK,eAAe,UAAU,OAAO,eAAe,mBAAmB;AACvE,WAAK,eAAe,UAAU,IAAI,eAAe,mBAAmB;AAAA,IACxE;AAAA,EACJ;AAAA,EAEA,sBAAsB,WAAW;AAE7B,SAAK,eAAe;AACpB,SAAK,eAAe;AACpB,SAAK,mBAAmB;AAGxB,UAAM,uBAAuB,SAAS,eAAe,kBAAkB;AACvE,QAAI,sBAAsB;AACtB,2BAAqB,QAAQ;AAAA,IACjC;AAEA,QAAI,KAAK,eAAe;AACpB,WAAK,WAAW,QAAQ;AAAA,IAC5B;AAGA,UAAM,MAAM,IAAI,IAAI,OAAO,QAAQ;AACnC,QAAI,aAAa,OAAO,aAAa;AACrC,WAAO,QAAQ,UAAU,CAAC,GAAG,IAAI,IAAI,SAAS,CAAC;AAG/C,QAAI,KAAK,YAAY;AACjB,WAAK,WAAW,QAAQ;AACxB,WAAK,aAAa;AAAA,IACtB;AAGA,QAAI,KAAK,mBAAmB;AACxB,WAAK,eAAe,YAAY;AAAA,IACpC;AAGA,QAAI,KAAK,8BAA8B;AACnC,WAAK,0BAA0B,UAAU,IAAI,QAAQ;AACrD,WAAK,0BAA0B,MAAM,UAAU;AAAA,IACnD;AAGA,QAAI,KAAK,oBAAoB;AACzB,WAAK,gBAAgB,YAAY;AAAA,IACrC;AAGA,QAAI,KAAK,4BAA4B;AACjC,WAAK,wBAAwB,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kGAQU,SAAS;AAAA;AAAA;AAAA;AAI5D,WAAK,wBAAwB,UAAU,OAAO,QAAQ;AAAA,IAC1D;AAGA,QAAI,KAAK,mBAAmB;AACxB,WAAK,eAAe,WAAW;AAC/B,WAAK,eAAe,UAAU,OAAO,eAAe,mBAAmB;AACvE,WAAK,eAAe,UAAU,IAAI,eAAe,mBAAmB;AAAA,IACxE;AAAA,EACJ;AAAA,EAEA,yBAAyB;AAErB,QAAI,KAAK,8BAA8B;AACnC,WAAK,0BAA0B,UAAU,OAAO,QAAQ;AACxD,WAAK,0BAA0B,MAAM,UAAU;AAAA,IACnD;AAGA,QAAI,KAAK,4BAA4B;AACjC,WAAK,wBAAwB,UAAU,IAAI,QAAQ;AAAA,IACvD;AAAA,EACJ;AAAA,EAEA,mBAAmB,YAAY;AAC3B,QAAI;AACA,YAAM,OAAO,IAAI,KAAK,UAAU;AAChC,YAAM,OAAO,KAAK,YAAY;AAC9B,YAAM,QAAQ,KAAK,SAAS,IAAI;AAChC,YAAM,MAAM,KAAK,QAAQ;AACzB,aAAO,GAAG,IAAI,SAAI,KAAK,SAAI,GAAG;AAAA,IAClC,SAASA,QAAO;AACZ,aAAO;AAAA,IACX;AAAA,EACJ;AAAA,EAEA,MAAM,iBAAiB,MAAM;AACzB,QAAI,CAAC,KAAK,oBAAoB;AAC1B;AAAA,IACJ;AAGA,QAAI,CAAC,QAAQ,SAAS,MAAM,SAAS,eAAe,SAAS,QAAQ;AACjE,WAAK,UAAU,sCAAQ;AACvB;AAAA,IACJ;AAEA,QAAI;AACA,YAAM,YAAY,KAAK,oBAAoB;AAC3C,YAAM,SAAS,KAAK,sBAAsB,SAAS,KAAK,iBAAiB,KAAK,KAAK,IAAI,KAAK,IAAI,GAAG,SAAS;AAC5G,YAAM,WAAW,KAAK,sBAAsB,SAAS,KAAK,iBAAiB,KAAK,KAAK,IAAI;AAGzF,UAAI,gBAAgB;AACpB,UAAI,gBAAgB,MAAM;AACtB,wBAAgB,KAAK,YAAY,EAAE,MAAM,GAAG,EAAE,CAAC;AAAA,MACnD,WAAW,OAAO,SAAS,YAAY,KAAK,SAAS,GAAG;AAEpD,cAAM,YAAY;AAClB,YAAI,CAAC,UAAU,KAAK,IAAI,GAAG;AACvB,eAAK,UAAU,sFAAgB;AAC/B;AAAA,QACJ;AACA,wBAAgB;AAAA,MACpB,OAAO;AACH,aAAK,UAAU,sFAAgB;AAC/B;AAAA,MACJ;AAEA,YAAM,MAAM,gBAAgB,KAAK,mBAAmB,sCAAsC,aAAa,gBAAgB,MAAM,gBAAgB,QAAQ;AAErJ,YAAM,WAAW,MAAM,MAAM,KAAK;AAAA,QAC9B,SAAS;AAAA,UACL,QAAQ;AAAA,UACR,gBAAgB;AAAA,QACpB;AAAA,MACJ,CAAC;AACD,UAAI,CAAC,SAAS,IAAI;AACd,cAAM,YAAY,MAAM,SAAS,KAAK,EAAE,MAAM,OAAO,CAAC,EAAE;AACxD,cAAM,IAAI,MAAM,UAAU,SAAS,uBAAuB,SAAS,MAAM,EAAE;AAAA,MAC/E;AAEA,YAAM,OAAO,MAAM,SAAS,KAAK;AAEjC,WAAK,gBAAgB,KAAK,SAAS,CAAC,CAAC;AACrC,WAAK,gBAAgB;AAAA,IACzB,SAASA,QAAO;AACZ,WAAK,UAAUA,OAAM,WAAW,wDAAW;AAAA,IAC/C;AAAA,EACJ;AAAA,EAEA,gBAAgB,WAAW;AACvB,SAAK,gBAAgB,YAAY;AAEjC,QAAI,UAAU,WAAW,GAAG;AACxB,WAAK,gBAAgB,YAAY;AACjC;AAAA,IACJ;AAGA,UAAM,eAAe,KAAK,uBAAuB,SAAS;AAE1D,WAAO,QAAQ,YAAY,EAAE,QAAQ,CAAC,CAAC,YAAY,KAAK,MAAM;AAC1D,YAAM,YAAY,SAAS,cAAc,KAAK;AAC9C,gBAAU,YAAY;AAEtB,YAAM,cAAc,SAAS,cAAc,IAAI;AAC/C,kBAAY,YAAY;AACxB,kBAAY,YAAY;AAAA;AAAA,kBAElB,UAAU;AAAA;AAEhB,gBAAU,YAAY,WAAW;AAEjC,YAAM,YAAY,SAAS,cAAc,KAAK;AAC9C,gBAAU,YAAY;AAEtB,YAAM,QAAQ,CAAC,SAAS;AACpB,cAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,eAAO,OAAO;AACd,eAAO,YAAY;AAAA;AAAA;AAAA;AAAA,sBAIb,KAAK,YAAY,KAAK,+BAA+B;AAAA;AAE3D,eAAO,YAAY;AAAA,+CACY,KAAK,IAAI;AAAA;AAAA,0BAE9B,KAAK,YAAY,uBAAQ,oBAAK;AAAA;AAAA;AAIxC,YAAI,KAAK,WAAW;AAChB,iBAAO,iBAAiB,SAAS,MAAM,KAAK,eAAe,MAAM,MAAM,CAAC;AAAA,QAC5E,OAAO;AACH,iBAAO,WAAW;AAAA,QACtB;AAEA,kBAAU,YAAY,MAAM;AAAA,MAChC,CAAC;AAED,gBAAU,YAAY,SAAS;AAC/B,WAAK,gBAAgB,YAAY,SAAS;AAAA,IAC9C,CAAC;AAAA,EACL;AAAA,EAEA,uBAAuB,WAAW;AAC9B,WAAO,UAAU,OAAO,CAAC,QAAQ,SAAS;AACtC,YAAM,SAAS,KAAK,eAAe;AACnC,UAAI,CAAC,OAAO,MAAM,GAAG;AACjB,eAAO,MAAM,IAAI,CAAC;AAAA,MACtB;AACA,aAAO,MAAM,EAAE,KAAK,IAAI;AACxB,aAAO;AAAA,IACX,GAAG,CAAC,CAAC;AAAA,EACT;AAAA,EAEA,iBAAiB,iBAAiB;AAC9B,QAAI,CAAC,KAAK,oBAAqB;AAE/B,QAAI,gBAAgB,WAAW,GAAG;AAC9B,WAAK,iBAAiB,YAAY;AAClC;AAAA,IACJ;AAEA,UAAM,cAAc,gBACf,IAAI,CAAC,WAAW,GAAG,OAAO,IAAI,KAAK,OAAO,UAAU,IAAI,OAAO,QAAQ,EAAE,EACzE,KAAK,QAAG;AAEb,SAAK,iBAAiB,YAAY,0DAAiC,WAAW;AAAA,EAClF;AAAA,EAEA,eAAe,MAAM,eAAe;AAEhC,SAAK,gBAAgB,iBAAiB,QAAQ,EAAE,QAAQ,CAAC,QAAQ;AAC7D,UAAI,UAAU,OAAO,eAAe,iBAAiB;AACrD,UAAI,UAAU,IAAI,eAAe,iBAAiB;AAAA,IACtD,CAAC;AAGD,kBAAc,UAAU,OAAO,eAAe,iBAAiB;AAC/D,kBAAc,UAAU,IAAI,eAAe,iBAAiB;AAG5D,SAAK,eAAe,KAAK;AACzB,SAAK,mBAAmB,KAAK;AAG7B,UAAM,YAAY,SAAS,eAAe,kBAAkB;AAC5D,UAAM,cAAc,SAAS,eAAe,qBAAqB;AAEjE,QAAI,UAAW,WAAU,QAAQ,KAAK;AACtC,QAAI,YAAa,aAAY,QAAQ,KAAK;AAE1C,SAAK,gBAAgB;AAAA,EACzB;AAAA,EAEA,kBAAkB;AACd,QAAI,CAAC,KAAK,kBAAmB;AAE7B,UAAM,UAAU,KAAK;AACrB,UAAM,UAAU,KAAK;AAErB,QAAI,WAAW,SAAS;AACpB,WAAK,eAAe,WAAW;AAC/B,WAAK,eAAe,UAAU,OAAO,eAAe,mBAAmB;AACvE,WAAK,eAAe,UAAU,IAAI,eAAe,mBAAmB;AAAA,IACxE,OAAO;AACH,WAAK,eAAe,WAAW;AAC/B,WAAK,eAAe,UAAU,OAAO,eAAe,mBAAmB;AACvE,WAAK,eAAe,UAAU,IAAI,eAAe,mBAAmB;AAAA,IACxE;AAAA,EACJ;AAAA,EAEA,uBAAuB,SAAS;AAC5B,QAAI,KAAK,oBAAoB;AACzB,WAAK,gBAAgB,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CAQC,OAAO;AAAA;AAAA;AAAA,IAG7C;AAAA,EACJ;AAAA,EAEA,UAAU,SAAS;AACf,QAAI,KAAK,oBAAoB;AACzB,WAAK,gBAAgB,YAAY;AAAA;AAAA,iDAEI,OAAO;AAAA;AAAA;AAAA,IAGhD;AAAA,EACJ;AAAA,EAEA,uBAAuB,iBAAiB,kBAAkB,cAAc,MAAM,iBAAiB,CAAC,GAAG;AAC/F,UAAM,gBAAgB,CAAC;AAGvB,QAAI,CAAC,aAAa;AACd,YAAM,QAAQ,oBAAI,KAAK;AACvB,eAAS,IAAI,GAAG,KAAK,KAAK,oBAAoB,KAAK;AAC/C,cAAM,OAAO,IAAI,KAAK,KAAK;AAC3B,aAAK,QAAQ,MAAM,QAAQ,IAAI,CAAC;AAChC,sBAAc,KAAK,IAAI;AAAA,MAC3B;AACA,aAAO;AAAA,IACX;AAGA,QAAI,mBAAmB,gBAAgB,SAAS,GAAG;AAC/C,oBAAc,KAAK,CAAC,SAAS;AACzB,cAAM,YAAY,KAAK,OAAO;AAC9B,eAAO,gBAAgB,SAAS,SAAS;AAAA,MAC7C,CAAC;AAAA,IACL;AAGA,QAAI,oBAAoB,iBAAiB,SAAS,GAAG;AACjD,uBAAiB,QAAQ,CAAC,eAAe;AACrC,cAAM,cAAc,IAAI,KAAK,UAAU;AAEvC,sBAAc,KAAK,CAAC,SAAS;AACzB,iBACI,KAAK,YAAY,MAAM,YAAY,YAAY,KAC/C,KAAK,SAAS,MAAM,YAAY,SAAS,KACzC,KAAK,QAAQ,MAAM,YAAY,QAAQ;AAAA,QAE/C,CAAC;AAAA,MACL,CAAC;AAAA,IACL;AAGA,QAAI,kBAAkB,eAAe,SAAS,GAAG;AAE7C,YAAM,mBAAmB,IAAI,IAAI,eAAe,IAAI,aAAW;AAC3D,cAAM,OAAO,IAAI,KAAK,OAAO;AAC7B,eAAO,GAAG,KAAK,YAAY,CAAC,IAAI,OAAO,KAAK,SAAS,IAAI,CAAC,EAAE,SAAS,GAAG,GAAG,CAAC,IAAI,OAAO,KAAK,QAAQ,CAAC,EAAE,SAAS,GAAG,GAAG,CAAC;AAAA,MAC3H,CAAC,CAAC;AAGF,oBAAc,KAAK,CAAC,SAAS;AACzB,cAAM,UAAU,GAAG,KAAK,YAAY,CAAC,IAAI,OAAO,KAAK,SAAS,IAAI,CAAC,EAAE,SAAS,GAAG,GAAG,CAAC,IAAI,OAAO,KAAK,QAAQ,CAAC,EAAE,SAAS,GAAG,GAAG,CAAC;AAChI,eAAO,CAAC,iBAAiB,IAAI,OAAO;AAAA,MACxC,CAAC;AAAA,IACL;AAEA,WAAO;AAAA,EACX;AAAA,EAEA,kBAAkB,SAAS;AACvB,QAAI,CAAC,WAAW,YAAY,IAAI;AAC5B;AAAA,IACJ;AACA,UAAM,MAAM,IAAI,IAAI,OAAO,QAAQ;AACnC,QAAI,aAAa,OAAO,UAAU;AAClC,QAAI,aAAa,IAAI,eAAe,OAAO;AAC3C,WAAO,QAAQ,UAAU,CAAC,GAAG,IAAI,IAAI,SAAS,CAAC;AAAA,EACnD;AAAA,EAEA,wBAAwB;AAEpB,SAAK,eAAe;AACpB,SAAK,mBAAmB;AAGxB,QAAI,KAAK,oBAAoB;AACzB,WAAK,gBAAgB,iBAAiB,QAAQ,EAAE,QAAQ,CAAC,QAAQ;AAC7D,YAAI,UAAU,OAAO,eAAe,iBAAiB;AACrD,YAAI,UAAU,IAAI,eAAe,iBAAiB;AAAA,MACtD,CAAC;AAAA,IACL;AAGA,UAAM,YAAY,SAAS,eAAe,kBAAkB;AAC5D,UAAM,cAAc,SAAS,eAAe,qBAAqB;AAEjE,QAAI,UAAW,WAAU,QAAQ;AACjC,QAAI,YAAa,aAAY,QAAQ;AAGrC,SAAK,gBAAgB;AAAA,EACzB;AAAA,EAEA,MAAM,wBAAwB;AAC1B,QAAI;AAEA,YAAM,YAAY,KAAK,oBAAoB;AAC3C,YAAM,SAAS,KAAK,sBAAsB,SAAS,KAAK,iBAAiB,KAAK,KAAK,IAAI;AACvF,YAAM,WAAW,KAAK,sBAAsB,SAAS,KAAK,iBAAiB,KAAK,KAAK,IAAI;AAEzF,YAAM,oBAAoB,gBAAgB,KAAK,mBAAmB,+BAA+B,SAAS,WAAW,MAAM,aAAa,QAAQ;AAEhJ,YAAM,yBAAyB,MAAM,MAAM,mBAAmB;AAAA,QAC1D,SAAS;AAAA,UACL,QAAQ;AAAA,UACR,gBAAgB;AAAA,QACpB;AAAA,MACJ,CAAC;AAED,UAAI,CAAC,uBAAuB,IAAI;AAC5B,cAAM,IAAI,MAAM,uBAAuB,uBAAuB,MAAM,EAAE;AAAA,MAC1E;AAEA,YAAM,qBAAqB,MAAM,uBAAuB,KAAK;AAG7D,UACI,mBAAmB,iBAClB,CAAC,mBAAmB,mBAAmB,mBAAmB,gBAAgB,WAAW,IACxF;AAEE,YAAI,KAAK,YAAY;AACjB,eAAK,WAAW,QAAQ;AACxB,eAAK,aAAa;AAAA,QACtB;AAEA,cAAM,qBAAqB,mBAAmB,wBAAwB;AACtE,cAAM,kBAAkB,mBAAmB,qBAAqB,IAAI,KAAK,KAAK,IAAI,IAAI,qBAAqB,KAAK,KAAK,KAAK,GAAI,EAAE,YAAY,EAAE,MAAM,GAAG,EAAE,CAAC;AAC1J,aAAK,uBAAuB,iBAAiB,SAAS;AACtD;AAAA,MACJ;AAGA,UAAI,CAAC,mBAAmB,cAAc;AAElC,YAAI,KAAK,YAAY;AACjB,eAAK,WAAW,QAAQ;AACxB,eAAK,aAAa;AAAA,QACtB;AACA,aAAK,sBAAsB,SAAS;AACpC;AAAA,MACJ;AAGA,WAAK,uBAAuB;AAG5B,YAAM,SAAS,gBAAgB,KAAK,mBAAmB,8BAA8B,SAAS;AAE9F,YAAM,WAAW,MAAM,MAAM,QAAQ;AAAA,QACjC,SAAS;AAAA,UACL,QAAQ;AAAA,UACR,gBAAgB;AAAA,QACpB;AAAA,MACJ,CAAC;AAED,UAAI,CAAC,SAAS,IAAI;AACd,cAAM,IAAI,MAAM,uBAAuB,SAAS,MAAM,EAAE;AAAA,MAC5D;AAEA,YAAM,OAAO,MAAM,SAAS,KAAK;AAGjC,YAAM,gBAAgB,KAAK;AAAA,QACvB,KAAK,mBAAmB,CAAC;AAAA,QACzB,KAAK,oBAAoB,CAAC;AAAA,QAC1B,KAAK;AAAA,QACL,mBAAmB,mBAAmB,CAAC;AAAA,MAC3C;AAGA,UAAI,KAAK,YAAY;AACjB,aAAK,WAAW,IAAI,WAAW,aAAa;AAC5C,aAAK,WAAW,OAAO;AAEvB,mBAAW,MAAM,KAAK,eAAe,GAAG,EAAE;AAAA,MAC9C,OAAO;AAEH,aAAK,eAAe;AACpB;AAAA,MACJ;AAGA,UAAI,KAAK,gBAAgB,CAAC,KAAK,cAAc;AACzC,aAAK,eAAe;AACpB,YAAI,KAAK,eAAe;AACpB,eAAK,WAAW,QAAQ;AAAA,QAC5B;AAGA,cAAM,uBAAuB,SAAS,eAAe,kBAAkB;AACvE,YAAI,sBAAsB;AACtB,+BAAqB,QAAQ;AAAA,QACjC;AAGA,YAAI,KAAK,oBAAoB;AACzB,eAAK,gBAAgB,YAAY;AAAA,QACrC;AAAA,MACJ;AAAA,IACJ,SAASA,QAAO;AACZ,WAAK,UAAU,gFAAe;AAAA,IAClC;AAAA,EACJ;AACJ;;;AC//BA,IAAO,sCAAP,cAA6B,WAAW;AAAA,EACpC,OAAO,UAAU;AAAA,IACb;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACJ;AAAA,EACA,OAAO,SAAS;AAAA,IACZ,cAAc;AAAA,IACd,sBAAsB;AAAA,EAC1B;AAAA,EAEA,UAAU;AACN,YAAQ,IAAI,iDAA0C;AACtD,SAAK,iBAAiB;AAAA,EAC1B;AAAA;AAAA,EAGA,mBAAmB;AACf,QAAI,CAAC,KAAK,2BAA2B,CAAC,KAAK,wBAAwB,CAAC,KAAK,wBAAwB;AAC7F;AAAA,IACJ;AAEA,UAAM,YAAY,SAAS,KAAK,qBAAqB,KAAK,KAAK;AAC/D,UAAM,gBAAgB,SAAS,KAAK,kBAAkB,KAAK,KAAK;AAChE,UAAM,kBAAkB,SAAS,KAAK,oBAAoB,KAAK,KAAK;AACpE,UAAM,eAAe,gBAAgB;AAGrC,QAAI,cAAc,cAAc;AAE5B,UAAI,YAAY,KAAK,IAAI,YAAY,iBAAiB,CAAC;AACvD,UAAI,cAAc;AAGlB,UAAI,YAAY,cAAc,WAAW;AACrC,sBAAc,KAAK,IAAI,YAAY,WAAW,CAAC;AAAA,MACnD;AAEA,WAAK,kBAAkB,QAAQ;AAC/B,WAAK,oBAAoB,QAAQ;AAEjC,cAAQ,IAAI,mDAAc,SAAS,kBAAQ,SAAS,kBAAQ,WAAW,EAAE;AAAA,IAC7E;AAAA,EACJ;AAAA;AAAA,EAGA,MAAM,oBAAoB;AACtB,QAAI,CAAC,KAAK,0BAA0B,CAAC,KAAK,yBAAyB;AAC/D;AAAA,IACJ;AAEA,UAAM,WAAW,KAAK,oBAAoB;AAC1C,UAAM,YAAY,KAAK,qBAAqB;AAE5C,QAAI,CAAC,YAAY,CAAC,WAAW;AACzB;AAAA,IACJ;AAEA,YAAQ,IAAI,6CAAa,QAAQ,KAAK,SAAS,QAAG;AAElD,QAAI;AAAA,IAeJ,SAASE,QAAO;AACZ,cAAQ,MAAM,iEAAeA,MAAK;AAAA,IACtC;AAAA,EACJ;AAAA;AAAA,EAGA,0BAA0B,QAAQ;AAC9B,UAAM,oBAAoB,SAAS,eAAe,oBAAoB;AACtE,UAAM,sBAAsB,SAAS,eAAe,sBAAsB;AAE1E,QAAI,qBAAqB,qBAAqB;AAC1C,wBAAkB,UAAU,OAAO,QAAQ;AAE3C,UAAI,OAAO,WAAW;AAClB,4BAAoB,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gEAOgB,OAAO,OAAO;AAAA;AAAA;AAAA;AAAA,MAIlE,OAAO;AACH,4BAAoB,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iEAOiB,OAAO,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA,MAKnE;AAAA,IACJ;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASA,gBAAgB;AACZ,QAAI,CAAC,KAAK,oBAAqB,QAAO;AAEtC,UAAM,QAAQ,KAAK,iBAAiB;AACpC,UAAM,aAAa;AACnB,UAAM,UAAU,WAAW,KAAK,KAAK;AAErC,QAAI,CAAC,SAAS;AACV,WAAK,iBAAiB,cAAc;AACpC,WAAK,iBAAiB,UAAU,OAAO,QAAQ;AAC/C,WAAK,iBAAiB,UAAU,IAAI,gBAAgB;AAAA,IACxD,OAAO;AACH,WAAK,iBAAiB,cAAc;AACpC,WAAK,iBAAiB,UAAU,IAAI,QAAQ;AAC5C,WAAK,iBAAiB,UAAU,OAAO,gBAAgB;AAAA,IAC3D;AACA,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,aAAa,OAAO;AAChB,YAAQ,IAAI,wBAAwB;AAkBpC,UAAM,eAAe,KAAK,cAAc;AACxC,QAAI,CAAC,cAAc;AACf,YAAM,eAAe;AACrB,aAAO;AAAA,IACX;AAEA,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,gBAAgB;AACZ,QAAI,KAAK,uBAAuB;AAC5B,WAAK,mBAAmB,WAAW;AACnC,WAAK,mBAAmB,cAAc;AAAA,IAC1C;AAAA,EACJ;AAAA;AAAA,EAGA,eAAe;AACX,QAAI,KAAK,uBAAuB;AAC5B,WAAK,mBAAmB,WAAW;AACnC,WAAK,mBAAmB,cAAc,KAAK,mBAAmB,QAAQ,gBAAgB;AAAA,IAC1F;AAAA,EACJ;AACJ;;;AC/LA,IAAO,wCAAP,cAA6B,WAAW;AAAA,EACpC,OAAO,UAAU;AAAA,IACb;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACJ;AAAA,EACA,OAAO,SAAS,EAAE,SAAS,QAAQ;AAAA,EAEnC,UAAU;AACN,YAAQ,IAAI,kDAA2C;AACvD,SAAK,SAAS;AACd,SAAK,kBAAkB;AACvB,SAAK,qBAAqB;AAC1B,SAAK,wBAAwB;AAAA,EACjC;AAAA;AAAA,EAGA,OAAO,OAAO;AACV,UAAM,eAAe;AACrB,YAAQ,IAAI,sDAAY;AAGxB,SAAK,eAAe,UAAU,CAAC,KAAK,eAAe;AACnD,YAAQ,IAAI,iDAAsB,KAAK,eAAe,OAAO;AAG7D,SAAK,SAAS;AAGd,SAAK,WAAW;AAAA,EACpB;AAAA;AAAA,EAGA,kBAAkB;AACd,YAAQ,IAAI,oDAAyB;AACrC,SAAK,SAAS;AACd,SAAK,WAAW;AAAA,EACpB;AAAA;AAAA,EAGA,WAAW;AACP,UAAM,UAAU,KAAK,eAAe;AACpC,YAAQ,IAAI,+CAAe,OAAO;AAElC,QAAI,SAAS;AACT,WAAK,kBAAkB;AAAA,IAC3B,OAAO;AACH,WAAK,mBAAmB;AAAA,IAC5B;AAAA,EACJ;AAAA;AAAA,EAGA,oBAAoB;AAChB,YAAQ,IAAI,sDAAY;AAGxB,QAAI,KAAK,mBAAmB;AACxB,WAAK,eAAe,UAAU,OAAO,cAAc,qBAAqB;AAAA,IAC5E;AAGA,QAAI,KAAK,iBAAiB;AACtB,WAAK,aAAa,UAAU,OAAO,aAAa;AAChD,WAAK,aAAa,UAAU,IAAI,aAAa;AAAA,IACjD;AAGA,QAAI,KAAK,uBAAuB;AAC5B,WAAK,mBAAmB,UAAU,OAAO,eAAe;AACxD,WAAK,mBAAmB,UAAU,IAAI,eAAe;AAAA,IACzD;AAGA,QAAI,KAAK,iBAAiB;AACtB,WAAK,aAAa,cAAc;AAAA,IACpC;AAAA,EACJ;AAAA;AAAA,EAGA,qBAAqB;AACjB,YAAQ,IAAI,sDAAY;AAGxB,QAAI,KAAK,mBAAmB;AACxB,WAAK,eAAe,UAAU,IAAI,cAAc,qBAAqB;AAAA,IACzE;AAGA,QAAI,KAAK,iBAAiB;AACtB,WAAK,aAAa,UAAU,OAAO,aAAa;AAChD,WAAK,aAAa,UAAU,IAAI,aAAa;AAAA,IACjD;AAGA,QAAI,KAAK,uBAAuB;AAC5B,WAAK,mBAAmB,UAAU,OAAO,eAAe;AACxD,WAAK,mBAAmB,UAAU,IAAI,eAAe;AAAA,IACzD;AAGA,QAAI,KAAK,iBAAiB;AACtB,WAAK,aAAa,cAAc;AAAA,IACpC;AAAA,EACJ;AAAA;AAAA,EAGA,aAAa;AACT,UAAM,OAAO,SAAS,eAAe,yBAAyB;AAC9D,QAAI,MAAM;AACN,cAAQ,IAAI,oCAAS;AACrB,WAAK,cAAc;AAAA,IACvB,OAAO;AACH,cAAQ,MAAM,0CAAU;AAAA,IAC5B;AAAA,EACJ;AAAA;AAAA,EAGA,cAAc,OAAO;AACjB,UAAM,UAAU,MAAM,OAAO;AAC7B,YAAQ,IAAI,yDAAe,OAAO;AAElC,QAAI,KAAK,wBAAwB;AAC7B,UAAI,SAAS;AACT,aAAK,oBAAoB,UAAU,OAAO,QAAQ;AAAA,MACtD,OAAO;AACH,aAAK,oBAAoB,UAAU,IAAI,QAAQ;AAAA,MACnD;AAAA,IACJ;AAAA,EACJ;AAAA;AAAA,EAGA,oBAAoB;AAChB,QAAI,KAAK,4BAA4B,KAAK,wBAAwB;AAC9D,YAAM,YAAY,KAAK,sBAAsB;AAC7C,cAAQ,IAAI,qEAAiB,SAAS;AAEtC,UAAI,CAAC,WAAW;AACZ,aAAK,oBAAoB,UAAU,IAAI,QAAQ;AAAA,MACnD,OAAO;AACH,aAAK,oBAAoB,UAAU,OAAO,QAAQ;AAAA,MACtD;AAAA,IACJ;AAAA,EACJ;AAAA;AAAA,EAGA,oBAAoB,OAAO;AACvB,UAAM,YAAY,MAAM,OAAO;AAC/B,YAAQ,IAAI,qEAAiB,SAAS;AAEtC,QAAI,KAAK,8BAA8B;AACnC,UAAI,WAAW;AACX,aAAK,0BAA0B,UAAU,IAAI,cAAc,qBAAqB;AAAA,MACpF,OAAO;AACH,aAAK,0BAA0B,UAAU,OAAO,cAAc,qBAAqB;AAAA,MACvF;AAAA,IACJ;AAEA,SAAK,wBAAwB;AAAA,EACjC;AAAA;AAAA,EAGA,uBAAuB;AACnB,QAAI,KAAK,8BAA8B,KAAK,8BAA8B;AACtE,YAAM,YAAY,KAAK,wBAAwB;AAC/C,cAAQ,IAAI,qEAAiB,YAAY,uBAAQ,oBAAK;AAEtD,UAAI,WAAW;AACX,aAAK,0BAA0B,UAAU,IAAI,cAAc,qBAAqB;AAAA,MACpF,OAAO;AACH,aAAK,0BAA0B,UAAU,OAAO,cAAc,qBAAqB;AAAA,MACvF;AAAA,IACJ;AAAA,EACJ;AAAA;AAAA,EAGA,0BAA0B;AACtB,QAAI,CAAC,KAAK,4BAA4B,CAAC,KAAK,yBAAyB;AACjE;AAAA,IACJ;AAEA,QAAI,KAAK,8BAA8B,KAAK,wBAAwB,SAAS;AACzE,WAAK,sBAAsB,YAAY;AACvC,WAAK,qBAAqB,YACtB;AACJ;AAAA,IACJ;AAEA,UAAM,gBAAgB,KAAK,+BACrB,SAAS,KAAK,0BAA0B,KAAK,KAAK,MAClD;AAEN,UAAM,eAAe;AACrB,UAAM,QAAQ,KAAK,MAAM,eAAe,EAAE;AAC1C,UAAM,UAAU,eAAe;AAE/B,QAAI;AACJ,QAAI,QAAQ,KAAK,UAAU,GAAG;AAC1B,qBAAe,GAAG,KAAK,eAAK,OAAO;AAAA,IACvC,WAAW,QAAQ,GAAG;AAClB,qBAAe,GAAG,KAAK;AAAA,IAC3B,OAAO;AACH,qBAAe,GAAG,OAAO;AAAA,IAC7B;AAGA,UAAM,eAAe,oBAAI,KAAK;AAC9B,iBAAa,SAAS,IAAI,GAAG,GAAG,CAAC;AACjC,UAAM,aAAa,IAAI,KAAK,aAAa,QAAQ,IAAI,eAAe,GAAK;AACzE,UAAM,gBAAgB,WAAW,mBAAmB,SAAS;AAAA,MACzD,MAAM;AAAA,MACN,QAAQ;AAAA,MACR,QAAQ;AAAA,IACZ,CAAC;AAED,SAAK,sBAAsB,YAAY,yEAAgD,YAAY;AACnG,SAAK,qBAAqB,YAAY,kGAA0D,aAAa;AAAA,EACjH;AACJ;;;AClOA,IAAO,qCAAP,cAA6B,WAAW;AAAA,EACpC,OAAO,UAAU,CAAC,cAAc,aAAa,kBAAkB,eAAe;AAAA,EAE9E,UAAU;AACN,YAAQ,IAAI,gDAAyC;AAAA,EACzD;AAAA,EAEA,aAAa;AACT,YAAQ,IAAI,kCAA2B;AAEvC,QAAI,KAAK,gBAAgB,UAAU,SAAS,QAAQ,GAAG;AAEnD,WAAK,gBAAgB,UAAU,OAAO,QAAQ;AAC9C,WAAK,gBAAgB,UAAU,IAAI,mBAAmB;AAAA,IAC1D,OAAO;AAEH,WAAK,gBAAgB,UAAU,IAAI,QAAQ;AAC3C,WAAK,gBAAgB,UAAU,OAAO,mBAAmB;AAAA,IAC7D;AAAA,EACJ;AAAA,EAEA,iBAAiB;AACb,YAAQ,IAAI,gCAAyB;AAErC,QAAI,KAAK,wBAAwB;AAC7B,UAAI,KAAK,oBAAoB,UAAU,SAAS,QAAQ,GAAG;AAEvD,aAAK,oBAAoB,UAAU,OAAO,QAAQ;AAClD,aAAK,oBAAoB,UAAU,IAAI,mBAAmB;AAAA,MAC9D,OAAO;AAEH,aAAK,oBAAoB,UAAU,IAAI,QAAQ;AAC/C,aAAK,oBAAoB,UAAU,OAAO,mBAAmB;AAAA,MACjE;AAAA,IACJ;AAAA,EACJ;AACJ;;;ACpCA,IAAO,2CAAP,cAA6B,WAAW;AAAA,EACpC,OAAO,UAAU,CAAC,SAAS,cAAc,KAAK;AAAA,EAC9C,OAAO,SAAS;AAAA,IACZ,gBAAgB;AAAA,IAChB,YAAY;AAAA,EAChB;AAAA,EACA,OAAO,UAAU,CAAC,aAAa,eAAe,SAAS;AAAA,EAEvD,UAAU;AACN,YAAQ,IAAI,sDAA+C;AAC3D,YAAQ,IAAI,2BAAoB,KAAK,WAAW;AAChD,YAAQ,IAAI,8BAAuB,KAAK,mBAAmB;AAG3D,SAAK,qBAAqB;AAAA,EAC9B;AAAA;AAAA,EAGA,uBAAuB;AAEnB,WAAO,YAAY,CAAC,YAAY;AAC5B,WAAK,cAAc,OAAO;AAAA,IAC9B;AAEA,WAAO,aAAa,CAAC,YAAY;AAC7B,WAAK,WAAW,OAAO;AAAA,IAC3B;AAEA,WAAO,wBAAwB,MAAM;AACjC,WAAK,cAAc,oBAAoB;AAAA,IAC3C;AAEA,WAAO,yBAAyB,MAAM;AAClC,WAAK,cAAc,qBAAqB;AAAA,IAC5C;AAEA,WAAO,wBAAwB,MAAM;AACjC,WAAK,sBAAsB;AAAA,IAC/B;AAAA,EACJ;AAAA;AAAA,EAGA,YAAY;AACR,YAAQ,IAAI,0CAAmC;AAC/C,YAAQ,IAAI,4BAAqB,KAAK,WAAW;AAEjD,QAAI,KAAK,aAAa;AAClB,cAAQ,IAAI,mCAA4B,KAAK,YAAY,UAAU,SAAS,CAAC;AAC7E,WAAK,YAAY,UAAU,OAAO,QAAQ;AAC1C,cAAQ,IAAI,kCAA2B,KAAK,YAAY,UAAU,SAAS,CAAC;AAG5E,iBAAW,MAAM;AACb,aAAK,iBAAiB;AAAA,MAC1B,GAAG,GAAG;AAAA,IACV,OAAO;AACH,cAAQ,MAAM,gCAA2B;AAAA,IAC7C;AAAA,EACJ;AAAA;AAAA,EAGA,mBAAmB;AAEf,UAAM,iBAAiB,KAAK,WAAW,CAAC;AACxC,QAAI,gBAAgB;AAChB,YAAM,QAAQ;AAAA,QACV,QAAQ;AAAA,QACR,QAAQ,EAAE,KAAK,kBAAkB;AAAA,MACrC;AACA,WAAK,UAAU,KAAK;AAAA,IACxB;AAAA,EACJ;AAAA;AAAA,EAGA,iBAAiB;AACb,YAAQ,IAAI,8BAAuB;AACnC,QAAI,KAAK,aAAa;AAClB,cAAQ,IAAI,gDAA2C;AACvD,WAAK,YAAY,UAAU,IAAI,QAAQ;AACvC,cAAQ,IAAI,uCAAkC;AAAA,IAClD,OAAO;AACH,cAAQ,MAAM,gCAA2B;AAAA,IAC7C;AAAA,EACJ;AAAA;AAAA,EAGA,kBAAkB,OAAO;AACrB,YAAQ,IAAI,oCAAwB;AACpC,YAAQ,IAAI,2BAAoB,MAAM,MAAM;AAC5C,YAAQ,IAAI,2BAAoB,KAAK,WAAW;AAGhD,QAAI,MAAM,WAAW,KAAK,aAAa;AACnC,cAAQ,IAAI,4CAAuC;AACnD,WAAK,eAAe;AAAA,IACxB,OAAO;AACH,cAAQ,IAAI,qDAA2C;AAAA,IAC3D;AAAA,EACJ;AAAA;AAAA,EAGA,UAAU,OAAO;AACb,UAAM,UAAU,MAAM,OAAO;AAG7B,SAAK,kBAAkB,QAAQ,CAAC,QAAQ;AACpC,UAAI,UAAU,IAAI,QAAQ;AAAA,IAC9B,CAAC;AAGD,SAAK,WAAW,QAAQ,CAAC,QAAQ;AAC7B,UAAI,UAAU,OAAO,mBAAmB,eAAe;AACvD,UAAI,UAAU,IAAI,sBAAsB,eAAe;AAAA,IAC3D,CAAC;AAGD,UAAM,YAAY,SAAS,eAAe,GAAG,OAAO,MAAM;AAC1D,QAAI,WAAW;AACX,gBAAU,UAAU,OAAO,QAAQ;AAGnC,YAAM,aAAa,MAAM,OAAO,QAAQ,QAAQ;AAChD,UAAI,YAAY;AACZ,mBAAW,UAAU,OAAO,sBAAsB,eAAe;AACjE,mBAAW,UAAU,IAAI,mBAAmB,eAAe;AAAA,MAC/D;AAGA,WAAK,eAAe,OAAO;AAAA,IAC/B;AAEA,SAAK,kBAAkB;AAAA,EAC3B;AAAA;AAAA,EAGA,MAAM,eAAe,SAAS;AAC1B,UAAM,aAAa,SAAS,eAAe,GAAG,OAAO,UAAU;AAC/D,QAAI,CAAC,WAAY;AAGjB,SAAK,YAAY,UAAU;AAE3B,QAAI;AACA,YAAM,MAAM,KAAK,UAAU,OAAO;AAClC,cAAQ,IAAI,0BAAmB,SAAS,QAAQ,GAAG;AAEnD,YAAM,WAAW,MAAM,MAAM,KAAK;AAAA,QAC9B,SAAS;AAAA,UACL,QAAQ;AAAA,UACR,oBAAoB;AAAA,UACpB,gBAAgB;AAAA,QACpB;AAAA,MACJ,CAAC;AAED,UAAI,CAAC,SAAS,IAAI;AACd,cAAM,IAAI,MAAM,uBAAuB,SAAS,MAAM,EAAE;AAAA,MAC5D;AAEA,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,cAAQ,IAAI,mCAA4B,KAAK,MAAM;AAEnD,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,MAAM,OAAO,gBAAgB,MAAM,WAAW;AAEpD,YAAM,mBAAmB,KAAK,eAAe,KAAK,OAAO;AAEzD,UAAI,kBAAkB;AAClB,gBAAQ,IAAI,uCAAkC;AAC9C,mBAAW,YAAY,iBAAiB;AAGxC,aAAK,qBAAqB,SAAS,UAAU;AAG7C,aAAK,gCAAgC,UAAU;AAAA,MACnD,OAAO;AACH,aAAK,UAAU,YAAY,8DAAY;AAAA,MAC3C;AAAA,IACJ,SAASC,QAAO;AACZ,cAAQ,MAAM,uCAAYA,MAAK;AAC/B,WAAK,UAAU,YAAY,8DAAY;AAAA,IAC3C;AAAA,EACJ;AAAA;AAAA,EAGA,UAAU,SAAS;AACf,UAAM,OAAO,KAAK;AAElB,YAAQ,SAAS;AAAA,MACb,KAAK;AACD,eAAO,sBAAsB,IAAI;AAAA,MACrC,KAAK;AACD,eAAO,sBAAsB,IAAI;AAAA,MACrC,KAAK;AACD,eAAO,0CAA0C,IAAI;AAAA,MACzD;AACI,eAAO;AAAA,IACf;AAAA,EACJ;AAAA;AAAA,EAGA,eAAe,KAAK,SAAS;AACzB,YAAQ,IAAI,yCAAkC,OAAO;AAErD,QAAI;AAEJ,QAAI,YAAY,mBAAmB;AAE/B,oBAAc,IAAI,cAAc,MAAM,KAAK,IAAI,cAAc,YAAY;AACzE,cAAQ,IAAI,yCAAkC,CAAC,CAAC,WAAW;AAAA,IAC/D,WAAW,YAAY,oBAAoB;AAEvC,YAAM,YAAY,IAAI,cAAc,YAAY;AAChD,cAAQ,IAAI,+CAAwC,CAAC,CAAC,SAAS;AAE/D,UAAI,WAAW;AACX,sBAAc,UAAU,UAAU,IAAI;AAGtC,cAAM,eAAe,YAAY,cAAc,OAAO;AACtD,YAAI,gBAAgB,aAAa,cAAc,IAAI,GAAG;AAClD,kBAAQ,IAAI,wCAA4B;AACxC,uBAAa,OAAO;AAAA,QACxB;AAGA,cAAM,YAAY,YAAY,iBAAiB,6BAA6B;AAC5E,gBAAQ,IAAI,+BAAwB,UAAU,MAAM;AACpD,kBAAU,QAAQ,CAAC,SAAS;AACxB,cAAI,KAAK,YAAY,SAAS,cAAI,GAAG;AACjC,oBAAQ,IAAI,oCAAwB;AACpC,iBAAK,QAAQ,OAAO,GAAG,OAAO;AAAA,UAClC;AAAA,QACJ,CAAC;AAAA,MACL;AAAA,IACJ,WAAW,YAAY,iBAAiB;AAEpC,YAAM,YAAY,IAAI,cAAc,YAAY;AAChD,cAAQ,IAAI,4CAAqC,CAAC,CAAC,SAAS;AAE5D,UAAI,WAAW;AACX,sBAAc,UAAU,UAAU,IAAI;AAGtC,YAAI,CAAC,YAAY,QAAQ,YAAY;AACjC,gBAAM,qBAAqB,UAAU,cAAc,oCAAoC;AACvF,cAAI,oBAAoB;AACpB,oBAAQ,IAAI,0DAAmD;AAC/D,wBAAY,aAAa,mBAAmB,mBAAmB,QAAQ,UAAU;AAEjF,mBAAO,KAAK,mBAAmB,OAAO,EAAE,QAAQ,CAAC,QAAQ;AACrD,kBAAI,IAAI,WAAW,cAAc,GAAG;AAChC,4BAAY,QAAQ,GAAG,IAAI,mBAAmB,QAAQ,GAAG;AACzD,wBAAQ,IAAI,oBAAa,GAAG,KAAK,mBAAmB,QAAQ,GAAG,CAAC;AAAA,cACpE;AAAA,YACJ,CAAC;AAAA,UACL;AAAA,QACJ;AAGA,cAAM,eAAe,YAAY,cAAc,OAAO;AACtD,YAAI,gBAAgB,aAAa,cAAc,IAAI,GAAG;AAClD,kBAAQ,IAAI,wCAA4B;AACxC,uBAAa,OAAO;AAAA,QACxB;AAGA,cAAM,UAAU,YAAY,cAAc,2BAA2B;AACrE,YAAI,WAAW,QAAQ,cAAc,KAAK,GAAG;AACzC,kBAAQ,IAAI,0CAA8B;AAC1C,kBAAQ,OAAO;AAAA,QACnB;AAGA,cAAM,YAAY,YAAY,iBAAiB,sCAAsC;AACrF,gBAAQ,IAAI,+BAAwB,UAAU,MAAM;AACpD,kBAAU,QAAQ,CAAC,SAAS;AACxB,cAAI,KAAK,YAAY,SAAS,cAAI,GAAG;AACjC,oBAAQ,IAAI,oCAAwB;AACpC,iBAAK,QAAQ,OAAO,GAAG,OAAO;AAAA,UAClC;AAAA,QACJ,CAAC;AAAA,MACL;AAAA,IACJ;AAEA,YAAQ,IAAI,gCAAyB,CAAC,CAAC,WAAW;AAClD,QAAI,aAAa;AACb,cAAQ,IAAI,kCAA2B,YAAY,UAAU,MAAM;AAAA,IACvE;AAEA,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,qBAAqB,SAAS,YAAY;AACtC,QAAI,YAAY,oBAAoB;AAChC,WAAK,0BAA0B,UAAU;AAAA,IAC7C,WAAW,YAAY,iBAAiB;AACpC,WAAK,uBAAuB,UAAU;AAAA,IAC1C;AAGA,SAAK,gBAAgB,YAAY,OAAO;AAAA,EAC5C;AAAA;AAAA,EAGA,0BAA0B,YAAY;AAClC,YAAQ,IAAI,uDAAgD;AAG5D,UAAM,cAAc,WAAW,iBAAiB,8CAA8C;AAC9F,gBAAY,QAAQ,CAAC,WAAW;AAC5B,aAAO,iBAAiB,SAAS,CAAC,MAAM;AACpC,UAAE,eAAe;AACjB,cAAM,MAAM,OAAO,QAAQ,OAAO,QAAQ;AAC1C,YAAI,KAAK;AACL,eAAK,gBAAgB,GAAG;AAAA,QAC5B;AAAA,MACJ,CAAC;AAAA,IACL,CAAC;AAGD,UAAM,gBAAgB,WAAW,iBAAiB,+BAA+B;AACjF,kBAAc,QAAQ,CAAC,WAAW;AAC9B,aAAO,iBAAiB,SAAS,OAAO,MAAM;AAC1C,UAAE,eAAe;AACjB,cAAM,MAAM,OAAO,QAAQ;AAC3B,YAAI,KAAK;AACL,cAAI;AACA,kBAAM,WAAW,MAAM,MAAM,KAAK;AAAA,cAC9B,QAAQ;AAAA,cACR,SAAS;AAAA,gBACL,gBAAgB,KAAK,aAAa;AAAA,gBAClC,QAAQ;AAAA,cACZ;AAAA,YACJ,CAAC;AAED,gBAAI,SAAS,IAAI;AAEb,mBAAK,eAAe,kBAAkB;AAAA,YAC1C;AAAA,UACJ,SAASA,QAAO;AACZ,oBAAQ,MAAM,mDAAcA,MAAK;AACjC,kBAAM,8DAAY;AAAA,UACtB;AAAA,QACJ;AAAA,MACJ,CAAC;AAAA,IACL,CAAC;AAGD,UAAM,wBAAwB,WAAW,cAAc,mCAAmC;AAC1F,QAAI,uBAAuB;AACvB,4BAAsB,iBAAiB,UAAU,OAAO,MAAM;AAC1D,UAAE,eAAe;AAEjB,YAAI;AACA,gBAAM,WAAW,IAAI,SAAS,qBAAqB;AACnD,gBAAM,WAAW,MAAM,MAAM,sBAAsB,QAAQ;AAAA,YACvD,QAAQ;AAAA,YACR,MAAM;AAAA,YACN,SAAS;AAAA,cACL,gBAAgB,KAAK,aAAa;AAAA,cAClC,QAAQ;AAAA,YACZ;AAAA,UACJ,CAAC;AAED,cAAI,SAAS,IAAI;AAEb,iBAAK,eAAe,kBAAkB;AAAA,UAC1C,OAAO;AACH,kBAAM,IAAI,MAAM,0BAAM;AAAA,UAC1B;AAAA,QACJ,SAASA,QAAO;AACZ,kBAAQ,MAAM,+DAAgBA,MAAK;AACnC,gBAAM,8DAAY;AAAA,QACtB;AAAA,MACJ,CAAC;AAAA,IACL;AAAA,EACJ;AAAA;AAAA,EAGA,uBAAuB,YAAY;AAC/B,YAAQ,IAAI,oDAA6C;AAGzD,QAAI,CAAC,OAAO,2BAA2B;AACnC,cAAQ,IAAI,8DAAuD;AACnE,aAAO,4BAA4B,OAAO,UAAU;AAChD,gBAAQ,IAAI,oDAA6C;AACzD,cAAM,eAAe;AAErB,cAAM,YAAY,MAAM,OAAO,QAAQ,oCAAoC;AAC3E,YAAI,WAAW;AACX,gBAAM,KAAK,mBAAmB,SAAS;AAAA,QAC3C,OAAO;AACH,kBAAQ,MAAM,kEAA6D;AAC3E,gBAAM,8DAAY;AAAA,QACtB;AAAA,MACJ;AAAA,IACJ;AAGA,UAAM,cAAc,WAAW,iBAAiB,0CAA0C;AAC1F,gBAAY,QAAQ,CAAC,WAAW;AAC5B,aAAO,iBAAiB,SAAS,CAAC,MAAM;AACpC,UAAE,eAAe;AACjB,cAAM,MAAM,OAAO,QAAQ,OAAO,QAAQ;AAC1C,YAAI,KAAK;AACL,eAAK,gBAAgB,GAAG;AAAA,QAC5B;AAAA,MACJ,CAAC;AAAA,IACL,CAAC;AAGD,UAAM,gBAAgB,WAAW,iBAAiB,kDAAwC;AAC1F,kBAAc,QAAQ,CAAC,WAAW;AAC9B,YAAM,OAAO,OAAO,QAAQ,MAAM;AAClC,UAAI,MAAM;AACN,aAAK,iBAAiB,UAAU,OAAO,MAAM;AACzC,YAAE,eAAe;AAEjB,gBAAM,iBAAiB,OAAO,QAAQ,WAAW;AACjD,cAAI,QAAQ,cAAc,GAAG;AACzB,gBAAI;AACA,oBAAM,WAAW,IAAI,SAAS,IAAI;AAClC,oBAAM,WAAW,MAAM,MAAM,KAAK,QAAQ;AAAA,gBACtC,QAAQ;AAAA,gBACR,MAAM;AAAA,gBACN,SAAS;AAAA,kBACL,gBAAgB,KAAK,aAAa;AAAA,kBAClC,QAAQ;AAAA,kBACR,oBAAoB;AAAA,gBACxB;AAAA,cACJ,CAAC;AAED,kBAAI,SAAS,IAAI;AACb,wBAAQ,IAAI,0BAAqB;AAGjC,sBAAM,eAAe,MAAM,SAAS,KAAK;AACzC,wBAAQ,IAAI,8CAAuC,SAAS,QAAQ,IAAI,cAAc,CAAC;AAEvF,oBAAI,SAAS,QAAQ,IAAI,cAAc,GAAG,SAAS,cAAc,GAAG;AAChE,0BAAQ,IAAI,4CAAqC;AAEjD,wBAAM,qBAAqB,SAAS,cAAc,KAAK;AACvD,qCAAmB,YAAY;AAG/B,wBAAM,eAAe,mBAAmB,iBAAiB,cAAc;AACvE,0BAAQ,IAAI,mBAAY,aAAa,MAAM,wBAAwB;AAEnE,+BAAa,QAAQ,CAAC,QAAQC,WAAU;AACpC,0BAAM,SAAS,OAAO,aAAa,QAAQ;AAC3C,0BAAM,SAAS,OAAO,aAAa,QAAQ;AAC3C,0BAAM,WAAW,OAAO,cAAc,UAAU;AAEhD,4BAAQ;AAAA,sBACJ,+BAAwBA,SAAQ,CAAC,YAAY,MAAM,YAAY,MAAM;AAAA,oBACzE;AAEA,wBAAI,WAAW,YAAY,QAAQ;AAC/B,4BAAM,gBAAgB,SAAS,eAAe,MAAM;AACpD,0BAAI,eAAe;AACf,sCAAc,OAAO;AACrB,gCAAQ,IAAI,oCAAwB,MAAM,EAAE;AAAA,sBAChD,OAAO;AACH,gCAAQ,KAAK,0CAAgC,MAAM,EAAE;AAAA,sBACzD;AAAA,oBACJ,WAAW,WAAW,YAAY,UAAU,UAAU;AAClD,4BAAM,gBAAgB,SAAS,eAAe,MAAM;AACpD,0BAAI,eAAe;AACf,sCAAc,YAAY,SAAS;AACnC,gCAAQ,IAAI,8BAAuB,MAAM,EAAE;AAAA,sBAC/C,OAAO;AACH,gCAAQ,KAAK,0CAAgC,MAAM,EAAE;AAAA,sBACzD;AAAA,oBACJ;AAAA,kBACJ,CAAC;AAED,0BAAQ,IAAI,0CAAqC;AAAA,gBACrD,OAAO;AACH,0BAAQ,IAAI,wDAAiD;AAE7D,uBAAK,eAAe,eAAe;AACnC;AAAA,gBACJ;AAGA,2BAAW,MAAM;AACb,0BAAQ,IAAI,6CAAsC;AAElD,sBAAI,OAAO,2BAA2B;AAClC,4BAAQ,IAAI,6DAAsD;AAClE,2BAAO,0BAA0B;AAAA,kBACrC,OAAO;AACH,4BAAQ,KAAK,2DAAiD;AAAA,kBAClE;AAEA,sBAAI,OAAO,kBAAkB;AACzB,4BAAQ,IAAI,8CAAuC;AACnD,2BAAO,iBAAiB;AAAA,kBAC5B,OAAO;AACH,4BAAQ,KAAK,kDAAwC;AAAA,kBACzD;AAEA,0BAAQ,IAAI,wCAAmC;AAAA,gBACnD,GAAG,GAAG;AAAA,cACV,OAAO;AACH,sBAAM,IAAI,MAAM,QAAQ,SAAS,MAAM,KAAK,SAAS,UAAU,EAAE;AAAA,cACrE;AAAA,YACJ,SAASD,QAAO;AACZ,sBAAQ,MAAM,4BAAqBA,MAAK;AACxC,oBAAM,8DAAY;AAAA,YACtB;AAAA,UACJ;AAAA,QACJ,CAAC;AAAA,MACL;AAAA,IACJ,CAAC;AAGD,eAAW,MAAM;AACb,UAAI,OAAO,2BAA2B;AAClC,gBAAQ,IAAI,gEAAyD;AACrE,eAAO,0BAA0B;AAAA,MACrC,OAAO;AACH,gBAAQ,KAAK,2DAAiD;AAAA,MAClE;AAAA,IACJ,GAAG,GAAG;AAAA,EACV;AAAA;AAAA,EAGA,MAAM,mBAAmB,WAAW;AAChC,YAAQ,IAAI,yCAAkC;AAE9C,QAAI;AACA,YAAM,aAAa,UAAU,iBAAiB,kCAAkC;AAChF,YAAM,cAAc,UAAU,cAAc,uBAAuB;AACnE,YAAM,SAAS,cAAc,YAAY,QAAQ;AAEjD,cAAQ,IAAI,+BAAwB,WAAW,MAAM;AACrD,cAAQ,IAAI,qBAAc,MAAM;AAEhC,UAAI,WAAW,WAAW,GAAG;AACzB,cAAM,8DAAY;AAClB;AAAA,MACJ;AAEA,cAAQ;AAAA,QACJ;AAAA,QACA,MAAM,KAAK,UAAU,EAAE,IAAI,CAAC,OAAO,GAAG,KAAK;AAAA,MAC/C;AAEA,YAAM,OAAO,KAAK;AAClB,YAAM,MAAM,0CAA0C,IAAI;AAE1D,cAAQ,IAAI,yBAAkB,IAAI;AAClC,cAAQ,IAAI,wBAAiB,GAAG;AAGhC,YAAM,YAAY,KAAK,aAAa;AACpC,cAAQ,IAAI,+BAAwB,CAAC,CAAC,SAAS;AAE/C,UAAI,CAAC,WAAW;AACZ,gBAAQ,MAAM,6BAAwB;AACtC,cAAM,4CAAS;AACf;AAAA,MACJ;AAEA,cAAQ,IAAI,gCAAyB;AAErC,YAAM,WAAW,MAAM,KAAK,UAAU,EAAE,IAAI,OAAO,UAAUC,WAAU;AACnE,cAAM,UAAU,SAAS,SAAS,KAAK;AACvC,gBAAQ,IAAI,gCAAyBA,SAAQ,CAAC,IAAI,WAAW,MAAM,KAAK,OAAO,EAAE;AAGjF,cAAM,QAAQ,oBAAI,KAAK;AACvB,cAAM,eAAe,MAAM,OAAO,MAAM,IAAI,IAAI,MAAM,OAAO;AAC7D,YAAI,YAAY,UAAU;AAC1B,YAAI,aAAa,GAAG;AAChB,uBAAa;AAAA,QACjB;AACA,cAAM,aAAa,IAAI,KAAK,KAAK;AACjC,mBAAW,QAAQ,MAAM,QAAQ,IAAI,SAAS;AAE9C,gBAAQ,IAAI,qCAA8B,OAAO,KAAK,WAAW,YAAY,EAAE,MAAM,GAAG,EAAE,CAAC,CAAC;AAE5F,cAAM,WAAW,IAAI,SAAS;AAC9B,iBAAS,OAAO,sBAAsB,WAAW,YAAY,EAAE,MAAM,GAAG,EAAE,CAAC,CAAC;AAC5E,iBAAS,OAAO,wBAAwB,MAAM;AAC9C,iBAAS,OAAO,8BAA8B,SAAS;AACvD,iBAAS,OAAO,yBAAyB,MAAM;AAC/C,iBAAS,OAAO,2BAA2B,MAAM;AACjD,iBAAS,OAAO,mCAAmC,KAAK,UAAU,EAAE,MAAM,UAAU,QAAiB,CAAC,CAAC;AAEvG,gBAAQ,IAAI,6BAAsBA,SAAQ,CAAC,QAAQ,GAAG;AAEtD,cAAM,WAAW,MAAM,MAAM,KAAK;AAAA,UAC9B,QAAQ;AAAA,UACR,MAAM;AAAA,UACN,SAAS;AAAA,YACL,gBAAgB;AAAA,YAChB,QAAQ;AAAA,YACR,oBAAoB;AAAA,UACxB;AAAA,QACJ,CAAC;AAED,gBAAQ,IAAI,sBAAeA,SAAQ,CAAC,KAAK,SAAS,QAAQ,SAAS,UAAU;AAE7E,YAAI,CAAC,SAAS,IAAI;AACd,gBAAM,YAAY,MAAM,SAAS,KAAK;AACtC,kBAAQ,MAAM,kBAAaA,SAAQ,CAAC,YAAY,SAAS;AACzD,gBAAM,IAAI,MAAM,QAAQ,SAAS,MAAM,KAAK,SAAS,UAAU,EAAE;AAAA,QACrE;AAEA,cAAM,eAAe,MAAM,SAAS,KAAK;AACzC,gBAAQ,IAAI,kBAAaA,SAAQ,CAAC,aAAa,aAAa,UAAU,GAAG,GAAG,IAAI,KAAK;AAErF,eAAO;AAAA,MACX,CAAC;AAED,YAAM,QAAQ,IAAI,QAAQ;AAC1B,cAAQ,IAAI,gDAAyC;AACrD,YAAM,gCAAO;AAGb,iBAAW,QAAQ,CAAC,aAAc,SAAS,UAAU,KAAM;AAC3D,cAAQ,IAAI,sBAAe;AAG3B,WAAK,eAAe,eAAe;AAAA,IACvC,SAASD,QAAO;AACZ,cAAQ,MAAM,uCAAgCA,MAAK;AACnD,cAAQ,MAAM,0BAAmBA,OAAM,KAAK;AAC5C,YAAM,iCAAQA,OAAM,OAAO,EAAE;AAAA,IACjC;AAAA,EACJ;AAAA;AAAA,EAGA,gBAAgB,YAAY,SAAS;AACjC,UAAME,SAAQ,WAAW,iBAAiB,4BAA4B;AACtE,IAAAA,OAAM,QAAQ,CAAC,SAAS;AAEpB,WAAK,aAAa,kBAAkB,MAAM;AAG1C,UAAI,CAAC,KAAK,aAAa,YAAY,GAAG;AAClC,aAAK,aAAa,cAAc,MAAM;AAAA,MAC1C;AAGA,YAAM,gBAAgB,KAAK;AAAA,QACvB;AAAA,MACJ;AACA,oBAAc,QAAQ,CAAC,WAAW;AAC9B,eAAO,iBAAiB,SAAS,OAAO,MAAM;AAC1C,YAAE,eAAe;AAEjB,cAAI,QAAQ,OAAO,QAAQ,WAAW,4CAAS,GAAG;AAC9C,gBAAI;AACA,oBAAM,MAAM,OAAO,QAAQ,OAAO,QAAQ;AAC1C,oBAAM,WAAW,MAAM,MAAM,KAAK;AAAA,gBAC9B,QAAQ;AAAA,gBACR,SAAS;AAAA,kBACL,gBAAgB,KAAK,aAAa;AAAA,kBAClC,QAAQ;AAAA,gBACZ;AAAA,cACJ,CAAC;AAED,kBAAI,SAAS,IAAI;AAEb,qBAAK,eAAe,OAAO;AAAA,cAC/B;AAAA,YACJ,SAASF,QAAO;AACZ,sBAAQ,MAAM,uCAAYA,MAAK;AAC/B,oBAAM,8DAAY;AAAA,YACtB;AAAA,UACJ;AAAA,QACJ,CAAC;AAAA,MACL,CAAC;AAAA,IACL,CAAC;AAAA,EACL;AAAA;AAAA,EAGA,MAAM,gBAAgB,KAAK;AACvB,QAAI;AACA,cAAQ,IAAI,wCAAiC,GAAG;AAChD,YAAM,WAAW,MAAM,MAAM,KAAK;AAAA,QAC9B,SAAS;AAAA,UACL,QAAQ;AAAA,UACR,oBAAoB;AAAA,QACxB;AAAA,MACJ,CAAC;AAED,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,MAAM,OAAO,gBAAgB,MAAM,WAAW;AACpD,YAAM,UAAU,IAAI,cAAc,YAAY,KAAK,IAAI;AAGvD,UAAI,QAAQ,SAAS,eAAe,OAAO;AAC3C,UAAI,CAAC,OAAO;AACR,gBAAQ,IAAI,+BAAwB;AAEpC,gBAAQ,SAAS,cAAc,KAAK;AACpC,cAAM,KAAK;AACX,cAAM,YAAY;AAClB,cAAM,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAelB,iBAAS,KAAK,YAAY,KAAK;AAG/B,cAAM,iBAAiB,SAAS,CAAC,MAAM;AACnC,cAAI,EAAE,WAAW,OAAO;AACpB,oBAAQ,IAAI,oDAA6C;AACzD,kBAAM,UAAU,IAAI,QAAQ;AAAA,UAChC;AAAA,QACJ,CAAC;AAAA,MACL;AAEA,YAAM,eAAe,MAAM,cAAc,gBAAgB;AACzD,UAAI,cAAc;AACd,qBAAa,YAAY,QAAQ;AACjC,cAAM,UAAU,OAAO,QAAQ;AAC/B,gBAAQ,IAAI,uCAAkC;AAG9C,aAAK,mBAAmB,KAAK;AAAA,MACjC;AAAA,IACJ,SAASA,QAAO;AACZ,cAAQ,MAAM,+DAAgBA,MAAK;AACnC,YAAM,8DAAY;AAAA,IACtB;AAAA,EACJ;AAAA;AAAA,EAGA,mBAAmB,OAAO;AACtB,YAAQ,IAAI,oCAA6B;AAEzC,UAAM,OAAO,MAAM,cAAc,MAAM;AACvC,QAAI,MAAM;AAEN,WAAK,oBAAoB,UAAU,KAAK,oBAAoB;AAG5D,WAAK,uBAAuB,OAAO,MAAM;AACrC,UAAE,eAAe;AACjB,gBAAQ,IAAI,+BAAwB;AAEpC,YAAI;AACA,gBAAM,WAAW,IAAI,SAAS,IAAI;AAClC,gBAAM,WAAW,MAAM,MAAM,KAAK,QAAQ;AAAA,YACtC,QAAQ,KAAK,UAAU;AAAA,YACvB,MAAM;AAAA,YACN,SAAS;AAAA,cACL,gBAAgB,KAAK,aAAa;AAAA,cAClC,QAAQ;AAAA,YACZ;AAAA,UACJ,CAAC;AAED,cAAI,SAAS,IAAI;AACb,oBAAQ,IAAI,kCAA6B;AAEzC,kBAAM,UAAU,IAAI,QAAQ;AAG5B,gBAAI,KAAK,iBAAiB;AACtB,mBAAK,eAAe,KAAK,eAAe;AAAA,YAC5C;AAAA,UACJ,OAAO;AACH,kBAAM,IAAI,MAAM,0BAAM;AAAA,UAC1B;AAAA,QACJ,SAASA,QAAO;AACZ,kBAAQ,MAAM,uCAAYA,MAAK;AAC/B,gBAAM,8DAAY;AAAA,QACtB;AAAA,MACJ;AAEA,WAAK,iBAAiB,UAAU,KAAK,oBAAoB;AAAA,IAC7D;AAGA,UAAM,gBAAgB,MAAM,iBAAiB,WAAW;AACxD,kBAAc,QAAQ,CAAC,WAAW;AAC9B,YAAM,aAAa,OAAO,YAAY,KAAK;AAC3C,YAAM,gBACF,WAAW,SAAS,cAAI,KACxB,WAAW,SAAS,cAAI,KACxB,WAAW,SAAS,MAAG,KACvB,OAAO,UAAU,SAAS,kBAAkB,KAC3C,OAAO,SAAS,YAAY,CAAC,OAAO,QAAQ,MAAM;AAEvD,UAAI,eAAe;AACf,eAAO,iBAAiB,SAAS,CAAC,MAAM;AACpC,YAAE,eAAe;AACjB,kBAAQ,IAAI,gDAAyC;AACrD,gBAAM,UAAU,IAAI,QAAQ;AAAA,QAChC,CAAC;AAAA,MACL;AAAA,IACJ,CAAC;AAGD,UAAM,iBAAiB,MAAM,cAAc,mBAAmB;AAC9D,QAAI,gBAAgB;AAChB,qBAAe,iBAAiB,SAAS,MAAM;AAC3C,gBAAQ,IAAI,oDAA6C;AACzD,cAAM,UAAU,IAAI,QAAQ;AAAA,MAChC,CAAC;AAAA,IACL;AAAA,EACJ;AAAA;AAAA,EAGA,iBAAiB;AACb,YAAQ,IAAI,yCAAkC;AAC9C,UAAM,QAAQ,SAAS,eAAe,OAAO;AAC7C,QAAI,OAAO;AACP,cAAQ,IAAI,8CAAyC;AACrD,YAAM,UAAU,IAAI,QAAQ;AAC5B,cAAQ,IAAI,uCAAkC;AAAA,IAClD,OAAO;AACH,cAAQ,MAAM,8BAAyB;AAAA,IAC3C;AAAA,EACJ;AAAA;AAAA,EAGA,YAAY,YAAY;AACpB,eAAW,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAW3B;AAAA;AAAA,EAGA,UAAU,YAAY,SAAS;AAC3B,eAAW,YAAY;AAAA;AAAA,UAErB,OAAO;AAAA;AAAA;AAAA,EAGb;AAAA;AAAA,EAGA,eAAe;AACX,WAAO,SAAS,cAAc,qBAAqB,EAAE;AAAA,EACzD;AAAA;AAAA,EAGA,WAAW,SAAS;AAChB,UAAM,QAAQ,SAAS,eAAe,OAAO;AAC7C,QAAI,OAAO;AACP,YAAM,UAAU,IAAI,QAAQ;AAAA,IAChC;AAAA,EACJ;AAAA;AAAA,EAGA,cAAc,SAAS;AACnB,UAAM,QAAQ,SAAS,eAAe,OAAO;AAC7C,QAAI,OAAO;AACP,YAAM,UAAU,OAAO,QAAQ;AAAA,IACnC;AAAA,EACJ;AAAA;AAAA,EAGA,MAAM,wBAAwB;AAC1B,UAAM,mBAAmB,SAAS,iBAAiB,qDAAqD;AAExG,QAAI,iBAAiB,WAAW,GAAG;AAC/B,YAAM,oEAAa;AACnB;AAAA,IACJ;AAEA,UAAM,WAAW,CAAC;AAClB,UAAM,OAAO,KAAK;AAElB,qBAAiB,QAAQ,CAAC,aAAa;AACnC,YAAM,QAAQ,SAAS,MAAM,MAAM,GAAG;AACtC,YAAM,cAAc,SAAS,QAAQ;AAErC,YAAM,QAAQ,CAAC,SAAS;AACpB,cAAM,UAAU,MAAM,0CAA0C,IAAI,kBAAkB;AAAA,UAClF,QAAQ;AAAA,UACR,SAAS;AAAA,YACL,gBAAgB;AAAA,YAChB,gBAAgB,KAAK,aAAa;AAAA,UACtC;AAAA,UACA,MAAM,KAAK,UAAU;AAAA,YACjB,cAAc;AAAA,cACV;AAAA,cACA,QAAQ;AAAA,cACR,cAAc;AAAA,cACd,SAAS;AAAA,cACT,WAAW;AAAA,YACf;AAAA,UACJ,CAAC;AAAA,QACL,CAAC;AAED,iBAAS,KAAK,OAAO;AAAA,MACzB,CAAC;AAAA,IACL,CAAC;AAED,QAAI;AACA,YAAM,QAAQ,IAAI,QAAQ;AAG1B,WAAK,WAAW,qBAAqB;AAGrC,iBAAW,MAAM;AACb,aAAK,eAAe,eAAe;AAAA,MACvC,GAAG,GAAI;AAAA,IACX,SAASA,QAAO;AACZ,cAAQ,MAAM,+DAAgBA,MAAK;AACnC,YAAM,8DAAY;AAAA,IACtB;AAAA,EACJ;AAAA;AAAA,EAGA,gCAAgC,YAAY;AACxC,YAAQ,IAAI,kDAA2C;AAGvD,UAAM,qBAAqB,WAAW,iBAAiB,mBAAmB;AAE1E,uBAAmB,QAAQ,CAAC,YAAY;AACpC,YAAM,kBAAkB,QAAQ,QAAQ,WAAW,MAAM,GAAG;AAC5D,cAAQ,IAAI,6CAAsC,gBAAgB,KAAK,IAAI,CAAC,EAAE;AAAA,IAClF,CAAC;AAGD,eAAW,MAAM;AACb,UAAI,OAAO,OAAO,8BAA8B,YAAY;AACxD,gBAAQ,IAAI,6CAAwC;AACpD,eAAO,0BAA0B;AAAA,MACrC,OAAO;AACH,gBAAQ,KAAK,2DAAiD;AAAA,MAClE;AAAA,IACJ,GAAG,GAAG;AAEN,YAAQ,IAAI,8CAAyC;AAAA,EACzD;AACJ;;;ACh8BA,IAAO,6BAAP,cAA6B,WAAW;AAAA,EACpC,OAAO,UAAU,CAAC,WAAW,WAAW,eAAe;AAAA,EAEvD,UAAU;AACN,SAAK,oBAAoB;AAAA,EAC7B;AAAA,EAEA,sBAAsB;AAClB,WAAO,iBAAiB,UAAU,KAAK,aAAa,KAAK,IAAI,CAAC;AAC9D,aAAS,iBAAiB,WAAW,KAAK,cAAc,KAAK,IAAI,CAAC;AAAA,EACtE;AAAA,EAEA,SAAS;AACL,QAAI,KAAK,SAAS,GAAG;AACjB,UAAI,KAAK,cAAc,UAAU,SAAS,cAAc,GAAG;AACvD,aAAK,MAAM;AAAA,MACf,OAAO;AACH,aAAK,KAAK;AAAA,MACd;AAAA,IACJ;AAAA,EACJ;AAAA,EAEA,OAAO;AACH,QAAI,KAAK,SAAS,GAAG;AACjB,WAAK,cAAc,UAAU,IAAI,cAAc;AAE/C,UAAI,KAAK,kBAAkB;AACvB,aAAK,cAAc,MAAM,UAAU;AACnC,aAAK,cAAc;AACnB,aAAK,cAAc,UAAU,IAAI,YAAY;AAAA,MACjD;AAEA,eAAS,KAAK,UAAU,IAAI,iBAAiB;AAE7C,UAAI,KAAK,wBAAwB;AAC7B,aAAK,oBAAoB,MAAM,aAAa;AAC5C,aAAK,oBAAoB,MAAM,YAAY;AAAA,MAC/C;AAAA,IACJ;AAAA,EACJ;AAAA,EAEA,QAAQ;AACJ,QAAI,KAAK,SAAS,GAAG;AACjB,WAAK,cAAc,UAAU,OAAO,cAAc;AAElD,UAAI,KAAK,kBAAkB;AACvB,aAAK,cAAc,UAAU,OAAO,YAAY;AAChD,mBAAW,MAAM;AACb,eAAK,cAAc,MAAM,UAAU;AAAA,QACvC,GAAG,GAAG;AAAA,MACV;AAEA,eAAS,KAAK,UAAU,OAAO,iBAAiB;AAEhD,UAAI,KAAK,wBAAwB;AAC7B,aAAK,oBAAoB,MAAM,YAAY;AAAA,MAC/C;AAAA,IACJ;AAAA,EACJ;AAAA,EAEA,eAAe;AACX,QAAI,CAAC,KAAK,SAAS,GAAG;AAClB,WAAK,MAAM;AAEX,UAAI,KAAK,wBAAwB;AAC7B,aAAK,oBAAoB,MAAM,YAAY;AAC3C,aAAK,oBAAoB,MAAM,aAAa;AAAA,MAChD;AAAA,IACJ;AAAA,EACJ;AAAA,EAEA,cAAc,OAAO;AACjB,QAAI,MAAM,QAAQ,UAAU;AACxB,WAAK,MAAM;AAAA,IACf;AAAA,EACJ;AAAA,EAEA,WAAW;AACP,WAAO,OAAO,aAAa;AAAA,EAC/B;AAAA,EAEA,aAAa;AACT,WAAO,oBAAoB,UAAU,KAAK,aAAa,KAAK,IAAI,CAAC;AACjE,aAAS,oBAAoB,WAAW,KAAK,cAAc,KAAK,IAAI,CAAC;AACrE,aAAS,KAAK,UAAU,OAAO,iBAAiB;AAAA,EACpD;AACJ;;;AClFA,SAAS,QAAQ,QAAQ,gBAAgB;AACvC,MAAI,OAAO,OAAO,KAAK,MAAM;AAC7B,MAAI,OAAO,uBAAuB;AAChC,QAAI,UAAU,OAAO,sBAAsB,MAAM;AACjD,QAAI,gBAAgB;AAClB,gBAAU,QAAQ,OAAO,SAAU,KAAK;AACtC,eAAO,OAAO,yBAAyB,QAAQ,GAAG,EAAE;AAAA,MACtD,CAAC;AAAA,IACH;AACA,SAAK,KAAK,MAAM,MAAM,OAAO;AAAA,EAC/B;AACA,SAAO;AACT;AACA,SAAS,eAAe,QAAQ;AAC9B,WAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,KAAK;AACzC,QAAI,SAAS,UAAU,CAAC,KAAK,OAAO,UAAU,CAAC,IAAI,CAAC;AACpD,QAAI,IAAI,GAAG;AACT,cAAQ,OAAO,MAAM,GAAG,IAAI,EAAE,QAAQ,SAAU,KAAK;AACnD,wBAAgB,QAAQ,KAAK,OAAO,GAAG,CAAC;AAAA,MAC1C,CAAC;AAAA,IACH,WAAW,OAAO,2BAA2B;AAC3C,aAAO,iBAAiB,QAAQ,OAAO,0BAA0B,MAAM,CAAC;AAAA,IAC1E,OAAO;AACL,cAAQ,OAAO,MAAM,CAAC,EAAE,QAAQ,SAAU,KAAK;AAC7C,eAAO,eAAe,QAAQ,KAAK,OAAO,yBAAyB,QAAQ,GAAG,CAAC;AAAA,MACjF,CAAC;AAAA,IACH;AAAA,EACF;AACA,SAAO;AACT;AACA,SAAS,QAAQ,KAAK;AACpB;AAEA,MAAI,OAAO,WAAW,cAAc,OAAO,OAAO,aAAa,UAAU;AACvE,cAAU,SAAUG,MAAK;AACvB,aAAO,OAAOA;AAAA,IAChB;AAAA,EACF,OAAO;AACL,cAAU,SAAUA,MAAK;AACvB,aAAOA,QAAO,OAAO,WAAW,cAAcA,KAAI,gBAAgB,UAAUA,SAAQ,OAAO,YAAY,WAAW,OAAOA;AAAA,IAC3H;AAAA,EACF;AACA,SAAO,QAAQ,GAAG;AACpB;AACA,SAAS,gBAAgB,KAAK,KAAK,OAAO;AACxC,MAAI,OAAO,KAAK;AACd,WAAO,eAAe,KAAK,KAAK;AAAA,MAC9B;AAAA,MACA,YAAY;AAAA,MACZ,cAAc;AAAA,MACd,UAAU;AAAA,IACZ,CAAC;AAAA,EACH,OAAO;AACL,QAAI,GAAG,IAAI;AAAA,EACb;AACA,SAAO;AACT;AACA,SAAS,WAAW;AAClB,aAAW,OAAO,UAAU,SAAU,QAAQ;AAC5C,aAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,KAAK;AACzC,UAAI,SAAS,UAAU,CAAC;AACxB,eAAS,OAAO,QAAQ;AACtB,YAAI,OAAO,UAAU,eAAe,KAAK,QAAQ,GAAG,GAAG;AACrD,iBAAO,GAAG,IAAI,OAAO,GAAG;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AACA,WAAO;AAAA,EACT;AACA,SAAO,SAAS,MAAM,MAAM,SAAS;AACvC;AACA,SAAS,8BAA8B,QAAQ,UAAU;AACvD,MAAI,UAAU,KAAM,QAAO,CAAC;AAC5B,MAAI,SAAS,CAAC;AACd,MAAI,aAAa,OAAO,KAAK,MAAM;AACnC,MAAI,KAAK;AACT,OAAK,IAAI,GAAG,IAAI,WAAW,QAAQ,KAAK;AACtC,UAAM,WAAW,CAAC;AAClB,QAAI,SAAS,QAAQ,GAAG,KAAK,EAAG;AAChC,WAAO,GAAG,IAAI,OAAO,GAAG;AAAA,EAC1B;AACA,SAAO;AACT;AACA,SAAS,yBAAyB,QAAQ,UAAU;AAClD,MAAI,UAAU,KAAM,QAAO,CAAC;AAC5B,MAAI,SAAS,8BAA8B,QAAQ,QAAQ;AAC3D,MAAI,KAAK;AACT,MAAI,OAAO,uBAAuB;AAChC,QAAI,mBAAmB,OAAO,sBAAsB,MAAM;AAC1D,SAAK,IAAI,GAAG,IAAI,iBAAiB,QAAQ,KAAK;AAC5C,YAAM,iBAAiB,CAAC;AACxB,UAAI,SAAS,QAAQ,GAAG,KAAK,EAAG;AAChC,UAAI,CAAC,OAAO,UAAU,qBAAqB,KAAK,QAAQ,GAAG,EAAG;AAC9D,aAAO,GAAG,IAAI,OAAO,GAAG;AAAA,IAC1B;AAAA,EACF;AACA,SAAO;AACT;AA2BA,IAAI,UAAU;AAEd,SAAS,UAAU,SAAS;AAC1B,MAAI,OAAO,WAAW,eAAe,OAAO,WAAW;AACrD,WAAO,CAAC,CAAe,0BAAU,UAAU,MAAM,OAAO;AAAA,EAC1D;AACF;AACA,IAAI,aAAa,UAAU,uDAAuD;AAClF,IAAI,OAAO,UAAU,OAAO;AAC5B,IAAI,UAAU,UAAU,UAAU;AAClC,IAAI,SAAS,UAAU,SAAS,KAAK,CAAC,UAAU,SAAS,KAAK,CAAC,UAAU,UAAU;AACnF,IAAI,MAAM,UAAU,iBAAiB;AACrC,IAAI,mBAAmB,UAAU,SAAS,KAAK,UAAU,UAAU;AAEnE,IAAI,cAAc;AAAA,EAChB,SAAS;AAAA,EACT,SAAS;AACX;AACA,SAAS,GAAG,IAAI,OAAO,IAAI;AACzB,KAAG,iBAAiB,OAAO,IAAI,CAAC,cAAc,WAAW;AAC3D;AACA,SAAS,IAAI,IAAI,OAAO,IAAI;AAC1B,KAAG,oBAAoB,OAAO,IAAI,CAAC,cAAc,WAAW;AAC9D;AACA,SAAS,QAAyB,IAAe,UAAU;AACzD,MAAI,CAAC,SAAU;AACf,WAAS,CAAC,MAAM,QAAQ,WAAW,SAAS,UAAU,CAAC;AACvD,MAAI,IAAI;AACN,QAAI;AACF,UAAI,GAAG,SAAS;AACd,eAAO,GAAG,QAAQ,QAAQ;AAAA,MAC5B,WAAW,GAAG,mBAAmB;AAC/B,eAAO,GAAG,kBAAkB,QAAQ;AAAA,MACtC,WAAW,GAAG,uBAAuB;AACnC,eAAO,GAAG,sBAAsB,QAAQ;AAAA,MAC1C;AAAA,IACF,SAAS,GAAG;AACV,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AACA,SAAS,gBAAgB,IAAI;AAC3B,SAAO,GAAG,QAAQ,OAAO,YAAY,GAAG,KAAK,WAAW,GAAG,OAAO,GAAG;AACvE;AACA,SAAS,QAAyB,IAAe,UAA0B,KAAK,YAAY;AAC1F,MAAI,IAAI;AACN,UAAM,OAAO;AACb,OAAG;AACD,UAAI,YAAY,SAAS,SAAS,CAAC,MAAM,MAAM,GAAG,eAAe,OAAO,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,MAAM,cAAc,OAAO,KAAK;AAClJ,eAAO;AAAA,MACT;AACA,UAAI,OAAO,IAAK;AAAA,IAElB,SAAS,KAAK,gBAAgB,EAAE;AAAA,EAClC;AACA,SAAO;AACT;AACA,IAAI,UAAU;AACd,SAASC,aAAY,IAAI,MAAM,OAAO;AACpC,MAAI,MAAM,MAAM;AACd,QAAI,GAAG,WAAW;AAChB,SAAG,UAAU,QAAQ,QAAQ,QAAQ,EAAE,IAAI;AAAA,IAC7C,OAAO;AACL,UAAI,aAAa,MAAM,GAAG,YAAY,KAAK,QAAQ,SAAS,GAAG,EAAE,QAAQ,MAAM,OAAO,KAAK,GAAG;AAC9F,SAAG,aAAa,aAAa,QAAQ,MAAM,OAAO,KAAK,QAAQ,SAAS,GAAG;AAAA,IAC7E;AAAA,EACF;AACF;AACA,SAAS,IAAI,IAAI,MAAM,KAAK;AAC1B,MAAI,QAAQ,MAAM,GAAG;AACrB,MAAI,OAAO;AACT,QAAI,QAAQ,QAAQ;AAClB,UAAI,SAAS,eAAe,SAAS,YAAY,kBAAkB;AACjE,cAAM,SAAS,YAAY,iBAAiB,IAAI,EAAE;AAAA,MACpD,WAAW,GAAG,cAAc;AAC1B,cAAM,GAAG;AAAA,MACX;AACA,aAAO,SAAS,SAAS,MAAM,IAAI,IAAI;AAAA,IACzC,OAAO;AACL,UAAI,EAAE,QAAQ,UAAU,KAAK,QAAQ,QAAQ,MAAM,IAAI;AACrD,eAAO,aAAa;AAAA,MACtB;AACA,YAAM,IAAI,IAAI,OAAO,OAAO,QAAQ,WAAW,KAAK;AAAA,IACtD;AAAA,EACF;AACF;AACA,SAAS,OAAO,IAAI,UAAU;AAC5B,MAAI,oBAAoB;AACxB,MAAI,OAAO,OAAO,UAAU;AAC1B,wBAAoB;AAAA,EACtB,OAAO;AACL,OAAG;AACD,UAAI,YAAY,IAAI,IAAI,WAAW;AACnC,UAAI,aAAa,cAAc,QAAQ;AACrC,4BAAoB,YAAY,MAAM;AAAA,MACxC;AAAA,IAEF,SAAS,CAAC,aAAa,KAAK,GAAG;AAAA,EACjC;AACA,MAAI,WAAW,OAAO,aAAa,OAAO,mBAAmB,OAAO,aAAa,OAAO;AAExF,SAAO,YAAY,IAAI,SAAS,iBAAiB;AACnD;AACA,SAAS,KAAK,KAAK,SAAS,UAAU;AACpC,MAAI,KAAK;AACP,QAAI,OAAO,IAAI,qBAAqB,OAAO,GACzC,IAAI,GACJ,IAAI,KAAK;AACX,QAAI,UAAU;AACZ,aAAO,IAAI,GAAG,KAAK;AACjB,iBAAS,KAAK,CAAC,GAAG,CAAC;AAAA,MACrB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AACA,SAAO,CAAC;AACV;AACA,SAAS,4BAA4B;AACnC,MAAI,mBAAmB,SAAS;AAChC,MAAI,kBAAkB;AACpB,WAAO;AAAA,EACT,OAAO;AACL,WAAO,SAAS;AAAA,EAClB;AACF;AAWA,SAAS,QAAQ,IAAI,2BAA2B,2BAA2B,WAAW,WAAW;AAC/F,MAAI,CAAC,GAAG,yBAAyB,OAAO,OAAQ;AAChD,MAAI,QAAQ,KAAK,MAAM,QAAQ,OAAO,QAAQ;AAC9C,MAAI,OAAO,UAAU,GAAG,cAAc,OAAO,0BAA0B,GAAG;AACxE,aAAS,GAAG,sBAAsB;AAClC,UAAM,OAAO;AACb,WAAO,OAAO;AACd,aAAS,OAAO;AAChB,YAAQ,OAAO;AACf,aAAS,OAAO;AAChB,YAAQ,OAAO;AAAA,EACjB,OAAO;AACL,UAAM;AACN,WAAO;AACP,aAAS,OAAO;AAChB,YAAQ,OAAO;AACf,aAAS,OAAO;AAChB,YAAQ,OAAO;AAAA,EACjB;AACA,OAAK,6BAA6B,8BAA8B,OAAO,QAAQ;AAE7E,gBAAY,aAAa,GAAG;AAI5B,QAAI,CAAC,YAAY;AACf,SAAG;AACD,YAAI,aAAa,UAAU,0BAA0B,IAAI,WAAW,WAAW,MAAM,UAAU,6BAA6B,IAAI,WAAW,UAAU,MAAM,WAAW;AACpK,cAAI,gBAAgB,UAAU,sBAAsB;AAGpD,iBAAO,cAAc,MAAM,SAAS,IAAI,WAAW,kBAAkB,CAAC;AACtE,kBAAQ,cAAc,OAAO,SAAS,IAAI,WAAW,mBAAmB,CAAC;AACzE,mBAAS,MAAM,OAAO;AACtB,kBAAQ,OAAO,OAAO;AACtB;AAAA,QACF;AAAA,MAEF,SAAS,YAAY,UAAU;AAAA,IACjC;AAAA,EACF;AACA,MAAI,aAAa,OAAO,QAAQ;AAE9B,QAAI,WAAW,OAAO,aAAa,EAAE,GACnC,SAAS,YAAY,SAAS,GAC9B,SAAS,YAAY,SAAS;AAChC,QAAI,UAAU;AACZ,aAAO;AACP,cAAQ;AACR,eAAS;AACT,gBAAU;AACV,eAAS,MAAM;AACf,cAAQ,OAAO;AAAA,IACjB;AAAA,EACF;AACA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;AASA,SAAS,eAAe,IAAI,QAAQ,YAAY;AAC9C,MAAI,SAAS,2BAA2B,IAAI,IAAI,GAC9C,YAAY,QAAQ,EAAE,EAAE,MAAM;AAGhC,SAAO,QAAQ;AACb,QAAI,gBAAgB,QAAQ,MAAM,EAAE,UAAU,GAC5C,UAAU;AACZ,QAAI,eAAe,SAAS,eAAe,QAAQ;AACjD,gBAAU,aAAa;AAAA,IACzB,OAAO;AACL,gBAAU,aAAa;AAAA,IACzB;AACA,QAAI,CAAC,QAAS,QAAO;AACrB,QAAI,WAAW,0BAA0B,EAAG;AAC5C,aAAS,2BAA2B,QAAQ,KAAK;AAAA,EACnD;AACA,SAAO;AACT;AAUA,SAAS,SAAS,IAAI,UAAU,SAAS,eAAe;AACtD,MAAI,eAAe,GACjB,IAAI,GACJ,WAAW,GAAG;AAChB,SAAO,IAAI,SAAS,QAAQ;AAC1B,QAAI,SAAS,CAAC,EAAE,MAAM,YAAY,UAAU,SAAS,CAAC,MAAM,SAAS,UAAU,iBAAiB,SAAS,CAAC,MAAM,SAAS,YAAY,QAAQ,SAAS,CAAC,GAAG,QAAQ,WAAW,IAAI,KAAK,GAAG;AACvL,UAAI,iBAAiB,UAAU;AAC7B,eAAO,SAAS,CAAC;AAAA,MACnB;AACA;AAAA,IACF;AACA;AAAA,EACF;AACA,SAAO;AACT;AAQA,SAAS,UAAU,IAAI,UAAU;AAC/B,MAAI,OAAO,GAAG;AACd,SAAO,SAAS,SAAS,SAAS,SAAS,IAAI,MAAM,SAAS,MAAM,UAAU,YAAY,CAAC,QAAQ,MAAM,QAAQ,IAAI;AACnH,WAAO,KAAK;AAAA,EACd;AACA,SAAO,QAAQ;AACjB;AASA,SAAS,MAAM,IAAI,UAAU;AAC3B,MAAIC,SAAQ;AACZ,MAAI,CAAC,MAAM,CAAC,GAAG,YAAY;AACzB,WAAO;AAAA,EACT;AAGA,SAAO,KAAK,GAAG,wBAAwB;AACrC,QAAI,GAAG,SAAS,YAAY,MAAM,cAAc,OAAO,SAAS,UAAU,CAAC,YAAY,QAAQ,IAAI,QAAQ,IAAI;AAC7G,MAAAA;AAAA,IACF;AAAA,EACF;AACA,SAAOA;AACT;AAQA,SAAS,wBAAwB,IAAI;AACnC,MAAI,aAAa,GACf,YAAY,GACZ,cAAc,0BAA0B;AAC1C,MAAI,IAAI;AACN,OAAG;AACD,UAAI,WAAW,OAAO,EAAE,GACtB,SAAS,SAAS,GAClB,SAAS,SAAS;AACpB,oBAAc,GAAG,aAAa;AAC9B,mBAAa,GAAG,YAAY;AAAA,IAC9B,SAAS,OAAO,gBAAgB,KAAK,GAAG;AAAA,EAC1C;AACA,SAAO,CAAC,YAAY,SAAS;AAC/B;AAQA,SAAS,cAAc,KAAK,KAAK;AAC/B,WAAS,KAAK,KAAK;AACjB,QAAI,CAAC,IAAI,eAAe,CAAC,EAAG;AAC5B,aAAS,OAAO,KAAK;AACnB,UAAI,IAAI,eAAe,GAAG,KAAK,IAAI,GAAG,MAAM,IAAI,CAAC,EAAE,GAAG,EAAG,QAAO,OAAO,CAAC;AAAA,IAC1E;AAAA,EACF;AACA,SAAO;AACT;AACA,SAAS,2BAA2B,IAAI,aAAa;AAEnD,MAAI,CAAC,MAAM,CAAC,GAAG,sBAAuB,QAAO,0BAA0B;AACvE,MAAI,OAAO;AACX,MAAI,UAAU;AACd,KAAG;AAED,QAAI,KAAK,cAAc,KAAK,eAAe,KAAK,eAAe,KAAK,cAAc;AAChF,UAAI,UAAU,IAAI,IAAI;AACtB,UAAI,KAAK,cAAc,KAAK,gBAAgB,QAAQ,aAAa,UAAU,QAAQ,aAAa,aAAa,KAAK,eAAe,KAAK,iBAAiB,QAAQ,aAAa,UAAU,QAAQ,aAAa,WAAW;AACpN,YAAI,CAAC,KAAK,yBAAyB,SAAS,SAAS,KAAM,QAAO,0BAA0B;AAC5F,YAAI,WAAW,YAAa,QAAO;AACnC,kBAAU;AAAA,MACZ;AAAA,IACF;AAAA,EAEF,SAAS,OAAO,KAAK;AACrB,SAAO,0BAA0B;AACnC;AACA,SAASC,QAAO,KAAK,KAAK;AACxB,MAAI,OAAO,KAAK;AACd,aAAS,OAAO,KAAK;AACnB,UAAI,IAAI,eAAe,GAAG,GAAG;AAC3B,YAAI,GAAG,IAAI,IAAI,GAAG;AAAA,MACpB;AAAA,IACF;AAAA,EACF;AACA,SAAO;AACT;AACA,SAAS,YAAY,OAAO,OAAO;AACjC,SAAO,KAAK,MAAM,MAAM,GAAG,MAAM,KAAK,MAAM,MAAM,GAAG,KAAK,KAAK,MAAM,MAAM,IAAI,MAAM,KAAK,MAAM,MAAM,IAAI,KAAK,KAAK,MAAM,MAAM,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,KAAK,KAAK,MAAM,MAAM,KAAK,MAAM,KAAK,MAAM,MAAM,KAAK;AAC5N;AACA,IAAI;AACJ,SAAS,SAAS,UAAU,IAAI;AAC9B,SAAO,WAAY;AACjB,QAAI,CAAC,kBAAkB;AACrB,UAAI,OAAO,WACT,QAAQ;AACV,UAAI,KAAK,WAAW,GAAG;AACrB,iBAAS,KAAK,OAAO,KAAK,CAAC,CAAC;AAAA,MAC9B,OAAO;AACL,iBAAS,MAAM,OAAO,IAAI;AAAA,MAC5B;AACA,yBAAmB,WAAW,WAAY;AACxC,2BAAmB;AAAA,MACrB,GAAG,EAAE;AAAA,IACP;AAAA,EACF;AACF;AACA,SAAS,iBAAiB;AACxB,eAAa,gBAAgB;AAC7B,qBAAmB;AACrB;AACA,SAAS,SAAS,IAAI,GAAG,GAAG;AAC1B,KAAG,cAAc;AACjB,KAAG,aAAa;AAClB;AACA,SAAS,MAAM,IAAI;AACjB,MAAI,UAAU,OAAO;AACrB,MAAI,IAAI,OAAO,UAAU,OAAO;AAChC,MAAI,WAAW,QAAQ,KAAK;AAC1B,WAAO,QAAQ,IAAI,EAAE,EAAE,UAAU,IAAI;AAAA,EACvC,WAAW,GAAG;AACZ,WAAO,EAAE,EAAE,EAAE,MAAM,IAAI,EAAE,CAAC;AAAA,EAC5B,OAAO;AACL,WAAO,GAAG,UAAU,IAAI;AAAA,EAC1B;AACF;AAeA,SAAS,kCAAkC,WAAW,SAASC,UAAS;AACtE,MAAI,OAAO,CAAC;AACZ,QAAM,KAAK,UAAU,QAAQ,EAAE,QAAQ,SAAU,OAAO;AACtD,QAAI,YAAY,WAAW,aAAa;AACxC,QAAI,CAAC,QAAQ,OAAO,QAAQ,WAAW,WAAW,KAAK,KAAK,MAAM,YAAY,UAAUA,SAAS;AACjG,QAAI,YAAY,QAAQ,KAAK;AAC7B,SAAK,OAAO,KAAK,KAAK,aAAa,KAAK,UAAU,QAAQ,eAAe,SAAS,aAAa,UAAU,UAAU,IAAI;AACvH,SAAK,MAAM,KAAK,KAAK,YAAY,KAAK,SAAS,QAAQ,cAAc,SAAS,YAAY,UAAU,UAAU,GAAG;AACjH,SAAK,QAAQ,KAAK,KAAK,cAAc,KAAK,WAAW,QAAQ,gBAAgB,SAAS,cAAc,WAAW,UAAU,KAAK;AAC9H,SAAK,SAAS,KAAK,KAAK,eAAe,KAAK,YAAY,QAAQ,iBAAiB,SAAS,eAAe,WAAW,UAAU,MAAM;AAAA,EACtI,CAAC;AACD,OAAK,QAAQ,KAAK,QAAQ,KAAK;AAC/B,OAAK,SAAS,KAAK,SAAS,KAAK;AACjC,OAAK,IAAI,KAAK;AACd,OAAK,IAAI,KAAK;AACd,SAAO;AACT;AACA,IAAI,UAAU,cAAa,oBAAI,KAAK,GAAE,QAAQ;AAE9C,SAAS,wBAAwB;AAC/B,MAAI,kBAAkB,CAAC,GACrB;AACF,SAAO;AAAA,IACL,uBAAuB,SAAS,wBAAwB;AACtD,wBAAkB,CAAC;AACnB,UAAI,CAAC,KAAK,QAAQ,UAAW;AAC7B,UAAI,WAAW,CAAC,EAAE,MAAM,KAAK,KAAK,GAAG,QAAQ;AAC7C,eAAS,QAAQ,SAAU,OAAO;AAChC,YAAI,IAAI,OAAO,SAAS,MAAM,UAAU,UAAU,SAAS,MAAO;AAClE,wBAAgB,KAAK;AAAA,UACnB,QAAQ;AAAA,UACR,MAAM,QAAQ,KAAK;AAAA,QACrB,CAAC;AACD,YAAI,WAAW,eAAe,CAAC,GAAG,gBAAgB,gBAAgB,SAAS,CAAC,EAAE,IAAI;AAGlF,YAAI,MAAM,uBAAuB;AAC/B,cAAI,cAAc,OAAO,OAAO,IAAI;AACpC,cAAI,aAAa;AACf,qBAAS,OAAO,YAAY;AAC5B,qBAAS,QAAQ,YAAY;AAAA,UAC/B;AAAA,QACF;AACA,cAAM,WAAW;AAAA,MACnB,CAAC;AAAA,IACH;AAAA,IACA,mBAAmB,SAAS,kBAAkB,OAAO;AACnD,sBAAgB,KAAK,KAAK;AAAA,IAC5B;AAAA,IACA,sBAAsB,SAAS,qBAAqB,QAAQ;AAC1D,sBAAgB,OAAO,cAAc,iBAAiB;AAAA,QACpD;AAAA,MACF,CAAC,GAAG,CAAC;AAAA,IACP;AAAA,IACA,YAAY,SAAS,WAAW,UAAU;AACxC,UAAI,QAAQ;AACZ,UAAI,CAAC,KAAK,QAAQ,WAAW;AAC3B,qBAAa,mBAAmB;AAChC,YAAI,OAAO,aAAa,WAAY,UAAS;AAC7C;AAAA,MACF;AACA,UAAI,YAAY,OACd,gBAAgB;AAClB,sBAAgB,QAAQ,SAAU,OAAO;AACvC,YAAI,OAAO,GACT,SAAS,MAAM,QACf,WAAW,OAAO,UAClB,SAAS,QAAQ,MAAM,GACvB,eAAe,OAAO,cACtB,aAAa,OAAO,YACpB,gBAAgB,MAAM,MACtB,eAAe,OAAO,QAAQ,IAAI;AACpC,YAAI,cAAc;AAEhB,iBAAO,OAAO,aAAa;AAC3B,iBAAO,QAAQ,aAAa;AAAA,QAC9B;AACA,eAAO,SAAS;AAChB,YAAI,OAAO,uBAAuB;AAEhC,cAAI,YAAY,cAAc,MAAM,KAAK,CAAC,YAAY,UAAU,MAAM;AAAA,WAErE,cAAc,MAAM,OAAO,QAAQ,cAAc,OAAO,OAAO,WAAW,SAAS,MAAM,OAAO,QAAQ,SAAS,OAAO,OAAO,OAAO;AAErI,mBAAO,kBAAkB,eAAe,cAAc,YAAY,MAAM,OAAO;AAAA,UACjF;AAAA,QACF;AAGA,YAAI,CAAC,YAAY,QAAQ,QAAQ,GAAG;AAClC,iBAAO,eAAe;AACtB,iBAAO,aAAa;AACpB,cAAI,CAAC,MAAM;AACT,mBAAO,MAAM,QAAQ;AAAA,UACvB;AACA,gBAAM,QAAQ,QAAQ,eAAe,QAAQ,IAAI;AAAA,QACnD;AACA,YAAI,MAAM;AACR,sBAAY;AACZ,0BAAgB,KAAK,IAAI,eAAe,IAAI;AAC5C,uBAAa,OAAO,mBAAmB;AACvC,iBAAO,sBAAsB,WAAW,WAAY;AAClD,mBAAO,gBAAgB;AACvB,mBAAO,eAAe;AACtB,mBAAO,WAAW;AAClB,mBAAO,aAAa;AACpB,mBAAO,wBAAwB;AAAA,UACjC,GAAG,IAAI;AACP,iBAAO,wBAAwB;AAAA,QACjC;AAAA,MACF,CAAC;AACD,mBAAa,mBAAmB;AAChC,UAAI,CAAC,WAAW;AACd,YAAI,OAAO,aAAa,WAAY,UAAS;AAAA,MAC/C,OAAO;AACL,8BAAsB,WAAW,WAAY;AAC3C,cAAI,OAAO,aAAa,WAAY,UAAS;AAAA,QAC/C,GAAG,aAAa;AAAA,MAClB;AACA,wBAAkB,CAAC;AAAA,IACrB;AAAA,IACA,SAAS,SAAS,QAAQ,QAAQ,aAAa,QAAQC,WAAU;AAC/D,UAAIA,WAAU;AACZ,YAAI,QAAQ,cAAc,EAAE;AAC5B,YAAI,QAAQ,aAAa,EAAE;AAC3B,YAAI,WAAW,OAAO,KAAK,EAAE,GAC3B,SAAS,YAAY,SAAS,GAC9B,SAAS,YAAY,SAAS,GAC9B,cAAc,YAAY,OAAO,OAAO,SAAS,UAAU,IAC3D,cAAc,YAAY,MAAM,OAAO,QAAQ,UAAU;AAC3D,eAAO,aAAa,CAAC,CAAC;AACtB,eAAO,aAAa,CAAC,CAAC;AACtB,YAAI,QAAQ,aAAa,iBAAiB,aAAa,QAAQ,aAAa,OAAO;AACnF,aAAK,kBAAkB,QAAQ,MAAM;AAErC,YAAI,QAAQ,cAAc,eAAeA,YAAW,QAAQ,KAAK,QAAQ,SAAS,MAAM,KAAK,QAAQ,SAAS,GAAG;AACjH,YAAI,QAAQ,aAAa,oBAAoB;AAC7C,eAAO,OAAO,aAAa,YAAY,aAAa,OAAO,QAAQ;AACnE,eAAO,WAAW,WAAW,WAAY;AACvC,cAAI,QAAQ,cAAc,EAAE;AAC5B,cAAI,QAAQ,aAAa,EAAE;AAC3B,iBAAO,WAAW;AAClB,iBAAO,aAAa;AACpB,iBAAO,aAAa;AAAA,QACtB,GAAGA,SAAQ;AAAA,MACb;AAAA,IACF;AAAA,EACF;AACF;AACA,SAAS,QAAQ,QAAQ;AACvB,SAAO,OAAO;AAChB;AACA,SAAS,kBAAkB,eAAe,UAAU,QAAQ,SAAS;AACnE,SAAO,KAAK,KAAK,KAAK,IAAI,SAAS,MAAM,cAAc,KAAK,CAAC,IAAI,KAAK,IAAI,SAAS,OAAO,cAAc,MAAM,CAAC,CAAC,IAAI,KAAK,KAAK,KAAK,IAAI,SAAS,MAAM,OAAO,KAAK,CAAC,IAAI,KAAK,IAAI,SAAS,OAAO,OAAO,MAAM,CAAC,CAAC,IAAI,QAAQ;AAC7N;AAEA,IAAI,UAAU,CAAC;AACf,IAAIC,YAAW;AAAA,EACb,qBAAqB;AACvB;AACA,IAAI,gBAAgB;AAAA,EAClB,OAAO,SAAS,MAAM,QAAQ;AAE5B,aAASC,WAAUD,WAAU;AAC3B,UAAIA,UAAS,eAAeC,OAAM,KAAK,EAAEA,WAAU,SAAS;AAC1D,eAAOA,OAAM,IAAID,UAASC,OAAM;AAAA,MAClC;AAAA,IACF;AACA,YAAQ,QAAQ,SAAU,GAAG;AAC3B,UAAI,EAAE,eAAe,OAAO,YAAY;AACtC,cAAM,iCAAiC,OAAO,OAAO,YAAY,iBAAiB;AAAA,MACpF;AAAA,IACF,CAAC;AACD,YAAQ,KAAK,MAAM;AAAA,EACrB;AAAA,EACA,aAAa,SAAS,YAAY,WAAW,UAAU,KAAK;AAC1D,QAAI,QAAQ;AACZ,SAAK,gBAAgB;AACrB,QAAI,SAAS,WAAY;AACvB,YAAM,gBAAgB;AAAA,IACxB;AACA,QAAI,kBAAkB,YAAY;AAClC,YAAQ,QAAQ,SAAU,QAAQ;AAChC,UAAI,CAAC,SAAS,OAAO,UAAU,EAAG;AAElC,UAAI,SAAS,OAAO,UAAU,EAAE,eAAe,GAAG;AAChD,iBAAS,OAAO,UAAU,EAAE,eAAe,EAAE,eAAe;AAAA,UAC1D;AAAA,QACF,GAAG,GAAG,CAAC;AAAA,MACT;AAIA,UAAI,SAAS,QAAQ,OAAO,UAAU,KAAK,SAAS,OAAO,UAAU,EAAE,SAAS,GAAG;AACjF,iBAAS,OAAO,UAAU,EAAE,SAAS,EAAE,eAAe;AAAA,UACpD;AAAA,QACF,GAAG,GAAG,CAAC;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EACA,mBAAmB,SAAS,kBAAkB,UAAU,IAAID,WAAU,SAAS;AAC7E,YAAQ,QAAQ,SAAU,QAAQ;AAChC,UAAI,aAAa,OAAO;AACxB,UAAI,CAAC,SAAS,QAAQ,UAAU,KAAK,CAAC,OAAO,oBAAqB;AAClE,UAAI,cAAc,IAAI,OAAO,UAAU,IAAI,SAAS,OAAO;AAC3D,kBAAY,WAAW;AACvB,kBAAY,UAAU,SAAS;AAC/B,eAAS,UAAU,IAAI;AAGvB,eAASA,WAAU,YAAY,QAAQ;AAAA,IACzC,CAAC;AACD,aAASC,WAAU,SAAS,SAAS;AACnC,UAAI,CAAC,SAAS,QAAQ,eAAeA,OAAM,EAAG;AAC9C,UAAI,WAAW,KAAK,aAAa,UAAUA,SAAQ,SAAS,QAAQA,OAAM,CAAC;AAC3E,UAAI,OAAO,aAAa,aAAa;AACnC,iBAAS,QAAQA,OAAM,IAAI;AAAA,MAC7B;AAAA,IACF;AAAA,EACF;AAAA,EACA,oBAAoB,SAAS,mBAAmB,MAAM,UAAU;AAC9D,QAAI,kBAAkB,CAAC;AACvB,YAAQ,QAAQ,SAAU,QAAQ;AAChC,UAAI,OAAO,OAAO,oBAAoB,WAAY;AAClD,eAAS,iBAAiB,OAAO,gBAAgB,KAAK,SAAS,OAAO,UAAU,GAAG,IAAI,CAAC;AAAA,IAC1F,CAAC;AACD,WAAO;AAAA,EACT;AAAA,EACA,cAAc,SAAS,aAAa,UAAU,MAAM,OAAO;AACzD,QAAI;AACJ,YAAQ,QAAQ,SAAU,QAAQ;AAEhC,UAAI,CAAC,SAAS,OAAO,UAAU,EAAG;AAGlC,UAAI,OAAO,mBAAmB,OAAO,OAAO,gBAAgB,IAAI,MAAM,YAAY;AAChF,wBAAgB,OAAO,gBAAgB,IAAI,EAAE,KAAK,SAAS,OAAO,UAAU,GAAG,KAAK;AAAA,MACtF;AAAA,IACF,CAAC;AACD,WAAO;AAAA,EACT;AACF;AAEA,SAASC,eAAc,MAAM;AAC3B,MAAI,WAAW,KAAK,UAClBC,UAAS,KAAK,QACd,OAAO,KAAK,MACZ,WAAW,KAAK,UAChBC,WAAU,KAAK,SACf,OAAO,KAAK,MACZ,SAAS,KAAK,QACdC,YAAW,KAAK,UAChBC,YAAW,KAAK,UAChBC,qBAAoB,KAAK,mBACzBC,qBAAoB,KAAK,mBACzB,gBAAgB,KAAK,eACrBC,eAAc,KAAK,aACnB,uBAAuB,KAAK;AAC9B,aAAW,YAAYN,WAAUA,QAAO,OAAO;AAC/C,MAAI,CAAC,SAAU;AACf,MAAI,KACF,UAAU,SAAS,SACnB,SAAS,OAAO,KAAK,OAAO,CAAC,EAAE,YAAY,IAAI,KAAK,OAAO,CAAC;AAE9D,MAAI,OAAO,eAAe,CAAC,cAAc,CAAC,MAAM;AAC9C,UAAM,IAAI,YAAY,MAAM;AAAA,MAC1B,SAAS;AAAA,MACT,YAAY;AAAA,IACd,CAAC;AAAA,EACH,OAAO;AACL,UAAM,SAAS,YAAY,OAAO;AAClC,QAAI,UAAU,MAAM,MAAM,IAAI;AAAA,EAChC;AACA,MAAI,KAAK,QAAQA;AACjB,MAAI,OAAO,UAAUA;AACrB,MAAI,OAAO,YAAYA;AACvB,MAAI,QAAQC;AACZ,MAAI,WAAWC;AACf,MAAI,WAAWC;AACf,MAAI,oBAAoBC;AACxB,MAAI,oBAAoBC;AACxB,MAAI,gBAAgB;AACpB,MAAI,WAAWC,eAAcA,aAAY,cAAc;AACvD,MAAI,qBAAqB,eAAe,eAAe,CAAC,GAAG,oBAAoB,GAAG,cAAc,mBAAmB,MAAM,QAAQ,CAAC;AAClI,WAASR,WAAU,oBAAoB;AACrC,QAAIA,OAAM,IAAI,mBAAmBA,OAAM;AAAA,EACzC;AACA,MAAIE,SAAQ;AACV,IAAAA,QAAO,cAAc,GAAG;AAAA,EAC1B;AACA,MAAI,QAAQ,MAAM,GAAG;AACnB,YAAQ,MAAM,EAAE,KAAK,UAAU,GAAG;AAAA,EACpC;AACF;AAEA,IAAI,YAAY,CAAC,KAAK;AACtB,IAAIO,eAAc,SAASA,aAAY,WAAW,UAAU;AAC1D,MAAI,OAAO,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI,CAAC,GAC9E,gBAAgB,KAAK,KACrB,OAAO,yBAAyB,MAAM,SAAS;AACjD,gBAAc,YAAY,KAAK,QAAQ,EAAE,WAAW,UAAU,eAAe;AAAA,IAC3E;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,aAAa;AAAA,IACb;AAAA,IACA,gBAAgB,SAAS;AAAA,IACzB;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,oBAAoB;AAAA,IACpB,sBAAsB;AAAA,IACtB,gBAAgB,SAAS,iBAAiB;AACxC,oBAAc;AAAA,IAChB;AAAA,IACA,eAAe,SAAS,gBAAgB;AACtC,oBAAc;AAAA,IAChB;AAAA,IACA,uBAAuB,SAAS,sBAAsB,MAAM;AAC1D,qBAAe;AAAA,QACb;AAAA,QACA;AAAA,QACA;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF,GAAG,IAAI,CAAC;AACV;AACA,SAAS,eAAe,MAAM;AAC5B,EAAAR,eAAc,eAAe;AAAA,IAC3B;AAAA,IACA;AAAA,IACA,UAAU;AAAA,IACV;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,GAAG,IAAI,CAAC;AACV;AACA,IAAI;AAAJ,IACE;AADF,IAEE;AAFF,IAGE;AAHF,IAIE;AAJF,IAKE;AALF,IAME;AANF,IAOE;AAPF,IAQE;AARF,IASE;AATF,IAUE;AAVF,IAWE;AAXF,IAYE;AAZF,IAaE;AAbF,IAcE,sBAAsB;AAdxB,IAeE,kBAAkB;AAfpB,IAgBE,YAAY,CAAC;AAhBf,IAiBE;AAjBF,IAkBE;AAlBF,IAmBE;AAnBF,IAoBE;AApBF,IAqBE;AArBF,IAsBE;AAtBF,IAuBE;AAvBF,IAwBE;AAxBF,IAyBE;AAzBF,IA0BE,wBAAwB;AA1B1B,IA2BE,yBAAyB;AA3B3B,IA4BE;AA5BF,IA8BE;AA9BF,IA+BE,mCAAmC,CAAC;AA/BtC,IAkCE,UAAU;AAlCZ,IAmCE,oBAAoB,CAAC;AAGvB,IAAI,iBAAiB,OAAO,aAAa;AAAzC,IACE,0BAA0B;AAD5B,IAEE,mBAAmB,QAAQ,aAAa,aAAa;AAFvD,IAIE,mBAAmB,kBAAkB,CAAC,oBAAoB,CAAC,OAAO,eAAe,SAAS,cAAc,KAAK;AAJ/G,IAKE,0BAA0B,WAAY;AACpC,MAAI,CAAC,eAAgB;AAErB,MAAI,YAAY;AACd,WAAO;AAAA,EACT;AACA,MAAI,KAAK,SAAS,cAAc,GAAG;AACnC,KAAG,MAAM,UAAU;AACnB,SAAO,GAAG,MAAM,kBAAkB;AACpC,EAAE;AAdJ,IAeE,mBAAmB,SAASS,kBAAiB,IAAI,SAAS;AACxD,MAAI,QAAQ,IAAI,EAAE,GAChB,UAAU,SAAS,MAAM,KAAK,IAAI,SAAS,MAAM,WAAW,IAAI,SAAS,MAAM,YAAY,IAAI,SAAS,MAAM,eAAe,IAAI,SAAS,MAAM,gBAAgB,GAChK,SAAS,SAAS,IAAI,GAAG,OAAO,GAChC,SAAS,SAAS,IAAI,GAAG,OAAO,GAChC,gBAAgB,UAAU,IAAI,MAAM,GACpC,iBAAiB,UAAU,IAAI,MAAM,GACrC,kBAAkB,iBAAiB,SAAS,cAAc,UAAU,IAAI,SAAS,cAAc,WAAW,IAAI,QAAQ,MAAM,EAAE,OAC9H,mBAAmB,kBAAkB,SAAS,eAAe,UAAU,IAAI,SAAS,eAAe,WAAW,IAAI,QAAQ,MAAM,EAAE;AACpI,MAAI,MAAM,YAAY,QAAQ;AAC5B,WAAO,MAAM,kBAAkB,YAAY,MAAM,kBAAkB,mBAAmB,aAAa;AAAA,EACrG;AACA,MAAI,MAAM,YAAY,QAAQ;AAC5B,WAAO,MAAM,oBAAoB,MAAM,GAAG,EAAE,UAAU,IAAI,aAAa;AAAA,EACzE;AACA,MAAI,UAAU,cAAc,OAAO,KAAK,cAAc,OAAO,MAAM,QAAQ;AACzE,QAAI,qBAAqB,cAAc,OAAO,MAAM,SAAS,SAAS;AACtE,WAAO,WAAW,eAAe,UAAU,UAAU,eAAe,UAAU,sBAAsB,aAAa;AAAA,EACnH;AACA,SAAO,WAAW,cAAc,YAAY,WAAW,cAAc,YAAY,UAAU,cAAc,YAAY,WAAW,cAAc,YAAY,UAAU,mBAAmB,WAAW,MAAM,gBAAgB,MAAM,UAAU,UAAU,MAAM,gBAAgB,MAAM,UAAU,kBAAkB,mBAAmB,WAAW,aAAa;AACvV;AAnCF,IAoCE,qBAAqB,SAASC,oBAAmB,UAAU,YAAY,UAAU;AAC/E,MAAI,cAAc,WAAW,SAAS,OAAO,SAAS,KACpD,cAAc,WAAW,SAAS,QAAQ,SAAS,QACnD,kBAAkB,WAAW,SAAS,QAAQ,SAAS,QACvD,cAAc,WAAW,WAAW,OAAO,WAAW,KACtD,cAAc,WAAW,WAAW,QAAQ,WAAW,QACvD,kBAAkB,WAAW,WAAW,QAAQ,WAAW;AAC7D,SAAO,gBAAgB,eAAe,gBAAgB,eAAe,cAAc,kBAAkB,MAAM,cAAc,kBAAkB;AAC7I;AA5CF,IAmDE,8BAA8B,SAASC,6BAA4B,GAAG,GAAG;AACvE,MAAI;AACJ,YAAU,KAAK,SAAU,UAAU;AACjC,QAAI,YAAY,SAAS,OAAO,EAAE,QAAQ;AAC1C,QAAI,CAAC,aAAa,UAAU,QAAQ,EAAG;AACvC,QAAI,OAAO,QAAQ,QAAQ,GACzB,qBAAqB,KAAK,KAAK,OAAO,aAAa,KAAK,KAAK,QAAQ,WACrE,mBAAmB,KAAK,KAAK,MAAM,aAAa,KAAK,KAAK,SAAS;AACrE,QAAI,sBAAsB,kBAAkB;AAC1C,aAAO,MAAM;AAAA,IACf;AAAA,EACF,CAAC;AACD,SAAO;AACT;AAhEF,IAiEE,gBAAgB,SAASC,eAAc,SAAS;AAC9C,WAAS,KAAK,OAAO,MAAM;AACzB,WAAO,SAAU,IAAI,MAAMC,SAAQ,KAAK;AACtC,UAAI,YAAY,GAAG,QAAQ,MAAM,QAAQ,KAAK,QAAQ,MAAM,QAAQ,GAAG,QAAQ,MAAM,SAAS,KAAK,QAAQ,MAAM;AACjH,UAAI,SAAS,SAAS,QAAQ,YAAY;AAGxC,eAAO;AAAA,MACT,WAAW,SAAS,QAAQ,UAAU,OAAO;AAC3C,eAAO;AAAA,MACT,WAAW,QAAQ,UAAU,SAAS;AACpC,eAAO;AAAA,MACT,WAAW,OAAO,UAAU,YAAY;AACtC,eAAO,KAAK,MAAM,IAAI,MAAMA,SAAQ,GAAG,GAAG,IAAI,EAAE,IAAI,MAAMA,SAAQ,GAAG;AAAA,MACvE,OAAO;AACL,YAAI,cAAc,OAAO,KAAK,MAAM,QAAQ,MAAM;AAClD,eAAO,UAAU,QAAQ,OAAO,UAAU,YAAY,UAAU,cAAc,MAAM,QAAQ,MAAM,QAAQ,UAAU,IAAI;AAAA,MAC1H;AAAA,IACF;AAAA,EACF;AACA,MAAI,QAAQ,CAAC;AACb,MAAI,gBAAgB,QAAQ;AAC5B,MAAI,CAAC,iBAAiB,QAAQ,aAAa,KAAK,UAAU;AACxD,oBAAgB;AAAA,MACd,MAAM;AAAA,IACR;AAAA,EACF;AACA,QAAM,OAAO,cAAc;AAC3B,QAAM,YAAY,KAAK,cAAc,MAAM,IAAI;AAC/C,QAAM,WAAW,KAAK,cAAc,GAAG;AACvC,QAAM,cAAc,cAAc;AAClC,UAAQ,QAAQ;AAClB;AAjGF,IAkGE,sBAAsB,SAASC,uBAAsB;AACnD,MAAI,CAAC,2BAA2B,SAAS;AACvC,QAAI,SAAS,WAAW,MAAM;AAAA,EAChC;AACF;AAtGF,IAuGE,wBAAwB,SAASC,yBAAwB;AACvD,MAAI,CAAC,2BAA2B,SAAS;AACvC,QAAI,SAAS,WAAW,EAAE;AAAA,EAC5B;AACF;AAGF,IAAI,kBAAkB,CAAC,kBAAkB;AACvC,WAAS,iBAAiB,SAAS,SAAU,KAAK;AAChD,QAAI,iBAAiB;AACnB,UAAI,eAAe;AACnB,UAAI,mBAAmB,IAAI,gBAAgB;AAC3C,UAAI,4BAA4B,IAAI,yBAAyB;AAC7D,wBAAkB;AAClB,aAAO;AAAA,IACT;AAAA,EACF,GAAG,IAAI;AACT;AACA,IAAI,gCAAgC,SAASC,+BAA8B,KAAK;AAC9E,MAAI,QAAQ;AACV,UAAM,IAAI,UAAU,IAAI,QAAQ,CAAC,IAAI;AACrC,QAAI,UAAU,4BAA4B,IAAI,SAAS,IAAI,OAAO;AAClE,QAAI,SAAS;AAEX,UAAI,QAAQ,CAAC;AACb,eAAS,KAAK,KAAK;AACjB,YAAI,IAAI,eAAe,CAAC,GAAG;AACzB,gBAAM,CAAC,IAAI,IAAI,CAAC;AAAA,QAClB;AAAA,MACF;AACA,YAAM,SAAS,MAAM,SAAS;AAC9B,YAAM,iBAAiB;AACvB,YAAM,kBAAkB;AACxB,cAAQ,OAAO,EAAE,YAAY,KAAK;AAAA,IACpC;AAAA,EACF;AACF;AACA,IAAI,wBAAwB,SAASC,uBAAsB,KAAK;AAC9D,MAAI,QAAQ;AACV,WAAO,WAAW,OAAO,EAAE,iBAAiB,IAAI,MAAM;AAAA,EACxD;AACF;AAOA,SAAS,SAAS,IAAI,SAAS;AAC7B,MAAI,EAAE,MAAM,GAAG,YAAY,GAAG,aAAa,IAAI;AAC7C,UAAM,8CAA8C,OAAO,CAAC,EAAE,SAAS,KAAK,EAAE,CAAC;AAAA,EACjF;AACA,OAAK,KAAK;AACV,OAAK,UAAU,UAAU,SAAS,CAAC,GAAG,OAAO;AAG7C,KAAG,OAAO,IAAI;AACd,MAAInB,YAAW;AAAA,IACb,OAAO;AAAA,IACP,MAAM;AAAA,IACN,UAAU;AAAA,IACV,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,WAAW,WAAW,KAAK,GAAG,QAAQ,IAAI,QAAQ;AAAA,IAClD,eAAe;AAAA;AAAA,IAEf,YAAY;AAAA;AAAA,IAEZ,uBAAuB;AAAA;AAAA,IAEvB,mBAAmB;AAAA,IACnB,WAAW,SAAS,YAAY;AAC9B,aAAO,iBAAiB,IAAI,KAAK,OAAO;AAAA,IAC1C;AAAA,IACA,YAAY;AAAA,IACZ,aAAa;AAAA,IACb,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,iBAAiB;AAAA,IACjB,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,SAAS,SAAS,QAAQ,cAAce,SAAQ;AAC9C,mBAAa,QAAQ,QAAQA,QAAO,WAAW;AAAA,IACjD;AAAA,IACA,YAAY;AAAA,IACZ,gBAAgB;AAAA,IAChB,YAAY;AAAA,IACZ,OAAO;AAAA,IACP,kBAAkB;AAAA,IAClB,sBAAsB,OAAO,WAAW,SAAS,QAAQ,SAAS,OAAO,kBAAkB,EAAE,KAAK;AAAA,IAClG,eAAe;AAAA,IACf,eAAe;AAAA,IACf,gBAAgB;AAAA,IAChB,mBAAmB;AAAA,IACnB,gBAAgB;AAAA,MACd,GAAG;AAAA,MACH,GAAG;AAAA,IACL;AAAA;AAAA,IAEA,gBAAgB,SAAS,mBAAmB,SAAS,kBAAkB,WAAW,CAAC,UAAU;AAAA,IAC7F,sBAAsB;AAAA,EACxB;AACA,gBAAc,kBAAkB,MAAM,IAAIf,SAAQ;AAGlD,WAAS,QAAQA,WAAU;AACzB,MAAE,QAAQ,aAAa,QAAQ,IAAI,IAAIA,UAAS,IAAI;AAAA,EACtD;AACA,gBAAc,OAAO;AAGrB,WAAS,MAAM,MAAM;AACnB,QAAI,GAAG,OAAO,CAAC,MAAM,OAAO,OAAO,KAAK,EAAE,MAAM,YAAY;AAC1D,WAAK,EAAE,IAAI,KAAK,EAAE,EAAE,KAAK,IAAI;AAAA,IAC/B;AAAA,EACF;AAGA,OAAK,kBAAkB,QAAQ,gBAAgB,QAAQ;AACvD,MAAI,KAAK,iBAAiB;AAExB,SAAK,QAAQ,sBAAsB;AAAA,EACrC;AAGA,MAAI,QAAQ,gBAAgB;AAC1B,OAAG,IAAI,eAAe,KAAK,WAAW;AAAA,EACxC,OAAO;AACL,OAAG,IAAI,aAAa,KAAK,WAAW;AACpC,OAAG,IAAI,cAAc,KAAK,WAAW;AAAA,EACvC;AACA,MAAI,KAAK,iBAAiB;AACxB,OAAG,IAAI,YAAY,IAAI;AACvB,OAAG,IAAI,aAAa,IAAI;AAAA,EAC1B;AACA,YAAU,KAAK,KAAK,EAAE;AAGtB,UAAQ,SAAS,QAAQ,MAAM,OAAO,KAAK,KAAK,QAAQ,MAAM,IAAI,IAAI,KAAK,CAAC,CAAC;AAG7E,WAAS,MAAM,sBAAsB,CAAC;AACxC;AACA,SAAS;AAA4C;AAAA,EACnD,aAAa;AAAA,EACb,kBAAkB,SAAS,iBAAiB,QAAQ;AAClD,QAAI,CAAC,KAAK,GAAG,SAAS,MAAM,KAAK,WAAW,KAAK,IAAI;AACnD,mBAAa;AAAA,IACf;AAAA,EACF;AAAA,EACA,eAAe,SAAS,cAAc,KAAK,QAAQ;AACjD,WAAO,OAAO,KAAK,QAAQ,cAAc,aAAa,KAAK,QAAQ,UAAU,KAAK,MAAM,KAAK,QAAQ,MAAM,IAAI,KAAK,QAAQ;AAAA,EAC9H;AAAA,EACA,aAAa,SAAS,YAAoC,KAAK;AAC7D,QAAI,CAAC,IAAI,WAAY;AACrB,QAAI,QAAQ,MACV,KAAK,KAAK,IACV,UAAU,KAAK,SACf,kBAAkB,QAAQ,iBAC1B,OAAO,IAAI,MACX,QAAQ,IAAI,WAAW,IAAI,QAAQ,CAAC,KAAK,IAAI,eAAe,IAAI,gBAAgB,WAAW,KAC3F,UAAU,SAAS,KAAK,QACxB,iBAAiB,IAAI,OAAO,eAAe,IAAI,QAAQ,IAAI,KAAK,CAAC,KAAK,IAAI,gBAAgB,IAAI,aAAa,EAAE,CAAC,MAAM,QACpH,SAAS,QAAQ;AACnB,2BAAuB,EAAE;AAGzB,QAAI,QAAQ;AACV;AAAA,IACF;AACA,QAAI,wBAAwB,KAAK,IAAI,KAAK,IAAI,WAAW,KAAK,QAAQ,UAAU;AAC9E;AAAA,IACF;AAGA,QAAI,eAAe,mBAAmB;AACpC;AAAA,IACF;AAGA,QAAI,CAAC,KAAK,mBAAmB,UAAU,UAAU,OAAO,QAAQ,YAAY,MAAM,UAAU;AAC1F;AAAA,IACF;AACA,aAAS,QAAQ,QAAQ,QAAQ,WAAW,IAAI,KAAK;AACrD,QAAI,UAAU,OAAO,UAAU;AAC7B;AAAA,IACF;AACA,QAAI,eAAe,QAAQ;AAEzB;AAAA,IACF;AAGA,eAAW,MAAM,MAAM;AACvB,wBAAoB,MAAM,QAAQ,QAAQ,SAAS;AAGnD,QAAI,OAAO,WAAW,YAAY;AAChC,UAAI,OAAO,KAAK,MAAM,KAAK,QAAQ,IAAI,GAAG;AACxC,uBAAe;AAAA,UACb,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,MAAM;AAAA,UACN,UAAU;AAAA,UACV,MAAM;AAAA,UACN,QAAQ;AAAA,QACV,CAAC;AACD,QAAAU,aAAY,UAAU,OAAO;AAAA,UAC3B;AAAA,QACF,CAAC;AACD,2BAAmB,IAAI,eAAe;AACtC;AAAA,MACF;AAAA,IACF,WAAW,QAAQ;AACjB,eAAS,OAAO,MAAM,GAAG,EAAE,KAAK,SAAU,UAAU;AAClD,mBAAW,QAAQ,gBAAgB,SAAS,KAAK,GAAG,IAAI,KAAK;AAC7D,YAAI,UAAU;AACZ,yBAAe;AAAA,YACb,UAAU;AAAA,YACV,QAAQ;AAAA,YACR,MAAM;AAAA,YACN,UAAU;AAAA,YACV,QAAQ;AAAA,YACR,MAAM;AAAA,UACR,CAAC;AACD,UAAAA,aAAY,UAAU,OAAO;AAAA,YAC3B;AAAA,UACF,CAAC;AACD,iBAAO;AAAA,QACT;AAAA,MACF,CAAC;AACD,UAAI,QAAQ;AACV,2BAAmB,IAAI,eAAe;AACtC;AAAA,MACF;AAAA,IACF;AACA,QAAI,QAAQ,UAAU,CAAC,QAAQ,gBAAgB,QAAQ,QAAQ,IAAI,KAAK,GAAG;AACzE;AAAA,IACF;AAGA,SAAK,kBAAkB,KAAK,OAAO,MAAM;AAAA,EAC3C;AAAA,EACA,mBAAmB,SAAS,kBAA+B,KAAiB,OAAyB,QAAQ;AAC3G,QAAI,QAAQ,MACV,KAAK,MAAM,IACX,UAAU,MAAM,SAChB,gBAAgB,GAAG,eACnB;AACF,QAAI,UAAU,CAAC,UAAU,OAAO,eAAe,IAAI;AACjD,UAAI,WAAW,QAAQ,MAAM;AAC7B,eAAS;AACT,eAAS;AACT,iBAAW,OAAO;AAClB,eAAS,OAAO;AAChB,mBAAa;AACb,oBAAc,QAAQ;AACtB,eAAS,UAAU;AACnB,eAAS;AAAA,QACP,QAAQ;AAAA,QACR,UAAU,SAAS,KAAK;AAAA,QACxB,UAAU,SAAS,KAAK;AAAA,MAC1B;AACA,wBAAkB,OAAO,UAAU,SAAS;AAC5C,uBAAiB,OAAO,UAAU,SAAS;AAC3C,WAAK,UAAU,SAAS,KAAK;AAC7B,WAAK,UAAU,SAAS,KAAK;AAC7B,aAAO,MAAM,aAAa,IAAI;AAC9B,oBAAc,SAASU,eAAc;AACnC,QAAAV,aAAY,cAAc,OAAO;AAAA,UAC/B;AAAA,QACF,CAAC;AACD,YAAI,SAAS,eAAe;AAC1B,gBAAM,QAAQ;AACd;AAAA,QACF;AAGA,cAAM,0BAA0B;AAChC,YAAI,CAAC,WAAW,MAAM,iBAAiB;AACrC,iBAAO,YAAY;AAAA,QACrB;AAGA,cAAM,kBAAkB,KAAK,KAAK;AAGlC,uBAAe;AAAA,UACb,UAAU;AAAA,UACV,MAAM;AAAA,UACN,eAAe;AAAA,QACjB,CAAC;AAGD,QAAAW,aAAY,QAAQ,QAAQ,aAAa,IAAI;AAAA,MAC/C;AAGA,cAAQ,OAAO,MAAM,GAAG,EAAE,QAAQ,SAAU,UAAU;AACpD,aAAK,QAAQ,SAAS,KAAK,GAAG,iBAAiB;AAAA,MACjD,CAAC;AACD,SAAG,eAAe,YAAY,6BAA6B;AAC3D,SAAG,eAAe,aAAa,6BAA6B;AAC5D,SAAG,eAAe,aAAa,6BAA6B;AAC5D,UAAI,QAAQ,gBAAgB;AAC1B,WAAG,eAAe,aAAa,MAAM,OAAO;AAE5C,SAAC,KAAK,mBAAmB,GAAG,eAAe,iBAAiB,MAAM,OAAO;AAAA,MAC3E,OAAO;AACL,WAAG,eAAe,WAAW,MAAM,OAAO;AAC1C,WAAG,eAAe,YAAY,MAAM,OAAO;AAC3C,WAAG,eAAe,eAAe,MAAM,OAAO;AAAA,MAChD;AAGA,UAAI,WAAW,KAAK,iBAAiB;AACnC,aAAK,QAAQ,sBAAsB;AACnC,eAAO,YAAY;AAAA,MACrB;AACA,MAAAX,aAAY,cAAc,MAAM;AAAA,QAC9B;AAAA,MACF,CAAC;AAGD,UAAI,QAAQ,UAAU,CAAC,QAAQ,oBAAoB,WAAW,CAAC,KAAK,mBAAmB,EAAE,QAAQ,cAAc;AAC7G,YAAI,SAAS,eAAe;AAC1B,eAAK,QAAQ;AACb;AAAA,QACF;AAIA,YAAI,QAAQ,gBAAgB;AAC1B,aAAG,eAAe,aAAa,MAAM,mBAAmB;AACxD,aAAG,eAAe,iBAAiB,MAAM,mBAAmB;AAAA,QAC9D,OAAO;AACL,aAAG,eAAe,WAAW,MAAM,mBAAmB;AACtD,aAAG,eAAe,YAAY,MAAM,mBAAmB;AACvD,aAAG,eAAe,eAAe,MAAM,mBAAmB;AAAA,QAC5D;AACA,WAAG,eAAe,aAAa,MAAM,4BAA4B;AACjE,WAAG,eAAe,aAAa,MAAM,4BAA4B;AACjE,gBAAQ,kBAAkB,GAAG,eAAe,eAAe,MAAM,4BAA4B;AAC7F,cAAM,kBAAkB,WAAW,aAAa,QAAQ,KAAK;AAAA,MAC/D,OAAO;AACL,oBAAY;AAAA,MACd;AAAA,IACF;AAAA,EACF;AAAA,EACA,8BAA8B,SAAS,6BAA6D,GAAG;AACrG,QAAI,QAAQ,EAAE,UAAU,EAAE,QAAQ,CAAC,IAAI;AACvC,QAAI,KAAK,IAAI,KAAK,IAAI,MAAM,UAAU,KAAK,MAAM,GAAG,KAAK,IAAI,MAAM,UAAU,KAAK,MAAM,CAAC,KAAK,KAAK,MAAM,KAAK,QAAQ,uBAAuB,KAAK,mBAAmB,OAAO,oBAAoB,EAAE,GAAG;AACnM,WAAK,oBAAoB;AAAA,IAC3B;AAAA,EACF;AAAA,EACA,qBAAqB,SAAS,sBAAsB;AAClD,cAAU,kBAAkB,MAAM;AAClC,iBAAa,KAAK,eAAe;AACjC,SAAK,0BAA0B;AAAA,EACjC;AAAA,EACA,2BAA2B,SAAS,4BAA4B;AAC9D,QAAI,gBAAgB,KAAK,GAAG;AAC5B,QAAI,eAAe,WAAW,KAAK,mBAAmB;AACtD,QAAI,eAAe,YAAY,KAAK,mBAAmB;AACvD,QAAI,eAAe,eAAe,KAAK,mBAAmB;AAC1D,QAAI,eAAe,aAAa,KAAK,mBAAmB;AACxD,QAAI,eAAe,iBAAiB,KAAK,mBAAmB;AAC5D,QAAI,eAAe,aAAa,KAAK,4BAA4B;AACjE,QAAI,eAAe,aAAa,KAAK,4BAA4B;AACjE,QAAI,eAAe,eAAe,KAAK,4BAA4B;AAAA,EACrE;AAAA,EACA,mBAAmB,SAAS,kBAA+B,KAAiB,OAAO;AACjF,YAAQ,SAAS,IAAI,eAAe,WAAW;AAC/C,QAAI,CAAC,KAAK,mBAAmB,OAAO;AAClC,UAAI,KAAK,QAAQ,gBAAgB;AAC/B,WAAG,UAAU,eAAe,KAAK,YAAY;AAAA,MAC/C,WAAW,OAAO;AAChB,WAAG,UAAU,aAAa,KAAK,YAAY;AAAA,MAC7C,OAAO;AACL,WAAG,UAAU,aAAa,KAAK,YAAY;AAAA,MAC7C;AAAA,IACF,OAAO;AACL,SAAG,QAAQ,WAAW,IAAI;AAC1B,SAAG,QAAQ,aAAa,KAAK,YAAY;AAAA,IAC3C;AACA,QAAI;AACF,UAAI,SAAS,WAAW;AACtB,kBAAU,WAAY;AACpB,mBAAS,UAAU,MAAM;AAAA,QAC3B,CAAC;AAAA,MACH,OAAO;AACL,eAAO,aAAa,EAAE,gBAAgB;AAAA,MACxC;AAAA,IACF,SAAS,KAAK;AAAA,IAAC;AAAA,EACjB;AAAA,EACA,cAAc,SAAS,aAAa,UAAU,KAAK;AACjD,0BAAsB;AACtB,QAAI,UAAU,QAAQ;AACpB,MAAAA,aAAY,eAAe,MAAM;AAAA,QAC/B;AAAA,MACF,CAAC;AACD,UAAI,KAAK,iBAAiB;AACxB,WAAG,UAAU,YAAY,qBAAqB;AAAA,MAChD;AACA,UAAI,UAAU,KAAK;AAGnB,OAAC,YAAYW,aAAY,QAAQ,QAAQ,WAAW,KAAK;AACzD,MAAAA,aAAY,QAAQ,QAAQ,YAAY,IAAI;AAC5C,eAAS,SAAS;AAClB,kBAAY,KAAK,aAAa;AAG9B,qBAAe;AAAA,QACb,UAAU;AAAA,QACV,MAAM;AAAA,QACN,eAAe;AAAA,MACjB,CAAC;AAAA,IACH,OAAO;AACL,WAAK,SAAS;AAAA,IAChB;AAAA,EACF;AAAA,EACA,kBAAkB,SAAS,mBAAmB;AAC5C,QAAI,UAAU;AACZ,WAAK,SAAS,SAAS;AACvB,WAAK,SAAS,SAAS;AACvB,0BAAoB;AACpB,UAAI,SAAS,SAAS,iBAAiB,SAAS,SAAS,SAAS,OAAO;AACzE,UAAI,SAAS;AACb,aAAO,UAAU,OAAO,YAAY;AAClC,iBAAS,OAAO,WAAW,iBAAiB,SAAS,SAAS,SAAS,OAAO;AAC9E,YAAI,WAAW,OAAQ;AACvB,iBAAS;AAAA,MACX;AACA,aAAO,WAAW,OAAO,EAAE,iBAAiB,MAAM;AAClD,UAAI,QAAQ;AACV,WAAG;AACD,cAAI,OAAO,OAAO,GAAG;AACnB,gBAAI,WAAW;AACf,uBAAW,OAAO,OAAO,EAAE,YAAY;AAAA,cACrC,SAAS,SAAS;AAAA,cAClB,SAAS,SAAS;AAAA,cAClB;AAAA,cACA,QAAQ;AAAA,YACV,CAAC;AACD,gBAAI,YAAY,CAAC,KAAK,QAAQ,gBAAgB;AAC5C;AAAA,YACF;AAAA,UACF;AACA,mBAAS;AAAA,QACX,SAC8B,SAAS,gBAAgB,MAAM;AAAA,MAC/D;AACA,4BAAsB;AAAA,IACxB;AAAA,EACF;AAAA,EACA,cAAc,SAAS,aAA6B,KAAK;AACvD,QAAI,QAAQ;AACV,UAAI,UAAU,KAAK,SACjB,oBAAoB,QAAQ,mBAC5B,iBAAiB,QAAQ,gBACzB,QAAQ,IAAI,UAAU,IAAI,QAAQ,CAAC,IAAI,KACvC,cAAc,WAAW,OAAO,SAAS,IAAI,GAC7C,SAAS,WAAW,eAAe,YAAY,GAC/C,SAAS,WAAW,eAAe,YAAY,GAC/C,uBAAuB,2BAA2B,uBAAuB,wBAAwB,mBAAmB,GACpH,MAAM,MAAM,UAAU,OAAO,UAAU,eAAe,MAAM,UAAU,MAAM,uBAAuB,qBAAqB,CAAC,IAAI,iCAAiC,CAAC,IAAI,MAAM,UAAU,IACnL,MAAM,MAAM,UAAU,OAAO,UAAU,eAAe,MAAM,UAAU,MAAM,uBAAuB,qBAAqB,CAAC,IAAI,iCAAiC,CAAC,IAAI,MAAM,UAAU;AAGrL,UAAI,CAAC,SAAS,UAAU,CAAC,qBAAqB;AAC5C,YAAI,qBAAqB,KAAK,IAAI,KAAK,IAAI,MAAM,UAAU,KAAK,MAAM,GAAG,KAAK,IAAI,MAAM,UAAU,KAAK,MAAM,CAAC,IAAI,mBAAmB;AACnI;AAAA,QACF;AACA,aAAK,aAAa,KAAK,IAAI;AAAA,MAC7B;AACA,UAAI,SAAS;AACX,YAAI,aAAa;AACf,sBAAY,KAAK,MAAM,UAAU;AACjC,sBAAY,KAAK,MAAM,UAAU;AAAA,QACnC,OAAO;AACL,wBAAc;AAAA,YACZ,GAAG;AAAA,YACH,GAAG;AAAA,YACH,GAAG;AAAA,YACH,GAAG;AAAA,YACH,GAAG;AAAA,YACH,GAAG;AAAA,UACL;AAAA,QACF;AACA,YAAI,YAAY,UAAU,OAAO,YAAY,GAAG,GAAG,EAAE,OAAO,YAAY,GAAG,GAAG,EAAE,OAAO,YAAY,GAAG,GAAG,EAAE,OAAO,YAAY,GAAG,GAAG,EAAE,OAAO,YAAY,GAAG,GAAG,EAAE,OAAO,YAAY,GAAG,GAAG;AAC1L,YAAI,SAAS,mBAAmB,SAAS;AACzC,YAAI,SAAS,gBAAgB,SAAS;AACtC,YAAI,SAAS,eAAe,SAAS;AACrC,YAAI,SAAS,aAAa,SAAS;AACnC,iBAAS;AACT,iBAAS;AACT,mBAAW;AAAA,MACb;AACA,UAAI,cAAc,IAAI,eAAe;AAAA,IACvC;AAAA,EACF;AAAA,EACA,cAAc,SAAS,eAAe;AAGpC,QAAI,CAAC,SAAS;AACZ,UAAI,YAAY,KAAK,QAAQ,iBAAiB,SAAS,OAAO,QAC5D,OAAO,QAAQ,QAAQ,MAAM,yBAAyB,MAAM,SAAS,GACrE,UAAU,KAAK;AAGjB,UAAI,yBAAyB;AAE3B,8BAAsB;AACtB,eAAO,IAAI,qBAAqB,UAAU,MAAM,YAAY,IAAI,qBAAqB,WAAW,MAAM,UAAU,wBAAwB,UAAU;AAChJ,gCAAsB,oBAAoB;AAAA,QAC5C;AACA,YAAI,wBAAwB,SAAS,QAAQ,wBAAwB,SAAS,iBAAiB;AAC7F,cAAI,wBAAwB,SAAU,uBAAsB,0BAA0B;AACtF,eAAK,OAAO,oBAAoB;AAChC,eAAK,QAAQ,oBAAoB;AAAA,QACnC,OAAO;AACL,gCAAsB,0BAA0B;AAAA,QAClD;AACA,2CAAmC,wBAAwB,mBAAmB;AAAA,MAChF;AACA,gBAAU,OAAO,UAAU,IAAI;AAC/B,MAAAA,aAAY,SAAS,QAAQ,YAAY,KAAK;AAC9C,MAAAA,aAAY,SAAS,QAAQ,eAAe,IAAI;AAChD,MAAAA,aAAY,SAAS,QAAQ,WAAW,IAAI;AAC5C,UAAI,SAAS,cAAc,EAAE;AAC7B,UAAI,SAAS,aAAa,EAAE;AAC5B,UAAI,SAAS,cAAc,YAAY;AACvC,UAAI,SAAS,UAAU,CAAC;AACxB,UAAI,SAAS,OAAO,KAAK,GAAG;AAC5B,UAAI,SAAS,QAAQ,KAAK,IAAI;AAC9B,UAAI,SAAS,SAAS,KAAK,KAAK;AAChC,UAAI,SAAS,UAAU,KAAK,MAAM;AAClC,UAAI,SAAS,WAAW,KAAK;AAC7B,UAAI,SAAS,YAAY,0BAA0B,aAAa,OAAO;AACvE,UAAI,SAAS,UAAU,QAAQ;AAC/B,UAAI,SAAS,iBAAiB,MAAM;AACpC,eAAS,QAAQ;AACjB,gBAAU,YAAY,OAAO;AAG7B,UAAI,SAAS,oBAAoB,kBAAkB,SAAS,QAAQ,MAAM,KAAK,IAAI,MAAM,OAAO,iBAAiB,SAAS,QAAQ,MAAM,MAAM,IAAI,MAAM,GAAG;AAAA,IAC7J;AAAA,EACF;AAAA,EACA,cAAc,SAAS,aAAwB,KAAiB,UAAU;AACxE,QAAI,QAAQ;AACZ,QAAI,eAAe,IAAI;AACvB,QAAI,UAAU,MAAM;AACpB,IAAAX,aAAY,aAAa,MAAM;AAAA,MAC7B;AAAA,IACF,CAAC;AACD,QAAI,SAAS,eAAe;AAC1B,WAAK,QAAQ;AACb;AAAA,IACF;AACA,IAAAA,aAAY,cAAc,IAAI;AAC9B,QAAI,CAAC,SAAS,eAAe;AAC3B,gBAAU,MAAM,MAAM;AACtB,cAAQ,gBAAgB,IAAI;AAC5B,cAAQ,YAAY;AACpB,cAAQ,MAAM,aAAa,IAAI;AAC/B,WAAK,WAAW;AAChB,MAAAW,aAAY,SAAS,KAAK,QAAQ,aAAa,KAAK;AACpD,eAAS,QAAQ;AAAA,IACnB;AAGA,UAAM,UAAU,UAAU,WAAY;AACpC,MAAAX,aAAY,SAAS,KAAK;AAC1B,UAAI,SAAS,cAAe;AAC5B,UAAI,CAAC,MAAM,QAAQ,mBAAmB;AACpC,eAAO,aAAa,SAAS,MAAM;AAAA,MACrC;AACA,YAAM,WAAW;AACjB,qBAAe;AAAA,QACb,UAAU;AAAA,QACV,MAAM;AAAA,MACR,CAAC;AAAA,IACH,CAAC;AACD,KAAC,YAAYW,aAAY,QAAQ,QAAQ,WAAW,IAAI;AAGxD,QAAI,UAAU;AACZ,wBAAkB;AAClB,YAAM,UAAU,YAAY,MAAM,kBAAkB,EAAE;AAAA,IACxD,OAAO;AAEL,UAAI,UAAU,WAAW,MAAM,OAAO;AACtC,UAAI,UAAU,YAAY,MAAM,OAAO;AACvC,UAAI,UAAU,eAAe,MAAM,OAAO;AAC1C,UAAI,cAAc;AAChB,qBAAa,gBAAgB;AAC7B,gBAAQ,WAAW,QAAQ,QAAQ,KAAK,OAAO,cAAc,MAAM;AAAA,MACrE;AACA,SAAG,UAAU,QAAQ,KAAK;AAG1B,UAAI,QAAQ,aAAa,eAAe;AAAA,IAC1C;AACA,0BAAsB;AACtB,UAAM,eAAe,UAAU,MAAM,aAAa,KAAK,OAAO,UAAU,GAAG,CAAC;AAC5E,OAAG,UAAU,eAAe,KAAK;AACjC,YAAQ;AACR,WAAO,aAAa,EAAE,gBAAgB;AACtC,QAAI,QAAQ;AACV,UAAI,SAAS,MAAM,eAAe,MAAM;AAAA,IAC1C;AAAA,EACF;AAAA;AAAA,EAEA,aAAa,SAAS,YAAuB,KAAK;AAChD,QAAI,KAAK,KAAK,IACZ,SAAS,IAAI,QACb,UACA,YACA,QACA,UAAU,KAAK,SACf,QAAQ,QAAQ,OAChB,iBAAiB,SAAS,QAC1B,UAAU,gBAAgB,OAC1B,UAAU,QAAQ,MAClB,eAAe,eAAe,gBAC9B,UACA,QAAQ,MACR,iBAAiB;AACnB,QAAI,QAAS;AACb,aAAS,cAAc,MAAM,OAAO;AAClC,MAAAX,aAAY,MAAM,OAAO,eAAe;AAAA,QACtC;AAAA,QACA;AAAA,QACA,MAAM,WAAW,aAAa;AAAA,QAC9B;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,QAAQ,SAAS,OAAOY,SAAQC,QAAO;AACrC,iBAAO,QAAQ,QAAQ,IAAI,QAAQ,UAAUD,SAAQ,QAAQA,OAAM,GAAG,KAAKC,MAAK;AAAA,QAClF;AAAA,QACA;AAAA,MACF,GAAG,KAAK,CAAC;AAAA,IACX;AAGA,aAAS,UAAU;AACjB,oBAAc,0BAA0B;AACxC,YAAM,sBAAsB;AAC5B,UAAI,UAAU,cAAc;AAC1B,qBAAa,sBAAsB;AAAA,MACrC;AAAA,IACF;AAGA,aAAS,UAAU,WAAW;AAC5B,oBAAc,qBAAqB;AAAA,QACjC;AAAA,MACF,CAAC;AACD,UAAI,WAAW;AAEb,YAAI,SAAS;AACX,yBAAe,WAAW;AAAA,QAC5B,OAAO;AACL,yBAAe,WAAW,KAAK;AAAA,QACjC;AACA,YAAI,UAAU,cAAc;AAE1B,UAAAF,aAAY,QAAQ,cAAc,YAAY,QAAQ,aAAa,eAAe,QAAQ,YAAY,KAAK;AAC3G,UAAAA,aAAY,QAAQ,QAAQ,YAAY,IAAI;AAAA,QAC9C;AACA,YAAI,gBAAgB,SAAS,UAAU,SAAS,QAAQ;AACtD,wBAAc;AAAA,QAChB,WAAW,UAAU,SAAS,UAAU,aAAa;AACnD,wBAAc;AAAA,QAChB;AAGA,YAAI,iBAAiB,OAAO;AAC1B,gBAAM,wBAAwB;AAAA,QAChC;AACA,cAAM,WAAW,WAAY;AAC3B,wBAAc,2BAA2B;AACzC,gBAAM,wBAAwB;AAAA,QAChC,CAAC;AACD,YAAI,UAAU,cAAc;AAC1B,uBAAa,WAAW;AACxB,uBAAa,wBAAwB;AAAA,QACvC;AAAA,MACF;AAGA,UAAI,WAAW,UAAU,CAAC,OAAO,YAAY,WAAW,MAAM,CAAC,OAAO,UAAU;AAC9E,qBAAa;AAAA,MACf;AAGA,UAAI,CAAC,QAAQ,kBAAkB,CAAC,IAAI,UAAU,WAAW,UAAU;AACjE,eAAO,WAAW,OAAO,EAAE,iBAAiB,IAAI,MAAM;AAGtD,SAAC,aAAa,8BAA8B,GAAG;AAAA,MACjD;AACA,OAAC,QAAQ,kBAAkB,IAAI,mBAAmB,IAAI,gBAAgB;AACtE,aAAO,iBAAiB;AAAA,IAC1B;AAGA,aAAS,UAAU;AACjB,iBAAW,MAAM,MAAM;AACvB,0BAAoB,MAAM,QAAQ,QAAQ,SAAS;AACnD,qBAAe;AAAA,QACb,UAAU;AAAA,QACV,MAAM;AAAA,QACN,MAAM;AAAA,QACN;AAAA,QACA;AAAA,QACA,eAAe;AAAA,MACjB,CAAC;AAAA,IACH;AACA,QAAI,IAAI,mBAAmB,QAAQ;AACjC,UAAI,cAAc,IAAI,eAAe;AAAA,IACvC;AACA,aAAS,QAAQ,QAAQ,QAAQ,WAAW,IAAI,IAAI;AACpD,kBAAc,UAAU;AACxB,QAAI,SAAS,cAAe,QAAO;AACnC,QAAI,OAAO,SAAS,IAAI,MAAM,KAAK,OAAO,YAAY,OAAO,cAAc,OAAO,cAAc,MAAM,0BAA0B,QAAQ;AACtI,aAAO,UAAU,KAAK;AAAA,IACxB;AACA,sBAAkB;AAClB,QAAI,kBAAkB,CAAC,QAAQ,aAAa,UAAU,YAAY,SAAS,aAAa,UACtF,gBAAgB,SAAS,KAAK,cAAc,YAAY,UAAU,MAAM,gBAAgB,QAAQ,GAAG,MAAM,MAAM,SAAS,MAAM,gBAAgB,QAAQ,GAAG,IAAI;AAC7J,iBAAW,KAAK,cAAc,KAAK,MAAM,MAAM;AAC/C,iBAAW,QAAQ,MAAM;AACzB,oBAAc,eAAe;AAC7B,UAAI,SAAS,cAAe,QAAO;AACnC,UAAI,QAAQ;AACV,mBAAW;AACX,gBAAQ;AACR,aAAK,WAAW;AAChB,sBAAc,QAAQ;AACtB,YAAI,CAAC,SAAS,eAAe;AAC3B,cAAI,QAAQ;AACV,mBAAO,aAAa,QAAQ,MAAM;AAAA,UACpC,OAAO;AACL,mBAAO,YAAY,MAAM;AAAA,UAC3B;AAAA,QACF;AACA,eAAO,UAAU,IAAI;AAAA,MACvB;AACA,UAAI,cAAc,UAAU,IAAI,QAAQ,SAAS;AACjD,UAAI,CAAC,eAAe,aAAa,KAAK,UAAU,IAAI,KAAK,CAAC,YAAY,UAAU;AAI9E,YAAI,gBAAgB,QAAQ;AAC1B,iBAAO,UAAU,KAAK;AAAA,QACxB;AAGA,YAAI,eAAe,OAAO,IAAI,QAAQ;AACpC,mBAAS;AAAA,QACX;AACA,YAAI,QAAQ;AACV,uBAAa,QAAQ,MAAM;AAAA,QAC7B;AACA,YAAI,QAAQ,QAAQ,IAAI,QAAQ,UAAU,QAAQ,YAAY,KAAK,CAAC,CAAC,MAAM,MAAM,OAAO;AACtF,kBAAQ;AACR,cAAI,eAAe,YAAY,aAAa;AAE1C,eAAG,aAAa,QAAQ,YAAY,WAAW;AAAA,UACjD,OAAO;AACL,eAAG,YAAY,MAAM;AAAA,UACvB;AACA,qBAAW;AAEX,kBAAQ;AACR,iBAAO,UAAU,IAAI;AAAA,QACvB;AAAA,MACF,WAAW,eAAe,cAAc,KAAK,UAAU,IAAI,GAAG;AAE5D,YAAI,aAAa,SAAS,IAAI,GAAG,SAAS,IAAI;AAC9C,YAAI,eAAe,QAAQ;AACzB,iBAAO,UAAU,KAAK;AAAA,QACxB;AACA,iBAAS;AACT,qBAAa,QAAQ,MAAM;AAC3B,YAAI,QAAQ,QAAQ,IAAI,QAAQ,UAAU,QAAQ,YAAY,KAAK,KAAK,MAAM,OAAO;AACnF,kBAAQ;AACR,aAAG,aAAa,QAAQ,UAAU;AAClC,qBAAW;AAEX,kBAAQ;AACR,iBAAO,UAAU,IAAI;AAAA,QACvB;AAAA,MACF,WAAW,OAAO,eAAe,IAAI;AACnC,qBAAa,QAAQ,MAAM;AAC3B,YAAI,YAAY,GACd,uBACA,iBAAiB,OAAO,eAAe,IACvC,kBAAkB,CAAC,mBAAmB,OAAO,YAAY,OAAO,UAAU,UAAU,OAAO,YAAY,OAAO,UAAU,YAAY,QAAQ,GAC5I,QAAQ,WAAW,QAAQ,QAC3B,kBAAkB,eAAe,QAAQ,OAAO,KAAK,KAAK,eAAe,QAAQ,OAAO,KAAK,GAC7F,eAAe,kBAAkB,gBAAgB,YAAY;AAC/D,YAAI,eAAe,QAAQ;AACzB,kCAAwB,WAAW,KAAK;AACxC,kCAAwB;AACxB,mCAAyB,CAAC,mBAAmB,QAAQ,cAAc;AAAA,QACrE;AACA,oBAAY,kBAAkB,KAAK,QAAQ,YAAY,UAAU,kBAAkB,IAAI,QAAQ,eAAe,QAAQ,yBAAyB,OAAO,QAAQ,gBAAgB,QAAQ,uBAAuB,wBAAwB,eAAe,MAAM;AAC1P,YAAI;AACJ,YAAI,cAAc,GAAG;AAEnB,cAAI,YAAY,MAAM,MAAM;AAC5B,aAAG;AACD,yBAAa;AACb,sBAAU,SAAS,SAAS,SAAS;AAAA,UACvC,SAAS,YAAY,IAAI,SAAS,SAAS,MAAM,UAAU,YAAY;AAAA,QACzE;AAEA,YAAI,cAAc,KAAK,YAAY,QAAQ;AACzC,iBAAO,UAAU,KAAK;AAAA,QACxB;AACA,qBAAa;AACb,wBAAgB;AAChB,YAAI,cAAc,OAAO,oBACvB,QAAQ;AACV,gBAAQ,cAAc;AACtB,YAAI,aAAa,QAAQ,QAAQ,IAAI,QAAQ,UAAU,QAAQ,YAAY,KAAK,KAAK;AACrF,YAAI,eAAe,OAAO;AACxB,cAAI,eAAe,KAAK,eAAe,IAAI;AACzC,oBAAQ,eAAe;AAAA,UACzB;AACA,oBAAU;AACV,qBAAW,WAAW,EAAE;AACxB,kBAAQ;AACR,cAAI,SAAS,CAAC,aAAa;AACzB,eAAG,YAAY,MAAM;AAAA,UACvB,OAAO;AACL,mBAAO,WAAW,aAAa,QAAQ,QAAQ,cAAc,MAAM;AAAA,UACrE;AAGA,cAAI,iBAAiB;AACnB,qBAAS,iBAAiB,GAAG,eAAe,gBAAgB,SAAS;AAAA,UACvE;AACA,qBAAW,OAAO;AAGlB,cAAI,0BAA0B,UAAa,CAAC,wBAAwB;AAClE,iCAAqB,KAAK,IAAI,wBAAwB,QAAQ,MAAM,EAAE,KAAK,CAAC;AAAA,UAC9E;AACA,kBAAQ;AACR,iBAAO,UAAU,IAAI;AAAA,QACvB;AAAA,MACF;AACA,UAAI,GAAG,SAAS,MAAM,GAAG;AACvB,eAAO,UAAU,KAAK;AAAA,MACxB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EACA,uBAAuB;AAAA,EACvB,gBAAgB,SAAS,iBAAiB;AACxC,QAAI,UAAU,aAAa,KAAK,YAAY;AAC5C,QAAI,UAAU,aAAa,KAAK,YAAY;AAC5C,QAAI,UAAU,eAAe,KAAK,YAAY;AAC9C,QAAI,UAAU,YAAY,6BAA6B;AACvD,QAAI,UAAU,aAAa,6BAA6B;AACxD,QAAI,UAAU,aAAa,6BAA6B;AAAA,EAC1D;AAAA,EACA,cAAc,SAAS,eAAe;AACpC,QAAI,gBAAgB,KAAK,GAAG;AAC5B,QAAI,eAAe,WAAW,KAAK,OAAO;AAC1C,QAAI,eAAe,YAAY,KAAK,OAAO;AAC3C,QAAI,eAAe,aAAa,KAAK,OAAO;AAC5C,QAAI,eAAe,iBAAiB,KAAK,OAAO;AAChD,QAAI,eAAe,eAAe,KAAK,OAAO;AAC9C,QAAI,UAAU,eAAe,IAAI;AAAA,EACnC;AAAA,EACA,SAAS,SAAS,QAAmB,KAAK;AACxC,QAAI,KAAK,KAAK,IACZ,UAAU,KAAK;AAGjB,eAAW,MAAM,MAAM;AACvB,wBAAoB,MAAM,QAAQ,QAAQ,SAAS;AACnD,IAAAX,aAAY,QAAQ,MAAM;AAAA,MACxB;AAAA,IACF,CAAC;AACD,eAAW,UAAU,OAAO;AAG5B,eAAW,MAAM,MAAM;AACvB,wBAAoB,MAAM,QAAQ,QAAQ,SAAS;AACnD,QAAI,SAAS,eAAe;AAC1B,WAAK,SAAS;AACd;AAAA,IACF;AACA,0BAAsB;AACtB,6BAAyB;AACzB,4BAAwB;AACxB,kBAAc,KAAK,OAAO;AAC1B,iBAAa,KAAK,eAAe;AACjC,oBAAgB,KAAK,OAAO;AAC5B,oBAAgB,KAAK,YAAY;AAGjC,QAAI,KAAK,iBAAiB;AACxB,UAAI,UAAU,QAAQ,IAAI;AAC1B,UAAI,IAAI,aAAa,KAAK,YAAY;AAAA,IACxC;AACA,SAAK,eAAe;AACpB,SAAK,aAAa;AAClB,QAAI,QAAQ;AACV,UAAI,SAAS,MAAM,eAAe,EAAE;AAAA,IACtC;AACA,QAAI,QAAQ,aAAa,EAAE;AAC3B,QAAI,KAAK;AACP,UAAI,OAAO;AACT,YAAI,cAAc,IAAI,eAAe;AACrC,SAAC,QAAQ,cAAc,IAAI,gBAAgB;AAAA,MAC7C;AACA,iBAAW,QAAQ,cAAc,QAAQ,WAAW,YAAY,OAAO;AACvE,UAAI,WAAW,YAAY,eAAe,YAAY,gBAAgB,SAAS;AAE7E,mBAAW,QAAQ,cAAc,QAAQ,WAAW,YAAY,OAAO;AAAA,MACzE;AACA,UAAI,QAAQ;AACV,YAAI,KAAK,iBAAiB;AACxB,cAAI,QAAQ,WAAW,IAAI;AAAA,QAC7B;AACA,0BAAkB,MAAM;AACxB,eAAO,MAAM,aAAa,IAAI;AAI9B,YAAI,SAAS,CAAC,qBAAqB;AACjC,UAAAW,aAAY,QAAQ,cAAc,YAAY,QAAQ,aAAa,KAAK,QAAQ,YAAY,KAAK;AAAA,QACnG;AACA,QAAAA,aAAY,QAAQ,KAAK,QAAQ,aAAa,KAAK;AAGnD,uBAAe;AAAA,UACb,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM;AAAA,UACN,UAAU;AAAA,UACV,mBAAmB;AAAA,UACnB,eAAe;AAAA,QACjB,CAAC;AACD,YAAI,WAAW,UAAU;AACvB,cAAI,YAAY,GAAG;AAEjB,2BAAe;AAAA,cACb,QAAQ;AAAA,cACR,MAAM;AAAA,cACN,MAAM;AAAA,cACN,QAAQ;AAAA,cACR,eAAe;AAAA,YACjB,CAAC;AAGD,2BAAe;AAAA,cACb,UAAU;AAAA,cACV,MAAM;AAAA,cACN,MAAM;AAAA,cACN,eAAe;AAAA,YACjB,CAAC;AAGD,2BAAe;AAAA,cACb,QAAQ;AAAA,cACR,MAAM;AAAA,cACN,MAAM;AAAA,cACN,QAAQ;AAAA,cACR,eAAe;AAAA,YACjB,CAAC;AACD,2BAAe;AAAA,cACb,UAAU;AAAA,cACV,MAAM;AAAA,cACN,MAAM;AAAA,cACN,eAAe;AAAA,YACjB,CAAC;AAAA,UACH;AACA,yBAAe,YAAY,KAAK;AAAA,QAClC,OAAO;AACL,cAAI,aAAa,UAAU;AACzB,gBAAI,YAAY,GAAG;AAEjB,6BAAe;AAAA,gBACb,UAAU;AAAA,gBACV,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,eAAe;AAAA,cACjB,CAAC;AACD,6BAAe;AAAA,gBACb,UAAU;AAAA,gBACV,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,eAAe;AAAA,cACjB,CAAC;AAAA,YACH;AAAA,UACF;AAAA,QACF;AACA,YAAI,SAAS,QAAQ;AAEnB,cAAI,YAAY,QAAQ,aAAa,IAAI;AACvC,uBAAW;AACX,gCAAoB;AAAA,UACtB;AACA,yBAAe;AAAA,YACb,UAAU;AAAA,YACV,MAAM;AAAA,YACN,MAAM;AAAA,YACN,eAAe;AAAA,UACjB,CAAC;AAGD,eAAK,KAAK;AAAA,QACZ;AAAA,MACF;AAAA,IACF;AACA,SAAK,SAAS;AAAA,EAChB;AAAA,EACA,UAAU,SAAS,WAAW;AAC5B,IAAAX,aAAY,WAAW,IAAI;AAC3B,aAAS,SAAS,WAAW,UAAU,SAAS,UAAU,aAAa,cAAc,SAAS,WAAW,QAAQ,WAAW,oBAAoB,WAAW,oBAAoB,aAAa,gBAAgB,cAAc,cAAc,SAAS,UAAU,SAAS,QAAQ,SAAS,QAAQ,SAAS,SAAS;AAC/S,sBAAkB,QAAQ,SAAU,IAAI;AACtC,SAAG,UAAU;AAAA,IACf,CAAC;AACD,sBAAkB,SAAS,SAAS,SAAS;AAAA,EAC/C;AAAA,EACA,aAAa,SAAS,YAAuB,KAAK;AAChD,YAAQ,IAAI,MAAM;AAAA,MAChB,KAAK;AAAA,MACL,KAAK;AACH,aAAK,QAAQ,GAAG;AAChB;AAAA,MACF,KAAK;AAAA,MACL,KAAK;AACH,YAAI,QAAQ;AACV,eAAK,YAAY,GAAG;AACpB,0BAAgB,GAAG;AAAA,QACrB;AACA;AAAA,MACF,KAAK;AACH,YAAI,eAAe;AACnB;AAAA,IACJ;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA,EAKA,SAAS,SAAS,UAAU;AAC1B,QAAI,QAAQ,CAAC,GACX,IACA,WAAW,KAAK,GAAG,UACnB,IAAI,GACJ,IAAI,SAAS,QACb,UAAU,KAAK;AACjB,WAAO,IAAI,GAAG,KAAK;AACjB,WAAK,SAAS,CAAC;AACf,UAAI,QAAQ,IAAI,QAAQ,WAAW,KAAK,IAAI,KAAK,GAAG;AAClD,cAAM,KAAK,GAAG,aAAa,QAAQ,UAAU,KAAK,YAAY,EAAE,CAAC;AAAA,MACnE;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,SAAS,KAAK,OAAO,cAAc;AACvC,QAAI,QAAQ,CAAC,GACXP,UAAS,KAAK;AAChB,SAAK,QAAQ,EAAE,QAAQ,SAAU,IAAI,GAAG;AACtC,UAAI,KAAKA,QAAO,SAAS,CAAC;AAC1B,UAAI,QAAQ,IAAI,KAAK,QAAQ,WAAWA,SAAQ,KAAK,GAAG;AACtD,cAAM,EAAE,IAAI;AAAA,MACd;AAAA,IACF,GAAG,IAAI;AACP,oBAAgB,KAAK,sBAAsB;AAC3C,UAAM,QAAQ,SAAU,IAAI;AAC1B,UAAI,MAAM,EAAE,GAAG;AACb,QAAAA,QAAO,YAAY,MAAM,EAAE,CAAC;AAC5B,QAAAA,QAAO,YAAY,MAAM,EAAE,CAAC;AAAA,MAC9B;AAAA,IACF,CAAC;AACD,oBAAgB,KAAK,WAAW;AAAA,EAClC;AAAA;AAAA;AAAA;AAAA,EAIA,MAAM,SAAS,OAAO;AACpB,QAAI,QAAQ,KAAK,QAAQ;AACzB,aAAS,MAAM,OAAO,MAAM,IAAI,IAAI;AAAA,EACtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,SAAS,SAAS,UAAU,IAAI,UAAU;AACxC,WAAO,QAAQ,IAAI,YAAY,KAAK,QAAQ,WAAW,KAAK,IAAI,KAAK;AAAA,EACvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,QAAQ,SAAS,OAAO,MAAM,OAAO;AACnC,QAAI,UAAU,KAAK;AACnB,QAAI,UAAU,QAAQ;AACpB,aAAO,QAAQ,IAAI;AAAA,IACrB,OAAO;AACL,UAAI,gBAAgB,cAAc,aAAa,MAAM,MAAM,KAAK;AAChE,UAAI,OAAO,kBAAkB,aAAa;AACxC,gBAAQ,IAAI,IAAI;AAAA,MAClB,OAAO;AACL,gBAAQ,IAAI,IAAI;AAAA,MAClB;AACA,UAAI,SAAS,SAAS;AACpB,sBAAc,OAAO;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAIA,SAAS,SAAS,UAAU;AAC1B,IAAAO,aAAY,WAAW,IAAI;AAC3B,QAAI,KAAK,KAAK;AACd,OAAG,OAAO,IAAI;AACd,QAAI,IAAI,aAAa,KAAK,WAAW;AACrC,QAAI,IAAI,cAAc,KAAK,WAAW;AACtC,QAAI,IAAI,eAAe,KAAK,WAAW;AACvC,QAAI,KAAK,iBAAiB;AACxB,UAAI,IAAI,YAAY,IAAI;AACxB,UAAI,IAAI,aAAa,IAAI;AAAA,IAC3B;AAEA,UAAM,UAAU,QAAQ,KAAK,GAAG,iBAAiB,aAAa,GAAG,SAAUc,KAAI;AAC7E,MAAAA,IAAG,gBAAgB,WAAW;AAAA,IAChC,CAAC;AACD,SAAK,QAAQ;AACb,SAAK,0BAA0B;AAC/B,cAAU,OAAO,UAAU,QAAQ,KAAK,EAAE,GAAG,CAAC;AAC9C,SAAK,KAAK,KAAK;AAAA,EACjB;AAAA,EACA,YAAY,SAAS,aAAa;AAChC,QAAI,CAAC,aAAa;AAChB,MAAAd,aAAY,aAAa,IAAI;AAC7B,UAAI,SAAS,cAAe;AAC5B,UAAI,SAAS,WAAW,MAAM;AAC9B,UAAI,KAAK,QAAQ,qBAAqB,QAAQ,YAAY;AACxD,gBAAQ,WAAW,YAAY,OAAO;AAAA,MACxC;AACA,oBAAc;AAAA,IAChB;AAAA,EACF;AAAA,EACA,YAAY,SAAS,WAAWD,cAAa;AAC3C,QAAIA,aAAY,gBAAgB,SAAS;AACvC,WAAK,WAAW;AAChB;AAAA,IACF;AACA,QAAI,aAAa;AACf,MAAAC,aAAY,aAAa,IAAI;AAC7B,UAAI,SAAS,cAAe;AAG5B,UAAI,OAAO,cAAc,UAAU,CAAC,KAAK,QAAQ,MAAM,aAAa;AAClE,eAAO,aAAa,SAAS,MAAM;AAAA,MACrC,WAAW,QAAQ;AACjB,eAAO,aAAa,SAAS,MAAM;AAAA,MACrC,OAAO;AACL,eAAO,YAAY,OAAO;AAAA,MAC5B;AACA,UAAI,KAAK,QAAQ,MAAM,aAAa;AAClC,aAAK,QAAQ,QAAQ,OAAO;AAAA,MAC9B;AACA,UAAI,SAAS,WAAW,EAAE;AAC1B,oBAAc;AAAA,IAChB;AAAA,EACF;AACF;AACA,SAAS,gBAA2B,KAAK;AACvC,MAAI,IAAI,cAAc;AACpB,QAAI,aAAa,aAAa;AAAA,EAChC;AACA,MAAI,cAAc,IAAI,eAAe;AACvC;AACA,SAAS,QAAQ,QAAQ,MAAMK,SAAQ,UAAU,UAAU,YAAY,eAAe,iBAAiB;AACrG,MAAI,KACF,WAAW,OAAO,OAAO,GACzB,WAAW,SAAS,QAAQ,QAC5B;AAEF,MAAI,OAAO,eAAe,CAAC,cAAc,CAAC,MAAM;AAC9C,UAAM,IAAI,YAAY,QAAQ;AAAA,MAC5B,SAAS;AAAA,MACT,YAAY;AAAA,IACd,CAAC;AAAA,EACH,OAAO;AACL,UAAM,SAAS,YAAY,OAAO;AAClC,QAAI,UAAU,QAAQ,MAAM,IAAI;AAAA,EAClC;AACA,MAAI,KAAK;AACT,MAAI,OAAO;AACX,MAAI,UAAUA;AACd,MAAI,cAAc;AAClB,MAAI,UAAU,YAAY;AAC1B,MAAI,cAAc,cAAc,QAAQ,IAAI;AAC5C,MAAI,kBAAkB;AACtB,MAAI,gBAAgB;AACpB,SAAO,cAAc,GAAG;AACxB,MAAI,UAAU;AACZ,aAAS,SAAS,KAAK,UAAU,KAAK,aAAa;AAAA,EACrD;AACA,SAAO;AACT;AACA,SAAS,kBAAkB,IAAI;AAC7B,KAAG,YAAY;AACjB;AACA,SAAS,YAAY;AACnB,YAAU;AACZ;AACA,SAAS,cAAc,KAAK,UAAU,UAAU;AAC9C,MAAI,cAAc,QAAQ,SAAS,SAAS,IAAI,GAAG,SAAS,SAAS,IAAI,CAAC;AAC1E,MAAI,sBAAsB,kCAAkC,SAAS,IAAI,SAAS,SAAS,OAAO;AAClG,MAAI,SAAS;AACb,SAAO,WAAW,IAAI,UAAU,oBAAoB,OAAO,UAAU,IAAI,UAAU,YAAY,OAAO,IAAI,UAAU,YAAY,QAAQ,IAAI,UAAU,oBAAoB,MAAM,UAAU,IAAI,UAAU,YAAY,UAAU,IAAI,UAAU,YAAY;AAC1P;AACA,SAAS,aAAa,KAAK,UAAU,UAAU;AAC7C,MAAI,aAAa,QAAQ,UAAU,SAAS,IAAI,SAAS,QAAQ,SAAS,CAAC;AAC3E,MAAI,sBAAsB,kCAAkC,SAAS,IAAI,SAAS,SAAS,OAAO;AAClG,MAAI,SAAS;AACb,SAAO,WAAW,IAAI,UAAU,oBAAoB,QAAQ,UAAU,IAAI,UAAU,WAAW,UAAU,IAAI,UAAU,WAAW,OAAO,IAAI,UAAU,oBAAoB,SAAS,UAAU,IAAI,UAAU,WAAW,SAAS,IAAI,UAAU,WAAW;AAC3P;AACA,SAAS,kBAAkB,KAAK,QAAQ,YAAY,UAAU,eAAe,uBAAuB,YAAY,cAAc;AAC5H,MAAI,cAAc,WAAW,IAAI,UAAU,IAAI,SAC7C,eAAe,WAAW,WAAW,SAAS,WAAW,OACzD,WAAW,WAAW,WAAW,MAAM,WAAW,MAClD,WAAW,WAAW,WAAW,SAAS,WAAW,OACrD,SAAS;AACX,MAAI,CAAC,YAAY;AAEf,QAAI,gBAAgB,qBAAqB,eAAe,eAAe;AAGrE,UAAI,CAAC,0BAA0B,kBAAkB,IAAI,cAAc,WAAW,eAAe,wBAAwB,IAAI,cAAc,WAAW,eAAe,wBAAwB,IAAI;AAE3L,gCAAwB;AAAA,MAC1B;AACA,UAAI,CAAC,uBAAuB;AAE1B,YAAI,kBAAkB,IAAI,cAAc,WAAW,qBACjD,cAAc,WAAW,oBAAoB;AAC7C,iBAAO,CAAC;AAAA,QACV;AAAA,MACF,OAAO;AACL,iBAAS;AAAA,MACX;AAAA,IACF,OAAO;AAEL,UAAI,cAAc,WAAW,gBAAgB,IAAI,iBAAiB,KAAK,cAAc,WAAW,gBAAgB,IAAI,iBAAiB,GAAG;AACtI,eAAO,oBAAoB,MAAM;AAAA,MACnC;AAAA,IACF;AAAA,EACF;AACA,WAAS,UAAU;AACnB,MAAI,QAAQ;AAEV,QAAI,cAAc,WAAW,eAAe,wBAAwB,KAAK,cAAc,WAAW,eAAe,wBAAwB,GAAG;AAC1I,aAAO,cAAc,WAAW,eAAe,IAAI,IAAI;AAAA,IACzD;AAAA,EACF;AACA,SAAO;AACT;AAQA,SAAS,oBAAoB,QAAQ;AACnC,MAAI,MAAM,MAAM,IAAI,MAAM,MAAM,GAAG;AACjC,WAAO;AAAA,EACT,OAAO;AACL,WAAO;AAAA,EACT;AACF;AAQA,SAAS,YAAY,IAAI;AACvB,MAAI,MAAM,GAAG,UAAU,GAAG,YAAY,GAAG,MAAM,GAAG,OAAO,GAAG,aAC1D,IAAI,IAAI,QACR,MAAM;AACR,SAAO,KAAK;AACV,WAAO,IAAI,WAAW,CAAC;AAAA,EACzB;AACA,SAAO,IAAI,SAAS,EAAE;AACxB;AACA,SAAS,uBAAuB,MAAM;AACpC,oBAAkB,SAAS;AAC3B,MAAI,SAAS,KAAK,qBAAqB,OAAO;AAC9C,MAAI,MAAM,OAAO;AACjB,SAAO,OAAO;AACZ,QAAI,KAAK,OAAO,GAAG;AACnB,OAAG,WAAW,kBAAkB,KAAK,EAAE;AAAA,EACzC;AACF;AACA,SAAS,UAAU,IAAI;AACrB,SAAO,WAAW,IAAI,CAAC;AACzB;AACA,SAAS,gBAAgB,IAAI;AAC3B,SAAO,aAAa,EAAE;AACxB;AAGA,IAAI,gBAAgB;AAClB,KAAG,UAAU,aAAa,SAAU,KAAK;AACvC,SAAK,SAAS,UAAU,wBAAwB,IAAI,YAAY;AAC9D,UAAI,eAAe;AAAA,IACrB;AAAA,EACF,CAAC;AACH;AAGA,SAAS,QAAQ;AAAA,EACf;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,IAAI,SAAS,GAAG,IAAI,UAAU;AAC5B,WAAO,CAAC,CAAC,QAAQ,IAAI,UAAU,IAAI,KAAK;AAAA,EAC1C;AAAA,EACA,QAAQU;AAAA,EACR;AAAA,EACA;AAAA,EACA,aAAaJ;AAAA,EACb;AAAA,EACA;AAAA,EACA,UAAU;AAAA,EACV,gBAAgB;AAAA,EAChB,iBAAiB;AAAA,EACjB;AAAA,EACA;AACF;AAOA,SAAS,MAAM,SAAU,SAAS;AAChC,SAAO,QAAQ,OAAO;AACxB;AAMA,SAAS,QAAQ,WAAY;AAC3B,WAAS,OAAO,UAAU,QAAQK,WAAU,IAAI,MAAM,IAAI,GAAG,OAAO,GAAG,OAAO,MAAM,QAAQ;AAC1F,IAAAA,SAAQ,IAAI,IAAI,UAAU,IAAI;AAAA,EAChC;AACA,MAAIA,SAAQ,CAAC,EAAE,gBAAgB,MAAO,CAAAA,WAAUA,SAAQ,CAAC;AACzD,EAAAA,SAAQ,QAAQ,SAAU,QAAQ;AAChC,QAAI,CAAC,OAAO,aAAa,CAAC,OAAO,UAAU,aAAa;AACtD,YAAM,gEAAgE,OAAO,CAAC,EAAE,SAAS,KAAK,MAAM,CAAC;AAAA,IACvG;AACA,QAAI,OAAO,MAAO,UAAS,QAAQ,eAAe,eAAe,CAAC,GAAG,SAAS,KAAK,GAAG,OAAO,KAAK;AAClG,kBAAc,MAAM,MAAM;AAAA,EAC5B,CAAC;AACH;AAOA,SAAS,SAAS,SAAU,IAAI,SAAS;AACvC,SAAO,IAAI,SAAS,IAAI,OAAO;AACjC;AAGA,SAAS,UAAU;AAEnB,IAAI,cAAc,CAAC;AAAnB,IACE;AADF,IAEE;AAFF,IAGE,YAAY;AAHd,IAIE;AAJF,IAKE;AALF,IAME;AANF,IAOE;AACF,SAAS,mBAAmB;AAC1B,WAAS,aAAa;AACpB,SAAK,WAAW;AAAA,MACd,QAAQ;AAAA,MACR,yBAAyB;AAAA,MACzB,mBAAmB;AAAA,MACnB,aAAa;AAAA,MACb,cAAc;AAAA,IAChB;AAGA,aAAS,MAAM,MAAM;AACnB,UAAI,GAAG,OAAO,CAAC,MAAM,OAAO,OAAO,KAAK,EAAE,MAAM,YAAY;AAC1D,aAAK,EAAE,IAAI,KAAK,EAAE,EAAE,KAAK,IAAI;AAAA,MAC/B;AAAA,IACF;AAAA,EACF;AACA,aAAW,YAAY;AAAA,IACrB,aAAa,SAAS,YAAY,MAAM;AACtC,UAAI,gBAAgB,KAAK;AACzB,UAAI,KAAK,SAAS,iBAAiB;AACjC,WAAG,UAAU,YAAY,KAAK,iBAAiB;AAAA,MACjD,OAAO;AACL,YAAI,KAAK,QAAQ,gBAAgB;AAC/B,aAAG,UAAU,eAAe,KAAK,yBAAyB;AAAA,QAC5D,WAAW,cAAc,SAAS;AAChC,aAAG,UAAU,aAAa,KAAK,yBAAyB;AAAA,QAC1D,OAAO;AACL,aAAG,UAAU,aAAa,KAAK,yBAAyB;AAAA,QAC1D;AAAA,MACF;AAAA,IACF;AAAA,IACA,mBAAmB,SAAS,kBAAkB,OAAO;AACnD,UAAI,gBAAgB,MAAM;AAE1B,UAAI,CAAC,KAAK,QAAQ,kBAAkB,CAAC,cAAc,QAAQ;AACzD,aAAK,kBAAkB,aAAa;AAAA,MACtC;AAAA,IACF;AAAA,IACA,MAAM,SAASC,QAAO;AACpB,UAAI,KAAK,SAAS,iBAAiB;AACjC,YAAI,UAAU,YAAY,KAAK,iBAAiB;AAAA,MAClD,OAAO;AACL,YAAI,UAAU,eAAe,KAAK,yBAAyB;AAC3D,YAAI,UAAU,aAAa,KAAK,yBAAyB;AACzD,YAAI,UAAU,aAAa,KAAK,yBAAyB;AAAA,MAC3D;AACA,sCAAgC;AAChC,uBAAiB;AACjB,qBAAe;AAAA,IACjB;AAAA,IACA,SAAS,SAAS,UAAU;AAC1B,mBAAa,eAAe,WAAW,YAAY,6BAA6B,kBAAkB,kBAAkB;AACpH,kBAAY,SAAS;AAAA,IACvB;AAAA,IACA,2BAA2B,SAAS,0BAA0B,KAAK;AACjE,WAAK,kBAAkB,KAAK,IAAI;AAAA,IAClC;AAAA,IACA,mBAAmB,SAAS,kBAAkB,KAAK,UAAU;AAC3D,UAAI,QAAQ;AACZ,UAAI,KAAK,IAAI,UAAU,IAAI,QAAQ,CAAC,IAAI,KAAK,SAC3C,KAAK,IAAI,UAAU,IAAI,QAAQ,CAAC,IAAI,KAAK,SACzC,OAAO,SAAS,iBAAiB,GAAG,CAAC;AACvC,mBAAa;AAMb,UAAI,YAAY,KAAK,QAAQ,2BAA2B,QAAQ,cAAc,QAAQ;AACpF,mBAAW,KAAK,KAAK,SAAS,MAAM,QAAQ;AAG5C,YAAI,iBAAiB,2BAA2B,MAAM,IAAI;AAC1D,YAAI,cAAc,CAAC,8BAA8B,MAAM,mBAAmB,MAAM,kBAAkB;AAChG,wCAA8B,gCAAgC;AAE9D,uCAA6B,YAAY,WAAY;AACnD,gBAAI,UAAU,2BAA2B,SAAS,iBAAiB,GAAG,CAAC,GAAG,IAAI;AAC9E,gBAAI,YAAY,gBAAgB;AAC9B,+BAAiB;AACjB,+BAAiB;AAAA,YACnB;AACA,uBAAW,KAAK,MAAM,SAAS,SAAS,QAAQ;AAAA,UAClD,GAAG,EAAE;AACL,4BAAkB;AAClB,4BAAkB;AAAA,QACpB;AAAA,MACF,OAAO;AAEL,YAAI,CAAC,KAAK,QAAQ,gBAAgB,2BAA2B,MAAM,IAAI,MAAM,0BAA0B,GAAG;AACxG,2BAAiB;AACjB;AAAA,QACF;AACA,mBAAW,KAAK,KAAK,SAAS,2BAA2B,MAAM,KAAK,GAAG,KAAK;AAAA,MAC9E;AAAA,IACF;AAAA,EACF;AACA,SAAO,SAAS,YAAY;AAAA,IAC1B,YAAY;AAAA,IACZ,qBAAqB;AAAA,EACvB,CAAC;AACH;AACA,SAAS,mBAAmB;AAC1B,cAAY,QAAQ,SAAUC,aAAY;AACxC,kBAAcA,YAAW,GAAG;AAAA,EAC9B,CAAC;AACD,gBAAc,CAAC;AACjB;AACA,SAAS,kCAAkC;AACzC,gBAAc,0BAA0B;AAC1C;AACA,IAAI,aAAa,SAAS,SAAU,KAAK,SAASzB,SAAQ,YAAY;AAEpE,MAAI,CAAC,QAAQ,OAAQ;AACrB,MAAI,KAAK,IAAI,UAAU,IAAI,QAAQ,CAAC,IAAI,KAAK,SAC3C,KAAK,IAAI,UAAU,IAAI,QAAQ,CAAC,IAAI,KAAK,SACzC,OAAO,QAAQ,mBACf,QAAQ,QAAQ,aAChB,cAAc,0BAA0B;AAC1C,MAAI,qBAAqB,OACvB;AAGF,MAAI,iBAAiBA,SAAQ;AAC3B,mBAAeA;AACf,qBAAiB;AACjB,eAAW,QAAQ;AACnB,qBAAiB,QAAQ;AACzB,QAAI,aAAa,MAAM;AACrB,iBAAW,2BAA2BA,SAAQ,IAAI;AAAA,IACpD;AAAA,EACF;AACA,MAAI,YAAY;AAChB,MAAI,gBAAgB;AACpB,KAAG;AACD,QAAI,KAAK,eACP,OAAO,QAAQ,EAAE,GACjB,MAAM,KAAK,KACX,SAAS,KAAK,QACd,OAAO,KAAK,MACZ,QAAQ,KAAK,OACb,QAAQ,KAAK,OACb,SAAS,KAAK,QACd,aAAa,QACb,aAAa,QACb,cAAc,GAAG,aACjB,eAAe,GAAG,cAClB,QAAQ,IAAI,EAAE,GACd,aAAa,GAAG,YAChB,aAAa,GAAG;AAClB,QAAI,OAAO,aAAa;AACtB,mBAAa,QAAQ,gBAAgB,MAAM,cAAc,UAAU,MAAM,cAAc,YAAY,MAAM,cAAc;AACvH,mBAAa,SAAS,iBAAiB,MAAM,cAAc,UAAU,MAAM,cAAc,YAAY,MAAM,cAAc;AAAA,IAC3H,OAAO;AACL,mBAAa,QAAQ,gBAAgB,MAAM,cAAc,UAAU,MAAM,cAAc;AACvF,mBAAa,SAAS,iBAAiB,MAAM,cAAc,UAAU,MAAM,cAAc;AAAA,IAC3F;AACA,QAAI,KAAK,eAAe,KAAK,IAAI,QAAQ,CAAC,KAAK,QAAQ,aAAa,QAAQ,gBAAgB,KAAK,IAAI,OAAO,CAAC,KAAK,QAAQ,CAAC,CAAC;AAC5H,QAAI,KAAK,eAAe,KAAK,IAAI,SAAS,CAAC,KAAK,QAAQ,aAAa,SAAS,iBAAiB,KAAK,IAAI,MAAM,CAAC,KAAK,QAAQ,CAAC,CAAC;AAC9H,QAAI,CAAC,YAAY,SAAS,GAAG;AAC3B,eAAS,IAAI,GAAG,KAAK,WAAW,KAAK;AACnC,YAAI,CAAC,YAAY,CAAC,GAAG;AACnB,sBAAY,CAAC,IAAI,CAAC;AAAA,QACpB;AAAA,MACF;AAAA,IACF;AACA,QAAI,YAAY,SAAS,EAAE,MAAM,MAAM,YAAY,SAAS,EAAE,MAAM,MAAM,YAAY,SAAS,EAAE,OAAO,IAAI;AAC1G,kBAAY,SAAS,EAAE,KAAK;AAC5B,kBAAY,SAAS,EAAE,KAAK;AAC5B,kBAAY,SAAS,EAAE,KAAK;AAC5B,oBAAc,YAAY,SAAS,EAAE,GAAG;AACxC,UAAI,MAAM,KAAK,MAAM,GAAG;AACtB,6BAAqB;AAErB,oBAAY,SAAS,EAAE,MAAM,YAAY,WAAY;AAEnD,cAAI,cAAc,KAAK,UAAU,GAAG;AAClC,qBAAS,OAAO,aAAa,UAAU;AAAA,UACzC;AACA,cAAI,gBAAgB,YAAY,KAAK,KAAK,EAAE,KAAK,YAAY,KAAK,KAAK,EAAE,KAAK,QAAQ;AACtF,cAAI,gBAAgB,YAAY,KAAK,KAAK,EAAE,KAAK,YAAY,KAAK,KAAK,EAAE,KAAK,QAAQ;AACtF,cAAI,OAAO,mBAAmB,YAAY;AACxC,gBAAI,eAAe,KAAK,SAAS,QAAQ,WAAW,OAAO,GAAG,eAAe,eAAe,KAAK,YAAY,YAAY,KAAK,KAAK,EAAE,EAAE,MAAM,YAAY;AACvJ;AAAA,YACF;AAAA,UACF;AACA,mBAAS,YAAY,KAAK,KAAK,EAAE,IAAI,eAAe,aAAa;AAAA,QACnE,EAAE,KAAK;AAAA,UACL,OAAO;AAAA,QACT,CAAC,GAAG,EAAE;AAAA,MACR;AAAA,IACF;AACA;AAAA,EACF,SAAS,QAAQ,gBAAgB,kBAAkB,gBAAgB,gBAAgB,2BAA2B,eAAe,KAAK;AAClI,cAAY;AACd,GAAG,EAAE;AAEL,IAAI,OAAO,SAASwB,MAAK,MAAM;AAC7B,MAAI,gBAAgB,KAAK,eACvBlB,eAAc,KAAK,aACnBM,UAAS,KAAK,QACd,iBAAiB,KAAK,gBACtB,wBAAwB,KAAK,uBAC7B,qBAAqB,KAAK,oBAC1B,uBAAuB,KAAK;AAC9B,MAAI,CAAC,cAAe;AACpB,MAAI,aAAaN,gBAAe;AAChC,qBAAmB;AACnB,MAAI,QAAQ,cAAc,kBAAkB,cAAc,eAAe,SAAS,cAAc,eAAe,CAAC,IAAI;AACpH,MAAI,SAAS,SAAS,iBAAiB,MAAM,SAAS,MAAM,OAAO;AACnE,uBAAqB;AACrB,MAAI,cAAc,CAAC,WAAW,GAAG,SAAS,MAAM,GAAG;AACjD,0BAAsB,OAAO;AAC7B,SAAK,QAAQ;AAAA,MACX,QAAQM;AAAA,MACR,aAAaN;AAAA,IACf,CAAC;AAAA,EACH;AACF;AACA,SAAS,SAAS;AAAC;AACnB,OAAO,YAAY;AAAA,EACjB,YAAY;AAAA,EACZ,WAAW,SAAS,UAAU,OAAO;AACnC,QAAIF,qBAAoB,MAAM;AAC9B,SAAK,aAAaA;AAAA,EACpB;AAAA,EACA,SAAS,SAAS,QAAQ,OAAO;AAC/B,QAAIQ,UAAS,MAAM,QACjBN,eAAc,MAAM;AACtB,SAAK,SAAS,sBAAsB;AACpC,QAAIA,cAAa;AACf,MAAAA,aAAY,sBAAsB;AAAA,IACpC;AACA,QAAI,cAAc,SAAS,KAAK,SAAS,IAAI,KAAK,YAAY,KAAK,OAAO;AAC1E,QAAI,aAAa;AACf,WAAK,SAAS,GAAG,aAAaM,SAAQ,WAAW;AAAA,IACnD,OAAO;AACL,WAAK,SAAS,GAAG,YAAYA,OAAM;AAAA,IACrC;AACA,SAAK,SAAS,WAAW;AACzB,QAAIN,cAAa;AACf,MAAAA,aAAY,WAAW;AAAA,IACzB;AAAA,EACF;AAAA,EACA;AACF;AACA,SAAS,QAAQ;AAAA,EACf,YAAY;AACd,CAAC;AACD,SAAS,SAAS;AAAC;AACnB,OAAO,YAAY;AAAA,EACjB,SAAS,SAASoB,SAAQ,OAAO;AAC/B,QAAId,UAAS,MAAM,QACjBN,eAAc,MAAM;AACtB,QAAI,iBAAiBA,gBAAe,KAAK;AACzC,mBAAe,sBAAsB;AACrC,IAAAM,QAAO,cAAcA,QAAO,WAAW,YAAYA,OAAM;AACzD,mBAAe,WAAW;AAAA,EAC5B;AAAA,EACA;AACF;AACA,SAAS,QAAQ;AAAA,EACf,YAAY;AACd,CAAC;AAkqBD,SAAS,MAAM,IAAI,iBAAiB,CAAC;AACrC,SAAS,MAAM,QAAQ,MAAM;AAE7B,IAAO,uBAAQ;;;AC7yGf,IAAO,8BAAP,cAA6B,WAAW;AAAA,EACpC,OAAO,SAAS;AAAA,IACZ,SAAS;AAAA,IACT,cAAc;AAAA,EAClB;AAAA,EAEA,UAAU;AACN,YAAQ,IAAI,4CAAqC,KAAK,OAAO;AAC7D,YAAQ,IAAI,4BAAqB,KAAK,QAAQ,SAAS;AACvD,YAAQ,IAAI,6BAAsB,KAAK,QAAQ,SAAS,MAAM;AAG9D,UAAM,gBAAgB,KAAK,QAAQ,iBAAiB,oBAAoB;AACxE,YAAQ,IAAI,mCAA4B,cAAc,MAAM;AAE5D,kBAAc,QAAQ,CAAC,KAAKe,WAAU;AAClC,cAAQ,IAAI,iBAAUA,MAAK,KAAK,IAAI,QAAQ,YAAY,IAAI,QAAQ,OAAO;AAAA,IAC/E,CAAC;AAED,SAAK,mBAAmB;AAAA,EAC5B;AAAA,EAEA,aAAa;AACT,YAAQ,IAAI,4CAAqC;AACjD,QAAI,KAAK,UAAU;AACf,WAAK,SAAS,QAAQ;AAAA,IAC1B;AAAA,EACJ;AAAA,EAEA,qBAAqB;AACjB,YAAQ,IAAI,oCAA6B;AAEzC,QAAI;AACA,WAAK,WAAW,qBAAS,OAAO,KAAK,SAAS;AAAA,QAC1C,OAAO;AAAA,QACP,WAAW;AAAA,QACX,YAAY;AAAA,QACZ,aAAa;AAAA,QACb,WAAW;AAAA,QACX,QAAQ;AAAA;AAAA,QAER,iBAAiB;AAAA,QAEjB,SAAS,CAAC,QAAQ;AACd,kBAAQ,IAAI,2BAAoB,IAAI,IAAI;AACxC,cAAI,KAAK,MAAM,UAAU;AAGzB,cAAI,IAAI,KAAK,UAAU,SAAS,cAAc,GAAG;AAC7C,iBAAK,iBAAiB,IAAI,IAAI;AAAA,UAClC;AAAA,QACJ;AAAA,QAEA,OAAO,CAAC,QAAQ;AACZ,kBAAQ,IAAI,yBAAkB,IAAI,IAAI;AACtC,cAAI,KAAK,MAAM,UAAU;AAGzB,cAAI,IAAI,KAAK,UAAU,SAAS,cAAc,GAAG;AAC7C,iBAAK,kBAAkB,IAAI,IAAI;AAAA,UACnC;AAEA,eAAK,cAAc,GAAG;AAAA,QAC1B;AAAA,MACJ,CAAC;AAED,cAAQ,IAAI,4CAAqC,KAAK,QAAQ;AAAA,IAClE,SAASC,QAAO;AACZ,cAAQ,MAAM,sCAA+BA,MAAK;AAAA,IACtD;AAAA,EACJ;AAAA,EAEA,cAAc,KAAK;AAEf,QAAI,IAAI,KAAK,UAAU,SAAS,cAAc,GAAG;AAC7C,cAAQ,IAAI,sCAA+B;AAC3C,WAAK,mBAAmB;AACxB;AAAA,IACJ;AAGA,UAAM,SAAS,IAAI,KAAK,QAAQ;AAChC,UAAM,aAAa,IAAI,KAAK,QAAQ;AAEpC,YAAQ,IAAI,yCAAkC,QAAQ,eAAe,UAAU;AAE/E,QAAI,CAAC,QAAQ;AACT,cAAQ,MAAM,6BAAsB;AACpC;AAAA,IACJ;AAGA,UAAM,cAAc,KAAK,gBAAgB,IAAI,IAAI;AACjD,UAAM,aAAa,cAAc,YAAY,GAAG,QAAQ,UAAU,EAAE,IAAI;AAExE,YAAQ,IAAI,gCAAyB,YAAY,aAAa,UAAU;AAExE,QAAI,eAAe,YAAY;AAC3B,cAAQ,IAAI,qCAA8B;AAC1C,WAAK,YAAY,QAAQ,UAAU;AACnC,UAAI,KAAK,QAAQ,UAAU;AAAA,IAC/B,OAAO;AACH,cAAQ,IAAI,uCAAgC;AAC5C,WAAK,YAAY,UAAU;AAAA,IAC/B;AAAA,EACJ;AAAA,EAEA,gBAAgB,KAAK;AACjB,QAAI,iBAAiB,IAAI;AAEzB,WAAO,gBAAgB;AACnB,UAAI,eAAe,UAAU,SAAS,cAAc,GAAG;AACnD,gBAAQ,IAAI,iCAA0B,eAAe,EAAE;AACvD,eAAO;AAAA,MACX;AACA,uBAAiB,eAAe;AAAA,IACpC;AAEA,YAAQ,IAAI,yCAAkC;AAC9C,WAAO;AAAA,EACX;AAAA,EAEA,YAAY,QAAQ,YAAY;AAC5B,YAAQ,IAAI,yBAAkB,QAAQ,YAAY,UAAU;AAE5D,UAAM,YAAY,SAAS,cAAc,qBAAqB,EAAE;AAChE,UAAM,eAAe,KAAK,qBAAqB,SAAS,KAAK,QAAQ;AAErE,UAAM,sBAAsB,YAAY,WAAW,MAAM,kBAAkB;AAAA,MACvE,QAAQ;AAAA,MACR,SAAS;AAAA,QACL,gBAAgB;AAAA,QAChB,gBAAgB;AAAA,MACpB;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACjB,gBAAgB;AAAA,MACpB,CAAC;AAAA,IACL,CAAC,EACI,KAAK,CAAC,aAAa;AAChB,cAAQ,IAAI,4BAAqB,SAAS,MAAM;AAChD,aAAO,SAAS,KAAK;AAAA,IACzB,CAAC,EACA,KAAK,CAAC,SAAS;AACZ,cAAQ,IAAI,0BAAmB,IAAI;AACnC,UAAI,KAAK,SAAS;AACd,aAAK,UAAU,KAAK,SAAS,SAAS;AAEtC,aAAK,sBAAsB,KAAK,YAAY;AAC5C,aAAK,sBAAsB,UAAU;AAAA,MACzC,OAAO;AACH,gBAAQ,MAAM,0BAAmB,KAAK,OAAO;AAC7C,aAAK,UAAU,wCAAU,OAAO;AAAA,MACpC;AAAA,IACJ,CAAC,EACA,MAAM,CAACA,WAAU;AACd,cAAQ,MAAM,yBAAkBA,MAAK;AACrC,WAAK,UAAU,gEAAc,OAAO;AAAA,IACxC,CAAC;AAAA,EACT;AAAA,EAEA,YAAY,SAAS;AACjB,YAAQ,IAAI,uCAAgC,OAAO;AAEnD,UAAM,YAAY,MAAM,KAAK,KAAK,QAAQ,iBAAiB,mBAAmB,OAAO,IAAI,CAAC;AAC1F,UAAM,aAAa,UAAU,IAAI,CAAC,QAAQ,IAAI,QAAQ,UAAU;AAEhE,YAAQ,IAAI,wBAAiB,UAAU;AAEvC,QAAI,CAAC,WAAW,WAAW,WAAW,GAAG;AACrC,cAAQ,IAAI,uDAAgD;AAC5D;AAAA,IACJ;AAEA,UAAM,YAAY,SAAS,cAAc,qBAAqB,EAAE;AAChE,UAAM,eAAe,KAAK,qBAAqB,SAAS,KAAK,QAAQ;AAErE,UAAM,sBAAsB,YAAY,iBAAiB,OAAO,mBAAmB;AAAA,MAC/E,QAAQ;AAAA,MACR,SAAS;AAAA,QACL,gBAAgB;AAAA,QAChB,gBAAgB;AAAA,MACpB;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACjB,aAAa;AAAA,MACjB,CAAC;AAAA,IACL,CAAC,EACI,KAAK,CAAC,aAAa;AAChB,cAAQ,IAAI,+BAAwB,SAAS,MAAM;AACnD,aAAO,SAAS,KAAK;AAAA,IACzB,CAAC,EACA,KAAK,CAAC,SAAS;AACZ,cAAQ,IAAI,6BAAsB,IAAI;AACtC,UAAI,KAAK,SAAS;AACd,aAAK,UAAU,KAAK,SAAS,SAAS;AACtC,aAAK,sBAAsB,OAAO;AAAA,MACtC,OAAO;AACH,gBAAQ,MAAM,6BAAsB,KAAK,OAAO;AAChD,aAAK,UAAU,wCAAU,OAAO;AAAA,MACpC;AAAA,IACJ,CAAC,EACA,MAAM,CAACA,WAAU;AACd,cAAQ,MAAM,4BAAqBA,MAAK;AACxC,WAAK,UAAU,gEAAc,OAAO;AAAA,IACxC,CAAC;AAAA,EACT;AAAA,EAEA,sBAAsB,SAAS;AAE3B,SAAK,uBAAuB;AAAA,EAChC;AAAA,EAEA,qBAAqB;AACjB,YAAQ,IAAI,qCAA8B;AAG1C,UAAM,YAAY,MAAM,KAAK,KAAK,QAAQ,iBAAiB,eAAe,CAAC;AAC3E,UAAM,kBAAkB,UAAU,IAAI,CAAC,QAAQ,IAAI,QAAQ,eAAe;AAE1E,YAAQ,IAAI,8BAAuB,eAAe;AAElD,QAAI,gBAAgB,WAAW,GAAG;AAC9B,cAAQ,IAAI,6CAAsC;AAClD;AAAA,IACJ;AAEA,SAAK,iBAAiB,eAAe;AAAA,EACzC;AAAA,EAEA,iBAAiB,iBAAiB;AAC9B,YAAQ,IAAI,mCAA4B,eAAe;AAEvD,UAAM,YAAY,SAAS,cAAc,qBAAqB,EAAE;AAChE,UAAM,eAAe,KAAK;AAE1B,UAAM,sBAAsB,YAAY,yBAAyB;AAAA,MAC7D,QAAQ;AAAA,MACR,SAAS;AAAA,QACL,gBAAgB;AAAA,QAChB,gBAAgB;AAAA,MACpB;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACjB,aAAa;AAAA,MACjB,CAAC;AAAA,IACL,CAAC,EACI,KAAK,CAAC,aAAa;AAChB,cAAQ,IAAI,qCAA8B,SAAS,MAAM;AACzD,aAAO,SAAS,KAAK;AAAA,IACzB,CAAC,EACA,KAAK,CAAC,SAAS;AACZ,cAAQ,IAAI,mCAA4B,IAAI;AAC5C,UAAI,KAAK,SAAS;AACd,aAAK,UAAU,KAAK,SAAS,SAAS;AACtC,aAAK,uBAAuB;AAAA,MAChC,OAAO;AACH,gBAAQ,MAAM,mCAA4B,KAAK,OAAO;AACtD,aAAK,UAAU,oDAAY,OAAO;AAAA,MACtC;AAAA,IACJ,CAAC,EACA,MAAM,CAACA,WAAU;AACd,cAAQ,MAAM,kCAA2BA,MAAK;AAC9C,WAAK,UAAU,gEAAc,OAAO;AAAA,IACxC,CAAC;AAAA,EACT;AAAA,EAEA,iBAAiB,UAAU;AAEvB,UAAM,UAAU,SAAS,GAAG,QAAQ,UAAU,EAAE;AAChD,UAAM,YAAY,MAAM,KAAK,KAAK,QAAQ,iBAAiB,mBAAmB,OAAO,IAAI,CAAC;AAG1F,SAAK,kBAAkB;AAEvB,YAAQ,IAAI,0CAAmC,UAAU,QAAQ,QAAQ;AAAA,EAC7E;AAAA,EAEA,kBAAkB,UAAU;AAExB,QAAI,KAAK,mBAAmB,KAAK,gBAAgB,SAAS,GAAG;AACzD,YAAM,UAAU,SAAS,GAAG,QAAQ,UAAU,EAAE;AAChD,UAAI,cAAc;AAGlB,WAAK,gBAAgB,QAAQ,CAAC,aAAa;AAEvC,oBAAY,WAAW,aAAa,UAAU,YAAY,WAAW;AACrE,sBAAc;AAAA,MAClB,CAAC;AAED,cAAQ,IAAI,sCAA+B,KAAK,gBAAgB,QAAQ,QAAQ;AAAA,IACpF;AAGA,SAAK,kBAAkB;AAAA,EAC3B;AAAA,EAEA,yBAAyB;AACrB,YAAQ,IAAI,yCAAkC;AAG9C,UAAM,YAAY,SAAS,cAAc,qBAAqB,EAAE;AAChE,UAAM,eAAe,KAAK;AAE1B,UAAM,sBAAsB,YAAY,oCAAoC;AAAA,MACxE,QAAQ;AAAA,MACR,SAAS;AAAA,QACL,UAAU;AAAA,QACV,gBAAgB;AAAA,MACpB;AAAA,IACJ,CAAC,EACA,KAAK,cAAY,SAAS,KAAK,CAAC,EAChC,KAAK,UAAQ;AAEV,YAAM,oBAAoB,IAAI;AAAA,IAClC,CAAC,EACA,MAAM,CAAAA,WAAS;AACZ,cAAQ,MAAM,0CAAmCA,MAAK;AAEtD,iBAAW,MAAM;AACb,eAAO,SAAS,OAAO;AAAA,MAC3B,GAAG,GAAG;AAAA,IACV,CAAC;AAAA,EACL;AAAA,EAEA,UAAU,SAAS,MAAM;AACrB,UAAM,iBAAiB,SAAS,eAAe,gBAAgB;AAC/D,QAAI,gBAAgB;AAChB,YAAM,aACF,SAAS,YACH,uDACA;AAEV,YAAM,OACF,SAAS,YACH,iRACA;AAEV,qBAAe,YAAY;AAAA,kDACW,UAAU;AAAA;AAAA,qDAEP,IAAI;AAAA;AAAA,6DAEI,OAAO;AAAA;AAAA;AAAA;AAAA;AAMxD,iBAAW,MAAM;AACb,uBAAe,YAAY;AAAA,MAC/B,GAAG,GAAI;AAAA,IACX;AAAA,EACJ;AACJ;;;ACjWA,IAAO,uCAAP,cAA6B,WAAW;AAAA,EACpC,OAAO,UAAU;AAAA,IACb;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACJ;AAAA,EAEA,OAAO,aAAa;AAAA,EAEpB,UAAU;AACN,YAAQ,IAAI,sCAAsC;AAClD,SAAK,cAAc,KAAK,cAAc;AAAA,EAC1C;AAAA;AAAA,EAGA,WAAW,OAAO;AACd,UAAM,gBAAgB,MAAM,OAAO;AACnC,UAAM,qBAAqB,KAAK;AAEhC,QAAI,kBAAkB,gBAAgB;AAClC,yBAAmB,UAAU,OAAO,QAAQ;AAAA,IAChD,OAAO;AACH,yBAAmB,UAAU,IAAI,QAAQ;AAAA,IAC7C;AAAA,EACJ;AAAA;AAAA,EAGA,UAAU,OAAO;AACb,UAAM,eAAe;AAErB,UAAM,gBAAgB,KAAK,mBAAmB,KAAK,WAAW;AAC9D,SAAK,cAAc,mBAAmB,aAAa,aAAa;AAChE,SAAK;AAAA,EACT;AAAA;AAAA,EAGA,aAAa,OAAO;AAChB,UAAM,eAAe;AAErB,UAAM,gBAAgB,MAAM,OAAO,QAAQ,0CAA0C;AAGrF,QAAI,KAAK,cAAc,SAAS,GAAG;AAC/B,oBAAc,OAAO;AAAA,IACzB,OAAO;AACH,YAAM,0EAAc;AAAA,IACxB;AAAA,EACJ;AAAA;AAAA,EAGA,mBAAmBC,QAAO;AACtB,WAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gFAOiEA,MAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gFAQLA,MAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iFAOJA,MAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAqBlF;AAAA;AAAA,EAGA,aAAa,OAAO;AAChB,UAAM,OAAO,MAAM;AACnB,UAAM,gBAAgB,KAAK,cAAc,yDAAyD,EAAE;AACpG,UAAM,YAAY,KAAK,cAAc,oDAAoD,EAAE;AAC3F,UAAM,UAAU,KAAK,cAAc,kDAAkD,EAAE;AAGvF,QAAI,CAAC,aAAa,CAAC,SAAS;AACxB,YAAM,8DAAY;AAClB,YAAM,eAAe;AACrB,aAAO;AAAA,IACX;AAEA,QAAI,IAAI,KAAK,SAAS,IAAI,IAAI,KAAK,OAAO,GAAG;AACzC,YAAM,0EAAc;AACpB,YAAM,eAAe;AACrB,aAAO;AAAA,IACX;AAGA,QAAI,kBAAkB,gBAAgB;AAClC,YAAM,UAAU,KAAK;AACrB,UAAI,iBAAiB;AAErB,cAAQ,QAAQ,YAAU;AACtB,cAAM,iBAAiB,OAAO,cAAc,6BAA6B;AACzE,cAAM,eAAe,OAAO,cAAc,2BAA2B;AAErE,YAAI,kBAAkB,cAAc;AAChC,gBAAM,YAAY,eAAe;AACjC,gBAAM,UAAU,aAAa;AAE7B,cAAI,aAAa,WAAW,YAAY,SAAS;AAC7C,6BAAiB;AAAA,UACrB;AAAA,QACJ;AAAA,MACJ,CAAC;AAED,UAAI,CAAC,gBAAgB;AACjB,cAAM,4IAAyB;AAC/B,cAAM,eAAe;AACrB,eAAO;AAAA,MACX;AAAA,IACJ;AAEA,WAAO;AAAA,EACX;AACJ;;;ACjJA,IAAO,mCAAP,cAA6B,WAAW;AAAA,EACpC,OAAO,UAAU,CAAC;AAAA,EAClB,OAAO,SAAS;AAAA,IACZ,gBAAgB;AAAA,EACpB;AAAA,EAEA,OAAO,aAAa;AAAA,EAEpB,UAAU;AACN,YAAQ,IAAI,mCAAmC;AAG/C,SAAK,sBAAsB,KAAK,qBAAqB,KAAK,IAAI;AAC9D,SAAK,0BAA0B,KAAK,yBAAyB,KAAK,IAAI;AAGtE,aAAS,iBAAiB,oBAAoB,KAAK,mBAAmB;AACtE,aAAS,iBAAiB,8BAA8B,KAAK,uBAAuB;AAAA,EACxF;AAAA,EAEA,aAAa;AAET,QAAI,KAAK,qBAAqB;AAC1B,eAAS,oBAAoB,oBAAoB,KAAK,mBAAmB;AAAA,IAC7E;AACA,QAAI,KAAK,yBAAyB;AAC9B,eAAS,oBAAoB,8BAA8B,KAAK,uBAAuB;AAAA,IAC3F;AAAA,EACJ;AAAA,EAEA,qBAAqB,OAAO;AAExB,QAAI,MAAM,OAAO,OAAO,SAAS;AAC7B,cAAQ,IAAI,gCAAgC;AAAA,IAChD;AAAA,EACJ;AAAA,EAEA,yBAAyB,OAAO;AAE5B,YAAQ,IAAI,wBAAwB,MAAM,OAAO,MAAM;AAAA,EAC3D;AACJ;;;ACzCA,IAAO,iCAAP,cAA6B,WAAW;AAAA,EACpC,OAAO,UAAU,CAAC,aAAa,OAAO;AAAA,EAEtC,UAAU;AACN,SAAK,iBAAiB,KAAK,UAAU,KAAK,IAAI;AAC9C,SAAK,uBAAuB,KAAK,gBAAgB,KAAK,IAAI;AAG1D,QAAI,KAAK,gBAAgB;AACrB,WAAK,YAAY,iBAAiB,oBAAoB,KAAK,cAAc;AACzE,WAAK,YAAY,iBAAiB,6BAA6B,KAAK,oBAAoB;AAAA,IAC5F;AAAA,EACJ;AAAA,EAEA,aAAa;AACT,QAAI,KAAK,kBAAkB,KAAK,gBAAgB;AAC5C,WAAK,YAAY,oBAAoB,oBAAoB,KAAK,cAAc;AAC5E,WAAK,YAAY,oBAAoB,6BAA6B,KAAK,oBAAoB;AAAA,IAC/F;AAAA,EACJ;AAAA,EAEA,gBAAgB,OAAO;AAEnB,SAAK,YAAY;AAAA,EACrB;AAAA,EAEA,UAAU,OAAO;AAEb,QAAI,KAAK,YAAY,UAAU,KAAK,GAAG;AACnC,WAAK,KAAK;AAAA,IACd,OAAO;AACH,WAAK,KAAK;AAAA,IACd;AAAA,EACJ;AAAA,EAEA,OAAO;AACH,QAAI,KAAK,oBAAoB;AACzB,WAAK,gBAAgB,UAAU,OAAO,QAAQ;AAE9C,4BAAsB,MAAM;AACxB,aAAK,gBAAgB,UAAU,IAAI,aAAa;AAAA,MACpD,CAAC;AAAA,IACL;AAAA,EACJ;AAAA,EAEA,OAAO;AACH,QAAI,KAAK,oBAAoB;AACzB,WAAK,gBAAgB,UAAU,IAAI,QAAQ;AAC3C,WAAK,gBAAgB,UAAU,OAAO,aAAa;AAAA,IACvD;AAAA,EACJ;AAAA,EAEA,QAAQ;AAEJ,QAAI,KAAK,gBAAgB;AACrB,WAAK,YAAY,YAAY;AAAA,IACjC;AACA,SAAK,KAAK;AAAA,EACd;AAAA,EAEA,cAAc;AACV,QAAI,KAAK,gBAAgB;AACrB,WAAK,YAAY,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAWjC;AACA,SAAK,KAAK;AAAA,EACd;AAAA;AAAA,EAGA,QAAQ,OAAO;AACX,QAAI,MAAM,QAAQ,UAAU;AACxB,WAAK,MAAM;AAAA,IACf;AAAA,EACJ;AAAA;AAAA,EAGA,gBAAgB,OAAO;AACnB,QAAI,MAAM,WAAW,MAAM,eAAe;AACtC,WAAK,MAAM;AAAA,IACf;AAAA,EACJ;AACJ;;;AC1FA,IAAO,gDAAP,cAA6B,WAAW;AAAA,EACtC,OAAO,SAAS;AAAA,IACd,gBAAgB;AAAA,EAClB;AAAA,EAEA,UAAU;AACR,YAAQ,IAAI,8CAA8C;AAAA,EAC5D;AAAA,EAEA,QAAQ,OAAO;AACb,UAAM,UAAU,MAAM,cAAc,QAAQ;AAC5C,UAAM,MAAM,0CAA0C,KAAK,mBAAmB,eAAe,OAAO;AAEpG,SAAK,UAAU,GAAG;AAAA,EACpB;AAAA,EAEA,QAAQ,OAAO;AACb,UAAM,gBAAgB,MAAM,cAAc,QAAQ;AAGlD,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,eAAe,eAAe;AAC5B,UAAM,gBAAgB;AAAA,MACpB,EAAE,OAAO,GAAG,OAAO,qBAAM;AAAA,MACzB,EAAE,OAAO,GAAG,OAAO,qBAAM;AAAA,MACzB,EAAE,OAAO,GAAG,OAAO,qBAAM;AAAA,MACzB,EAAE,OAAO,GAAG,OAAO,qBAAM;AAAA,MACzB,EAAE,OAAO,GAAG,OAAO,qBAAM;AAAA,MACzB,EAAE,OAAO,GAAG,OAAO,qBAAM;AAAA,MACzB,EAAE,OAAO,GAAG,OAAO,qBAAM;AAAA,IAC3B,EAAE,OAAO,CAAAC,YAAUA,QAAO,SAAS,aAAa;AAEhD,UAAM,aAAa,cAAc;AAAA,MAAI,CAAAA,YACnC;AAAA,+DACyDA,QAAO,KAAK;AAAA,UACjEA,QAAO,KAAK;AAAA;AAAA,IAElB,EAAE,KAAK,EAAE;AAET,UAAM,UAAU;AAAA;AAAA;AAAA;AAAA,YAIR,UAAU;AAAA;AAAA;AAAA;AAAA,oHAI8F,aAAa;AAAA;AAAA;AAAA;AAK7H,SAAK,UAAU,OAAO;AAAA,EACxB;AAAA,EAEA,WAAW,eAAe;AACxB,UAAM,kBAAkB,SAAS,iBAAiB,uCAAuC;AAEzF,QAAI,gBAAgB,WAAW,GAAG;AAChC,YAAM,8DAAY;AAClB;AAAA,IACF;AAEA,UAAM,OAAO,SAAS,cAAc,MAAM;AAC1C,SAAK,SAAS;AACd,SAAK,SAAS,0CAA0C,KAAK,mBAAmB;AAEhF,UAAM,YAAY,SAAS,cAAc,yBAAyB,EAAE,aAAa,SAAS;AAC1F,SAAK,YAAY;AAAA,8DACyC,SAAS;AAAA,0DACb,aAAa;AAAA;AAGnE,oBAAgB,QAAQ,cAAY;AAClC,YAAM,QAAQ,SAAS,cAAc,OAAO;AAC5C,YAAM,OAAO;AACb,YAAM,OAAO;AACb,YAAM,QAAQ,SAAS;AACvB,WAAK,YAAY,KAAK;AAAA,IACxB,CAAC;AAGD,SAAK,WAAW;AAEhB,aAAS,KAAK,YAAY,IAAI;AAC9B,SAAK,OAAO;AAAA,EACd;AAAA,EAEA,UAAU,KAAK;AACb,UAAM,KAAK;AAAA,MACT,SAAS;AAAA,QACP,oBAAoB;AAAA,QACpB,UAAU;AAAA,MACZ;AAAA,IACF,CAAC,EACA,KAAK,cAAY,SAAS,KAAK,CAAC,EAChC,KAAK,UAAQ;AACZ,WAAK,UAAU,IAAI;AAAA,IACrB,CAAC,EACA,MAAM,CAAAC,WAAS;AACd,cAAQ,MAAM,wBAAwBA,MAAK;AAAA,IAC7C,CAAC;AAAA,EACH;AAAA,EAEA,UAAU,SAAS;AACjB,UAAM,iBAAiB,SAAS,eAAe,wBAAwB;AACvE,UAAM,eAAe,SAAS,eAAe,sBAAsB;AAEnE,iBAAa,YAAY;AACzB,mBAAe,UAAU,OAAO,QAAQ;AAGxC,QAAI,OAAO,YAAY,CAAC,OAAO,SAAS,OAAO,QAAQ,KAAK,OAAK,EAAE,eAAe,eAAe,GAAG;AAClG,aAAO,SAAS,SAAS,iBAAiB,sBAAsB;AAAA,IAClE;AAGA,UAAM,sBAAsB,aAAa,cAAc,oCAAoC;AAC3F,QAAI,uBAAuB,OAAO,UAAU;AAC1C,aAAO,SAAS,YAAY,MAAM;AAAA,IACpC;AAAA,EACF;AAAA,EAEA,aAAa;AACX,UAAM,iBAAiB,SAAS,eAAe,wBAAwB;AACvE,mBAAe,UAAU,IAAI,QAAQ;AAAA,EACvC;AAAA,EAEA,kBAAkB,OAAO;AACvB,UAAM,UAAU,MAAM,OAAO,QAAQ;AACrC,UAAM,gBAAgB,SAAS,cAAc,sCAAsC,EAAE;AAErF,UAAM,OAAO,SAAS,cAAc,MAAM;AAC1C,SAAK,SAAS;AACd,SAAK,SAAS,0CAA0C,KAAK,mBAAmB,eAAe,OAAO;AAEtG,UAAM,YAAY,SAAS,cAAc,yBAAyB,EAAE,aAAa,SAAS;AAG1F,SAAK,YAAY;AAAA;AAAA,8DAEyC,SAAS;AAAA,0DACb,aAAa;AAAA;AAGnE,QAAI,kBAAkB,gBAAgB;AACpC,YAAM,UAAU,SAAS,iBAAiB,cAAc;AACxD,cAAQ,QAAQ,CAAC,QAAQC,WAAU;AACjC,cAAM,YAAY,OAAO,cAAc,kCAAkC,EAAE;AAC3E,cAAM,UAAU,OAAO,cAAc,iCAAiC,EAAE;AACxE,cAAM,WAAW,OAAO,cAAc,QAAQ,EAAE;AAEhD,aAAK,aAAa;AAAA,+CACqBA,MAAK,yBAAyB,SAAS;AAAA,+CACvCA,MAAK,uBAAuB,OAAO;AAAA,+CACnCA,MAAK,uBAAuB,QAAQ;AAAA;AAAA,MAE7E,CAAC;AAAA,IACH;AAEA,aAAS,KAAK,YAAY,IAAI;AAC9B,SAAK,OAAO;AAAA,EACd;AACF;AAGA,IAAM,yBAAN,cAAqC,WAAW;AAAA,EAC9C,YAAY,OAAO;AACjB,UAAM,OAAO,MAAM,OAAO;AAC1B,UAAM,gBAAgB,SAAS,eAAe,wBAAwB;AAEtE,QAAI,SAAS,gBAAgB;AAC3B,oBAAc,UAAU,OAAO,QAAQ;AAAA,IACzC,OAAO;AACL,oBAAc,UAAU,IAAI,QAAQ;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,YAAY,OAAO;AACjB,SAAK,gBAAgB,MAAM,OAAO,QAAQ,cAAc,CAAC;AAAA,EAC3D;AAAA,EAEA,gBAAgB,OAAO;AACrB,SAAK,gBAAgB,MAAM,OAAO,QAAQ,cAAc,CAAC;AAAA,EAC3D;AAAA,EAEA,gBAAgB,YAAY;AAC1B,UAAM,YAAY,WAAW,cAAc,kCAAkC,EAAE;AAC/E,UAAM,UAAU,WAAW,cAAc,iCAAiC,EAAE;AAC5E,UAAM,WAAW,SAAS,WAAW,cAAc,QAAQ,EAAE,KAAK;AAElE,QAAI,aAAa,WAAW,UAAU;AACpC,YAAM,QAAQ,KAAK,kBAAkB,WAAW,SAAS,QAAQ;AACjE,YAAM,YAAY,WAAW,cAAc,aAAa;AACxD,YAAM,cAAc,WAAW,cAAc,qBAAqB;AAElE,gBAAU,cAAc,MAAM;AAC9B,kBAAY,cAAc,MAAM,KAAK,IAAI;AAAA,IAC3C;AAAA,EACF;AAAA,EAEA,kBAAkB,WAAW,SAAS,iBAAiB;AACrD,UAAM,QAAQ,CAAC;AACf,UAAMC,SAAQ,oBAAI,KAAK,cAAc,SAAS,KAAK;AACnD,UAAM,MAAM,oBAAI,KAAK,cAAc,OAAO,KAAK;AAE/C,QAAI,UAAU,IAAI,KAAKA,MAAK;AAC5B,WAAO,UAAU,KAAK;AACpB,YAAM,KAAK,QAAQ,mBAAmB,SAAS,EAAE,MAAM,WAAW,QAAQ,WAAW,QAAQ,MAAM,CAAC,CAAC;AACrG,cAAQ,WAAW,QAAQ,WAAW,IAAI,eAAe;AAAA,IAC3D;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,YAAY;AACV,UAAM,cAAc,SAAS,eAAe,cAAc;AAC1D,UAAMC,YAAW,YAAY,SAAS;AAEtC,UAAM,YAAY,SAAS,cAAc,KAAK;AAC9C,cAAU,YAAY;AACtB,cAAU,QAAQ,cAAcA;AAChC,cAAU,YAAY;AAAA;AAAA;AAAA;AAAA,+CAIqBA,SAAQ;AAAA;AAAA,+CAERA,SAAQ;AAAA;AAAA;AAAA;AAAA,kCAIrBA,SAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mJAkByGA,SAAQ;AAAA;AAAA;AAIvJ,gBAAY,YAAY,SAAS;AACjC,SAAK,gBAAgB,SAAS;AAAA,EAChC;AAAA,EAEA,aAAa,OAAO;AAClB,UAAM,aAAa,MAAM,OAAO,QAAQ,cAAc;AACtD,eAAW,OAAO;AAAA,EACpB;AACF;AAGA,IAAI,OAAO,UAAU;AACnB,SAAO,SAAS,SAAS,iBAAiB,sBAAsB;AAClE;;;AClQA,IAAO,qCAAP,cAA6B,WAAW;AAAA,EACtC,UAAU;AACR,YAAQ,IAAI,uDAAuD;AAAA,EACrE;AACF;;;ACfA,IAAO,wCAAP,cAA6B,WAAW;AAAA,EACtC,OAAO,UAAU,CAAC,eAAe,UAAU;AAAA,EAE3C,UAAU;AACR,YAAQ,IAAI,yCAAyC;AAAA,EACvD;AAAA;AAAA,EAGA,WAAW;AACT,UAAM,cAAc,KAAK,QAAQ,cAAc,gBAAgB;AAC/D,UAAM,WAAW,KAAK,QAAQ,cAAc,MAAM;AAElD,QAAI,eAAe,UAAU;AAC3B,kBAAY,UAAU,IAAI,QAAQ;AAClC,eAAS,UAAU,OAAO,QAAQ;AAClC,eAAS,UAAU,IAAI,MAAM;AAG7B,YAAM,iBAAiB,SAAS,cAAc,oBAAoB;AAClE,UAAI,gBAAgB;AAClB,uBAAe,MAAM;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGA,SAAS;AACP,UAAM,cAAc,KAAK,QAAQ,cAAc,gBAAgB;AAC/D,UAAM,WAAW,KAAK,QAAQ,cAAc,MAAM;AAElD,QAAI,eAAe,UAAU;AAC3B,kBAAY,UAAU,OAAO,QAAQ;AACrC,eAAS,UAAU,IAAI,QAAQ;AAC/B,eAAS,UAAU,OAAO,MAAM;AAAA,IAClC;AAAA,EACF;AAAA;AAAA,EAGA,cAAc;AAEZ,YAAQ,IAAI,6BAA6B;AAAA,EAC3C;AACF;;;AC1CA,IAAO,2CAAP,cAA6B,WAAW;AAAA,EACtC,UAAU;AACR,YAAQ,IAAI,4CAA4C;AAAA,EAC1D;AAAA;AAAA,EAGA,OAAO,OAAO;AACZ,YAAQ,IAAI,2BAA2B;AAAA,EAEzC;AAAA;AAAA,EAGA,iBAAiB,OAAO;AACtB,UAAM,UAAU,MAAM,cAAc,QAAQ;AAC5C,YAAQ,IAAI,0CAA0C,OAAO,EAAE;AAAA,EAEjE;AACF;;;ACjBA,IAAO,8CAAP,cAA6B,WAAW;AAAA,EACtC,OAAO,SAAS,EAAE,UAAU,QAAQ;AAAA,EAEpC,UAAU;AACR,YAAQ,IAAI,+CAA+C;AAC3D,YAAQ,IAAI,cAAc,KAAK,aAAa;AAG5C,QAAI,KAAK,eAAe;AACtB,WAAK,oBAAoB;AAAA,IAC3B;AAAA,EACF;AAAA;AAAA,EAGA,cAAc,OAAO;AACnB,UAAM,eAAe;AACrB,YAAQ,IAAI,oBAAoB;AAIhC,UAAM,kBAAkB,KAAK,mBAAmB;AAChD,QAAI,iBAAiB;AACnB,YAAM,UAAU,sBAAsB,KAAK,gBAAgB,CAAC,oBAAoB,eAAe;AAC/F,YAAM,MAAM,SAAS,EAAE,OAAO,KAAK,WAAW,EAAE,CAAC;AAAA,IACnD;AAAA,EACF;AAAA;AAAA,EAGA,WAAW,OAAO;AAChB,UAAM,eAAe;AACrB,YAAQ,IAAI,gBAAgB;AAE5B,UAAM,kBAAkB,KAAK,mBAAmB;AAChD,QAAI,iBAAiB;AAEnB,YAAM,UAAU,sBAAsB,KAAK,gBAAgB,CAAC,oBAAoB,eAAe;AAC/F,YAAM,MAAM,SAAS,EAAE,OAAO,KAAK,WAAW,EAAE,CAAC;AAAA,IACnD,OAAO;AAEL,WAAK,QAAQ,OAAO;AAAA,IACtB;AAAA,EACF;AAAA;AAAA,EAGA,iBAAiB,OAAO;AACtB,YAAQ,IAAI,sBAAsB;AAAA,EAEpC;AAAA;AAAA,EAGA,sBAAsB;AACpB,UAAM,iBAAiB,KAAK,QAAQ,cAAc,oBAAoB;AACtE,QAAI,gBAAgB;AAClB,iBAAW,MAAM;AACf,uBAAe,MAAM;AAAA,MACvB,GAAG,GAAG;AAAA,IACR;AAAA,EACF;AAAA;AAAA,EAGA,qBAAqB;AACnB,UAAM,eAAe,KAAK,QAAQ,QAAQ,aAAa;AACvD,QAAI,gBAAgB,aAAa,GAAG,WAAW,iBAAiB,GAAG;AACjE,YAAM,QAAQ,aAAa,GAAG,MAAM,sBAAsB;AAC1D,aAAO,QAAQ,MAAM,CAAC,IAAI;AAAA,IAC5B;AACA,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,kBAAkB;AAEhB,UAAM,YAAY,OAAO,SAAS,SAAS,MAAM,yBAAyB;AAC1E,WAAO,YAAY,UAAU,CAAC,IAAI;AAAA,EACpC;AAAA;AAAA,EAGA,aAAa;AACX,UAAM,eAAe,KAAK,QAAQ,QAAQ,aAAa;AACvD,WAAO,eAAe,aAAa,KAAK;AAAA,EAC1C;AACF;;;AC5EA,YAAY,SAAS,qBAAqB,oCAA0B;AAGpE,YAAY,SAAS,YAAY,2BAAkB;AAGnD,YAAY,SAAS,iBAAiB,gCAAsB;AAG5D,YAAY,SAAS,gBAAgB,+BAAsB;AAG3D,YAAY,SAAS,6BAA6B,4CAAiC;AAGnF,YAAY,SAAS,mBAAmB,kCAAwB;AAGhE,YAAY,SAAS,YAAY,2BAAkB;AAGnD,YAAY,SAAS,SAAS,wBAAe;AAG7C,YAAY,SAAS,mBAAmB,kCAAwB;AAGhE,YAAY,SAAS,SAAS,wBAAe;AAG7C,YAAY,SAAS,SAAS,wBAAe;AAG7C,YAAY,SAAS,iBAAiB,gCAAsB;AAG5D,YAAY,SAAS,wBAAwB,uCAA6B;AAG1E,YAAY,SAAS,eAAe,8BAAqB;AAGzD,YAAY,SAAS,oBAAoB,mCAAyB;AAGlE,YAAY,SAAS,sBAAsB,qCAA2B;AAGtE,YAAY,SAAS,mBAAmB,kCAAwB;AAGhE,YAAY,SAAS,yBAAyB,wCAA8B;AAG5E,YAAY,SAAS,WAAW,0BAAiB;AAGjD,YAAY,SAAS,YAAY,2BAAkB;AAGnD,YAAY,SAAS,qBAAqB,oCAAyB;AAGnE,YAAY,SAAS,iBAAiB,gCAAsB;AAG5D,YAAY,SAAS,eAAe,8BAAoB;AAGxD,YAAY,SAAS,8BAA8B,6CAAkC;AAGrF,YAAY,SAAS,mBAAmB,kCAAwB;AAGhE,YAAY,SAAS,sBAAsB,qCAA0B;AAGrE,YAAY,SAAS,yBAAyB,wCAA6B;AAG3E,YAAY,SAAS,4BAA4B,2CAA+B;",
  "names": ["consumer", "error", "consumer", "consumer", "subscription", "exports", "zhTw", "submitter", "config", "location", "error", "cookie", "clone", "defaults", "ctx", "morphChildren", "index", "findBestMatch", "morphNode", "createMorphContext", "normalizeElement", "normalizeParent", "option", "session", "visit", "recentRequests", "Turbo", "document", "createConsumer", "submitter", "application", "error", "matches", "index", "fetch", "matches", "match", "oldValue", "index", "error", "constructor", "extend", "application", "element", "debounce", "error", "config", "_a", "config", "source", "self", "destroy", "config", "defaults", "element", "debounce", "triggerChange", "month", "formats", "option", "error", "config", "zhTw", "error", "index", "error", "error", "error", "error", "newIndex", "error", "start", "index", "error", "index", "import_zh_tw", "option", "error", "zhTw", "error", "error", "index", "forms", "obj", "toggleClass", "index", "extend", "ghostEl", "duration", "defaults", "option", "dispatchEvent", "rootEl", "cloneEl", "oldIndex", "newIndex", "oldDraggableIndex", "newDraggableIndex", "putSortable", "pluginEvent", "_detectDirection", "_dragElInRowColumn", "_detectNearestEmptySortable", "_prepareGroup", "dragEl", "_hideGhostForTarget", "_unhideGhostForTarget", "nearestEmptyInsertDetectEvent", "_checkOutsideTargetEl", "dragStartFn", "toggleClass", "target", "after", "el", "extend", "plugins", "drop", "autoScroll", "onSpill", "index", "error", "index", "option", "error", "index", "start", "newIndex"]
}
