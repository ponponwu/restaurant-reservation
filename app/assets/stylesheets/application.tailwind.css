@import 'tailwindcss/base';
@import 'tailwindcss/components';
@import 'tailwindcss/utilities';

/* Import toggle switch component */
@import './toggle_switch.css';
/* Import both flatpickr themes and use CSS scoping to apply different themes */
@import 'flatpickr/dist/flatpickr.css';

/* Frontend dark theme - default for all flatpickr calendars */
@import 'flatpickr/dist/themes/dark.css';

/* Admin backend light theme - comprehensive override for all flatpickr elements */
.admin-page .flatpickr-calendar,
[data-controller*='admin-reservation'] .flatpickr-calendar {
    background-color: #fff !important;
    color: #393939 !important;
    border: 1px solid #e6e6e6 !important;
    border-radius: 5px !important;
    box-shadow: 0 3px 13px rgba(0, 0, 0, 0.08) !important;
}

/* Month header */
.admin-page .flatpickr-calendar .flatpickr-month,
[data-controller*='admin-reservation'] .flatpickr-calendar .flatpickr-month {
    background-color: #fff !important;
    color: #393939 !important;
}

/* Month dropdown */
.admin-page .flatpickr-calendar .flatpickr-monthDropdown-months,
[data-controller*='admin-reservation'] .flatpickr-calendar .flatpickr-monthDropdown-months {
    background-color: #fff !important;
    color: #393939 !important;
}

/* Current month display */
.admin-page .flatpickr-calendar .flatpickr-current-month,
[data-controller*='admin-reservation'] .flatpickr-calendar .flatpickr-current-month {
    color: #393939 !important;
}

/* Current month input */
.admin-page .flatpickr-calendar .flatpickr-current-month input,
[data-controller*='admin-reservation'] .flatpickr-calendar .flatpickr-current-month input {
    background-color: #fff !important;
    color: #393939 !important;
}

/* Navigation arrows */
.admin-page .flatpickr-calendar .flatpickr-prev-month,
.admin-page .flatpickr-calendar .flatpickr-next-month,
[data-controller*='admin-reservation'] .flatpickr-calendar .flatpickr-prev-month,
[data-controller*='admin-reservation'] .flatpickr-calendar .flatpickr-next-month {
    color: #393939 !important;
}

.admin-page .flatpickr-calendar .flatpickr-prev-month:hover,
.admin-page .flatpickr-calendar .flatpickr-next-month:hover,
[data-controller*='admin-reservation'] .flatpickr-calendar .flatpickr-prev-month:hover,
[data-controller*='admin-reservation'] .flatpickr-calendar .flatpickr-next-month:hover {
    color: #569ff7 !important;
}

/* Weekdays header */
.admin-page .flatpickr-calendar .flatpickr-weekdays,
[data-controller*='admin-reservation'] .flatpickr-calendar .flatpickr-weekdays {
    background-color: #fff !important;
    color: #393939 !important;
}

.admin-page .flatpickr-calendar .flatpickr-weekday,
[data-controller*='admin-reservation'] .flatpickr-calendar .flatpickr-weekday {
    background-color: #fff !important;
    color: #393939 !important;
}

/* Days container */
.admin-page .flatpickr-calendar .dayContainer,
[data-controller*='admin-reservation'] .flatpickr-calendar .dayContainer {
    background-color: #fff !important;
}

.admin-page .flatpickr-calendar .flatpickr-days,
[data-controller*='admin-reservation'] .flatpickr-calendar .flatpickr-days {
    background-color: #fff !important;
}

/* Individual day cells */
.admin-page .flatpickr-calendar .flatpickr-day,
[data-controller*='admin-reservation'] .flatpickr-calendar .flatpickr-day {
    background-color: #fff !important;
    color: #393939 !important;
    border: 1px solid transparent !important;
}

.admin-page .flatpickr-calendar .flatpickr-day:hover,
[data-controller*='admin-reservation'] .flatpickr-calendar .flatpickr-day:hover {
    background-color: #e6e6e6 !important;
    color: #393939 !important;
}

.admin-page .flatpickr-calendar .flatpickr-day.selected,
[data-controller*='admin-reservation'] .flatpickr-calendar .flatpickr-day.selected {
    background-color: #569ff7 !important;
    color: #fff !important;
    border-color: #569ff7 !important;
}

.admin-page .flatpickr-calendar .flatpickr-day.today,
[data-controller*='admin-reservation'] .flatpickr-calendar .flatpickr-day.today {
    border-color: #959ea9 !important;
    color: #393939 !important;
    background-color: #fff !important;
}

.admin-page .flatpickr-calendar .flatpickr-day.today.selected,
[data-controller*='admin-reservation'] .flatpickr-calendar .flatpickr-day.today.selected {
    background-color: #569ff7 !important;
    color: #fff !important;
    border-color: #569ff7 !important;
}

/* Disabled days */
.admin-page .flatpickr-calendar .flatpickr-day.flatpickr-disabled,
[data-controller*='admin-reservation'] .flatpickr-calendar .flatpickr-day.flatpickr-disabled {
    background-color: #f3f4f6 !important;
    color: #9ca3af !important;
}

/* Outside month days */
.admin-page .flatpickr-calendar .flatpickr-day.prevMonthDay,
.admin-page .flatpickr-calendar .flatpickr-day.nextMonthDay,
[data-controller*='admin-reservation'] .flatpickr-calendar .flatpickr-day.prevMonthDay,
[data-controller*='admin-reservation'] .flatpickr-calendar .flatpickr-day.nextMonthDay {
    color: #d1d5db !important;
}

/* Year dropdown */
.admin-page .flatpickr-calendar .numInputWrapper,
[data-controller*='admin-reservation'] .flatpickr-calendar .numInputWrapper {
    background-color: #fff !important;
}

.admin-page .flatpickr-calendar .numInput,
[data-controller*='admin-reservation'] .flatpickr-calendar .numInput {
    background-color: #fff !important;
    color: #393939 !important;
}

/* Arrow up/down for year input */
.admin-page .flatpickr-calendar .arrowUp,
.admin-page .flatpickr-calendar .arrowDown,
[data-controller*='admin-reservation'] .flatpickr-calendar .arrowUp,
[data-controller*='admin-reservation'] .flatpickr-calendar .arrowDown {
    border-bottom-color: #393939 !important;
}

.admin-page .flatpickr-calendar .arrowDown,
[data-controller*='admin-reservation'] .flatpickr-calendar .arrowDown {
    border-top-color: #393939 !important;
}

@import './sortable.css';

/* 拖曳排序樣式 */
.sortable-ghost {
    @apply opacity-30 bg-blue-50 border-blue-200;
}

.sortable-chosen {
    @apply bg-blue-50;
}

.sortable-drag {
    @apply opacity-80 shadow-lg bg-white border border-blue-300;
}

/* 表格行樣式 */
.table-row {
    transition: all 0.15s ease;
}

.table-row:hover {
    @apply bg-gray-50;
}

.table-row.sortable-chosen {
    @apply bg-blue-50;
}

.table-row.sortable-ghost {
    @apply opacity-30 bg-blue-100;
}

.drag-handle {
    transition: all 0.15s ease;
}

.drag-handle:hover {
    @apply bg-gray-100 rounded text-gray-600;
}

/* 群組標題樣式 */
.group-header {
    @apply bg-gray-50;
}

.group-header.collapsed {
    @apply bg-gray-100;
}

.toggle-icon {
    transition: transform 0.2s ease;
}

/* 優先序號碼樣式 */
.priority-number {
    @apply inline-flex items-center justify-center w-6 h-6 bg-blue-100 text-blue-800 text-xs font-bold rounded-full;
}

/* 狀態指示器 */
.status-indicator {
    @apply inline-flex items-center justify-center w-5 h-5 rounded-full;
}

.status-indicator.active {
    @apply bg-green-100 text-green-600;
}

.status-indicator.inactive {
    @apply bg-gray-100 text-gray-400;
}

/* 桌位類型圖示 */
.table-type-icon {
    @apply w-6 h-6 rounded-md flex items-center justify-center;
}

.table-type-icon.available {
    @apply bg-green-100 text-green-600;
}

.table-type-icon.occupied {
    @apply bg-red-100 text-red-600;
}

.table-type-icon.reserved {
    @apply bg-yellow-100 text-yellow-600;
}

/* 拖曳時的視覺效果 */
tbody.sorting .table-row {
    transition: none;
}

/* 表格響應式設計 */
@media (max-width: 768px) {
    .table-responsive {
        font-size: 0.875rem;
    }

    .table-responsive th,
    .table-responsive td {
        padding: 0.5rem;
    }
}

/* 
This file is in app/assets/stylesheets/application.tailwind.css 
*/

.time-slot-button {
    @apply px-4 py-2 text-sm font-medium border border-gray-200 rounded-lg 
           bg-gradient-to-b from-white to-gray-50 text-gray-700
           hover:from-blue-50 hover:to-blue-100 hover:border-blue-300 hover:text-blue-800
           focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1
           transition-all duration-200 ease-in-out
           cursor-pointer;
}

.time-slot-button:disabled {
    @apply opacity-50 cursor-not-allowed bg-gradient-to-b from-gray-50 to-gray-100 
           text-gray-400 border-gray-200
           hover:from-gray-50 hover:to-gray-100 hover:border-gray-200 hover:text-gray-400;
}

.time-slot-button.selected {
    @apply border-blue-500 bg-gradient-to-b from-blue-500 to-blue-600 text-white
           hover:from-blue-600 hover:to-blue-700 hover:border-blue-600;
}

/* Flatpickr 置中 - 使用 Claude 4 Sonnet 建議的解法 */
.w-full.max-w-lg.px-4 {
    display: flex;
    justify-content: center;
}

.flatpickr-calendar {
    position: relative !important;
    left: auto !important;
    right: auto !important;
}

/* 分頁器圓角修復 - 更精確的樣式 */
.pagination {
    border-radius: 0.375rem;
    overflow: hidden;
}

.pagination > *:first-child,
.pagination > *:first-child a,
.pagination > *:first-child span {
    border-top-left-radius: 0.375rem !important;
    border-bottom-left-radius: 0.375rem !important;
}

.pagination > *:last-child,
.pagination > *:last-child a,
.pagination > *:last-child span {
    border-top-right-radius: 0.375rem !important;
    border-bottom-right-radius: 0.375rem !important;
}

/* 移除中間元素的圓角 */
.pagination > *:not(:first-child):not(:last-child),
.pagination > *:not(:first-child):not(:last-child) a,
.pagination > *:not(:first-child):not(:last-child) span {
    border-radius: 0 !important;
}

/* ========================================
   餐廳公開頁面響應式日曆樣式
   ======================================== */

/* 日曆容器基礎設定 */
[data-reservation-target='calendar'] {
    display: block !important;
    width: 100% !important;
    position: relative !important;
    overflow: hidden; /* 避免縮放後溢出 */
}

/* 手機版日曆容器特別設定 */
@media (max-width: 768px) {
    [data-reservation-target='calendar'] {
        padding: 0 0.5rem !important;
        max-width: 100vw !important;
        box-sizing: border-box !important;
    }

    /* 日期選擇容器也要限制寬度 */
    [data-reservation-target='datePickerContainer'] {
        padding: 1rem 0.5rem !important;
        max-width: 100vw !important;
        box-sizing: border-box !important;
    }
}

/* 基礎日曆樣式 - 覆蓋前面的 dark theme */
[data-reservation-target='calendar'] .flatpickr-calendar.inline {
    background: #1f2937 !important;
    border-radius: 0.75rem !important;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3) !important;
    padding: 1rem !important;
    transform-origin: center center !important;
    position: relative !important;
    width: 100% !important;
    max-width: 100% !important;
    display: block !important;
    top: auto !important;
    left: auto !important;
    right: auto !important;
    bottom: auto !important;
    transform: scale(1) !important;
    margin: 1rem auto !important;
    -webkit-transform: scale(1) !important;
    -moz-transform: scale(1) !important;
    -ms-transform: scale(1) !important;
}

/* Flatpickr wrapper 樣式修復 */
[data-reservation-target='calendar'] .flatpickr-wrapper {
    padding-top: 32px !important;
}

/* 響應式縮放斷點設定
   - 手機直向: 1.2x 縮放
   - 手機橫向/小平板: 1.1x 縮放
   - 平板: 1.1x 縮放
   - 桌機: 1.2x 縮放
   - 大桌機: 1.3x 縮放
   ---------------------------------------- */

/* 極小螢幕 - 手機直向 (≤480px) */
@media (max-width: 480px) {
    [data-reservation-target='calendar'] .flatpickr-calendar.inline {
        transform: scale(1.2) !important;
        -webkit-transform: scale(1.2) !important;
        -moz-transform: scale(1.2) !important;
        -ms-transform: scale(1.2) !important;
        margin: 1rem auto !important;
        padding: 0.75rem !important;
        max-width: 100% !important;
        /* 強制限制寬度避免溢出 */
        width: auto !important;
        min-width: 0 !important;
    }

    [data-reservation-target='calendar'] .flatpickr-day {
        min-height: 36px !important;
        line-height: 36px !important;
        font-size: 13px !important;
        width: auto !important;
        min-width: 36px !important;
    }

    [data-reservation-target='calendar'] .flatpickr-weekday {
        font-size: 12px !important;
    }

    [data-reservation-target='calendar'] .flatpickr-current-month {
        font-size: 14px !important;
    }

    /* 限制日曆內部容器寬度 */
    [data-reservation-target='calendar'] .flatpickr-calendar.inline .dayContainer {
        max-width: 100% !important;
        width: auto !important;
    }

    [data-reservation-target='calendar'] .flatpickr-calendar.inline .flatpickr-days {
        max-width: 100% !important;
        width: auto !important;
    }
}

/* 小螢幕 - 手機橫向/小平板 (481px - 768px) */
@media (min-width: 481px) and (max-width: 768px) {
    [data-reservation-target='calendar'] .flatpickr-calendar.inline {
        transform: scale(1.1) !important;
        -webkit-transform: scale(1.1) !important;
        -moz-transform: scale(1.1) !important;
        -ms-transform: scale(1.1) !important;
        margin: 1rem auto !important;
        max-width: 90% !important;
    }

    [data-reservation-target='calendar'] .flatpickr-day {
        min-height: 40px !important;
        line-height: 40px !important;
    }
}

/* 中等螢幕 - 平板 (769px - 1024px) */
@media (min-width: 769px) and (max-width: 1024px) {
    [data-reservation-target='calendar'] .flatpickr-calendar.inline {
        transform: scale(1.1) !important;
        -webkit-transform: scale(1.1) !important;
        -moz-transform: scale(1.1) !important;
        -ms-transform: scale(1.1) !important;
        margin: 1.25rem auto !important;
    }
}

/* 大螢幕 - 桌機 (1025px - 1440px) */
@media (min-width: 1025px) and (max-width: 1440px) {
    [data-reservation-target='calendar'] .flatpickr-calendar.inline {
        transform: scale(1.2) !important;
        -webkit-transform: scale(1.2) !important;
        -moz-transform: scale(1.2) !important;
        -ms-transform: scale(1.2) !important;
        margin: 2rem auto !important;
    }
}

/* 超大螢幕 - 大桌機 (>1440px) */
@media (min-width: 1441px) {
    [data-reservation-target='calendar'] .flatpickr-calendar.inline {
        transform: scale(1.3) !important;
        -webkit-transform: scale(1.3) !important;
        -moz-transform: scale(1.3) !important;
        -ms-transform: scale(1.3) !important;
        margin: 2rem auto !important;
    }
}

/* 日曆元素細節樣式 (黑色主題) */
[data-reservation-target='calendar'] .flatpickr-calendar.inline .flatpickr-weekdays {
    background: #374151 !important;
}

[data-reservation-target='calendar'] .flatpickr-calendar.inline .flatpickr-day {
    color: #e5e7eb !important;
    border-radius: 0.375rem !important;
    margin: 1px !important;
}

[data-reservation-target='calendar'] .flatpickr-calendar.inline .flatpickr-day:hover {
    background: #4b5563 !important;
}

[data-reservation-target='calendar'] .flatpickr-calendar.inline .flatpickr-day.today {
    background: #3b82f6 !important;
    color: white !important;
}

[data-reservation-target='calendar'] .flatpickr-calendar.inline .flatpickr-day.selected {
    background: #10b981 !important;
    color: white !important;
}
