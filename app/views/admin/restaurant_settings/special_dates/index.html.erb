<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"
     data-controller="modal special-dates"
     data-special-dates-restaurant-slug-value="<%= @restaurant.slug %>">

  <!-- 頁面標題 -->
  <div class="mb-8">
    <div class="flex items-center justify-between">
      <div>
        <h1 class="text-3xl font-bold text-gray-900">特殊日期設定</h1>
        <p class="mt-2 text-sm text-gray-600">管理餐廳的特殊營業日期，包含公休日和自訂營業時段</p>
      </div>
      <div class="flex space-x-3">
        <%= link_to admin_restaurant_path(@restaurant),
            class: "inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",
            data: { turbo_prefetch: false } do %>
          <svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
          </svg>
          回到餐廳
        <% end %>
        <%= link_to admin_restaurant_settings_restaurant_index_path(@restaurant),
            class: "inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",
            data: { turbo_prefetch: false } do %>
          <svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
          </svg>
          返回設定首頁
        <% end %>
      </div>
    </div>
  </div>

  <!-- 選項卡導覽 -->
  <%= render 'shared/settings_tabs', current_tab: 'special_dates', restaurant: @restaurant %>

  <!-- Flash 訊息��域 -->
  <div id="flash_messages" class="mb-4"></div>
  
  <!-- 快速建立按鈕 -->
  <div class="mb-6 flex space-x-3">
    <%= link_to new_admin_restaurant_settings_restaurant_special_date_path(@restaurant, mode: 'closed'),
        class: "inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700",
        data: { action: "click->modal#openRemote" } do %>
      <svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"></path>
      </svg>
      新增公休日
    <% end %>
    
    <%= link_to new_admin_restaurant_settings_restaurant_special_date_path(@restaurant, mode: 'custom_hours'),
        class: "inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",
        data: { action: "click->modal#openRemote" } do %>
      <svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
      </svg>
      新增自訂時段
    <% end %>
  </div>
  
  <!-- 主內容包裝器 -->
  <div id="special_dates_content">
    <%= render 'special_dates_content', restaurant: @restaurant, special_dates: @special_dates %>
  </div>

  <!-- 每週固定公休設定 -->
  <div class="mt-12 pt-8 border-t border-gray-200">
    <%= render 'admin/restaurant_settings/restaurant_settings/weekly_closure_section', restaurant: @restaurant, closure_dates: @closure_dates %>
  </div>

  <!-- Modal 容器 -->
  <div id="modal-container" class="hidden fixed inset-0 z-50 overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true">
    <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
      <!-- 背景遮罩 -->
      <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>
      <!-- 內容 -->
      <div id="modal-content" class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full">
        <!-- 遠端內容會被載入到這裡 -->
      </div>
    </div>
  </div>
</div>