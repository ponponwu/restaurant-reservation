<%# Modal form for operating hours (fallback for non-JS scenarios) %>
<div class="fixed inset-0 z-50 overflow-y-auto" id="modal" data-controller="modal">
  <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
    <!-- Background overlay -->
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" 
         data-action="click->modal#close"></div>

    <!-- Modal panel -->
    <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
      <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
        <div class="sm:flex sm:items-start">
          <div class="mt-3 text-center sm:mt-0 sm:text-left w-full">
            <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">
              <%= operating_hour.persisted? ? '編輯營業時間' : '新增營業時間' %>
            </h3>
            
            <%= form_with model: [:admin, restaurant, operating_hour], 
                          local: false,
                          data: { turbo_frame: "_top" },
                          class: "space-y-4" do |form| %>
              
              <!-- 星期選擇 -->
              <div>
                <%= form.label :weekday, "星期", class: "block text-sm font-medium text-gray-700" %>
                <%= form.select :weekday, 
                               options_for_select(OperatingHour::CHINESE_WEEKDAYS.map { |k, v| [v, k] }, operating_hour.weekday),
                               { prompt: '選擇星期' },
                               { class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" } %>
              </div>
              
              <!-- 開始時間 -->
              <div>
                <%= form.label :open_time, "開始時間", class: "block text-sm font-medium text-gray-700" %>
                <%= form.time_field :open_time, 
                                   value: operating_hour.open_time&.strftime('%H:%M'),
                                   class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" %>
              </div>
              
              <!-- 結束時間 -->
              <div>
                <%= form.label :close_time, "結束時間", class: "block text-sm font-medium text-gray-700" %>
                <%= form.time_field :close_time, 
                                   value: operating_hour.close_time&.strftime('%H:%M'),
                                   class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" %>
              </div>
              
              
              <!-- 錯誤訊息 -->
              <% if operating_hour.errors.any? %>
                <div class="bg-red-50 border border-red-200 rounded-md p-3">
                  <div class="text-sm text-red-600">
                    <ul class="list-disc list-inside space-y-1">
                      <% operating_hour.errors.full_messages.each do |message| %>
                        <li><%= message %></li>
                      <% end %>
                    </ul>
                  </div>
                </div>
              <% end %>
              
              <!-- 按鈕 -->
              <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                <button type="submit" 
                        class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm">
                  <%= operating_hour.persisted? ? '更新' : '新增' %>
                </button>
                <button type="button" 
                        class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"
                        data-action="click->modal#close">
                  取消
                </button>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>