# 側邊導航系統

## 概述

為了改善管理後台的使用體驗，我們實作了一個統一的側邊導航系統，讓管理員可以更方便地在不同功能之間切換，不需要一直點擊「上一頁」或「回到餐廳」按鈕。

## 主要功能

### 1. 統一側邊導航

-   **固定側邊欄**：在桌面版中，側邊欄固定在左側，始終可見
-   **響應式設計**：手機版時可以收縮/展開
-   **功能分組**：將相關功能歸類在不同群組中

### 2. 使用者資訊區塊

-   顯示當前登入使用者的姓名和角色
-   使用者頭像（顯示姓名首字母）
-   角色標籤（超級管理員/餐廳管理員）

### 3. 餐廳資訊區塊（餐廳管理員專用）

-   顯示目前管理的餐廳名稱
-   餐廳地址資訊
-   餐廳圖示

### 4. 分類導航選單

#### 系統管理（超級管理員專用）

-   系統總覽
-   管理員管理
-   餐廳管理

#### 餐廳營運（餐廳管理員）

-   餐廳總覽
-   訂位管理
-   桌位管理
-   營業時段

#### 進階設定

-   餐廳設定
-   黑名單管理

#### 快速動作

-   新增訂位
-   前往前台

### 5. 底部功能

-   修改密碼
-   登出

## 技術實作

### 1. 前端 JavaScript (Stimulus Controller)

-   **檔案位置**：`app/javascript/controllers/sidebar_controller.js`
-   **功能**：處理側邊欄的開關、響應式行為、鍵盤事件

### 2. 後端 Helper 方法

-   **檔案位置**：`app/helpers/application_helper.rb`
-   **功能**：判斷當前頁面狀態，用於高亮當前導航項目

### 3. 樣式

-   **檔案位置**：`app/assets/stylesheets/admin.css`
-   **功能**：側邊導航的視覺樣式和動畫效果

### 4. 布局文件

-   **檔案位置**：`app/views/layouts/admin.html.erb`
-   **功能**：管理後台的主要布局結構

## 使用方式

### 桌面版

-   側邊欄固定顯示在左側
-   點擊導航項目直接切換頁面
-   當前頁面會在側邊欄中高亮顯示

### 手機版

-   點擊左上角的漢堡選單按鈕開啟側邊欄
-   點擊覆蓋層或按 ESC 鍵關閉側邊欄
-   選擇功能後自動關閉側邊欄

## 頁面簡化

實作側邊導航後，我們簡化了各個管理頁面：

### 移除的重複按鈕

-   餐廳詳情頁面：移除多餘的導航按鈕，只保留「前往前台」和「編輯資訊」
-   桌位管理頁面：移除「回到餐廳」按鈕
-   黑名單管理頁面：移除「回到餐廳」按鈕
-   營業時段管理頁面：移除「返回餐廳管理」按鈕

### 保留的功能按鈕

-   新增功能按鈕（如「新增訂位」、「新增群組」等）
-   特殊功能按鈕（如「前往前台」、「編輯資訊」等）

## 頁面狀態檢測

系統使用以下 helper 方法來檢測當前頁面：

-   `is_current_page?(path)` - 檢查是否為指定路徑
-   `is_restaurant_page?(restaurant)` - 檢查是否為餐廳相關頁面
-   `is_reservations_page?(restaurant)` - 檢查是否為訂位管理頁面
-   `is_tables_page?(restaurant)` - 檢查是否為桌位管理頁面
-   `is_business_periods_page?(restaurant)` - 檢查是否為營業時段頁面
-   `is_restaurant_settings_page?(restaurant)` - 檢查是否為餐廳設定頁面
-   `is_blacklists_page?(restaurant)` - 檢查是否為黑名單頁面

## 優勢

1. **更好的使用體驗**：不需要重複點擊返回按鈕
2. **清晰的導航結構**：功能分組讓找尋功能更容易
3. **一致的界面**：所有管理頁面都有統一的導航體驗
4. **響應式設計**：在各種裝置上都能良好運作
5. **減少頁面混亂**：移除重複的導航按鈕，讓頁面更簡潔

## 未來改進方向

1. **導航路徑記憶**：記住使用者的常用功能
2. **快捷鍵支援**：為常用功能添加鍵盤快捷鍵
3. **個人化設定**：允許使用者自訂側邊欄順序
4. **通知整合**：在側邊欄顯示重要通知
5. **搜尋功能**：在側邊欄添加全域搜尋
